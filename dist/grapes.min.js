/*! grapesjs - 0.18.684 */
!function(t,e){'object'==typeof exports&&'object'==typeof module?module.exports=e():'function'==typeof define&&define.amd?define([],e):'object'==typeof exports?exports["grapesjs"]=e():t["grapesjs"]=e()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(t,'__esModule',{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&'object'==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,'default',{enumerable:!0,value:t}),2&e&&'string'!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t['default']}:function(){return t};return n.d(e,'a',e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=19)}([function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return Sn})),n.d(e,"VERSION",(function(){return i["e"]})),n.d(e,"restArguments",(function(){return o})),n.d(e,"isObject",(function(){return s})),n.d(e,"isNull",(function(){return a})),n.d(e,"isUndefined",(function(){return c})),n.d(e,"isBoolean",(function(){return l})),n.d(e,"isElement",(function(){return u})),n.d(e,"isString",(function(){return h})),n.d(e,"isNumber",(function(){return d})),n.d(e,"isDate",(function(){return p})),n.d(e,"isRegExp",(function(){return g})),n.d(e,"isError",(function(){return v})),n.d(e,"isSymbol",(function(){return m})),n.d(e,"isArrayBuffer",(function(){return y})),n.d(e,"isDataView",(function(){return j})),n.d(e,"isArray",(function(){return E})),n.d(e,"isFunction",(function(){return O})),n.d(e,"isArguments",(function(){return T})),n.d(e,"isFinite",(function(){return A})),n.d(e,"isNaN",(function(){return D})),n.d(e,"isTypedArray",(function(){return B})),n.d(e,"isEmpty",(function(){return H})),n.d(e,"isMatch",(function(){return W})),n.d(e,"isEqual",(function(){return Y})),n.d(e,"isMap",(function(){return ot})),n.d(e,"isWeakMap",(function(){return st})),n.d(e,"isSet",(function(){return at})),n.d(e,"isWeakSet",(function(){return ct})),n.d(e,"keys",(function(){return z})),n.d(e,"allKeys",(function(){return J})),n.d(e,"values",(function(){return lt})),n.d(e,"pairs",(function(){return ut})),n.d(e,"invert",(function(){return ft})),n.d(e,"functions",(function(){return ht})),n.d(e,"methods",(function(){return ht})),n.d(e,"extend",(function(){return pt})),n.d(e,"extendOwn",(function(){return gt})),n.d(e,"assign",(function(){return gt})),n.d(e,"defaults",(function(){return vt})),n.d(e,"create",(function(){return yt})),n.d(e,"clone",(function(){return bt})),n.d(e,"tap",(function(){return wt})),n.d(e,"get",(function(){return St})),n.d(e,"has",(function(){return kt})),n.d(e,"mapObject",(function(){return Mt})),n.d(e,"identity",(function(){return jt})),n.d(e,"constant",(function(){return M})),n.d(e,"noop",(function(){return Lt})),n.d(e,"toPath",(function(){return Ot})),n.d(e,"property",(function(){return _t})),n.d(e,"propertyOf",(function(){return Rt})),n.d(e,"matcher",(function(){return Et})),n.d(e,"matches",(function(){return Et})),n.d(e,"times",(function(){return Nt})),n.d(e,"random",(function(){return It})),n.d(e,"now",(function(){return Ft})),n.d(e,"escape",(function(){return Ut})),n.d(e,"unescape",(function(){return zt})),n.d(e,"templateSettings",(function(){return Ht})),n.d(e,"template",(function(){return Yt})),n.d(e,"result",(function(){return Jt})),n.d(e,"uniqueId",(function(){return Zt})),n.d(e,"chain",(function(){return Qt})),n.d(e,"iteratee",(function(){return At})),n.d(e,"partial",(function(){return ne})),n.d(e,"bind",(function(){return re})),n.d(e,"bindAll",(function(){return se})),n.d(e,"memoize",(function(){return ae})),n.d(e,"delay",(function(){return ce})),n.d(e,"defer",(function(){return le})),n.d(e,"throttle",(function(){return ue})),n.d(e,"debounce",(function(){return fe})),n.d(e,"wrap",(function(){return he})),n.d(e,"negate",(function(){return de})),n.d(e,"compose",(function(){return pe})),n.d(e,"after",(function(){return ge})),n.d(e,"before",(function(){return ve})),n.d(e,"once",(function(){return me})),n.d(e,"findKey",(function(){return ye})),n.d(e,"findIndex",(function(){return we})),n.d(e,"findLastIndex",(function(){return Oe})),n.d(e,"sortedIndex",(function(){return xe})),n.d(e,"indexOf",(function(){return Se})),n.d(e,"lastIndexOf",(function(){return ke})),n.d(e,"find",(function(){return je})),n.d(e,"detect",(function(){return je})),n.d(e,"findWhere",(function(){return Ee})),n.d(e,"each",(function(){return _e})),n.d(e,"forEach",(function(){return _e})),n.d(e,"map",(function(){return Pe})),n.d(e,"collect",(function(){return Pe})),n.d(e,"reduce",(function(){return Ae})),n.d(e,"foldl",(function(){return Ae})),n.d(e,"inject",(function(){return Ae})),n.d(e,"reduceRight",(function(){return De})),n.d(e,"foldr",(function(){return De})),n.d(e,"filter",(function(){return Me})),n.d(e,"select",(function(){return Me})),n.d(e,"reject",(function(){return Le})),n.d(e,"every",(function(){return Re})),n.d(e,"all",(function(){return Re})),n.d(e,"some",(function(){return Ne})),n.d(e,"any",(function(){return Ne})),n.d(e,"contains",(function(){return Ie})),n.d(e,"includes",(function(){return Ie})),n.d(e,"include",(function(){return Ie})),n.d(e,"invoke",(function(){return Fe})),n.d(e,"pluck",(function(){return Be})),n.d(e,"where",(function(){return Ve})),n.d(e,"max",(function(){return Ue})),n.d(e,"min",(function(){return ze})),n.d(e,"shuffle",(function(){return We})),n.d(e,"sample",(function(){return He})),n.d(e,"sortBy",(function(){return $e})),n.d(e,"groupBy",(function(){return Ge})),n.d(e,"indexBy",(function(){return Ke})),n.d(e,"countBy",(function(){return Ye})),n.d(e,"partition",(function(){return Je})),n.d(e,"toArray",(function(){return Ze})),n.d(e,"size",(function(){return Qe})),n.d(e,"pick",(function(){return en})),n.d(e,"omit",(function(){return nn})),n.d(e,"first",(function(){return on})),n.d(e,"head",(function(){return on})),n.d(e,"take",(function(){return on})),n.d(e,"initial",(function(){return rn})),n.d(e,"last",(function(){return an})),n.d(e,"rest",(function(){return sn})),n.d(e,"tail",(function(){return sn})),n.d(e,"drop",(function(){return sn})),n.d(e,"compact",(function(){return cn})),n.d(e,"flatten",(function(){return ln})),n.d(e,"without",(function(){return fn})),n.d(e,"uniq",(function(){return hn})),n.d(e,"unique",(function(){return hn})),n.d(e,"union",(function(){return dn})),n.d(e,"intersection",(function(){return pn})),n.d(e,"difference",(function(){return un})),n.d(e,"unzip",(function(){return gn})),n.d(e,"transpose",(function(){return gn})),n.d(e,"zip",(function(){return vn})),n.d(e,"object",(function(){return mn})),n.d(e,"range",(function(){return yn})),n.d(e,"chunk",(function(){return bn})),n.d(e,"mixin",(function(){return On}));var r={};n.r(r),n.d(r,"VERSION",(function(){return i["e"]})),n.d(r,"restArguments",(function(){return o})),n.d(r,"isObject",(function(){return s})),n.d(r,"isNull",(function(){return a})),n.d(r,"isUndefined",(function(){return c})),n.d(r,"isBoolean",(function(){return l})),n.d(r,"isElement",(function(){return u})),n.d(r,"isString",(function(){return h})),n.d(r,"isNumber",(function(){return d})),n.d(r,"isDate",(function(){return p})),n.d(r,"isRegExp",(function(){return g})),n.d(r,"isError",(function(){return v})),n.d(r,"isSymbol",(function(){return m})),n.d(r,"isArrayBuffer",(function(){return y})),n.d(r,"isDataView",(function(){return j})),n.d(r,"isArray",(function(){return E})),n.d(r,"isFunction",(function(){return O})),n.d(r,"isArguments",(function(){return T})),n.d(r,"isFinite",(function(){return A})),n.d(r,"isNaN",(function(){return D})),n.d(r,"isTypedArray",(function(){return B})),n.d(r,"isEmpty",(function(){return H})),n.d(r,"isMatch",(function(){return W})),n.d(r,"isEqual",(function(){return Y})),n.d(r,"isMap",(function(){return ot})),n.d(r,"isWeakMap",(function(){return st})),n.d(r,"isSet",(function(){return at})),n.d(r,"isWeakSet",(function(){return ct})),n.d(r,"keys",(function(){return z})),n.d(r,"allKeys",(function(){return J})),n.d(r,"values",(function(){return lt})),n.d(r,"pairs",(function(){return ut})),n.d(r,"invert",(function(){return ft})),n.d(r,"functions",(function(){return ht})),n.d(r,"methods",(function(){return ht})),n.d(r,"extend",(function(){return pt})),n.d(r,"extendOwn",(function(){return gt})),n.d(r,"assign",(function(){return gt})),n.d(r,"defaults",(function(){return vt})),n.d(r,"create",(function(){return yt})),n.d(r,"clone",(function(){return bt})),n.d(r,"tap",(function(){return wt})),n.d(r,"get",(function(){return St})),n.d(r,"has",(function(){return kt})),n.d(r,"mapObject",(function(){return Mt})),n.d(r,"identity",(function(){return jt})),n.d(r,"constant",(function(){return M})),n.d(r,"noop",(function(){return Lt})),n.d(r,"toPath",(function(){return Ot})),n.d(r,"property",(function(){return _t})),n.d(r,"propertyOf",(function(){return Rt})),n.d(r,"matcher",(function(){return Et})),n.d(r,"matches",(function(){return Et})),n.d(r,"times",(function(){return Nt})),n.d(r,"random",(function(){return It})),n.d(r,"now",(function(){return Ft})),n.d(r,"escape",(function(){return Ut})),n.d(r,"unescape",(function(){return zt})),n.d(r,"templateSettings",(function(){return Ht})),n.d(r,"template",(function(){return Yt})),n.d(r,"result",(function(){return Jt})),n.d(r,"uniqueId",(function(){return Zt})),n.d(r,"chain",(function(){return Qt})),n.d(r,"iteratee",(function(){return At})),n.d(r,"partial",(function(){return ne})),n.d(r,"bind",(function(){return re})),n.d(r,"bindAll",(function(){return se})),n.d(r,"memoize",(function(){return ae})),n.d(r,"delay",(function(){return ce})),n.d(r,"defer",(function(){return le})),n.d(r,"throttle",(function(){return ue})),n.d(r,"debounce",(function(){return fe})),n.d(r,"wrap",(function(){return he})),n.d(r,"negate",(function(){return de})),n.d(r,"compose",(function(){return pe})),n.d(r,"after",(function(){return ge})),n.d(r,"before",(function(){return ve})),n.d(r,"once",(function(){return me})),n.d(r,"findKey",(function(){return ye})),n.d(r,"findIndex",(function(){return we})),n.d(r,"findLastIndex",(function(){return Oe})),n.d(r,"sortedIndex",(function(){return xe})),n.d(r,"indexOf",(function(){return Se})),n.d(r,"lastIndexOf",(function(){return ke})),n.d(r,"find",(function(){return je})),n.d(r,"detect",(function(){return je})),n.d(r,"findWhere",(function(){return Ee})),n.d(r,"each",(function(){return _e})),n.d(r,"forEach",(function(){return _e})),n.d(r,"map",(function(){return Pe})),n.d(r,"collect",(function(){return Pe})),n.d(r,"reduce",(function(){return Ae})),n.d(r,"foldl",(function(){return Ae})),n.d(r,"inject",(function(){return Ae})),n.d(r,"reduceRight",(function(){return De})),n.d(r,"foldr",(function(){return De})),n.d(r,"filter",(function(){return Me})),n.d(r,"select",(function(){return Me})),n.d(r,"reject",(function(){return Le})),n.d(r,"every",(function(){return Re})),n.d(r,"all",(function(){return Re})),n.d(r,"some",(function(){return Ne})),n.d(r,"any",(function(){return Ne})),n.d(r,"contains",(function(){return Ie})),n.d(r,"includes",(function(){return Ie})),n.d(r,"include",(function(){return Ie})),n.d(r,"invoke",(function(){return Fe})),n.d(r,"pluck",(function(){return Be})),n.d(r,"where",(function(){return Ve})),n.d(r,"max",(function(){return Ue})),n.d(r,"min",(function(){return ze})),n.d(r,"shuffle",(function(){return We})),n.d(r,"sample",(function(){return He})),n.d(r,"sortBy",(function(){return $e})),n.d(r,"groupBy",(function(){return Ge})),n.d(r,"indexBy",(function(){return Ke})),n.d(r,"countBy",(function(){return Ye})),n.d(r,"partition",(function(){return Je})),n.d(r,"toArray",(function(){return Ze})),n.d(r,"size",(function(){return Qe})),n.d(r,"pick",(function(){return en})),n.d(r,"omit",(function(){return nn})),n.d(r,"first",(function(){return on})),n.d(r,"head",(function(){return on})),n.d(r,"take",(function(){return on})),n.d(r,"initial",(function(){return rn})),n.d(r,"last",(function(){return an})),n.d(r,"rest",(function(){return sn})),n.d(r,"tail",(function(){return sn})),n.d(r,"drop",(function(){return sn})),n.d(r,"compact",(function(){return cn})),n.d(r,"flatten",(function(){return ln})),n.d(r,"without",(function(){return fn})),n.d(r,"uniq",(function(){return hn})),n.d(r,"unique",(function(){return hn})),n.d(r,"union",(function(){return dn})),n.d(r,"intersection",(function(){return pn})),n.d(r,"difference",(function(){return un})),n.d(r,"unzip",(function(){return gn})),n.d(r,"transpose",(function(){return gn})),n.d(r,"zip",(function(){return vn})),n.d(r,"object",(function(){return mn})),n.d(r,"range",(function(){return yn})),n.d(r,"chunk",(function(){return bn})),n.d(r,"mixin",(function(){return On})),n.d(r,"default",(function(){return xn}));var i=n(10);function o(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}}function s(t){var e=typeof t;return'function'===e||'object'===e&&!!t}function a(t){return null===t}function c(t){return void 0===t}function l(t){return!0===t||!1===t||'[object Boolean]'===i["t"].call(t)}function u(t){return!(!t||1!==t.nodeType)}function f(t){var e='[object '+t+']';return function(t){return i["t"].call(t)===e}}var h=f('String'),d=f('Number'),p=f('Date'),g=f('RegExp'),v=f('Error'),m=f('Symbol'),y=f('ArrayBuffer'),b=f('Function'),w=i["p"].document&&i["p"].document.childNodes;1&&'object'!=typeof Int8Array&&'function'!=typeof w&&(b=function(t){return'function'==typeof t||!1});var O=b,x=f('Object'),C=i["s"]&&x(new DataView(new ArrayBuffer(8))),S='undefined'!=typeof Map&&x(new Map),k=f('DataView');var j=C?function(t){return null!=t&&O(t.getInt8)&&y(t.buffer)}:k,E=i["k"]||f('Array');function _(t,e){return null!=t&&i["i"].call(t,e)}var P=f('Arguments');!function(){P(arguments)||(P=function(t){return _(t,'callee')})}();var T=P;function A(t){return!m(t)&&Object(i["f"])(t)&&!isNaN(parseFloat(t))}function D(t){return d(t)&&Object(i["g"])(t)}function M(t){return function(){return t}}function L(t){return function(e){var n=t(e);return'number'==typeof n&&n>=0&&n<=i["b"]}}function R(t){return function(e){return null==e?void 0:e[t]}}var N=R('byteLength'),I=L(N),F=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var B=i["r"]?function(t){return i["l"]?Object(i["l"])(t)&&!j(t):I(t)&&F.test(i["t"].call(t))}:M(!1),V=R('length');function U(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=i["n"].length,r=t.constructor,o=O(r)&&r.prototype||i["c"],s='constructor';for(_(t,s)&&!e.contains(s)&&e.push(s);n--;)(s=i["n"][n])in t&&t[s]!==o[s]&&!e.contains(s)&&e.push(s)}function z(t){if(!s(t))return[];if(i["m"])return Object(i["m"])(t);var e=[];for(var n in t)_(t,n)&&e.push(n);return i["h"]&&U(t,e),e}function H(t){if(null==t)return!0;var e=V(t);return'number'==typeof e&&(E(t)||h(t)||T(t))?0===e:0===V(z(t))}function W(t,e){var n=z(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0}function $(t){return t instanceof $?t:this instanceof $?void(this._wrapped=t):new $(t)}function q(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,N(t))}$.VERSION=i["e"],$.prototype.value=function(){return this._wrapped},$.prototype.valueOf=$.prototype.toJSON=$.prototype.value,$.prototype.toString=function(){return String(this._wrapped)};var G='[object DataView]';function K(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return('function'===o||'object'===o||'object'==typeof e)&&function t(e,n,r,o){e instanceof $&&(e=e._wrapped);n instanceof $&&(n=n._wrapped);var s=i["t"].call(e);if(s!==i["t"].call(n))return!1;if(C&&'[object Object]'==s&&j(e)){if(!j(n))return!1;s=G}switch(s){case'[object RegExp]':case'[object String]':return''+e==''+n;case'[object Number]':return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case'[object Date]':case'[object Boolean]':return+e==+n;case'[object Symbol]':return i["d"].valueOf.call(e)===i["d"].valueOf.call(n);case'[object ArrayBuffer]':case G:return t(q(e),q(n),r,o)}var a='[object Array]'===s;if(!a&&B(e)){if(N(e)!==N(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;a=!0}if(!a){if('object'!=typeof e||'object'!=typeof n)return!1;var c=e.constructor,l=n.constructor;if(c!==l&&!(O(c)&&c instanceof c&&O(l)&&l instanceof l)&&'constructor'in e&&'constructor'in n)return!1}o=o||[];var u=(r=r||[]).length;for(;u--;)if(r[u]===e)return o[u]===n;if(r.push(e),o.push(n),a){if((u=e.length)!==n.length)return!1;for(;u--;)if(!K(e[u],n[u],r,o))return!1}else{var f,h=z(e);if(u=h.length,z(n).length!==u)return!1;for(;u--;)if(f=h[u],!_(n,f)||!K(e[f],n[f],r,o))return!1}return r.pop(),o.pop(),!0}(t,e,n,r)}function Y(t,e){return K(t,e)}function J(t){if(!s(t))return[];var e=[];for(var n in t)e.push(n);return i["h"]&&U(t,e),e}function X(t){var e=V(t);return function(n){if(null==n)return!1;var r=J(n);if(V(r))return!1;for(var i=0;i<e;i++)if(!O(n[t[i]]))return!1;return t!==rt||!O(n[Z])}}var Z='forEach',Q='has',tt=['clear','delete'],et=['get',Q,'set'],nt=tt.concat(Z,et),rt=tt.concat(et),it=['add'].concat(tt,Z,Q),ot=S?X(nt):f('Map'),st=S?X(rt):f('WeakMap'),at=S?X(it):f('Set'),ct=f('WeakSet');function lt(t){for(var e=z(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function ut(t){for(var e=z(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function ft(t){for(var e={},n=z(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function ht(t){var e=[];for(var n in t)O(t[n])&&e.push(n);return e.sort()}function dt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,c=0;c<a;c++){var l=s[c];e&&void 0!==n[l]||(n[l]=o[l])}return n}}var pt=dt(J),gt=dt(z),vt=dt(J,!0);function mt(t){if(!s(t))return{};if(i["j"])return Object(i["j"])(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function yt(t,e){var n=mt(t);return e&&gt(n,e),n}function bt(t){return s(t)?E(t)?t.slice():pt({},t):t}function wt(t,e){return e(t),t}function Ot(t){return E(t)?t:[t]}function xt(t){return $.toPath(t)}function Ct(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function St(t,e,n){var r=Ct(t,xt(e));return c(r)?n:r}function kt(t,e){for(var n=(e=xt(e)).length,r=0;r<n;r++){var i=e[r];if(!_(t,i))return!1;t=t[i]}return!!n}function jt(t){return t}function Et(t){return t=gt({},t),function(e){return W(e,t)}}function _t(t){return t=xt(t),function(e){return Ct(e,t)}}function Pt(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}}function Tt(t,e,n){return null==t?jt:O(t)?Pt(t,e,n):s(t)&&!E(t)?Et(t):_t(t)}function At(t,e){return Tt(t,e,1/0)}function Dt(t,e,n){return $.iteratee!==At?$.iteratee(t,e):Tt(t,e,n)}function Mt(t,e,n){e=Dt(e,n);for(var r=z(t),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=e(t[a],a,t)}return o}function Lt(){}function Rt(t){return null==t?Lt:function(e){return St(t,e)}}function Nt(t,e,n){var r=Array(Math.max(0,t));e=Pt(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function It(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}$.toPath=Ot,$.iteratee=At;var Ft=Date.now||function(){return(new Date).getTime()};function Bt(t){var e=function(e){return t[e]},n='(?:'+z(t).join('|')+')',r=RegExp(n),i=RegExp(n,'g');return function(t){return t=null==t?'':''+t,r.test(t)?t.replace(i,e):t}}var Vt={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'},Ut=Bt(Vt),zt=Bt(ft(Vt)),Ht=$.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Wt=/(.)^/,$t={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'},qt=/\\|'|\r|\n|\u2028|\u2029/g;function Gt(t){return'\\'+$t[t]}var Kt=/^\s*(\w|\$)+\s*$/;function Yt(t,e,n){!e&&n&&(e=n),e=vt({},e,$.templateSettings);var r=RegExp([(e.escape||Wt).source,(e.interpolate||Wt).source,(e.evaluate||Wt).source].join('|')+'|$','g'),i=0,o="__p+='";t.replace(r,(function(e,n,r,s,a){return o+=t.slice(i,a).replace(qt,Gt),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e})),o+="';\n";var s,a=e.variable;if(a){if(!Kt.test(a))throw new Error('variable is not a bare identifier: '+a)}else o='with(obj||{}){\n'+o+'}\n',a='obj';o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+'return __p;\n';try{s=new Function(a,'_',o)}catch(t){throw t.source=o,t}var c=function(t){return s.call(this,t,$)};return c.source='function('+a+'){\n'+o+'}',c}function Jt(t,e,n){var r=(e=xt(e)).length;if(!r)return O(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=O(o)?o.call(t):o}return t}var Xt=0;function Zt(t){var e=++Xt+'';return t?t+e:e}function Qt(t){var e=$(t);return e._chain=!0,e}function te(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=mt(t.prototype),a=t.apply(o,i);return s(a)?a:o}var ee=o((function(t,e){var n=ee.placeholder,r=function(){for(var i=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return te(t,r,this,this,s)};return r}));ee.placeholder=$;var ne=ee,re=o((function(t,e,n){if(!O(t))throw new TypeError('Bind must be called on a function');var r=o((function(i){return te(t,r,e,this,n.concat(i))}));return r})),ie=L(V);function oe(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var i=r.length,o=0,s=V(t);o<s;o++){var a=t[o];if(ie(a)&&(E(a)||T(a)))if(e>1)oe(a,e-1,n,r),i=r.length;else for(var c=0,l=a.length;c<l;)r[i++]=a[c++];else n||(r[i++]=a)}return r}var se=o((function(t,e){var n=(e=oe(e,!1,!1)).length;if(n<1)throw new Error('bindAll must be passed function names');for(;n--;){var r=e[n];t[r]=re(t[r],t)}return t}));function ae(t,e){var n=function(r){var i=n.cache,o=''+(e?e.apply(this,arguments):r);return _(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n}var ce=o((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),le=ne(ce,$,1);function ue(t,e,n){var r,i,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:Ft(),r=null,s=t.apply(i,o),r||(i=o=null)},l=function(){var l=Ft();a||!1!==n.leading||(a=l);var u=e-(l-a);return i=this,o=arguments,u<=0||u>e?(r&&(clearTimeout(r),r=null),a=l,s=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,u)),s};return l.cancel=function(){clearTimeout(r),a=0,r=i=o=null},l}function fe(t,e,n){var r,i,s,a,c,l=function(){var o=Ft()-i;e>o?r=setTimeout(l,e-o):(r=null,n||(a=t.apply(c,s)),r||(s=c=null))},u=o((function(o){return c=this,s=o,i=Ft(),r||(r=setTimeout(l,e),n&&(a=t.apply(c,s))),a}));return u.cancel=function(){clearTimeout(r),r=s=c=null},u}function he(t,e){return ne(e,t)}function de(t){return function(){return!t.apply(this,arguments)}}function pe(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function ge(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function ve(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var me=ne(ve,2);function ye(t,e,n){e=Dt(e,n);for(var r,i=z(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r}function be(t){return function(e,n,r){n=Dt(n,r);for(var i=V(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}var we=be(1),Oe=be(-1);function xe(t,e,n,r){for(var i=(n=Dt(n,r,1))(e),o=0,s=V(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o}function Ce(t,e,n){return function(r,o,s){var a=0,c=V(r);if('number'==typeof s)t>0?a=s>=0?s:Math.max(s+c,a):c=s>=0?Math.min(s+1,c):s+c+1;else if(n&&s&&c)return r[s=n(r,o)]===o?s:-1;if(o!=o)return(s=e(i["q"].call(r,a,c),D))>=0?s+a:-1;for(s=t>0?a:c-1;s>=0&&s<c;s+=t)if(r[s]===o)return s;return-1}}var Se=Ce(1,we,xe),ke=Ce(-1,Oe);function je(t,e,n){var r=(ie(t)?we:ye)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function Ee(t,e){return je(t,Et(e))}function _e(t,e,n){var r,i;if(e=Pt(e,n),ie(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=z(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t}function Pe(t,e,n){e=Dt(e,n);for(var r=!ie(t)&&z(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o}function Te(t){var e=function(e,n,r,i){var o=!ie(e)&&z(e),s=(o||e).length,a=t>0?0:s-1;for(i||(r=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var c=o?o[a]:a;r=n(r,e[c],c,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,Pt(n,i,4),r,o)}}var Ae=Te(1),De=Te(-1);function Me(t,e,n){var r=[];return e=Dt(e,n),_e(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function Le(t,e,n){return Me(t,de(Dt(e)),n)}function Re(t,e,n){e=Dt(e,n);for(var r=!ie(t)&&z(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0}function Ne(t,e,n){e=Dt(e,n);for(var r=!ie(t)&&z(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1}function Ie(t,e,n,r){return ie(t)||(t=lt(t)),('number'!=typeof n||r)&&(n=0),Se(t,e,n)>=0}var Fe=o((function(t,e,n){var r,i;return O(e)?i=e:(e=xt(e),r=e.slice(0,-1),e=e[e.length-1]),Pe(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=Ct(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))}));function Be(t,e){return Pe(t,_t(e))}function Ve(t,e){return Me(t,Et(e))}function Ue(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e||'number'==typeof e&&'object'!=typeof t[0]&&null!=t)for(var a=0,c=(t=ie(t)?t:lt(t)).length;a<c;a++)null!=(r=t[a])&&r>o&&(o=r);else e=Dt(e,n),_e(t,(function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o}function ze(t,e,n){var r,i,o=1/0,s=1/0;if(null==e||'number'==typeof e&&'object'!=typeof t[0]&&null!=t)for(var a=0,c=(t=ie(t)?t:lt(t)).length;a<c;a++)null!=(r=t[a])&&r<o&&(o=r);else e=Dt(e,n),_e(t,(function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o}function He(t,e,n){if(null==e||n)return ie(t)||(t=lt(t)),t[It(t.length-1)];var r=ie(t)?bt(t):lt(t),i=V(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var a=It(s,o),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,e)}function We(t){return He(t,1/0)}function $e(t,e,n){var r=0;return e=Dt(e,n),Be(Pe(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),'value')}function qe(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=Dt(r,i),_e(n,(function(e,i){var s=r(e,i,n);t(o,e,s)})),o}}var Ge=qe((function(t,e,n){_(t,n)?t[n].push(e):t[n]=[e]})),Ke=qe((function(t,e,n){t[n]=e})),Ye=qe((function(t,e,n){_(t,n)?t[n]++:t[n]=1})),Je=qe((function(t,e,n){t[n?0:1].push(e)}),!0),Xe=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ze(t){return t?E(t)?i["q"].call(t):h(t)?t.match(Xe):ie(t)?Pe(t,jt):lt(t):[]}function Qe(t){return null==t?0:ie(t)?t.length:z(t).length}function tn(t,e,n){return e in n}var en=o((function(t,e){var n={},r=e[0];if(null==t)return n;O(r)?(e.length>1&&(r=Pt(r,e[1])),e=J(t)):(r=tn,e=oe(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),nn=o((function(t,e){var n,r=e[0];return O(r)?(r=de(r),e.length>1&&(n=e[1])):(e=Pe(oe(e,!1,!1),String),r=function(t,n){return!Ie(e,n)}),en(t,r,n)}));function rn(t,e,n){return i["q"].call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function on(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:rn(t,t.length-e)}function sn(t,e,n){return i["q"].call(t,null==e||n?1:e)}function an(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:sn(t,Math.max(0,t.length-e))}function cn(t){return Me(t,Boolean)}function ln(t,e){return oe(t,e,!1)}var un=o((function(t,e){return e=oe(e,!0,!0),Me(t,(function(t){return!Ie(e,t)}))})),fn=o((function(t,e){return un(t,e)}));function hn(t,e,n,r){l(e)||(r=n,n=e,e=!1),null!=n&&(n=Dt(n,r));for(var i=[],o=[],s=0,a=V(t);s<a;s++){var c=t[s],u=n?n(c,s,t):c;e&&!n?(s&&o===u||i.push(c),o=u):n?Ie(o,u)||(o.push(u),i.push(c)):Ie(i,c)||i.push(c)}return i}var dn=o((function(t){return hn(oe(t,!0,!0))}));function pn(t){for(var e=[],n=arguments.length,r=0,i=V(t);r<i;r++){var o=t[r];if(!Ie(e,o)){var s;for(s=1;s<n&&Ie(arguments[s],o);s++);s===n&&e.push(o)}}return e}function gn(t){for(var e=t&&Ue(t,V).length||0,n=Array(e),r=0;r<e;r++)n[r]=Be(t,r);return n}var vn=o(gn);function mn(t,e){for(var n={},r=0,i=V(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function yn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i}function bn(t,e){if(null==e||e<1)return[];for(var n=[],r=0,o=t.length;r<o;)n.push(i["q"].call(t,r,r+=e));return n}function wn(t,e){return t._chain?$(e).chain():e}function On(t){return _e(ht(t),(function(e){var n=$[e]=t[e];$.prototype[e]=function(){var t=[this._wrapped];return i["o"].apply(t,arguments),wn(this,n.apply($,t))}})),$}_e(['pop','push','reverse','shift','sort','splice','unshift'],(function(t){var e=i["a"][t];$.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),'shift'!==t&&'splice'!==t||0!==n.length||delete n[0]),wn(this,n)}})),_e(['concat','join','slice'],(function(t){var e=i["a"][t];$.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),wn(this,t)}}));var xn=$,Cn=On(r);Cn._=Cn;var Sn=Cn},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"isDef",(function(){return c})),n.d(e,"hasWin",(function(){return l})),n.d(e,"getGlobal",(function(){return u})),n.d(e,"toLowerCase",(function(){return f})),n.d(e,"getUiClass",(function(){return p})),n.d(e,"isCommentNode",(function(){return j})),n.d(e,"isTaggableNode",(function(){return E})),n.d(e,"find",(function(){return _})),n.d(e,"escape",(function(){return P})),n.d(e,"on",(function(){return m})),n.d(e,"off",(function(){return y})),n.d(e,"hasDnd",(function(){return C})),n.d(e,"upFirst",(function(){return w})),n.d(e,"matches",(function(){return d})),n.d(e,"getModel",(function(){return T})),n.d(e,"getElRect",(function(){return A})),n.d(e,"camelCase",(function(){return O})),n.d(e,"isTextNode",(function(){return k})),n.d(e,"getKeyCode",(function(){return M})),n.d(e,"getKeyChar",(function(){return L})),n.d(e,"isEscKey",(function(){return R})),n.d(e,"isEnterKey",(function(){return N})),n.d(e,"getElement",(function(){return S})),n.d(e,"shallowDiff",(function(){return v})),n.d(e,"normalizeFloat",(function(){return x})),n.d(e,"getPointerEvent",(function(){return D})),n.d(e,"getUnitFromValue",(function(){return b})),n.d(e,"capitalize",(function(){return B})),n.d(e,"getViewEl",(function(){return z})),n.d(e,"setViewEl",(function(){return H})),n.d(e,"appendStyles",(function(){return g})),n.d(e,"isObject",(function(){return I})),n.d(e,"isEmptyObj",(function(){return F})),n.d(e,"isComponent",(function(){return V})),n.d(e,"createId",(function(){return W})),n.d(e,"isRule",(function(){return U}));var r=n(16),i=n.n(r),o=n(12),s=n.n(o),a=n(0),c=function(t){return void 0!==t},l=function(){return'undefined'!=typeof window},u=function(){return'undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:t},f=function(t){return(t||'').toLowerCase()},h=l()?window.Element.prototype:{},d=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.msMatchesSelector,p=function(t,e){var n=t.getConfig(),r=n.stylePrefix;return[n.customUI&&"".concat(r,"cui"),e].filter((function(t){return t})).join(' ')},g=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(a["isArray"])(e)?s()(e):[e];if(r.length){var i=r.shift();if(i&&(!n.unique||!document.querySelector("link[href=\"".concat(i,"\"]")))){var o=document,c=o.head,l=document.createElement('link');l.href=i,l.rel='stylesheet',n.prepand?c.insertBefore(l,c.firstChild):c.appendChild(l)}t(r)}},v=function(t,e){var n={},r=Object(a["keys"])(e);for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],s=e[i];r.indexOf(i)>=0?o!==s&&(n[i]=s):n[i]=null}for(var c in e)e.hasOwnProperty(c)&&Object(a["isUndefined"])(t[c])&&(n[c]=e[c]);return n},m=function(t,e,n,r){e=e.split(/\s+/),t=t instanceof Array?t:[t];for(var i=function(i){t.forEach((function(t){return t&&t.addEventListener(e[i],n,r)}))},o=0;o<e.length;++o)i(o)},y=function(t,e,n,r){e=e.split(/\s+/),t=t instanceof Array?t:[t];for(var i=function(i){t.forEach((function(t){return t&&t.removeEventListener(e[i],n,r)}))},o=0;o<e.length;++o)i(o)},b=function(t){return t.replace(parseFloat(t),'')},w=function(t){return t[0].toUpperCase()+t.toLowerCase().slice(1)},O=function(t){return t.replace(/-./g,(function(t){return t[1].toUpperCase()}))},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0;if(isNaN(t))return n;if(t=parseFloat(t),Math.floor(t)!==t){var i=e.toString().split('.')[1];r=i?i.length:0}return r?parseFloat(t.toFixed(r)):t},C=function(t){return'draggable'in document.createElement('i')&&(t?t.get('Config').nativeDnD:1)},S=function(t){return Object(a["isElement"])(t)||k(t)?t:t&&t.getEl?t.getEl():void 0},k=function(t){return t&&3===t.nodeType},j=function(t){return t&&8===t.nodeType},E=function(t){return t&&!k(t)&&!j(t)},_=function(t,e){var n=null;return t.some((function(r,i){return e(r,i,t)?(n=r,1):0})),n},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'';return"".concat(t).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;').replace(/`/g,'&#96;')},T=function(t,e){var n=t;return!e&&t&&t.__cashData?n=t.__cashData.model:Object(a["isElement"])(t)&&(n=e(t).data('model')),n},A=function(t){var e,n={top:0,left:0,width:0,height:0};if(!t)return n;if(k(t)){var r=document.createRange();r.selectNode(t),e=r.getBoundingClientRect(),r.detach()}return e||(t.getBoundingClientRect?t.getBoundingClientRect():n)},D=function(t){return t.touches&&t.touches[0]?t.touches[0]:t},M=function(t){return t.which||t.keyCode},L=function(t){return String.fromCharCode(M(t))},R=function(t){return 27===M(t)},N=function(t){return 13===M(t)},I=function(t){return null!==t&&!Array.isArray(t)&&'object'===i()(t)},F=function(t){return Object.keys(t).length<=0},B=function(t){return t&&t.charAt(0).toUpperCase()+t.substring(1)},V=function(t){return t&&t.toHTML},U=function(t){return t&&t.toCSS},z=function(t){return t.__gjsv},H=function(t,e){t.__gjsv=e},W=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e='',n='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',r=n.length,i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}}.call(this,n(17))},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){(function(r){var i,o;!function(s){var a='object'==typeof self&&self.self===self&&self||'object'==typeof r&&r.global===r&&r;if(1)i=[n(0),n(30),e],void 0===(o=function(t,e,n){a.Backbone=function(t,e,n,r){var i=t.Backbone,o=Array.prototype.slice;e.VERSION='1.3.3',e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=function(t,e,r){n.each(e,(function(e,i){n[i]&&(t.prototype[i]=function(t,e,r){switch(t){case 1:return function(){return n[e](this[r])};case 2:return function(t){return n[e](this[r],t)};case 3:return function(t,i){return n[e](this[r],a(t,this),i)};case 4:return function(t,i,o){return n[e](this[r],a(t,this),i,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[r]),n[e].apply(n,t)}}}(e,i,r))}))},a=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?c(t):n.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},l=e.Events={},u=/\s+/,f=function(t,e,r,i,o){var s,a=0;if(r&&'object'==typeof r){void 0!==i&&'context'in o&&void 0===o.context&&(o.context=i);for(s=n.keys(r);a<s.length;a++)e=f(t,e,s[a],r[s[a]],o)}else if(r&&u.test(r))for(s=r.split(u);a<s.length;a++)e=t(e,s[a],i,o);else e=t(e,r,i,o);return e};l.on=function(t,e,n){return h(this,t,e,n)};var h=function(t,e,n,r,i){(t._events=f(d,t._events||{},e,n,{context:r,ctx:t,listening:i}),i)&&((t._listeners||(t._listeners={}))[i.id]=i);return t};l.listenTo=function(t,e,r){if(!t)return this;var i=t._listenId||(t._listenId=n.uniqueId('l')),o=this._listeningTo||(this._listeningTo={}),s=o[i];if(!s){var a=this._listenId||(this._listenId=n.uniqueId('l'));s=o[i]={obj:t,objId:i,id:a,listeningTo:o,count:0}}return h(t,e,r,this,s),this};var d=function(t,e,n,r){if(n){var i=t[e]||(t[e]=[]),o=r.context,s=r.ctx,a=r.listening;a&&a.count++,i.push({callback:n,context:o,ctx:o||s,listening:a})}return t};l.off=function(t,e,n){return this._events?(this._events=f(p,this._events,t,e,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(t,e,r){var i=this._listeningTo;if(!i)return this;for(var o=t?[t._listenId]:n.keys(i),s=0;s<o.length;s++){var a=i[o[s]];if(!a)break;a.obj.off(e,r,this)}return this};var p=function(t,e,r,i){if(t){var o,s=0,a=i.context,c=i.listeners;if(e||r||a){for(var l=e?[e]:n.keys(t);s<l.length;s++){var u=t[e=l[s]];if(!u)break;for(var f=[],h=0;h<u.length;h++){var d=u[h];r&&r!==d.callback&&r!==d.callback._callback||a&&a!==d.context?f.push(d):(o=d.listening)&&0==--o.count&&(delete c[o.id],delete o.listeningTo[o.objId])}f.length?t[e]=f:delete t[e]}return t}for(var p=n.keys(c);s<p.length;s++)delete c[(o=c[p[s]]).id],delete o.listeningTo[o.objId]}};l.once=function(t,e,r){var i=f(g,{},t,e,n.bind(this.off,this));return'string'==typeof t&&null==r&&(e=void 0),this.on(i,e,r)},l.listenToOnce=function(t,e,r){var i=f(g,{},e,r,n.bind(this.stopListening,this,t));return this.listenTo(t,i)};var g=function(t,e,r,i){if(r){var o=t[e]=n.once((function(){i(e,o),r.apply(this,arguments)}));o._callback=r}return t};l.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),r=0;r<e;r++)n[r]=arguments[r+1];return f(v,this._events,t,void 0,n),this};var v=function(t,e,n,r){if(t){var i=t[e],o=t.all;i&&o&&(o=o.slice()),i&&m(i,r),o&&m(o,[e].concat(r))}return t},m=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}};l.bind=l.on,l.unbind=l.off,n.extend(e,l);var y=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{});var i=n.result(this,'defaults');r=n.defaults(n.extend({},i,r),i),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,l,{changed:null,validationError:null,idAttribute:'id',cidPrefix:'c',initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,r){if(null==t)return this;var i;if('object'==typeof t?(i=t,r=e):(i={})[t]=e,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,s=r.silent,a=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,u=this.changed,f=this._previousAttributes;for(var h in i)e=i[h],n.isEqual(l[h],e)||a.push(h),n.isEqual(f[h],e)?delete u[h]:u[h]=e,o?delete l[h]:l[h]=e;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=r);for(var d=0;d<a.length;d++)this.trigger('change:'+a[d],this,l[a[d]],r)}if(c)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger('change',this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,r={};for(var i in t){var o=t[i];n.isEqual(e[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,r=t.success;return t.success=function(n){var i=t.parse?e.parse(n,t):n;if(!e.set(i,t))return!1;r&&r.call(t.context,e,n,t),e.trigger('sync',e,n,t)},I(this,t),this.sync('read',this,t)},save:function(t,e,r){var i;null==t||'object'==typeof t?(i=t,r=e):(i={})[t]=e;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var s=this,a=r.success,c=this.attributes;r.success=function(t){s.attributes=c;var e=r.parse?s.parse(t,r):t;if(o&&(e=n.extend({},i,e)),e&&!s.set(e,r))return!1;a&&a.call(r.context,s,t,r),s.trigger('sync',s,t,r)},I(this,r),i&&o&&(this.attributes=n.extend({},c,i));var l=this.isNew()?'create':r.patch?'patch':'update';'patch'!==l||r.attrs||(r.attrs=i);var u=this.sync(l,this,r);return this.attributes=c,u},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=t.wait,o=function(){e.stopListening(),e.trigger('destroy',e,e.collection,t)};t.success=function(n){i&&o(),r&&r.call(t.context,e,n,t),e.isNew()||e.trigger('sync',e,n,t)};var s=!1;return this.isNew()?n.defer(t.success):(I(this,t),s=this.sync('delete',this,t)),i||o(),s},url:function(){var t=n.result(this,'urlRoot')||n.result(this.collection,'url')||N();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,'$&/')+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return!r||(this.trigger('invalid',this,r,n.extend(e,{validationError:r})),!1)}}),s(y,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},'attributes');var b=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},O={add:!0,remove:!1},x=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var r,i=Array(t.length-n),o=e.length;for(r=0;r<i.length;r++)i[r]=t[r+n];for(r=0;r<o;r++)t[r+n]=e[r];for(r=0;r<i.length;r++)t[r+o+n]=i[r]};n.extend(b.prototype,l,{model:y,initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,O))},remove:function(t,e){e=n.extend({},e);var r=!n.isArray(t);t=r?[t]:t.slice();var i=this._removeModels(t,e);return!e.silent&&i.length&&(e.changes={added:[],merged:[],removed:i},this.trigger('update',this,e)),r?i[0]:i},set:function(t,e){if(null!=t){(e=n.extend({},w,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var r=!n.isArray(t);t=r?[t]:t.slice();var i=e.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,s,a=[],c=[],l=[],u=[],f={},h=e.add,d=e.merge,p=e.remove,g=!1,v=this.comparator&&null==i&&!1!==e.sort,m=n.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){o=t[s];var y=this.get(o);if(y){if(d&&o!==y){var b=this._isModel(o)?o.attributes:o;e.parse&&(b=y.parse(b,e)),y.set(b,e),l.push(y),v&&!g&&(g=y.hasChanged(m))}f[y.cid]||(f[y.cid]=!0,a.push(y)),t[s]=y}else h&&(o=t[s]=this._prepareModel(o,e))&&(c.push(o),this._addReference(o,e),f[o.cid]=!0,a.push(o))}if(p){for(s=0;s<this.length;s++)f[(o=this.models[s]).cid]||u.push(o);u.length&&this._removeModels(u,e)}var O=!1,C=!v&&h&&p;if(a.length&&C?(O=this.length!==a.length||n.some(this.models,(function(t,e){return t!==a[e]})),this.models.length=0,x(this.models,a,0),this.length=this.models.length):c.length&&(v&&(g=!0),x(this.models,c,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(s=0;s<c.length;s++)null!=i&&(e.index=i+s),(o=c[s]).trigger('add',o,this,e);(g||O)&&this.trigger('sort',this,e),(c.length||u.length||l.length)&&(e.changes={added:c,removed:u,merged:l},this.trigger('update',this,e))}return r?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger('reset',this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?'find':'filter'](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error('Cannot sort a set without a comparator');t||(t={});var r=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===r||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger('sort',this,t),this},pluck:function(t){return this.map(t+'')},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,r=this;return t.success=function(n){var i=t.reset?'reset':'set';r[i](n,t),e&&e.call(t.context,r,n,t),r.trigger('sync',r,n,t)},I(this,t),this.sync('read',this,t)},create:function(t,e){var r=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;r||this.add(t,e);var i=this,o=e.success;return e.success=function(t,e,n){r&&i.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||'id']},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;(e=e?n.clone(e):{}).collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger('invalid',this,r.validationError,e),!1):r},_removeModels:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=this.get(t[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes);null!=s&&delete this._byId[s],e.silent||(e.index=o,i.trigger('remove',i,this,e)),n.push(i),this._removeReference(i,e)}}return n},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on('all',this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off('all',this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if(e){if(('add'===t||'remove'===t)&&n!==this)return;if('destroy'===t&&this.remove(e,r),'change'===t){var i=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}}),s(b,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},'models');var C=e.View=function(t){this.cid=n.uniqueId('view'),n.extend(this,n.pick(t,k)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,k=['model','collection','el','id','attributes','className','tagName','events'];n.extend(C.prototype,l,{tagName:'div',$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,'events')),!t)return this;for(var e in this.undelegateEvents(),t){var r=t[e];if(n.isFunction(r)||(r=this[r]),r){var i=e.match(S);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+'.delegateEvents'+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off('.delegateEvents'+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+'.delegateEvents'+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,'el'));else{var t=n.extend({},n.result(this,'attributes'));this.id&&(t.id=n.result(this,'id')),this.className&&(t['class']=n.result(this,'className')),this.setElement(this._createElement(n.result(this,'tagName'))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,r,i){var o=j[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:'json'};if(i.url||(s.url=n.result(r,'url')||N()),null!=i.data||!r||'create'!==t&&'update'!==t&&'patch'!==t||(s.contentType='application/json',s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType='application/x-www-form-urlencoded',s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&('PUT'===o||'DELETE'===o||'PATCH'===o)){s.type='POST',i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader('X-HTTP-Method-Override',o),a)return a.apply(this,arguments)}}'GET'===s.type||i.emulateJSON||(s.processData=!1);var c=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,c&&c.call(i.context,t,e,n)};var l=i.xhr=e.ajax(n.extend(s,i));return r.trigger('request',r,l,i),l};var j={create:'POST',update:'PUT',patch:'PATCH',delete:'DELETE',read:'GET'};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,P=/(\(\?)?:\w+/g,T=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,l,{initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=''),i||(i=this[r]);var o=this;return e.history.route(t,(function(n){var s=o._extractParameters(t,n);!1!==o.execute(i,s,r)&&(o.trigger.apply(o,['route:'+r].concat(s)),o.trigger('route',r,s),e.history.trigger('route',o,r,s))})),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,'routes');for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,'\\$&').replace(_,'(?:$1)?').replace(P,(function(t,e){return e?t:'([^/?]+)'})).replace(T,'([^?]*?)'),new RegExp('^'+t+'(?:\\?([\\s\\S]*))?$')},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,(function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null}))}});var D=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),'undefined'!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,R=/#.*$/;D.started=!1,n.extend(D.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,'$&/')===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+'/'===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,'%2525'))},getSearch:function(){var t=this.location.href.replace(/#.*/,'').match(/\?.+/);return t?t[0]:''},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:''},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return'/'===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(M,'')},start:function(t){if(D.started)throw new Error('Backbone.history has already been started');if(D.started=!0,this.options=n.extend({root:'/'},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange='onhashchange'in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=('/'+this.root+'/').replace(L,'/'),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||'/';return this.location.replace(e+'#'+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement('iframe'),this.iframe.src='javascript:0',this.iframe.style.display='none',this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash='#'+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent('on'+t,e)};if(this._usePushState?o('popstate',this.checkUrl,!1):this._useHashChange&&!this.iframe?o('hashchange',this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent('on'+t,e)};this._usePushState?t('popstate',this.checkUrl,!1):this._useHashChange&&!this.iframe&&t('hashchange',this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0})))},navigate:function(t,e){if(!D.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||'');var n=this.root;''!==t&&'?'!==t.charAt(0)||(n=n.slice(0,-1)||'/');var r=n+t;if(t=this.decodeFragment(t.replace(R,'')),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?'replaceState':'pushState']({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;e.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,'');t.replace(r+'#'+e)}else t.hash='#'+e}}),e.history=new D;y.extend=b.extend=E.extend=C.extend=D.extend=function(t,e){var r,i=this;return r=t&&n.has(t,'constructor')?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e),r.prototype=n.create(i.prototype,t),r.prototype.constructor=r,r.__super__=i.prototype,r};var N=function(){throw new Error('A "url" property or function must be specified')},I=function(t,e){var n=e.error;e.error=function(r){n&&n.call(e.context,t,r,e),t.trigger('error',t,r,e)}};return e}(a,n,t,e)}.apply(e,i))||(t.exports=o);else;}()}).call(this,n(17))},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){var r=n(170);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){var r=n(16)["default"],i=n(171);t.exports=function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){"use strict";n.d(e,"i",(function(){return w})),n.d(e,"j",(function(){return x})),n.d(e,"f",(function(){return k})),n.d(e,"d",(function(){return E})),n.d(e,"c",(function(){return _})),n.d(e,"e",(function(){return I})),n.d(e,"g",(function(){return B})),n.d(e,"h",(function(){return H})),n.d(e,"b",(function(){return $})),n.d(e,"a",(function(){return q}));var r=n(38),i=n.n(r),o=n(31),s=n.n(o),a=n(125),c=n.n(a),l=n(126),u=n.n(l),f=n(19),h=(n(35),n(27)),d=n.n(h),p=n(24),g=n(2),v=n.n(g);n(0);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var y,b=function(t){var e=f["myEditor"].getModel().get('DomComponents').getById(t.id);if(e&&(t.rteEnabled||t.opts.force)){var n=t.content,r=e.components(),i=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){v()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({fromDisable:1},t.opts);e.set('content','',i),t.rteCustomRte?(r.length&&r.reset(null,t.opts),e.set('content',n,i)):r.resetFromString(n,t.opts)}},w=null,O='',x='',C='',S=[],k=!1,j='',E={Synced:1,AwaitingACK:2,AwaitingWithBuffer:3,ApplyingRemoteOp:4,ApplyingLocalOp:5,ApplyingRemoteOpWithoutACK:6,ApplyingBufferedLocalOp:7,CreatingLocalOpFromBuffer:8,ApplyingRemoteOpWithBuffer:9,SendingOpToController:10,EditorInitializing:11},_=E.EditorInitializing,P=0,T=null,A=null,D=0,M=null,L=null,R=new Array,N=new Array,I=function(t,e,n,r){O=e,C=t,x=n,y=r,console.log('Email:',O),console.log('username:',x),console.log('NoteId:',C);var i=new u.a('http://localhost:8081/websocket');(w=c.a.over(i)).connect({},F,V)},F=function(){_=E.EditorInitializing,P=0,w.subscribe("/topic/public/".concat(C),U),w.subscribe('/user/'+O+'/msg',U),w.send("/app/chat.register/".concat(C),{},JSON.stringify({senderName:x,senderEmail:O,type:'JOIN',noteId:C})),k=!0},B=function(t){k=t},V=function(){console.log('Error!!')},U=function(){var t=i()(s.a.mark((function t(e){var n,r,i,o,a,c,l,u,h,g,v,m,b,k,T,A;return s.a.wrap((function(t){for(;1;)switch(t.prev=t.next){case 0:if(n=d.a.parse(e.body),console.log(n.senderEmail+'  v.s. '+O),'JOIN'!==n.type){t.next=6;break}n.senderEmail===O?(j=n.sessionId,r=n.queue,S=r.split(' '),y(S),1==parseInt(n.op)&&(_=E.Synced,console.log('state: Synced'))):(console.log('someone join!!',n.senderEmail),i=n.queue,S=i.split(' '),y(S),S[0]==O&&(o=f["myEditor"].getWrapper(),a=f["myEditor"].getComponents(),c=f["myEditor"].getStyle(),Object(p["d"])(a),Object(p["a"])(a),l=o.get('attributes').id,u={action:'copy-wrapper',opts:{components:a,style:c,id:l}},h={senderName:x,senderEmail:O,sessionId:j,type:'COPY',ts:P,op:d.a.stringify(u),newcomer:n.senderEmail,noteId:C},w.send("/app/chat.send/".concat(C),{},d.a.stringify(h)),console.log('send copy!'),console.log('state: '+_))),t.next=59;break;case 6:if('COPY'!==n.type){t.next=10;break}if(_==E.EditorInitializing&&(g=d.a.parse(n.op),v=n.ts,P=v,'copy-wrapper'==g.action)){for(m=g.opts,f["myEditor"].getWrapper().set('attributes',{id:m.id}),f["myEditor"].setComponents(m.components),f["myEditor"].setStyle(m.style);0!=N.length;)b=N.shift(),console.log('msg.ts localTS'+b.ts+'-'+P),b.ts>P&&(g=d.a.parse(b.op),z(g.action,g.opts));k=f["myEditor"].getComponents(),Object(p["f"])(k),_=E.Synced,console.log('state: Synced')}t.next=59;break;case 10:if('LEAVE'!==n.type){t.next=19;break}T=f["myEditor"].getComponents(),console.log('leaver',n.senderEmail),Object(p["g"])(T,n.senderName),A=n.queue,S=A.split(' '),y(S),t.next=59;break;case 19:if('ACK'!==n.type){t.next=35;break}if(_!=E.AwaitingACK){t.next=25;break}_=E.Synced,console.log('state: Synced'),t.next=33;break;case 25:if(_!=E.AwaitingWithBuffer){t.next=32;break}return _=E.CreatingLocalOpFromBuffer,console.log('state: CreatingLocalOpFromBuffer'),t.next=30,G();case 30:t.next=33;break;case 32:_!=E.AwaitingACK&&_!=E.AwaitingWithBuffer&&_!=E.EditorInitializing&&_!=E.Synced&&U(e);case 33:t.next=59;break;case 35:if('OP'!==n.type){t.next=59;break}if(console.log('ClientState: '+_),_!=E.Synced){t.next=44;break}return _=E.ApplyingRemoteOp,console.log('state: ApplyingRemoteOp'),t.next=42,K(n);case 42:t.next=59;break;case 44:if(_!=E.AwaitingACK){t.next=51;break}return _=E.ApplyingRemoteOpWithoutACK,console.log('state: ApplyingRemoteOpWithoutACK'),t.next=49,Y(n);case 49:t.next=59;break;case 51:if(_!=E.AwaitingWithBuffer){t.next=58;break}return _=E.ApplyingRemoteOpWithBuffer,console.log('state: ApplyingRemoteOpWithBuffer'),t.next=56,J(n);case 56:t.next=59;break;case 58:_==E.EditorInitializing?(console.log('push to initBuffer!'),N.push(n)):_!=E.Synced&&_!=E.AwaitingACK&&_!=E.AwaitingWithBuffer&&_!=E.EditorInitializing&&U(e);case 59:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=function(t,e){console.log('action:',t);var n=f["myEditor"].getModel().getCurrentFrame().droppable;if('delete-component'===t)!function(t,e){var n=[],r=t.getModel().get('DomComponents').getById(e.id);r&&r.get('removable')?(r.remove(),r.collection&&n.push(r),n.length&&t.select(n)):t.getModel().logWarning('The element is not removable',{component:r})}(f["myEditor"].getModel().getEditor(),e);else if('add-component'===t){if(!e.dropContent)return;n.applyAppendOrMoveComponent(e,'add-component');var r=f["myEditor"].getComponents();Object(p["d"])(r)}else'move-component'===t?n.applyAppendOrMoveComponent(e,'move-component'):'select-component'===t?function(t){var e=f["myEditor"].getModel().get('DomComponents').getById(t.id);e&&(e.set('status','freezed-remote-selected'),e.set('chooser',t.username))}(e):'unselect-component'===t?function(t){var e=f["myEditor"].getModel().get('DomComponents').getById(t.id);e&&(e.set('status',''),e.set('chooser',''))}(e):'copy-component'===t||('update-content'===t?b(e):'update-trait'===t?function(t){var e=f["myEditor"].getModel().get('DomComponents').getById(t.id);if(e){var n=e.getTraits()[t.traitIndex];n.set('value',t.value);for(var r=n.get('options').map((function(t){return t.value})),i=0;i<r.length;i++)if(r[i].length>0)for(var o=r[i].split(' '),s=0;s<o.length;s++)o[s].length>0&&e.removeClass(o[s]);var a=n.get('value');if(delete e.attributes.attributes[''],a.length>0&&'text-black'!==a)for(var c=a.split(' '),l=0;l<c.length;l++)e.addClass(c[l]);e.em.trigger('component:toggled')}}(e):'update-style'===t&&f["myEditor"].getModel().get('StyleManager').applyUpdateStyle(e))},H=function(t){_=t},W=function(){console.log('Send!!!!!!!!!!!!!!!!!!!!!!!!!');var t={senderName:x,senderEmail:O,sessionId:j,type:'OP',ts:P,op:d.a.stringify(T),noteId:C};w.send("/app/chat.send/".concat(C),{},d.a.stringify(t)),R.length<=0?(_=E.AwaitingACK,console.log('state: AwaitingACK')):(_=E.AwaitingWithBuffer,console.log('state: AwaitingWithBuffer'))},$=function(t){t.username=x,T=t,P+=1,_=E.SendingOpToController,console.log('state: SendingOpToController'),W()},q=function(t){t.username=x,R.push(t),_=E.AwaitingWithBuffer,console.log('state: AwaitingWithBuffer')},G=function(){P+=1,T=R[0],R.shift(),_=E.SendingOpToController,console.log('state: SendingOpToController'),W()},K=function(t){A=d.a.parse(t.op),D=t.ts,P=D,z(A.action,A.opts),_=E.Synced,console.log('state: Synced')},Y=function(t){P=t.ts,P+=1,D=t.ts,A=d.a.parse(t.op),L=X(A,T),M=X(T,A),z(L.action,L.opts),T=M,_=E.SendingOpToController,console.log('state: SendingOpToController'),W()},J=function(t){A=d.a.parse(t.op),D=t.ts;var e=new Array;P=D,P+=1,e[0]=X(A,T);for(var n=0;n<R.length;n++)e[n+1]=X(e[n],R[n]);z(e[e.length-1].action,e[e.length-1].opts),M=X(T,A),T=M;for(var r=0;r<R.length;r++)R[r]=X(R[r],e[r]);_=E.SendingOpToController,console.log('state: SendingOpToController'),W()},X=function(t,e){var n=t.action,r=e.action;return'add-component'===n?'delete-component'===r?function(t,e){console.log('TAD');var n=e.opts.parentId,r=e.opts.index,i=t.opts.dstId,o=t.opts.pos;n===i&&(('after'===o.method?o.indexEl+1:o.indexEl)>r&&(t.opts.pos.indexEl-=1));return t}(t,e):'move-component'===r?function(t,e){console.log('TAM');var n=e.opts.dstId,r=e.opts.pos,i='after'===r.method?r.indexEl+1:r.indexEl,o=e.opts.srcParentId,s=e.opts.srcIndex,a=t.opts.dstId,c=t.opts.pos,l='after'===c.method?c.indexEl+1:c.indexEl;return a===o&&l>s&&(t.opts.pos.indexEl-=1),n===a&&l>i&&(t.opts.pos.indexEl+=1),t}(t,e):'add-component'===r?function(t,e){console.log('TAA');var n=e.opts.dstId,r=e.opts.pos,i=t.opts.dstId,o=t.opts.pos;if(n==i){var s='after'===r.method?r.indexEl+1:r.indexEl,a='after'===o.method?o.indexEl+1:o.indexEl;(a>s||a==s&&t.username>e.username)&&(t.opts.pos.indexEl+=1)}return t}(t,e):t:'move-component'===n?'delete-component'===r?function(t,e){console.log('TMD');var n=e.opts.parentId,r=e.opts.index,i=t.opts.dstId,o=t.opts.pos;n==i&&(('after'===o.method?o.indexEl+1:o.indexEl)>r&&(t.opts.pos.indexEl-=1));return t}(t,e):'move-component'===r?function(t,e){console.log('TMM');var n=e.opts.dstId,r=e.opts.pos,i='after'===r.method?r.indexEl+1:r.indexEl,o=e.opts.srcParentId,s=e.opts.srcIndex,a=t.opts.dstId,c=t.opts.pos,l='after'===c.method?c.indexEl+1:c.indexEl;return a===o&&l>s&&(t.opts.pos.indexEl-=1),n===a&&(l>i||l==i&&t.username>e.username)&&(t.opts.pos.indexEl+=1),t}(t,e):'add-component'===r?function(t,e){console.log('TMA');var n=e.opts.dstId,r=e.opts.pos,i='after'===r.method?r.indexEl+1:r.indexEl,o=t.opts.dstId,s=t.opts.pos,a='after'===s.method?s.indexEl+1:s.indexEl;return n===o&&a>=i&&(t.opts.pos.indexEl+=1),t}(t,e):t:t}},function(t,e,n){"use strict";(function(t){n.d(e,"e",(function(){return r})),n.d(e,"p",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"o",(function(){return c})),n.d(e,"q",(function(){return l})),n.d(e,"t",(function(){return u})),n.d(e,"i",(function(){return f})),n.d(e,"r",(function(){return h})),n.d(e,"s",(function(){return d})),n.d(e,"k",(function(){return p})),n.d(e,"m",(function(){return g})),n.d(e,"j",(function(){return v})),n.d(e,"l",(function(){return m})),n.d(e,"g",(function(){return y})),n.d(e,"f",(function(){return b})),n.d(e,"h",(function(){return w})),n.d(e,"n",(function(){return O})),n.d(e,"b",(function(){return x}));var r='1.13.1',i='object'==typeof self&&self.self===self&&self||'object'==typeof t&&t.global===t&&t||Function('return this')()||{},o=Array.prototype,s=Object.prototype,a='undefined'!=typeof Symbol?Symbol.prototype:null,c=o.push,l=o.slice,u=s.toString,f=s.hasOwnProperty,h='undefined'!=typeof ArrayBuffer,d='undefined'!=typeof DataView,p=Array.isArray,g=Object.keys,v=Object.create,m=h&&ArrayBuffer.isView,y=isNaN,b=isFinite,w=!{toString:null}.propertyIsEnumerable('toString'),O=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'],x=Math.pow(2,53)-1}).call(this,n(17))},function(t,e,n){"use strict";n.d(e,"b",(function(){return B})),n.d(e,"c",(function(){return H})),n.d(e,"d",(function(){return W})),n.d(e,"a",(function(){return $}));var r=n(16),i=n.n(r),o=n(12),s=n.n(o),a=n(43),c=n.n(a),l=n(2),u=n.n(l),f=n(5),h=n.n(f),d=n(6),p=n.n(d),g=n(7),v=n.n(g),m=n(8),y=n.n(m),b=n(4),w=n.n(b),O=n(0),x=n(1),C=n(46),S=n(3),k=n.n(S),j=n(24),E=n(25),_=n(29);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var A,D=k.a.Model.extend({defaults:{type:'text',label:'',name:'',min:'',max:'',unit:'',step:1,value:'',target:'',default:'',placeholder:'',changeProp:0,options:[]},initialize:function(){var t=this.get('target'),e=this.get('name'),n=this.get('changeProp');if(!this.get('id')&&this.set('id',e),t){this.target=t,this.unset('target');var r=n?"change:".concat(e):"change:attributes:".concat(e);this.listenTo(t,r,this.targetUpdated)}},props:function(){return this.attributes},targetUpdated:function(){var t=this.getTargetValue();this.set({value:t},{fromTarget:1})},getValue:function(){return this.getTargetValue()},getTargetValue:function(){var t,e=this.get('name'),n=this.target;return t=this.get('changeProp')?n.get(e):n.getAttributes()[e],Object(O["isUndefined"])(t)?'':t},setTargetValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.target,r=this.get('name');if(!Object(O["isUndefined"])(t)){var i=t;if('false'===t?i=!1:'true'===t&&(i=!0),this.get('changeProp'))n.set(r,i,e);else{var o=T({},n.get('attributes'));o[r]=i,n.set('attributes',o,e)}}},setValueFromInput:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={value:t};this.set(r,T(T({},n),{},{avoidStore:1})),e&&(this.set('value','',n),this.set(r,n))},getInitValue:function(){var t,e=this.target,n=this.get('name');if(e){var r=e.get('attributes');t=this.get('changeProp')?e.get(n):r[n]}return t||this.get('value')||this.get('default')}}),M=k.a.Collection.extend({model:D,initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.em=e.em||'',this.listenTo(this,'add',this.handleAdd),this.listenTo(this,'reset',this.handleReset)},handleReset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.previousModels,r=void 0===n?[]:n;r.forEach((function(t){return t.trigger('remove')}))},handleAdd:function(t){var e=this.target;e&&(t.target=e)},setTarget:function(t){this.target=t},add:function(t,e){var n=this.em;if(Object(O["isString"])(t)||Object(O["isArray"])(t)){var r=n&&n.get&&n.get('TraitManager'),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{build:function(e){var n=[];'string'==typeof e&&(e=[e]);for(var r=0;r<e.length;r++){var i={},o=e[r];switch(i.name=o,o){case'target':i.type='select',i.default=!1,i.options=t.optionsTarget}n.push(i)}return n}}}(r&&r.getConfig());Object(O["isString"])(t)&&(t=[t]);for(var o=0,s=t.length;o<s;o++){var a=t[o],c=Object(O["isString"])(a)?i.build(a)[0]:a;c.target=this.target,t[o]=c}}return k.a.Collection.prototype.add.apply(this,[t,e])}});function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w()(t);if(e){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}var I=function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,'\\$&')},F=function(t){return t&&t.getConfig('avoidInlineStyle')},B='component:drag',V='__symbols',U='__symbol',z='__symbol_ovrd',H='component:update',W="".concat(H,"-inside"),$=function(t){v()(n,t);var e=N(n);function n(){return h()(this,n),e.apply(this,arguments)}return p()(n,[{key:"init",value:function(){}},{key:"updated",value:function(t,e,n){}},{key:"removed",value:function(){}},{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(O["bindAll"])(this,'__upSymbProps','__upSymbCls','__upSymbComps');var i=r.em,o=this.parent(),s=o&&o.attributes,a=this.get('propagate');if(a&&this.set('propagate',Object(O["isArray"])(a)?a:[a]),s&&s.propagate&&!a){var c={},l=s.propagate;l.forEach((function(t){return c[t]=o.get(t)})),c.propagate=l,this.set(R(R({},c),e))}if(r&&r.config&&r.config.voidElements.indexOf(this.get('tagName'))>=0&&this.set('void',!0),r.em=i,this.opt=r,this.em=i,this.frame=r.frame,this.config=r.config||{},this.set('attributes',R(R({},Object(O["result"])(this,'defaults').attributes||{}),this.get('attributes')||{})),this.ccid=n.createId(this,r),this.initClasses(),this.initTraits(),this.initComponents(),this.initToolbar(),this.initScriptProps(),this.listenTo(this,'script',this.scriptUpdated),this.listenTo(this,'change:tagName',this.tagUpdated),this.listenTo(this,'change:attributes',this.attrUpdated),this.listenTo(this,'change:attributes:id',this._idUpdated),this.on('change:toolbar',this.__emitUpdateTlb),this.on('change',this.__onChange),this.on(W,this.__propToParent),this.set('status',''),this.views=[],['classes','traits','components'].forEach((function(e){var n="add remove ".concat('components'!==e?'change':'');t.listenTo(t.get(e),n.trim(),(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.emitUpdate.apply(t,[e].concat(r))}))})),!r.temporary){var u=i&&i.get('CssComposer'),f=this.attributes,h=f.styles,d=f.type;h&&u&&u.addCollection(h,{},{group:"cmp:".concat(d)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),i&&i.trigger('component:create',this)}}},{key:"__postAdd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.em,n=e&&e.get('UndoManager'),r=this.components();n&&!this.__hasUm&&(n.add(r),n.add(this.getSelectors()),this.__hasUm=1),t.recursive&&r.map((function(e){return e.__postAdd(t)}))}},{key:"__postRemove",value:function(){var t=this.em,e=t&&t.get('UndoManager');e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)}},{key:"__onChange",value:function(t,e){var n=this.changedAttributes();['status','open','toolbar','traits'].forEach((function(t){return delete n[t]})),Object(x["isEmptyObj"])(n)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:n,options:e}))}},{key:"__changesUp",value:function(t){var e=this.em;[this.frame,e].forEach((function(e){return e&&e.changesUp(t)}))}},{key:"__propSelfToParent",value:function(t){this.trigger(H,t),this.__propToParent(t)}},{key:"__propToParent",value:function(t){var e=this.parent();e&&e.trigger(W,t)}},{key:"__emitUpdateTlb",value:function(){this.emitUpdate('toolbar')}},{key:"is",value:function(t){return!(this.get('type')!=t)}},{key:"props",value:function(){return this.attributes}},{key:"index",value:function(){var t=this.collection;return t?t.indexOf(this):0}},{key:"setDragMode",value:function(t){return this.set('dmode',t)}},{key:"find",value:function(t){var e=[],n=this.view.$el.find(t);return n.each((function(t){var r=n.eq(t).data('model');r&&e.push(r)})),e}},{key:"findType",value:function(t){var e=[];return function n(r){return r.forEach((function(r){r.is(t)&&e.push(r),n(r.components())}))}(this.components()),e}},{key:"closest",value:function(t){var e=this.view.$el.closest(t);return e.length&&e.data('model')}},{key:"closestType",value:function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e}},{key:"contains",value:function(t){var e=!1;if(!t)return e;var n=function n(r){!e&&r.forEach((function(r){r===t&&(e=!0),!e&&n(r.components())}))};return n(this.components()),e}},{key:"tagUpdated",value:function(){this.trigger('rerender')}},{key:"replaceWith",value:function(t){var e=this.collection,n=e.indexOf(this);return e.remove(this),e.add(t,{at:n})}},{key:"attrUpdated",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.get('attributes'),o=i.class;o&&this.setClass(o),delete i.class;var s=i.style;s&&this.setStyle(s),delete i.style;var a=R({},this.previous('attributes')),c=Object(x["shallowDiff"])(a,this.get('attributes'));Object(O["keys"])(c).forEach((function(t){return n.trigger("change:attributes:".concat(t),n,c[t],r)}))}},{key:"setAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.set('attributes',R({},t),e),this}},{key:"addAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setAttributes(R(R({},this.getAttributes({noClass:1})),t),e)}},{key:"removeAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(t)?t:[t],r=this.getAttributes();return n.map((function(t){return delete r[t]})),this.setAttributes(r,e)}},{key:"getStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.em,r=Object(O["isString"])(t)?t:'',i=r?e:t;if(n&&n.getConfig('avoidInlineStyle')&&!i.inline){var o=n.get('state'),s=n.get('CssComposer'),a=s.getIdRule(this.getId(),R({state:o},i));if(this.rule=a,a)return a.getStyle(r)}return C["a"].getStyle.call(this,r)}},{key:"setStyle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,i=this.opt;if(r&&r.getConfig('avoidInlineStyle')&&!i.temporary&&!n.inline){var o=this.get('style')||{};e=R(R({},e=Object(O["isString"])(e)?this.parseStyle(e):e),o);var s=r.get('state'),a=r.get('CssComposer'),c=this.getStyle(n);this.rule=a.setIdRule(this.getId(),e,R(R({},n),{},{state:s}));var l=Object(x["shallowDiff"])(c,e);this.set('style','',{silent:1}),Object(O["keys"])(l).forEach((function(e){return t.trigger("change:style:".concat(e))}))}else e=C["a"].setStyle.apply(this,arguments);return e}},{key:"getAttributes",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.em,r=[],i=R({},this.get('attributes')),o=n&&n.get('SelectorManager'),s=this.getId();if(e.noClass||(this.get('classes').forEach((function(t){return r.push(Object(O["isString"])(t)?t:t.get('name'))})),r.length&&(i.class=r.join(' '))),!e.noStyle){var a=this.get('style');Object(x["isObject"])(a)&&!Object(x["isEmptyObj"])(a)&&(i.style=this.styleToString({inline:1}))}Object(O["has"])(i,'id')||(F(n)?t=o&&o.get(s,o.Selector.TYPE_ID):Object(O["isEmpty"])(this.getStyle())||(t=1),(this.__getSymbol()||this.__getSymbols())&&(t=1),t&&(i.id=s));return i}},{key:"addClass",value:function(t){var e=this.em.get('SelectorManager').addClass(t);return this.get('classes').add(e)}},{key:"setClass",value:function(t){return this.get('classes').reset(),this.addClass(t)}},{key:"removeClass",value:function(t){var e=[];t=Object(O["isArray"])(t)?t:[t];var n=this.get('classes'),r=E["a"].TYPE_CLASS;return t.forEach((function(t){t.split(' ').forEach((function(t){var i=n.where({name:t,type:r})[0];i&&e.push(n.remove(i))}))})),e}},{key:"getClasses",value:function(){var t=this.getAttributes().class;return t?t.split(' '):[]}},{key:"__logSymbol",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.__getSymbol(),i=this.__getSymbols();(r||i)&&this.em.log(t,{model:this,toUp:e,context:'symbols',opts:n})}},{key:"__initSymb",value:function(){this.__symbReady||(this.on('change',this.__upSymbProps),this.__symbReady=1)}},{key:"__isSymbol",value:function(){return Object(O["isArray"])(this.get(V))}},{key:"__isSymbolOrInst",value:function(){return!(!this.__isSymbol()&&!this.get(U))}},{key:"__isSymbolTop",value:function(){var t=this.parent();return this.__isSymbolOrInst()&&(!t||t&&!t.__isSymbol()&&!t.__getSymbol())}},{key:"__isSymbolNested",value:function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var t=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),e=this.__getSymbTop();return(e.__isSymbol()?e:e.__getSymbol())!==t}},{key:"__getAllById",value:function(){var t=this.em;return t?t.get('DomComponents').allById():{}}},{key:"__getSymbol",value:function(){var t=this.get(U);if(t&&Object(O["isString"])(t)){var e=this.__getAllById()[t];e?(t=e,this.set(U,e)):t=0}return t}},{key:"__getSymbols",value:function(){var t=this,e=this.get(V);return e&&Object(O["isArray"])(e)&&(e.forEach((function(n,r){n&&Object(O["isString"])(n)&&(e[r]=t.__getAllById()[n])})),e=e.filter((function(t){return t&&!Object(O["isString"])(t)}))),e}},{key:"__isSymbOvrd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'',e=this.get(z),n=t.split(':'),r=c()(n,1),i=r[0],o=t!==i?[t,i]:[t];return!0===e||Object(O["isArray"])(e)&&o.some((function(t){return e.indexOf(t)>=0}))}},{key:"__getSymbToUp",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[],r=this.em,i=e.changed,o=r&&r.get('symbols');if(e.fromInstance||e.noPropagate||e.fromUndo||!o||i&&this.__isSymbOvrd(i))return n;var a=this.__getSymbols()||[],c=this.__getSymbol(),l=c?[c].concat(s()(c.__getSymbols()||[])):a;return n=l.filter((function(e){return e!==t})).filter((function(t){return!(i&&t.__isSymbOvrd(i))}))}},{key:"__getSymbTop",value:function(t){for(var e=this,n=this.parent(t);n&&(n.__isSymbol()||n.__getSymbol());)e=n,n=n.parent(t);return e}},{key:"__upSymbProps",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.changedAttributes(),i=r.attributes||{};if(delete r.status,delete r.open,delete r[V],delete r[U],delete r[z],delete r.attributes,delete i.id,Object(x["isEmptyObj"])(i)||(r.attributes=i),!Object(x["isEmptyObj"])(r)){var o=this.__getSymbToUp(n);Object(O["keys"])(r).map((function(t){e.__isSymbOvrd(t)&&delete r[t]})),this.__logSymbol('props',o,{opts:n,changed:r}),o.forEach((function(t){var i=R({},r);Object(O["keys"])(i).map((function(e){t.__isSymbOvrd(e)&&delete i[e]})),t.set(i,R({fromInstance:e},n))}))}}},{key:"__upSymbCls",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.__getSymbToUp(r);this.__logSymbol('classes',i,{opts:r}),i.forEach((function(t){t.set('classes',n.get('classes'),{fromInstance:n})})),this.__changesUp(r)}},{key:"__upSymbComps",value:function(t,e,n){var r=this,i=n||e||{},o={fromInstance:i.fromInstance,fromUndo:i.fromUndo},a=t.opt.temporary;if(n)if(n.add){var c=[],l=!!this.__getSymbols(),u=this.__getSymbToUp(R(R({},o),{},{changed:'components:add'}));if(u.length){var f=t.__getSymbol();c=(f?f.__getSymbols():t.__getSymbols())||[],(c=s()(c)).push(f||t)}!a&&this.__logSymbol('add',u,{opts:n,addedInstances:c.map((function(t){return t.cid})),added:t.cid}),u.forEach((function(e){var i=e.__getSymbTop(),o=c.filter((function(t){var e=t.__getSymbTop({prev:1});return i&&e&&e===i}))[0]||t.clone({symbol:1,symbolInv:l});e.append(o,R({fromInstance:r},n))}))}else{var h=t.__getSymbol();if(h&&!n.temporary&&h.set(V,h.__getSymbols().filter((function(e){return e!==t}))),!t.__isSymbolTop()){var d='components:remove',p=n.index,g=t.parent(),v=R({fromInstance:t},n),m=t.__isSymbolNested(),y=function(t){var e=t.parent();e&&!e.__isSymbOvrd(d)&&t.remove(v)},b=g.__isSymbOvrd(d)?[]:t.__getSymbToUp(o);m&&(b=g.__getSymbToUp(R(R({},o),{},{changed:d})),y=function(t){var e=t.components().at(p);e&&e.remove(R({fromInstance:g},v))}),!a&&this.__logSymbol('remove',b,{opts:n,removed:t.cid,isSymbNested:m}),b.forEach(y)}}else{var w=this.__getSymbToUp(R(R({},o),{},{changed:'components:reset'}));this.__logSymbol('reset',w,{components:t.models}),w.forEach((function(n){var i=t.models.map((function(t){return t.clone({symbol:1})}));n.components().reset(i,R({fromInstance:r},e))}))}this.__changesUp(i)}},{key:"initClasses",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r='change:classes',i=this.get('attributes').class||[],o=[this,r,this.initClasses],s=this.get('classes')||i,a=Object(O["isString"])(s)?s.split(' '):s;this.stopListening.apply(this,o);var c=this.normalizeClasses(a),l=new _["a"]([]);return this.set('classes',l,n),l.add(c),l.on('add remove reset',this.__upSymbCls),this.listenTo.apply(this,o),this}},{key:"initComponents",value:function(){var t=[this,'change:components',this.initComponents];this.stopListening.apply(this,t);var e=new j["b"](null,this.opt);e.parent=this;var n=this.get('components'),r=!this.opt.avoidChildren;return this.set('components',e),r&&n&&e.add(Object(O["isFunction"])(n)?n(this):n,this.opt),e.on('add remove reset',this.__upSymbComps),this.listenTo.apply(this,t),this}},{key:"initTraits",value:function(t){var e=this.em,n='change:traits';this.off(n,this.initTraits),this.__loadTraits();var r=R({},this.get('attributes')),i=this.get('traits');return i.each((function(t){if(!t.get('changeProp')){var e=t.get('name'),n=t.getInitValue();e&&n&&(r[e]=n)}})),i.length&&this.set('attributes',r),this.on(n,this.initTraits),t&&e&&e.trigger('component:toggled'),this}},{key:"initScriptProps",value:function(){if(!this.opt.temporary){var t='script-props',e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var n=this.previous(t)||[],r=this.get(t)||[],i=n.map((function(t){return"change:".concat(t)})).join(' '),o=r.map((function(t){return"change:".concat(t)})).join(' ');i&&this.off(i,this.__scriptPropsChange),o&&this.on(o,this.__scriptPropsChange),this.on.apply(this,e)}}},{key:"__scriptPropsChange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.avoidStore||this.trigger('rerender')}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(O["isArray"])(t)?t:[t],r=n.map((function(t){return Object(O["isString"])(t)||t.collection&&t.collection.remove(t,{temporary:1}),t})),i=this.components().add(r,e);return Object(O["isArray"])(i)?i:[i]}},{key:"components",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get('components');return Object(O["isUndefined"])(t)?n:(n.reset(null,e),t?this.append(t,e):[])}},{key:"getChildAt",value:function(t){return this.components().at(t||0)||null}},{key:"getLastChild",value:function(){var t=this.components();return t.at(t.length-1)||null}},{key:"empty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.components().reset(null,t),this}},{key:"parent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.collection||t.prev&&this.prevColl;return e?e.parent:null}},{key:"scriptUpdated",value:function(){this.set('scriptUpdated',1)}},{key:"initToolbar",value:function(){var t=this.em,e=t&&t.getConfig('stylePrefix')||'';if(!this.get('toolbar')){var n=[];this.collection&&n.push({attributes:{class:'fa fa-arrow-up'},command:function(t){return t.runCommand('core:component-exit',{force:1})}}),this.get('draggable')&&n.push({attributes:{class:"fa fa-arrows ".concat(e,"no-touch-actions"),draggable:!0},command:'tlb-move'}),this.get('copyable')&&n.push({attributes:{class:'fa fa-clone'},command:'tlb-clone'}),this.get('removable')&&n.push({attributes:{class:'fa fa-trash-o'},command:'tlb-delete'}),this.set('toolbar',n)}}},{key:"__loadTraits",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t||this.get('traits');if(!(n instanceof M)){n=Object(O["isFunction"])(n)?n(this):n;var r=new M([],this.opt);r.setTarget(this),n.length&&(n.forEach((function(t){return t.attributes&&delete t.attributes.value})),r.add(n)),this.set({traits:r},e)}return this}},{key:"getTraits",value:function(){return this.__loadTraits(),s()(this.get('traits').models)}},{key:"setTraits",value:function(t){var e=Object(O["isArray"])(t)?t:[t];return this.set({traits:e}),this.getTraits()}},{key:"getTrait",value:function(t){return this.getTraits().filter((function(e){return e.get('id')===t||e.get('name')===t}))[0]||null}},{key:"updateTrait",value:function(t,e){var n,r=this.getTrait(t);return r&&r.set(e),null===(n=this.em)||void 0===n||n.trigger('component:toggled'),this}},{key:"getTraitIndex",value:function(t){var e=this.getTrait(t);return e?this.get('traits').indexOf(e):-1}},{key:"removeTrait",value:function(t){var e,n=this,r=(Object(O["isArray"])(t)?t:[t]).map((function(t){return n.getTrait(t)})),i=this.get('traits'),o=r.length?i.remove(r):[];return null===(e=this.em)||void 0===e||e.trigger('component:toggled'),Object(O["isArray"])(o)?o:[o]}},{key:"addTrait",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__loadTraits();var r=this.get('traits').add(t,n);return null===(e=this.em)||void 0===e||e.trigger('component:toggled'),Object(O["isArray"])(r)?r:[r]}},{key:"normalizeClasses",value:function(t){var e=[],n=this.em,r=n&&n.get('SelectorManager');if(r)return t.models?s()(t.models):(t.forEach((function(t){return e.push(r.add(t))})),e)}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.em,n=R({},this.attributes),r=R({},this.opt),i=this.getId(),o=e&&e.get('CssComposer');n.attributes=R({},n.attributes),delete n.attributes.id,n.components=[],n.classes=[],n.traits=[],this.__isSymbolTop()&&(t.symbol=1),this.get('components').each((function(e,r){n.components[r]=e.clone(R(R({},t),{},{_inner:1}))})),this.get('traits').each((function(t,e){n.traits[e]=t.clone()})),this.get('classes').each((function(t,e){n.classes[e]=t.get('name')})),n.status='',r.collection=null;var a=new this.constructor(n,r),c="#".concat(a.getId()),l=o?o.getRules("#".concat(i)):[];l.forEach((function(t){var e=t.clone();e.set('selectors',[c]),o.getAll().add(e)})),a.set(V,0);var u=this.__getSymbol(),f=this.__getSymbols();t.symbol||!u&&!f?u?(u.set(V,[].concat(s()(u.__getSymbols()),[a])),a.__initSymb()):t.symbol&&(this.__isSymbol()?(this.set(V,[].concat(s()(f),[a])),a.set(U,this),a.__initSymb()):t.symbolInv?(this.set(V,[a]),a.set(U,this),[this,a].map((function(t){return t.__initSymb()}))):(a.set(V,[this]),[this,a].map((function(t){return t.__initSymb()})),this.set(U,a))):(a.set(U,0),a.set(V,0));var h='component:clone';return e&&e.trigger(h,a),this.trigger(h,a),a}},{key:"getName",value:function(){var t=this.em,e=this.attributes,n=e.type,r=e.tagName,i=e.name,o=n||r,s=!n&&r,a='domComponents.names.',c=i&&(null==t?void 0:t.t("".concat(a).concat(i))),l=s&&(null==t?void 0:t.t("".concat(a).concat(s))),u=t&&(t.t("".concat(a).concat(n))||t.t("".concat(a).concat(r)));return this.get('custom-name')||c||i||l||Object(x["capitalize"])(s)||u||Object(x["capitalize"])(o)}},{key:"getIcon",value:function(){var t=this.get('icon');return t?t+' ':''}},{key:"toHTML",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=[],r=t.tag,i=r||e.get('tagName'),o=e.get('void'),s=t.attributes,a=this.getAttrToHTML();if(delete t.tag,s&&(Object(O["isFunction"])(s)?a=s(e,a)||{}:Object(x["isObject"])(s)&&(a=s)),t.withProps){var c=this.toJSON();Object(O["forEach"])(c,(function(t,e){'_'!==e[0]&&['classes','attributes','components'].indexOf(e)<0&&(a["data-gjs-".concat(e)]=Object(O["isArray"])(t)||Object(x["isObject"])(t)?JSON.stringify(t):t)}))}for(var l in a){var u=a[l];if(!Object(O["isUndefined"])(u)&&null!==u)if(Object(O["isBoolean"])(u))u&&n.push(l);else{var f='';if(t.altQuoteAttr&&Object(O["isString"])(u)&&u.indexOf('"')>=0)f="'".concat(u.replace(/'/g,'&apos;'),"'");else{var h=Object(O["isString"])(u)?u.replace(/"/g,'&quot;'):u;f="\"".concat(h,"\"")}n.push("".concat(l,"=").concat(f))}}var d=n.length?" ".concat(n.join(' ')):'',p=e.getInnerHTML(t),g="<".concat(i).concat(d).concat(o?'/':'',">").concat(p);return!o&&(g+="</".concat(i,">")),g}},{key:"getInnerHTML",value:function(t){return this.__innerHTML(t)}},{key:"__innerHTML",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.components();return e.length?e.map((function(e){return e.toHTML(t)})).join(''):this.get('content')}},{key:"getAttrToHTML",value:function(){var t=this.getAttributes();return delete t.style,t}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=S["Model"].prototype.toJSON.call(this,t);if(e.attributes=this.getAttributes(),delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,!t.fromUndo){var n=e[U],r=e[V];r&&Object(O["isArray"])(r)&&(e[V]=r.filter((function(t){return t})).map((function(t){return t.getId?t.getId():t}))),n&&!Object(O["isString"])(n)&&(e[U]=n.getId())}return this.em.getConfig('avoidDefaults')&&this.getChangedProps(e),e}},{key:"getChangedProps",value:function(t){var e=t||S["Model"].prototype.toJSON.apply(this),n=Object(O["result"])(this,'defaults');return Object(O["forEach"])(n,(function(t,n){-1===['type'].indexOf(n)&&e[n]===t&&delete e[n]})),Object(O["isEmpty"])(e.type)&&delete e.type,Object(O["forEach"])(['attributes','style'],(function(t){Object(O["isEmpty"])(n[t])&&Object(O["isEmpty"])(e[t])&&delete e[t]})),Object(O["forEach"])(['classes','components'],(function(t){(!e[t]||Object(O["isEmpty"])(n[t])&&!e[t].length)&&delete e[t]})),e}},{key:"getId",value:function(){return(this.get('attributes')||{}).id||this.ccid||this.cid}},{key:"setId",value:function(t,e){var n=R({},this.get('attributes'));return n.id=t,this.set('attributes',n,e),this}},{key:"getEl",value:function(t){var e=this.getView(t);return e&&e.el}},{key:"getView",value:function(t){var e=this.view,n=this.views;return t&&(e=n.filter((function(e){return e._getFrame()===t.view}))[0]),e}},{key:"getCurrentView",value:function(){var t=(this.em.get('currentFrame')||{}).model;return this.getView(t)}},{key:"__getScriptProps",value:function(){var t=this.props();return(this.get('script-props')||[]).reduce((function(e,n){return e[n]=t[n],e}),{})}},{key:"getScriptString",value:function(t){var e=this,n=t||this.get('script');if(!n)return n;if(this.get('script-props'))n=n.toString().trim();else{if('function'==typeof n){var r=n.toString().trim();n=(r=r.replace(/^function[\s\w]*\(\)\s?\{/,'').replace(/\}$/,'')).trim()}var o=this.em.getConfig(),s=I(o.tagVarStart||'{[ '),a=I(o.tagVarEnd||' ]}'),c=new RegExp("".concat(s,"([\\w\\d-]*)").concat(a),'g');n=n.replace(c,(function(t,n){e.scriptUpdated();var r=e.attributes[n]||'';return Object(O["isArray"])(r)||'object'==i()(r)?JSON.stringify(r):r}))}return n}},{key:"emitUpdate",value:function(t){for(var e=this.em,n=H+(t?":".concat(t):''),r=t&&this.get(t),i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];t&&this.updated.apply(this,[t,r,t&&this.previous(t)].concat(o)),this.trigger.apply(this,[n].concat(o)),e&&e.trigger.apply(e,[n,this].concat(o)),['components','classes'].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:u()({},t,r),options:o[2]||o[1]||{}})}},{key:"onAll",value:function(t){return Object(O["isFunction"])(t)&&(t(this),this.components().forEach((function(e){return e.onAll(t)}))),this}},{key:"remove",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.em,r=this.collection,i=function(){r&&r.remove(t,R(R({},e),{},{action:'remove-component'})),e.root&&t.components('')},o=R({},e);return[this,n].map((function(e){return e.trigger('component:remove:before',t,i,o)})),!o.abort&&i(),this}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.remove({temporary:1}),t&&t.append(this,e),this}},{key:"isInstanceOf",value:function(t){var e,n,r=null===(e=this.em)||void 0===e||null===(n=e.get('DomComponents').getType(t))||void 0===n?void 0:n.model;return!!r&&this instanceof r}},{key:"isChildOf",value:function(t){for(var e=Object(O["isString"])(t),n=this.parent();n;){if(e){if(n.isInstanceOf(t))return!0}else if(n===t)return!0;n=n.parent()}return!1}},{key:"resetId",value:function(){var t=this.em,e=this.getId();if(e){var r=n.createId(this);this.setId(r);var i=t&&t.get('CssComposer').getIdRule(e),o=i&&i.get('selectors').at(0);return o&&o.set('name',r),this}}},{key:"_getStyleRule",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=this.em,r=e||this.getId();return n&&n.get('CssComposer').getIdRule(r)}},{key:"_getStyleSelector",value:function(t){var e=this._getStyleRule(t);return e&&e.get('selectors').at(0)}},{key:"_idUpdated",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!r.idUpdate){var i=this.ccid,o=this.get('attributes')||{},s=o.id,a=(this.previous('attributes')||{}).id||i,c=n.getList(this);if(c[s]||!s&&a)return this.setId(a,{idUpdate:1});delete c[a],c[s]=this,this.ccid=s;var l=this._getStyleSelector({id:a});l&&l.set({name:s,label:s})}}}]),n}(S["Model"].extend(C["a"]));$.isComponent=function(t){return{tagName:Object(x["toLowerCase"])(t.tagName)}},$.ensureInList=function(t){var e=$.getList(t),n=t.getId(),r=e[n];if(r){if(r!==t){var i=$.getIncrementId(n,e);t.setId(i),e[i]=t}}else e[n]=t;t.components().forEach((function(t){return $.ensureInList(t)}))},$.createId=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=$.getList(t),i=n.idMap,o=void 0===i?{}:i,s=t.get('attributes'),a=s.id;return a?(e=$.getIncrementId(a,r,n),t.setId(e),a!==e&&(o[a]=e)):e=$.getNewId(r),r[e]=t,e},$.getNewId=function(t){for(var e=Object.keys(t).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-e),r="i".concat(n);t[r];)r=$.getNewId(t);return r},$.getIncrementId=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.keepIds,i=void 0===r?[]:r,o=1,s=t;if(i.indexOf(t)<0)for(;e[s];)o++,s="".concat(t,"-").concat(o);return s},$.getList=function(t){var e=t.opt,n=void 0===e?{}:e,r=n.domc,i=n.em,o=r||i&&i.get('DomComponents');return o?o.componentsById:{}},$.checkId=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Object(O["isArray"])(t)?t:[t],o=r.keepIds,s=void 0===o?[]:o;i.forEach((function(t){var i=t.attributes,o=void 0===i?{}:i,a=t.components,c=o.id;if(c&&n[c]&&s.indexOf(c)<0){var l=$.getIncrementId(c,n);o.id=l,Object(O["isArray"])(e)&&e.forEach((function(t){var e=t.selectors;e.forEach((function(t,n){t==="#".concat(c)&&(e[n]="#".concat(l))}))}))}a&&$.checkId(a,e,n,r)}))},$.getDefaults=function(){return Object(O["result"])(this.prototype,'defaults')},$.prototype.defaults=(A={tagName:'div',type:'',name:'',removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,'stylable-require':'','style-signature':'',unstylable:'',highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:'',status:'',chooser:'',content:'',icon:'',style:'',styles:'',classes:'',script:'','script-props':'','script-export':'',attributes:'',traits:['id','title'],propagate:'',dmode:'',toolbar:null},u()(A,U,0),u()(A,V,0),u()(A,z,0),u()(A,"_undo",!0),u()(A,"_undoexc",['status','open']),A)},function(t,e,n){var r=n(130),i=n(131),o=n(73),s=n(132);t.exports=function(t){return r(t)||i(t)||o(t)||s()},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),o=n(3),s=n.n(o),a=n(0),c=n(24),l=n(59),u=n(29),f=n(14),h=n(1);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["default"]=s.a.View.extend({className:function(){return this.getClasses()},tagName:function(){return this.model.get('tagName')},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.model,n=t.config||{},r=n.em,i=e.opt||{},o=this.$el,s=this.el;this.opts=t,this.modelOpt=i,this.config=n,this.em=r||'',this.pfx=n.stylePrefix||'',this.ppfx=n.pStylePrefix||'',this.attr=e.get('attributes'),this.classe=this.attr.class||[],this.listenTo(e,'change:style',this.updateStyle),this.listenTo(e,'change:attributes',this.renderAttributes),this.listenTo(e,'change:highlightable',this.updateHighlight),this.listenTo(e,'change:status',this.updateStatus),this.listenTo(e,'change:script rerender',this.reset),this.listenTo(e,'change:content',this.updateContent),this.listenTo(e,'change',this.handleChange),this.listenTo(e,'active',this.onActive),this.listenTo(e,'disable',this.onDisable),o.data('model',e),Object(h["setViewEl"])(s,this),e.view=this,this._getFrame()&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:1}),this.events=p(p({},this.events),{},{dragstart:'handleDragStart'}),this.delegateEvents(),!i.temporary&&this.init(this._clbObj())},__isDraggable:function(){var t=this.model,e=this.config,n=t.attributes.draggable;return e.draggableComponents&&n},_clbObj:function(){var t=this.em,e=this.model,n=this.el;return{editor:t&&t.getEditor(),model:e,el:n}},init:function(){},removed:function(){},onActive:function(){},onDisable:function(){},remove:function(){var t;s.a.View.prototype.remove.apply(this,arguments);var e=this.model,n=this.$el,r=e.views,i=this._getFrame()||{};return e.components().forEach((function(t){var e=t.getView(i.model);null==e||e.remove()})),null===(t=this.childrenView)||void 0===t||t.remove(),r.splice(r.indexOf(this),1),this.removed(this._clbObj()),n.data({model:'',collection:'',view:''}),this},handleDragStart:function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.get('Commands').run('tlb-move',{target:this.model,event:t})},initClasses:function(){var t=this.model,e='change:classes',n=t.get('classes');n instanceof u["a"]&&(this.stopListening(t,e,this.initClasses),this.listenTo(t,e,this.initClasses),this.listenTo(n,'add remove change',this.updateClasses),n.length&&this.importClasses())},initComponents:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.model,n=this.$el,r=this.childrenView,i='change:components',o=e.get('components'),s=[e,i,this.initComponents];o instanceof c["b"]&&(n.data('collection',o),r&&r.remove(),this.stopListening.apply(this,s),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,s))},handleChange:function(){var t=this.model,e=Object(a["keys"])(t.changed);if(1!==e.length||'status'!==e[0])for(var n in t.emitUpdate(),t.changed)t.emitUpdate(n)},importClasses:function(){var t=this.config.em.get('SelectorManager');t&&this.model.get('classes').each((function(e){t.add(e.get('name'))}))},updateStatus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.em,n=e?e.get('Canvas').getConfig():{},r=n.extHl,i=this.el,o=this.model.get('status'),s=this.ppfx,a="".concat(s,"selected"),c="".concat(a,"-parent"),l="".concat(s,"freezed"),u="".concat(s,"remote"),f="".concat(s,"hovered"),h=[a,c,l,f],d=r&&!t.noExtHl?'':a;this.$el.removeClass(h.join(' '));var p=i.getAttribute('class')||'',g='';switch(o){case'selected':g="".concat(p," ").concat(d);break;case'selected-parent':g="".concat(p," ").concat(c);break;case'freezed':g="".concat(p," ").concat(l);break;case'freezed-selected':g="".concat(p," ").concat(l," ").concat(d);break;case'freezed-remote-selected':g="".concat(p," ").concat(l," ").concat(u," ").concat(d," ");break;case'hovered':g=t.avoidHover?'':"".concat(p," ").concat(f)}(g=g.trim())&&i.setAttribute('class',g)},updateHighlight:function(){var t=this.model,e=t.get('textable'),n=t.get('highlightable')&&(e||!t.isChildOf('text'));this.setAttribute('data-gjs-highlightable',!!n||'')},updateStyle:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.model,i=this.em;if(i&&i.getConfig('avoidInlineStyle')&&!n.inline){var o=r.getStyle();!Object(a["isEmpty"])(o)&&r.setStyle(o)}else this.setAttribute('style',r.styleToString(n))},updateClasses:function(){var t=this.model.get('classes').pluck('name').join(' ');this.setAttribute('class',t),this.updateStatus(),this.onAttrUpdate()},setAttribute:function(t,e){var n=this.$el;e?n.attr(t,e):n.removeAttr(t)},getClasses:function(){return this.model.getClasses().join(' ')},updateAttributes:function(){var t=[],e=this.model,n=this.$el,r=this.el,i=e.attributes,o=i.textable,s=i.type,c=p(p({id:e.getId(),'data-gjs-type':s||'default'},this.__isDraggable()&&{draggable:!0}),o&&{contenteditable:'false'});Object(a["each"])(r.attributes,(function(e){return t.push(e.nodeName)})),t.forEach((function(t){return n.removeAttr(t)})),this.updateStyle(),this.updateHighlight();var l=p(p({},c),e.getAttributes());Object(a["keys"])(l).forEach((function(t){return!1===l[t]&&delete l[t]})),n.attr(l)},updateContent:function(){var t=this.model.get('content'),e=this.model.components().length;this.getChildrenContainer().innerHTML=e?'':t},prevDef:function(t){t.preventDefault()},updateScript:function(){var t=this.model,e=this.em;t.get('script')&&e&&e.get('Canvas').getCanvasView().updateScript(this)},getChildrenContainer:function(){var t=this.el;return'function'==typeof this.getChildrenSelector?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},getOffsetRect:function(){var t={},e=this.el,n=0,r=0;return function i(o){var s=o.offsetParent;s?(n+=s.offsetTop,r+=s.offsetLeft,i(s)):(t.top=e.offsetTop+n,t.left=e.offsetLeft+r,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)}(e),t},isInViewport:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.rect,n=this.el,r=n.ownerDocument,i=r.body,o=r.defaultView.frameElement,s=e||this.getOffsetRect(),a=s.top,c=s.left,l=this._getFrame().getOffsetRect();return a>=l.scrollTop&&c>=l.scrollLeft&&a<=l.scrollBottom&&c<=o.offsetWidth+i.scrollLeft},scrollIntoView:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getOffsetRect(),n=this.isInViewport({rect:e});if(!n||t.force){var r=this.el;'smooth'!==t.behavior?r.ownerDocument.defaultView.scrollTo(0,e.top):r.scrollIntoView(p({behavior:'smooth',block:'nearest'},t))}},reset:function(){var t=this.el;this.el='',this._ensureElement(),this._setData(),Object(f["m"])(t,this.el),this.render()},_setData:function(){var t=this.model,e=t.components();this.$el.data({model:t,collection:e,view:this})},_getFrame:function(){return this.config.frameView},renderChildren:function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new l["a"]({collection:this.model.get('components'),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var n=Array.prototype.slice.call(e.el.childNodes),r=0,i=n.length;r<i;r++)t.appendChild(n.shift())},renderAttributes:function(){this.updateAttributes(),this.updateClasses()},onAttrUpdate:function(){},render:function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),Object(h["setViewEl"])(this.el,this),this.postRender()),this},postRender:function(){this.modelOpt.temporary||this.onRender(this._clbObj())},onRender:function(){}})},function(t,e,n){"use strict";n.d(e,"k",(function(){return s})),n.d(e,"i",(function(){return a})),n.d(e,"l",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"j",(function(){return f})),n.d(e,"m",(function(){return h})),n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return p})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return v})),n.d(e,"e",(function(){return m})),n.d(e,"c",(function(){return y}));var r=n(0),i='tag',o='attributes',s='transitionend oTransitionEnd transitionend webkitTransitionEnd',a=function(t){return t&&9===t.nodeType},c=function(t){var e=t&&t.parentNode;e&&e.removeChild(t)},l=function(t,e){return t.querySelectorAll(e)},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&t.setAttribute&&Object(r["each"])(e,(function(e,n){return t.setAttribute(n,e)}))},f=function(t){return t&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},h=function(t,e){t.parentNode.replaceChild(e,t)},d=function(t,e,n){var i=t.childNodes,o=i.length,s=Object(r["isUndefined"])(n)?o:n;Object(r["isString"])(e)&&(t.insertAdjacentHTML('beforeEnd',e),e=t.lastChild,t.removeChild(e)),s>=o?t.appendChild(e):t.insertBefore(e,i[s])},p=function(t,e){return d(t,e)},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'',n=arguments.length>2?arguments[2]:void 0,i=document.createElement(t);return e&&Object(r["each"])(e,(function(t,e){return i.setAttribute(e,t)})),n&&(Object(r["isString"])(n)?i.innerHTML=n:i.appendChild(n)),i},v=function(t){return document.createTextNode(t)},m=function(t,e){var n,r=t.type;try{n=new window[e](r,t)}catch(t){(n=document.createEvent(e)).initEvent(r,!0,!0)}return n._parentEvent=t,0===r.indexOf('key')&&(n.keyCodeVal=t.keyCode,['keyCode','which'].forEach((function(t){Object.defineProperty(n,t,{get:function(){return this.keyCodeVal}})}))),n},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(e)?e:[e];n.forEach((function(e){var n=e[i]||'div',s=e[o]||{},a=document.createElement(n);Object(r["each"])(s,(function(t,e){a.setAttribute(e,t)})),t.appendChild(a)}))}},function(t,e){'function'==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports["default"]=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,function(t,e,n){"use strict";n.r(e),n.d(e,"myEditor",(function(){return q})),n.d(e,"myCurrentFrame",(function(){return G}));var r=n(2),i=n.n(r),o=n(0),s=n(30),a={stylePrefix:'gjs-',components:'',style:'',fromElement:0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:'900px',width:'100%',log:['warning','error'],baseCss:"\n    * {\n      box-sizing: border-box;\n    }\n    html, body, [data-gjs-type=wrapper] {\n      min-height: 100%;\n    }\n    body {\n      margin: 0;\n      height: 100%;\n      background-color: #fff\n    }\n    [data-gjs-type=wrapper] {\n      overflow: auto;\n      overflow-x: hidden;\n    }\n\n    * ::-webkit-scrollbar-track {\n      background: rgba(0, 0, 0, 0.1)\n    }\n\n    * ::-webkit-scrollbar-thumb {\n      background: rgba(255, 255, 255, 0.2)\n    }\n\n    * ::-webkit-scrollbar {\n      width: 10px\n    }\n  ",protectedCss:'* { box-sizing: border-box; } body {margin: 0;}',canvasCss:'',defaultCommand:'select-comp',showToolbar:1,showDevices:1,devicePreviewMode:0,mediaCondition:'max-width',tagVarStart:'{[ ',tagVarEnd:' ]}',keepEmptyTextNodes:0,jsInHtml:!0,nativeDnD:1,multipleSelection:1,exportWrapper:0,wrapperIsBody:1,optsHtml:{},optsCss:{},avoidInlineStyle:1,avoidDefaults:1,clearStyles:0,dragMode:0,listenToEl:[],cssIcons:'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css',icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>'},el:'',i18n:{},undoManager:{},assetManager:{},canvas:{},layers:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:'Code',keepUnusedStyles:0,multiFrames:0,customUI:!1},c=n(23),l=n.n(c),u=n(5),f=n.n(u),h=n(6),d=n.n(h),p=n(7),g=n.n(p),v=n(8),m=n.n(v),y=n(4),b=n.n(y),w=n(3),O=n.n(w),x=n(1);function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}var S=function(t){g()(n,t);var e=C(n);function n(){return f()(this,n),e.apply(this,arguments)}return d()(n)}(w["Model"]),k=function(t){g()(n,t);var e=C(n);function n(){return f()(this,n),e.apply(this,arguments)}return d()(n,[{key:"getByComponent",value:function(t){var e=this;return this.filter((function(n){return e.getComponent(n)===t}))[0]}},{key:"addComponent",value:function(t,e){var n=this,r=(Object(o["isArray"])(t)?t:[t]).filter((function(t){return!n.hasComponent(t)})).map((function(t){return{component:t}}));return this.push(r,e)}},{key:"getComponent",value:function(t){return t.get('component')}},{key:"hasComponent",value:function(t){var e=this.getByComponent(t);return e&&this.contains(e)}},{key:"lastComponent",value:function(){var t=this.last();return t&&this.getComponent(t)}},{key:"allComponents",value:function(){var t=this;return this.map((function(e){return t.getComponent(e)})).filter((function(t){return t}))}},{key:"removeComponent",value:function(t,e){var n=this,r=(Object(o["isArray"])(t)?t:[t]).map((function(t){return n.getByComponent(t)}));return this.remove(r,e)}}]),n}(w["Collection"]);k.prototype.model=S;var j=n(9),E=["unset"];function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}O.a.$=s["default"];var A,D,M=[n(217),n(218),n(221),n(172),n(213),n(211),n(214),n(204),n(212),n(215),n(210),n(208),n(219),n(205),n(216),n(70),n(206),n(203),n(220),n(209),n(222),n(207)];!function(t){var e=t.$;if(e&&e.prototype&&'jQuery'!==e.prototype.constructor.name){var n=e.fn;n.hide=function(){return this.css('display','none')},n.show=function(){return this.css('display','block')},n.focus=function(){var t=this.get(0);return t&&t.focus(),this},n.bind=function(t,e){return this.on(t,e)},n.unbind=function(t,e){if(Object(o["isObject"])(t)){for(var n in t)t.hasOwnProperty(n)&&this.off(n,t[n]);return this}return this.off(t,e)},n.click=function(t){return t?this.on('click',t):this.trigger('click')},n.change=function(t){return t?this.on('change',t):this.trigger('change')},n.keydown=function(t){return t?this.on('keydown',t):this.trigger('keydown')},n.delegate=function(t,e,n,r){return r||(r=n),this.on(e,t,(function(t){t.data=n,r(t)}))},n.scrollLeft=function(){var t=this.get(0),e=(t=9==t.nodeType?t.defaultView:t)instanceof Window?t:null;return e?e.pageXOffset:t.scrollLeft||0},n.scrollTop=function(){var t=this.get(0),e=(t=9==t.nodeType?t.defaultView:t)instanceof Window?t:null;return e?e.pageYOffset:t.scrollTop||0};var r=e.prototype.offset;n.offset=function(t){var e,n;return t&&(e=t.top,n=t.left),void 0!==e&&this.css('top',"".concat(e,"px")),void 0!==n&&this.css('left',"".concat(n,"px")),r.call(this)},e.map=function(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n};var i=Array.prototype.indexOf;e.inArray=function(t,e,n){return null==e?-1:i.call(e,t,n)},e.Event=function(t,n){if(!(this instanceof e.Event))return new e.Event(t,n);this.type=t,this.isDefaultPrevented=function(){return!1}}}}({Backbone:O.a,$:O.a.$});var L={debug:console.log,info:console.info,warning:console.warn,error:console.error},R=function(t){g()(n,t);var e=T(n);function n(){return f()(this,n),e.apply(this,arguments)}return d()(n,[{key:"defaults",value:function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:''}}},{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=e,this.set('Config',e),this.set('modules',[]),this.set('toLoad',[]),this.set('storables',[]),this.set('selected',new k),this.set('dmode',e.dragMode),this.set('hasPages',!!e.pageManager);var n=e.el,r=e.log,i=!0===r?Object(o["keys"])(L):Object(o["isArray"])(r)?r:[];Object(o["bindAll"])(this,'initBaseColorPicker'),n&&e.fromElement&&(this.config.components=n.innerHTML),this.attrsOrig=n?Object(o["toArray"])(n.attributes).reduce((function(t,e){return t[e.nodeName]=e.nodeValue,t}),{}):'',M.forEach((function(e){return t.loadModule(e)})),this.on('change:componentHovered',this.componentHovered,this),this.on('change:changesCount',this.updateChanges,this),this.on('change:readyLoad change:readyCanvas',this._checkReady,this),i.forEach((function(e){return t.listenLog(e)})),[{from:'change:selectedComponent',to:'component:toggled'}].forEach((function(e){var n=e.from,r=e.to;t.listenTo(t,n,(function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];t.trigger.apply(t,[r].concat(i)),t.logWarning("The event '".concat(n,"' is deprecated, replace it with '").concat(r,"'"))}))}))}},{key:"_checkReady",value:function(){this.get('readyLoad')&&this.get('readyCanvas')&&!this.get('ready')&&this.set('ready',!0)}},{key:"getContainer",value:function(){return this.config.el}},{key:"listenLog",value:function(t){this.listenTo(this,"log:".concat(t),L[t])}},{key:"getConfig",value:function(t){var e=this.config;return Object(o["isUndefined"])(t)?e:e[t]}},{key:"loadOnStart",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.get('StorageManager');this.get('toLoad').forEach((function(t){return t.onLoad()}));var i=function(){t.get('modules').forEach((function(e){return e.postLoad&&e.postLoad(t)})),t.set('readyLoad',1),e&&e()};r&&r.canAutoload()?this.load(i):setTimeout(i);var o=new n({noticeOnUnload:!1,storageManager:!1,undoManager:!1});['PageManager','Canvas'].forEach((function(t){return o.get(t).onLoad()})),this.set('shallow',o)}},{key:"updateChanges",value:function(){var t=this,e=this.get('StorageManager'),n=this.get('changesCount');D&&clearTimeout(D),D=setTimeout((function(){return t.trigger('update')})),this.config.noticeOnUnload&&(window.onbeforeunload=n?function(t){return 1}:null),e.isAutosave()&&n>=e.getStepsBeforeSave()&&this.store()}},{key:"loadModule",value:function(t){var e=this.config,n=new(t.default||t),r=n.name.charAt(0).toLowerCase()+n.name.slice(1),i=Object(o["isUndefined"])(e[r])?e[n.name]:e[r],s=!0===i?{}:i||{},a=this.get('StorageManager');if(s.pStylePrefix=e.pStylePrefix||'',Object(o["isUndefined"])(i)||i||(s._disable=1),n.storageKey&&n.store&&n.load&&a){s.stm=a;var c='domComponents'==r?'unshift':'push';this.get('storables')[c](n)}return s.em=this,n.init(P({},s)),!n.private&&this.set(n.name,n),n.onLoad&&this.get('toLoad').push(n),this.get('modules').push(n),this}},{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.destroyed&&(this.initialize(e),this.destroyed=0),this.set('Editor',t)}},{key:"getEditor",value:function(){return this.get('Editor')}},{key:"handleUpdates",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__skip||r.temporary||r.noCount||r.avoidStore||!this.get('ready')||(A&&clearTimeout(A),A=setTimeout((function(){var t=n.get('changesCount')||0,e=(r.unset,l()(r,E));n.set('changesCount',t+1,e)}),0))}},{key:"changesUp",value:function(t){this.handleUpdates(0,0,t)}},{key:"componentHovered",value:function(t,e,n){var r=this.previous('componentHovered');r&&this.trigger('component:unhovered',r,n),e&&this.trigger('component:hovered',e,n)}},{key:"getSelected",value:function(){return this.get('selected').lastComponent()}},{key:"getSelectedAll",value:function(){return this.get('selected').allComponents()}},{key:"setSelected",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.event,i=r&&(r.ctrlKey||r.metaKey),a=r||{},c=(a.shiftKey,Object(o["isArray"])(t)),l=(c?t:[t]).map((function(t){return Object(x["getModel"])(t,s["default"])})),u=this.getSelectedAll(),f=this.getConfig('multipleSelection');c&&this.removeSelected(u.filter((function(t){return!Object(o["contains"])(l,t)}))),l.forEach((function(t){var r=Object(x["getModel"])(t);if(r&&(e.trigger('component:select:before',r,n),!r.get('selectable')||n.abort)){if(!n.useValid)return;for(var o=r.parent();o&&!o.get('selectable');)o=o.parent();r=o}if(i&&f)return e.toggleSelected(r);!c&&e.removeSelected(u.filter((function(t){return t!==r}))),e.addSelected(r,n),r}))}},{key:"addSelected",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(x["getModel"])(t,s["default"]),i=Object(o["isArray"])(r)?r:[r];i.forEach((function(t){if(!t||t.get('selectable')){var r=e.get('selected');if(n.forceChange&&e.removeSelected(t,n),r.addComponent(t,n),t&&t.set('chooser',j["j"]),t&&e.trigger('component:select',t,n),t){var i={action:'select-component',opts:{id:t.getId(),username:j["j"]}};j["c"]==j["d"].Synced?(Object(j["h"])(j["d"].ApplyingLocalOp),Object(j["b"])(i)):j["c"]!=j["d"].AwaitingACK&&j["c"]!=j["d"].AwaitingWithBuffer||(Object(j["h"])(j["d"].ApplyingBufferedLocalOp),Object(j["a"])(i))}}}))}},{key:"removeSelected",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(x["getModel"])(t,s["default"]),r=Object(o["isArray"])(n)?n:[n];this.get('selected').removeComponent(n,e),r.forEach((function(t){if(t){t.set('chooser','');var e={action:'unselect-component',opts:{id:t.getId()}};j["c"]==j["d"].Synced?(Object(j["h"])(j["d"].ApplyingLocalOp),Object(j["b"])(e)):j["c"]!=j["d"].AwaitingACK&&j["c"]!=j["d"].AwaitingWithBuffer||(Object(j["h"])(j["d"].ApplyingBufferedLocalOp),Object(j["a"])(e))}}))}},{key:"toggleSelected",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(x["getModel"])(t,s["default"]),i=Object(o["isArray"])(r)?r:[r];i.forEach((function(t){e.get('selected').hasComponent(t)?e.removeSelected(t,n):e.addSelected(t,n)}))}},{key:"setHovered",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return this.set('componentHovered','');var n='component:hover',r=Object(x["getModel"])(t);if(r){if(e.forceChange&&this.set('componentHovered',''),this.trigger("".concat(n,":before"),r,e),!r.get('hoverable')){if(!e.useValid||e.abort)return;for(var i=r&&r.parent();i&&!i.get('hoverable');)i=i.parent();r=i}e.abort||(this.set('componentHovered',r,e),this.trigger(n,r,e))}}},{key:"getHovered",value:function(){return this.get('componentHovered')}},{key:"setComponents",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.get('DomComponents').setComponents(t,e)}},{key:"getComponents",value:function(){var t=this.get('DomComponents'),e=this.get('CodeManager');if(t&&e){var n=t.getComponents();return e.getCode(n,'json')}}},{key:"setStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get('CssComposer');return n.clear(e),n.getAll().add(t,e),this}},{key:"addStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getStyle().add(t,e);return Object(o["isArray"])(n)?n:[n]}},{key:"getStyle",value:function(){return this.get('CssComposer').getAll()}},{key:"setState",value:function(t){return this.set('state',t),this}},{key:"getState",value:function(){return this.get('state')||''}},{key:"getHtml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.config,n=e.optsHtml,r=e.exportWrapper,i=e.wrapperIsBody,o=e.jsInHtml?this.getJs(t):'',s=t.component||this.get('DomComponents').getComponent(),a=s?this.get('CodeManager').getCode(s,'html',P(P({exportWrapper:r,wrapperIsBody:i},n),t)):'';return a+=o?"<script>".concat(o,"<\/script>"):''}},{key:"getCss",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.config,n=e.optsCss,r=e.wrapperIsBody,i=t.avoidProtected,s=Object(o["isUndefined"])(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,a=this.get('CssComposer'),c=t.component||this.get('DomComponents').getComponent(),l=i?'':e.protectedCss,u=c&&this.get('CodeManager').getCode(c,'css',P(P({cssc:a,wrapperIsBody:r,keepUnusedStyles:s},n),t));return c?t.json?u:l+u:''}},{key:"getJs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.component||this.get('DomComponents').getWrapper();return e?this.get('CodeManager').getCode(e,'js').trim():''}},{key:"store",value:function(t){var e=this,n=this.get('StorageManager');if(n){var r=this.storeData();return n.store(r,(function(n){t&&t(n,r),e.set('changesCount',0),e.trigger('storage:store',r)})),r}}},{key:"storeVersion",value:function(t,e){var n=this,r=this.get('StorageManager');if(r){var i=this.storeData();return r.storeVersion(i,e,(function(e){t&&t(e,i),n.set('changesCount',0),n.trigger('storage:store',i)})),i}}},{key:"storeData",value:function(){var t={},e=this.getEditing();return e&&e.trigger('sync:content',{noCount:!0}),this.get('storables').forEach((function(e){t=P(P({},t),e.store(1))})),t}},{key:"load",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getCacheLoad(1,(function(n){t.loadData(n),e&&e(n)}))}},{key:"loadData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.get('StorageManager'),r=n.__clearKeys(e);return this.get('storables').forEach((function(e){e.load(r),e.postLoad&&e.postLoad(t)})),r}},{key:"getCacheLoad",value:function(t,e){var n=this;if(this.cacheLoad&&!t)return this.cacheLoad;var r=this.get('StorageManager'),i=[];if(!r)return{};this.get('storables').forEach((function(t){var e=t.storageKey;e=Object(o["isFunction"])(e)?e():e,(Object(o["isArray"])(e)?e:[e]).forEach((function(t){return i.push(t)}))})),r.load(i,(function(t){n.cacheLoad=t,e&&e(t),setTimeout((function(){return n.trigger('storage:load',t)}))}))}},{key:"getDeviceModel",value:function(){var t=this.get('device');return this.get('DeviceManager').get(t)}},{key:"runDefault",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.get('Commands').get(this.config.defaultCommand);e&&!this.defaultRunning&&(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=1)}},{key:"stopDefault",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.get('Commands'),n=e.get(this.config.defaultCommand);n&&this.defaultRunning&&(n.stop(this,this,t),this.defaultRunning=0)}},{key:"refreshCanvas",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.set('canvasOffset',null),this.set('canvasOffset',this.get('Canvas').getOffset()),t.tools&&this.trigger('canvas:updateTools')}},{key:"clearSelection",value:function(t){(t||window).getSelection().removeAllRanges()}},{key:"getCurrentMedia",value:function(){var t=this.config,e=this.getDeviceModel(),n=t.mediaCondition,r=t.devicePreviewMode,i=e&&e.get('widthMedia');return e&&i&&!r?"(".concat(n,": ").concat(i,")"):''}},{key:"getWrapper",value:function(){return this.get('DomComponents').getWrapper()}},{key:"setCurrentFrame",value:function(t){return this.set('currentFrame',t)}},{key:"getCurrentFrame",value:function(){return this.get('currentFrame')}},{key:"getCurrentFrameModel",value:function(){return(this.getCurrentFrame()||{}).model}},{key:"getDirtyCount",value:function(){return this.get('changesCount')}},{key:"getZoomDecimal",value:function(){return this.get('Canvas').getZoomDecimal()}},{key:"getZoomMultiplier",value:function(){return this.get('Canvas').getZoomMultiplier()}},{key:"setDragMode",value:function(t){return this.set('dmode',t)}},{key:"t",value:function(){for(var t=this.get('I18n'),e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t?void 0:t.t.apply(t,n)}},{key:"inAbsoluteMode",value:function(){return'absolute'===this.get('dmode')}},{key:"destroyAll",value:function(){var t=this,e=this.config,n=this.view,r=this.getEditor(),i=(e.grapesjs||{}).editors,o=void 0===i?[]:i,a=this.get('shallow');null==a||a.destroyAll(),this.stopListening(),this.stopDefault(),this.get('modules').slice().reverse().forEach((function(t){return t.destroy()})),n&&n.remove(),this.clear({silent:!0}),this.destroyed=1,['config','view','_previousAttributes','_events','_listeners'].forEach((function(e){return t[e]={}})),o.splice(o.indexOf(r),1),Object(x["hasWin"])()&&Object(s["default"])(e.el).empty().attr(this.attrsOrig)}},{key:"getEditing",value:function(){var t=this.get('editing');return t&&t.model||null}},{key:"setEditing",value:function(t){return this.set('editing',t),this}},{key:"isEditing",value:function(){return!!this.get('editing')}},{key:"log",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.ns,r=e.level,i=void 0===r?'debug':r;if(this.trigger('log',t,e),i&&this.trigger("log:".concat(i),t,e),n){var o="log-".concat(n);this.trigger(o,t,e),i&&this.trigger("".concat(o,":").concat(i),t,e)}}},{key:"logInfo",value:function(t,e){this.log(t,P(P({},e),{},{level:'info'}))}},{key:"logWarning",value:function(t,e){this.log(t,P(P({},e),{},{level:'warning'}))}},{key:"logError",value:function(t,e){this.log(t,P(P({},e),{},{level:'error'}))}},{key:"initBaseColorPicker",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getConfig(),r=n.colorPicker,i=void 0===r?{}:r,o=n.el,a=n.stylePrefix;return Object(s["default"])(t).spectrum(P(P({containerClassName:"".concat(a,"one-bg ").concat(a,"two-color"),appendTo:o||'body',maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:'Ok',cancelText:'⨯'},e),i))}},{key:"skip",value:function(t){this.__skip=!0;var e=this.get('UndoManager');e?e.skip(t):t(),this.__skip=!1}},{key:"data",value:function(t,e,n){var r='_gjs-data';if(t[r]||(t[r]={}),Object(o["isUndefined"])(n))return t[r][e];t[r][e]=n}}]),n}(w["Model"]);function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}var I=O.a.$,F=function(t){g()(n,t);var e=N(n);function n(){return f()(this,n),e.apply(this,arguments)}return d()(n,[{key:"initialize",value:function(){var t=this,e=this.model;e.view=this,this.conf=e.config,this.pn=e.get('Panels'),this.cv=e.get('Canvas'),e.once('change:ready',(function(){t.pn.active(),t.pn.disableButtons(),setTimeout((function(){e.trigger('load',e.get('Editor')),e.set('changesCount',0)}))}))}},{key:"render",value:function(){var t=this.$el,e=this.conf,n=this.model,r=e.stylePrefix,i=I(e.el||"body ".concat(e.container));Object(x["appendStyles"])(e.cssIcons,{unique:1,prepand:1}),t.empty(),e.width&&i.css('width',e.width),e.height&&i.css('height',e.height),t.append(this.cv.render()),t.append(this.pn.render());var o=n.get('shallow').get('Canvas').render();return o.style.display='none',t.append(o),t.attr('class',"".concat(r,"editor ").concat(r,"one-bg ").concat(r,"two-color")),i.addClass("".concat(r,"editor-cont")).empty().append(t),this}}]),n}(w["View"]),B=n(20);n(27);function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.$,r=U(U({},a),t);r.pStylePrefix=r.stylePrefix;var i,o=new R(r);return{$:n,editor:o,modules:[],init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.init(this,U(U({},r),e)),this.modules=['I18n','Utils','Config','Commands','Keymaps','Modal','Panels','Canvas','Parser','CodeManager','UndoManager','RichTextEditor',['Pages','PageManager'],'DomComponents',['Components','DomComponents'],'LayerManager',['Layers','LayerManager'],'CssComposer',['Css','CssComposer'],'StorageManager',['Storage','StorageManager'],'AssetManager',['Assets','AssetManager'],'BlockManager',['Blocks','BlockManager'],'TraitManager',['Traits','TraitManager'],'SelectorManager',['Selectors','SelectorManager'],'StyleManager',['Styles','StyleManager'],'DeviceManager',['Devices','DeviceManager']],this.modules.forEach((function(e){Array.isArray(e)?t[e[0]]=o.get(e[1]):t[e]=o.get(e)})),o.once('change:ready',(function(){t.UndoManager.clear(),o.get('modules').forEach((function(t){t.postRender&&t.postRender(i)}))})),this},disconnectWS:function(){try{j["i"].disconnect(),Object(j["g"])(!1)}catch(t){console.log('err: ',t),console.log('not connected!!!')}},getConfig:function(t){return o.getConfig(t)},getHtml:function(t){return o.getHtml(t)},getCss:function(t){return o.getCss(t)},getJs:function(t){return o.getJs(t)},getComponents:function(){return o.get('DomComponents').getComponents()},getWrapper:function(){return o.get('DomComponents').getWrapper()},setComponents:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.setComponents(t,e),this},addComponents:function(t,e){return this.getWrapper().append(t,e)},getStyle:function(){return o.get('CssComposer').getAll()},setStyle:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.setStyle(t,e),this},addStyle:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.addStyle(t,e)},getSelected:function(){return o.getSelected()},getSelectedAll:function(){return o.getSelectedAll()},getSelectedToStyle:function(){var t=o.getSelected();if(t)return this.StyleManager.getModelToStyle(t)},select:function(t,e){return o.setSelected(t,e),this},selectAdd:function(t){return o.addSelected(t),this},selectRemove:function(t){return o.removeSelected(t),this},selectToggle:function(t){return o.toggleSelected(t),this},getEditing:function(){return o.getEditing()},setDevice:function(t){return o.set('device',t),this},getDevice:function(){return o.get('device')},runCommand:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.get('Commands').run(t,e)},stopCommand:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.get('Commands').stop(t,e)},store:function(t){return o.store(t)},storeVersion:function(t,e){return o.storeVersion(t,e)},storeData:function(){return o.storeData()},load:function(t){return o.load(t)},loadData:function(t){return o.loadData(t)},getContainer:function(){return r.el},getDirtyCount:function(){return o.getDirtyCount()},refresh:function(t){o.refreshCanvas(t)},setCustomRte:function(t){this.RichTextEditor.customRte=t},setCustomParserCss:function(t){return this.Parser.getConfig().parserCss=t,this},setDragMode:function(t){return o.setDragMode(t),this},log:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.log(t,e),this},t:function(){var t;return(t=o).t.apply(t,arguments)},on:function(t,e){return o.on(t,e),this},once:function(t,e){return o.once(t,e),this},off:function(t,e){return o.off(t,e),this},trigger:function(t){return o.trigger.apply(o,arguments),this},destroy:function(){var t=this;o&&(o.destroyAll(),this.modules.forEach((function(e){Array.isArray(e)?t[e[0]]=0:t[e]=0})),this.modules=0,i=0,o=0,r=0)},getEl:function(){return i&&i.el},getModel:function(){return o},render:function(){return i&&i.remove(),(i=new F({model:o,config:r})).render().el},onReady:function(t){o.get('ready')?t(this):o.on('load',t)},html:B["a"]}},H={plugins:[]};function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(){if(Object(x["hasWin"])()&&function(){for(var t,e=window.navigator.userAgent,n=[['edge',/Edge\/([0-9\._]+)/],['ie',/MSIE\s(7\.0)/],['ie',/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],['ie',/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],r=0;r<n.length;r++){if(t=n[r][1].exec(e))break}return!!t}()){var t=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(e){return e||(e=''),t.apply(document.implementation,[e])}}}();var q=null,G=null,K=new function(t){var e=t||{};for(var n in H)n in e||(e[n]=H[n]);var r={};return{add:function(t,e){return r[t]?r[t]:(r[t]=e,e)},get:function(t){return r[t]},getAll:function(){return r}}},Y=[],J={autorender:1,plugins:[],pluginsOpts:{}};e["default"]={$:s["default"],editors:Y,plugins:K,version:'0.18.684',init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log('isConnected: ',j["f"]),!j["f"]&&t.isCollab&&t.noteId&&t.email&&t.username&&(console.log('is going to connect!!'),Object(j["e"])(t.noteId,t.email,t.username,t.setQueue));var e=t,n=e.headless,r=t.container;if(!r&&!n)throw new Error("'container' is required");(t=$($($({},J),t),{},{grapesjs:this})).el=!n&&(Object(o["isElement"])(r)?r:document.querySelector(r));var i=new z(t,{$:s["default"]}).init(),a=i.getModel();t.plugins.forEach((function(e){var n=Object(o["isFunction"])(e)?e:K.get(e),r=t.pluginsOpts[e]||{};if(!n){var s=Object(x["getGlobal"])()[e];n=(null==s?void 0:s.default)||s}n?n(i,r):Object(o["isFunction"])(e)?e(i,r):a.logWarning("Plugin ".concat(e," not found"),{context:'plugins',plugin:e})})),a.loadOnStart(),t.autorender&&!n&&i.render(),Y.push(i);var c=i.getWrapper();return c.set('attributes',{id:'Hello!'}),G=(q=i).getModel().getCurrentFrame(),i}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1);function i(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var o=t.raw;return o.reduce((function(t,e,i){var s=n[i-1],a=o[i-1];return Array.isArray(s)?s=s.join(''):a&&'$'===a.slice(-1)?t=t.slice(0,-1):s=Object(r["escape"])(s),t+s+e}))}},function(t,e){t.exports=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){"use strict";var r,i=n(90),o=Object.prototype.toString,s=(r=Object.create(null),function(t){var e=o.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())});function a(t){return t=t.toLowerCase(),function(e){return s(e)===t}}function c(t){return Array.isArray(t)}function l(t){return void 0===t}var u=a('ArrayBuffer');function f(t){return null!==t&&'object'==typeof t}function h(t){if('object'!==s(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var d=a('Date'),p=a('File'),g=a('Blob'),v=a('FileList');function m(t){return'[object Function]'===o.call(t)}var y=a('URLSearchParams');function b(t,e){if(null!=t)if('object'!=typeof t&&(t=[t]),c(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var w,O=(w='undefined'!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(t){return w&&t instanceof w});t.exports={isArray:c,isArrayBuffer:u,isBuffer:function(t){return null!==t&&!l(t)&&null!==t.constructor&&!l(t.constructor)&&'function'==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){var e='[object FormData]';return t&&('function'==typeof FormData&&t instanceof FormData||o.call(t)===e||m(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return'undefined'!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&u(t.buffer)},isString:function(t){return'string'==typeof t},isNumber:function(t){return'number'==typeof t},isObject:f,isPlainObject:h,isUndefined:l,isDate:d,isFile:p,isBlob:g,isFunction:m,isStream:function(t){return f(t)&&m(t.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return('undefined'==typeof navigator||'ReactNative'!==navigator.product&&'NativeScript'!==navigator.product&&'NS'!==navigator.product)&&('undefined'!=typeof window&&'undefined'!=typeof document)},forEach:b,merge:function t(){var e={};function n(n,r){h(e[r])&&h(n)?e[r]=t(e[r],n):h(n)?e[r]=t({},n):c(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)b(arguments[r],n);return e},extend:function(t,e,n){return b(e,(function(e,r){t[r]=n&&'function'==typeof e?i(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,'')},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)},toFlatObject:function(t,e,n){var r,i,o,s={};e=e||{};do{for(i=(r=Object.getOwnPropertyNames(t)).length;i-- >0;)s[o=r[i]]||(e[o]=t[o],s[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:s,kindOfTest:a,endsWith:function(t,e,n){t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return-1!==r&&r===n},toArray:function(t){if(!t)return null;var e=t.length;if(l(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n},isTypedArray:O,isFileList:v}},function(t,e,n){var r=n(166);t.exports=function(t,e){if(null==t)return{};var n,i,o=r(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){"use strict";n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return w})),n.d(e,"g",(function(){return O})),n.d(e,"f",(function(){return x})),n.d(e,"a",(function(){return C}));var r=n(16),i=n.n(r),o=n(12),s=n.n(o),a=n(23),c=n.n(a),l=n(2),u=n.n(l),f=n(3),h=n.n(f),d=n(0),p=n(11),g=["at"];function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];var r=Object(d["isArray"])(e)||Object(d["isFunction"])(e.map)?e:[e];return r.map((function(e){n.push(e.getId()),t(e.components().models,n)})),n},b=function t(e){(Object(d["isArray"])(e)||Object(d["isFunction"])(e.map)?e:[e]).map((function(e){e.set('attributes',{id:e.getId()}),t(e.components().models)}))},w=function t(e,n){(Object(d["isArray"])(e)||Object(d["isFunction"])(e.map)?e:[e]).map((function(e){var r=n.shift();e.set('attributes',{id:r}),t(e.components().models,n)}))},O=function t(e,n){(Object(d["isArray"])(e)||Object(d["isFunction"])(e.map)?e:[e]).map((function(e){e.get('chooser')==n&&(e.set('status',''),e.set('chooser','')),t(e.components().models)}))},x=function t(e){(Object(d["isArray"])(e)||Object(d["isFunction"])(e.map)?e:[e]).map((function(e){e.get('chooser').length>0&&e.set('status','freezed-remote-selected'),t(e.components().models)}))},C=function t(e){(Object(d["isArray"])(e)||Object(d["isFunction"])(e.map)?e:[e]).map((function(e){e.get('chooser').length>0&&'selected'!=e.get('status')&&'freezed-remote-selected'!=e.get('status')&&e.set('chooser',''),t(e.components().models)}))},S=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object(d["isArray"])(e)?e:[e];return i.map((function(e){var i=e.attributes,o=void 0===i?{}:i,s=e.components,a=e.tagName,c=o.id,l=e;if(c&&n[c]&&(l=n[c],a&&l.set({tagName:a},m(m({},r),{},{silent:!0}))),s){var u=t(s,n);if(Object(d["isFunction"])(l.components)){var f=l.components();f.length>0&&f.reset(u,r)}else l.components=u}return l}))};e["b"]=h.a.Collection.extend({initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.opt=e,this.listenTo(this,'add',this.onAdd),this.listenTo(this,'remove',this.removeChildren),this.listenTo(this,'reset',this.resetChildren);var n=e.em,r=e.config;this.config=r,this.em=n,this.domc=e.domc||n&&n.get('DomComponents')},resetChildren:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,i=n.previousModels||[],o=i.filter((function(e){return!t.get(e.cid)})),s=y(t);n.keepIds=y(i).filter((function(t){return s.indexOf(t)>=0})),o.forEach((function(t){return e.removeChildren(t,r,n)})),t.each((function(t){return e.onAdd(t)}))},resetFromString:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'',n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.keepIds=y(this);var r=this.domc,i=(null==r?void 0:r.allById())||{},o=this.parseString(e,n),s=Object(d["isArray"])(o)?o:[o],a=S(s,i,n);this.reset(a,n),null===(t=this.em)||void 0===t||t.trigger('component:content',this.parent,n,e)},removeChildren:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t){var i=this.domc,o=this.em,s=r.temporary||r.fromUndo;if(t.prevColl=this,!s){var a=t.getId(),c=o.get('SelectorManager').getAll(),l=o.get('CssComposer').getAll(),u=(r.keepIds||[]).indexOf(a)<0,f=i?i.allById():{};delete f[a];var h=u?l.remove(l.filter((function(t){return t.getSelectors().getFullString()==="#".concat(a)})),r):[];c.remove(h.map((function(t){return t.getSelectors().at(0)}))),t.opt.temporary||(o.get('Commands').run('core:component-style-clear',{target:t}),t.removed(),t.trigger('removed'),o.trigger('component:remove',t));var d=t.components();d.forEach((function(t){return n.removeChildren(t,e,r)}))}var p=t.components();o.stopListening(p),o.stopListening(t),o.stopListening(t.get('classes')),t.__postRemove()}},model:function(t,e){var n,r=e.collection.opt,i=r.em,o=i.get('DomComponents').componentTypes;e.em=i,e.config=r.config,e.componentTypes=o,e.domc=r.domc;for(var s=0;s<o.length;s++){if(o[s].id==t.type){n=o[s].model;break}}return n||(n=o[o.length-1].model,i&&t.type&&i.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new n(t,e)},parseString:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.em,r=this.domc,i=n.get('CssComposer'),o=n.get('Parser').parseHtml(t);if(p["a"].checkId(o.html,o.css,r.componentsById,e),o.css&&i&&!e.temporary){e.at;var s=c()(e,g);i.addCollection(o.css,m(m({},s),{},{extend:1}))}return o.html},add:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.keepIds=[].concat(s()(n.keepIds||[]),s()(y(n.previousModels))),Object(d["isString"])(t)?t=this.parseString(t,n):Object(d["isArray"])(t)&&(t=s()(t)).forEach((function(r,i){if(Object(d["isString"])(r)){var o=e.parseString(r,n);t[i]=Object(d["isArray"])(o)&&!o.length?null:o}}));var r=Object(d["isArray"])(t);t=(r?t:[t]).filter((function(t){return t})).map((function(t){return e.processDef(t)})),t=r?Object(d["flatten"])(t,1):t[0];var i=h.a.Collection.prototype.add.apply(this,[t,n]);return this.__firstAdd=i,i},processDef:function(t){if(t.cid&&t.ccid)return t;var e=this.em,n=this.config,r=(void 0===n?{}:n).processor,o=t;if(r){var s=r(o=m({},o));s&&(Object(d["each"])(o,(function(t,e){return delete o[e]})),Object(d["extend"])(o,s))}if(o.$$typeof&&'object'==i()(o.props)){(o=m({},o)).props=m({},o.props);var a=e.get('DomComponents'),c=e.get('Parser').parserHtml;Object(d["each"])(o,(function(t,e){Object(d["includes"])(['props','type'],e)||delete o[e]}));var l=o.props,u=l.children;delete l.children,delete o.props;var f=c.splitPropsFromAttr(l);o.attributes=f.attrs,u&&(o.components=u),o.type?a.getType(o.type)||(o.tagName=o.type,delete o.type):o.type='textnode',Object(d["extend"])(o,f.props)}return o},onAdd:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.domc,i=this.em,o=t.getStyle(),s=i&&i.getConfig('avoidInlineStyle');if(r&&r.Component.ensureInList(t),!Object(d["isEmpty"])(o)&&!s&&i&&i.get&&i.getConfig('forceClass')&&!n.temporary){var a=t.cid;i.get('CssComposer').setClassRule(a,o);t.setStyle({}),t.addClass(a)}t.__postAdd({recursive:1}),this.__onAddEnd()},__onAddEnd:Object(d["debounce"])((function(){}))})},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(5),i=n.n(r),o=n(6),s=n.n(o),a=n(7),c=n.n(a),l=n(8),u=n.n(l),f=n(4),h=n.n(f),d=n(3),p=n(0);function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u()(this,n)}}var v=1,m=2,y=function(t){c()(n,t);var e=g(n);function n(){return i()(this,n),e.apply(this,arguments)}return s()(n,[{key:"defaults",value:function(){return{name:'',label:'',type:v,active:!0,private:!1,protected:!1,_undo:!0}}},{key:"initialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.config,i=void 0===r?{}:r,o=this.get('name'),s=this.get('label');o?s||this.set('label',o):this.set('name',s);var a=this.get('name'),c=i.escapeName,l=c?c(a):n.escapeName(a);this.set('name',l),this.em=i.em}},{key:"isId",value:function(){return this.get('type')===m}},{key:"isClass",value:function(){return this.get('type')===v}},{key:"getFullName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.escape,n=this.get('name'),r='';switch(this.get('type')){case v:r='.';break;case m:r='#'}return r+(e?e(n):n)}},{key:"toString",value:function(){return this.getFullName()}},{key:"getLabel",value:function(){return this.get('label')}},{key:"setLabel",value:function(t){return this.set('label',t)}},{key:"getActive",value:function(){return this.get('active')}},{key:"setActive",value:function(t){return this.set('active',t)}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.em,n=d["Model"].prototype.toJSON.call(this,[t]),r=Object(p["result"])(this,'defaults');if(e&&e.getConfig('avoidDefaults')){Object(p["forEach"])(r,(function(t,e){n[e]===t&&delete n[e]})),n.label===n.name&&delete n.label;var i=Object(p["keys"])(n).length;1===i&&n.name&&(n=n.name),2===i&&n.name&&n.type&&(n=this.getFullName())}return n}}]),n}(d["Model"]);y.prototype.idAttribute='name',y.TYPE_CLASS=v,y.TYPE_ID=m,y.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w-\:]+)/gi,'-')}},function(t,e,n){"use strict";var r=n(15),i=n(77);function o(){i.call(this)}r(o,i),o.prototype.removeAllListeners=function(t){t?delete this._listeners[t]:this._listeners={}},o.prototype.once=function(t,e){var n=this,r=!1;this.on(t,(function i(){n.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}))},o.prototype.emit=function(){var t=arguments[0],e=this._listeners[t];if(e){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<e.length;o++)e[o].apply(this,r)}},o.prototype.on=o.prototype.addListener=i.prototype.addEventListener,o.prototype.removeListener=i.prototype.removeEventListener,t.exports.EventEmitter=o},function(t,e){var n='~',r='\\x'+('0'+n.charCodeAt(0).toString(16)).slice(-2),i='\\'+r,o=new RegExp(r,'g'),s=new RegExp(i,'g'),a=new RegExp('(?:^|([^\\\\]))'+i),c=[].indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},l=String;function u(t,e,r){return e instanceof Array?function(t,e,n){for(var r=0,i=e.length;r<i;r++)e[r]=u(t,e[r],n);return e}(t,e,r):e instanceof l?e.length?r.hasOwnProperty(e)?r[e]:r[e]=function(t,e){for(var r=0,i=e.length;r<i;t=t[e[r++].replace(s,n)]);return t}(t,e.split(n)):t:e instanceof Object?function(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(e[r]=u(t,e[r],n));return e}(t,e,r):e}var f={stringify:function(t,e,s,a){return f.parser.stringify(t,function(t,e,s){var a,l,u=!1,f=!!e,h=[],d=[t],p=[t],g=[s?n:'[Circular]'],v=t,m=1;return f&&(l='object'==typeof e?function(t,n){return''!==t&&e.indexOf(t)<0?void 0:n}:e),function(t,e){return f&&(e=l.call(this,t,e)),u?(v!==this&&(a=m-c.call(d,this)-1,m-=a,d.splice(m,d.length),h.splice(m-1,h.length),v=this),'object'==typeof e&&e?(c.call(d,e)<0&&d.push(v=e),m=d.length,(a=c.call(p,e))<0?(a=p.push(e)-1,s?(h.push((''+t).replace(o,r)),g[a]=n+h.join(n)):g[a]=g[0]):e=g[a]):'string'==typeof e&&s&&(e=e.replace(r,i).replace(n,r))):u=!0,e}}(t,e,!a),s)},parse:function(t,e){return f.parser.parse(t,function(t){return function(e,o){var s='string'==typeof o;return s&&o.charAt(0)===n?new l(o.slice(1)):(''===e&&(o=u(o,o,{})),s&&(o=o.replace(a,'$1'+n).replace(i,r)),t?t.call(this,e,o):o)}}(e))},parser:JSON};t.exports=f},function(t,e,n){"use strict";var r=n(76);t.exports={getOrigin:function(t){if(!t)return null;var e=new r(t);if('file:'===e.protocol)return null;var n=e.port;return n||(n='https:'===e.protocol?'443':'80'),e.protocol+'//'+e.hostname+':'+n},isOriginEqual:function(t,e){var n=this.getOrigin(t)===this.getOrigin(e);return n},isSchemeEqual:function(t,e){return t.split(':')[0]===e.split(':')[0]},addPath:function(t,e){var n=t.split('?');return n[0]+e+(n[1]?'?'+n[1]:'')},addQuery:function(t,e){return t+(-1===t.indexOf('?')?'?'+e:'&'+e)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(5),i=n.n(r),o=n(6),s=n.n(o),a=n(7),c=n.n(a),l=n(8),u=n.n(l),f=n(4),h=n.n(f),d=n(0),p=n(3),g=n(25);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u()(this,n)}}var m=function t(e,n){return e.reduce((function(r,i,o){return r.concat(t(e.slice(o+1),"".concat(n).concat(i)))}),[n])},y=function(t){c()(n,t);var e=v(n);function n(){return i()(this,n),e.apply(this,arguments)}return s()(n,[{key:"modelId",value:function(t){return"".concat(t.name,"_").concat(t.type||g["a"].TYPE_CLASS)}},{key:"getStyleable",value:function(){return Object(d["filter"])(this.models,(function(t){return t.get('active')&&!t.get('private')}))}},{key:"getValid",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.noDisabled;return Object(d["filter"])(this.models,(function(t){return!t.get('private')})).filter((function(t){return e?t.get('active'):1}))}},{key:"getFullString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=t||this;return r.forEach((function(t){return n.push(t.getFullName(e))})),n.join('').trim()}},{key:"getFullName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.combination,n=t.array,r=[],i=this.map((function(e){return e.getFullName(t)})).sort();return e?i.forEach((function(t,e){r=r.concat(m(i.slice(e+1),t))})):r=i,n?r:e?r.join(','):r.join('')}}]),n}(p["Collection"]);y.prototype.model=g["a"]},function(t,e,n){"use strict";n.r(e);var r='undefined'!=typeof document?document:null,i='undefined'!=typeof window?window:null,o=Array.prototype,s=o.filter,a=o.indexOf,c=o.map,l=o.push,u=o.reverse,f=o.slice,h=o.splice,d=/^#[\w-]*$/,p=/^\.[\w-]*$/,g=/<.+>/,v=/^\w+$/;function m(t,e){return void 0===e&&(e=r),p.test(t)?e.getElementsByClassName(t.slice(1)):v.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t)}function y(t,e){if(void 0===e&&(e=r),t){if(t.__cash)return t;var n=t;if(_(t)){if(e.__cash&&(e=e[0]),!(n=d.test(t)?e.getElementById(t.slice(1)):g.test(t)?dt(t):m(t,e)))return}else if(E(t))return this.ready(t);(n.nodeType||n===i)&&(n=[n]),this.length=n.length;for(var o=0,s=this.length;o<s;o++)this[o]=n[o]}}function b(t,e){return new y(t,e)}var w=b.fn=b.prototype=y.prototype={constructor:b,__cash:!0,length:0,splice:h};w.get=function(t){return void 0===t?f.call(this):this[t<0?t+this.length:t]},w.eq=function(t){return b(this.get(t))},w.first=function(){return this.eq(0)},w.last=function(){return this.eq(-1)},w.map=function(t){return b(c.call(this,(function(e,n){return t.call(e,n,e)})))},w.slice=function(){return b(f.apply(this,arguments))};var O=/(?:^\w|[A-Z]|\b\w)/g,x=/[\s-_]+/g;function C(t){return t.replace(O,(function(t,e){return t[e?'toUpperCase':'toLowerCase']()})).replace(x,'')}function S(t,e){for(var n=0,r=t.length;n<r&&!1!==e.call(t[n],t[n],n,t);n++);}b.camelCase=C,b.each=S,w.each=function(t){return S(this,(function(e,n){return t.call(e,n,e)})),this},w.removeProp=function(t){return this.each((function(e,n){delete n[t]}))},b.extend=w.extend=function(t){void 0===t&&(t=this);for(var e=arguments,n=e.length,r=n<2?0:1;r<n;r++)for(var i in e[r])t[i]=e[r][i];return t};var k=1;function j(t,e){var n=t&&(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector);return!!n&&n.call(t,e)}function E(t){return'function'==typeof t}function _(t){return'string'==typeof t}function P(t){return!isNaN(parseFloat(t))&&isFinite(t)}b.guid=k,b.matches=j,b.isFunction=E,b.isString=_,b.isNumeric=P;var T=Array.isArray;function A(t){return _(t)?function(e,n){return j(n,t)}:t.__cash?function(e,n){return t.is(n)}:function(t,e,n){return e===n}}b.isArray=T,w.prop=function(t,e){if(t){if(_(t))return arguments.length<2?this[0]&&this[0][t]:this.each((function(n,r){r[t]=e}));for(var n in t)this.prop(n,t[n]);return this}},w.filter=function(t){if(!t)return b();var e=E(t)?t:A(t);return b(s.call(this,(function(n,r){return e.call(n,r,n,t)})))};var D=/\S+/g;function M(t){return _(t)&&t.match(D)||[]}function L(t){return t.filter((function(t,e,n){return n.indexOf(t)===e}))}function R(t,e,n){if(1===t.nodeType){var r=i.getComputedStyle(t,null);return e?n?r.getPropertyValue(e):r[e]:r}}function N(t,e){return parseInt(R(t,e),10)||0}w.hasClass=function(t){var e=M(t),n=!1;return e.length&&this.each((function(t,r){return!(n=r.classList.contains(e[0]))})),n},w.removeAttr=function(t){var e=M(t);return e.length?this.each((function(t,n){S(e,(function(t){n.removeAttribute(t)}))})):this},w.attr=function(t,e){if(t){if(_(t)){if(arguments.length<2){if(!this[0])return;var n=this[0].getAttribute(t);return null===n?void 0:n}return null===e?this.removeAttr(t):this.each((function(n,r){r.setAttribute(t,e)}))}for(var r in t)this.attr(r,t[r]);return this}},w.toggleClass=function(t,e){var n=M(t),r=void 0!==e;return n.length?this.each((function(t,i){S(n,(function(t){r?e?i.classList.add(t):i.classList.remove(t):i.classList.toggle(t)}))})):this},w.addClass=function(t){return this.toggleClass(t,!0)},w.removeClass=function(t){return arguments.length?this.toggleClass(t,!1):this.attr('class','')},b.unique=L,w.add=function(t,e){return b(L(this.get().concat(b(t,e).get())))};var I=/^--/;function F(t){return I.test(t)}var B={},V=r&&r.createElement('div'),U=V?V.style:{},z=['webkit','moz','ms','o'];function H(t,e){if(void 0===e&&(e=F(t)),e)return t;if(!B[t]){var n=C(t),r=''+n.charAt(0).toUpperCase()+n.slice(1);S((n+' '+z.join(r+' ')+r).split(' '),(function(e){if(e in U)return B[t]=e,!1}))}return B[t]}b.prefixedProp=H;var W={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function $(t,e,n){return void 0===n&&(n=F(t)),n||W[t]||!P(e)?e:e+'px'}w.css=function(t,e){if(_(t)){var n=F(t);return t=H(t,n),arguments.length<2?this[0]&&R(this[0],t,n):t?(e=$(t,e,n),this.each((function(r,i){1===i.nodeType&&(n?i.style.setProperty(t,e):i.style[t]=e)}))):this}for(var r in t)this.css(r,t[r]);return this};var q='__cashData',G=/^data-(.*)/;function K(t){return t[q]=t[q]||{}}function Y(t,e){var n=K(t);if(e){if(!(e in n)){var r=t.dataset?t.dataset[e]||t.dataset[C(e)]:b(t).attr('data-'+e);if(void 0!==r){try{r=JSON.parse(r)}catch(t){}n[e]=r}}return n[e]}return n}function J(t,e){return N(t,'border'+(e?'Left':'Top')+'Width')+N(t,'padding'+(e?'Left':'Top'))+N(t,'padding'+(e?'Right':'Bottom'))+N(t,'border'+(e?'Right':'Bottom')+'Width')}function X(t,e){for(var n=0,r=e.length;n<r;n++)if(t.indexOf(e[n])<0)return!1;return!0}function Z(t,e,n){S(t[n],(function(t){t[0];var r=t[1];e.removeEventListener(n,r)})),delete t[n]}b.hasData=function(t){return q in t},w.data=function(t,e){var n=this;if(!t){if(!this[0])return;return S(this[0].attributes,(function(t){var e=t.name.match(G);e&&n.data(e[1])})),Y(this[0])}if(_(t))return void 0===e?this[0]&&Y(this[0],t):this.each((function(n,r){return function(t,e,n){K(t)[e]=n}(r,t,e)}));for(var r in t)this.data(r,t[r]);return this},w.removeData=function(t){return this.each((function(e,n){return function(t,e){void 0===e?delete t[q]:delete K(t)[e]}(n,t)}))},S(['Width','Height'],(function(t){w['inner'+t]=function(){if(this[0])return this[0]===i?i['inner'+t]:this[0]['client'+t]}})),S(['width','height'],(function(t,e){w[t]=function(n){return this[0]?arguments.length?(n=parseInt(n,10),this.each((function(r,i){if(1===i.nodeType){var o=R(i,'boxSizing');i.style[t]=$(t,n+('border-box'===o?J(i,!e):0))}}))):this[0]===i?this[0][C('outer-'+t)]:this[0].getBoundingClientRect()[t]-J(this[0],!e):void 0===n?void 0:this}})),S(['Width','Height'],(function(t,e){w['outer'+t]=function(n){if(this[0])return this[0]===i?i['outer'+t]:this[0]['offset'+t]+(n?N(this[0],'margin'+(e?'Top':'Left'))+N(this[0],'margin'+(e?'Bottom':'Right')):0)}}));var Q='__cashEvents',tt='.';function et(t){return t[Q]=t[Q]||{}}function nt(t){var e=t.split(tt);return[e[0],e.slice(1).sort()]}function rt(t,e,n,r){var i=et(t);if(e){var o=i[e];if(!o)return;r&&(r.guid=r.guid||k++),i[e]=o.filter((function(i){var o=i[0],s=i[1];if(r&&s.guid!==r.guid||!X(o,n))return!0;t.removeEventListener(e,s)}))}else if(n&&n.length)for(e in i)rt(t,e,n,r);else for(e in i)Z(i,t,e)}w.off=function(t,e){var n=this;return void 0===t?this.each((function(t,e){return rt(e)})):S(M(t),(function(t){var r=nt(t),i=r[0],o=r[1];n.each((function(t,n){return rt(n,i,o,e)}))})),this},w.on=function(t,e,n,r){var i=this;if(!_(t)){for(var o in t)this.on(o,e,t[o]);return this}return E(e)&&(n=e,e=!1),S(M(t),(function(t){var o=nt(t),s=o[0],a=o[1];i.each((function(t,i){var o=function t(o){if(!o.namespace||X(a,o.namespace.split(tt))){var c=i;if(e){for(var l=o.target;!j(l,e);){if(l===i)return;if(!(l=l.parentNode))return}c=l}o.namespace=o.namespace||'';var u=n.call(c,o,o.data);r&&rt(i,s,a,t),!1===u&&(o.preventDefault(),o.stopPropagation())}};o.guid=n.guid=n.guid||k++,function(t,e,n,r){r.guid=r.guid||k++;var i=et(t);i[e]=i[e]||[],i[e].push([n,r]),t.addEventListener(e,r)}(i,s,a,o)}))})),this},w.one=function(t,e,n){return this.on(t,e,n,!0)},w.ready=function(t){var e=function(){return t(b)};return'loading'!==r.readyState?setTimeout(e):r.addEventListener('DOMContentLoaded',e),this},w.trigger=function(t,e){var n=t;if(_(t)){var i=nt(t),o=i[0],s=i[1];(n=r.createEvent('HTMLEvents')).initEvent(o,!0,!0),n.namespace=s.join(tt)}return n.data=e,this.each((function(t,e){e.dispatchEvent(n)}))};var it=/select-one/i,ot=/select-multiple/i;function st(t){var e=t.type;return it.test(e)?function(t){return t.selectedIndex<0?null:t.options[t.selectedIndex].value}(t):ot.test(e)?function(t){var e=[];return S(t.options,(function(t){!t.selected||t.disabled||t.parentNode.disabled||e.push(t.value)})),e}(t):t.value}var at=/%20/g;var ct=/file|reset|submit|button|image/i,lt=/radio|checkbox/i;w.serialize=function(){var t='';return this.each((function(e,n){S(n.elements||[n],(function(e){if(!e.disabled&&e.name&&'FIELDSET'!==e.tagName&&!ct.test(e.type)&&(!lt.test(e.type)||e.checked)){var n=st(e);if(void 0!==n)S(T(n)?n:[n],(function(n){t+=function(t,e){return'&'+encodeURIComponent(t)+'='+encodeURIComponent(e).replace(at,'+')}(e.name,n)}))}}))})),t.substr(1)},w.val=function(t){return void 0===t?this[0]&&st(this[0]):this.each((function(e,n){var r=ot.test(n.type),i=null===t?r?[]:'':t;r&&T(i)?S(n.options,(function(t){t.selected=i.indexOf(t.value)>=0})):n.value=i}))},w.clone=function(){return this.map((function(t,e){return e.cloneNode(!0)}))},w.detach=function(){return this.each((function(t,e){e.parentNode&&e.parentNode.removeChild(e)}))};var ut,ft=/^\s*<(\w+)[^>]*>/,ht=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function dt(t){if(function(){if(!ut){var t=r.createElement('table'),e=r.createElement('tr');ut={'*':r.createElement('div'),tr:r.createElement('tbody'),td:e,th:e,thead:t,tbody:t,tfoot:t}}}(),!_(t))return[];if(ht.test(t))return[r.createElement(RegExp.$1)];var e=ft.test(t)&&RegExp.$1,n=ut[e]||ut['*'];return n.innerHTML=t,b(n.childNodes).detach().get()}function pt(t,e,n){if(void 0!==e){var r=_(e);!r&&e.length?S(e,(function(e){return pt(t,e,n)})):S(t,r?function(t){t.insertAdjacentHTML(n?'afterbegin':'beforeend',e)}:function(t,r){return function(t,e,n){n?t.insertBefore(e,t.childNodes[0]):t.appendChild(e)}(t,r?e.cloneNode(!0):e,n)})}}b.parseHTML=dt,w.empty=function(){var t=this[0];if(t)for(;t.firstChild;)t.removeChild(t.firstChild);return this},w.append=function(){var t=this;return S(arguments,(function(e){pt(t,e)})),this},w.appendTo=function(t){return pt(b(t),this),this},w.html=function(t){if(void 0===t)return this[0]&&this[0].innerHTML;var e=t.nodeType?t[0].outerHTML:t;return this.each((function(t,n){n.innerHTML=e}))},w.insertAfter=function(t){var e=this;return b(t).each((function(t,n){var r=n.parentNode;e.each((function(e,i){r.insertBefore(t?i.cloneNode(!0):i,n.nextSibling)}))})),this},w.after=function(){var t=this;return S(u.apply(arguments),(function(e){u.apply(b(e).slice()).insertAfter(t)})),this},w.insertBefore=function(t){var e=this;return b(t).each((function(t,n){var r=n.parentNode;e.each((function(e,i){r.insertBefore(t?i.cloneNode(!0):i,n)}))})),this},w.before=function(){var t=this;return S(arguments,(function(e){b(e).insertBefore(t)})),this},w.prepend=function(){var t=this;return S(arguments,(function(e){pt(t,e,!0)})),this},w.prependTo=function(t){return pt(b(t),u.apply(this.slice()),!0),this},w.remove=function(){return this.detach().off()},w.replaceWith=function(t){var e=this;return this.each((function(n,r){var i=r.parentNode;if(i){var o=n?b(t).clone():b(t);if(!o[0])return e.remove(),!1;i.replaceChild(o[0],r),b(o[0]).after(o.slice(1))}}))},w.replaceAll=function(t){return b(t).replaceWith(this),this},w.text=function(t){return void 0===t?this[0]?this[0].textContent:'':this.each((function(e,n){n.textContent=t}))};var gt=r&&r.documentElement;w.offset=function(){var t=this[0];if(t){var e=t.getBoundingClientRect();return{top:e.top+i.pageYOffset-gt.clientTop,left:e.left+i.pageXOffset-gt.clientLeft}}},w.offsetParent=function(){return b(this[0]&&this[0].offsetParent)},w.position=function(){var t=this[0];if(t)return{left:t.offsetLeft,top:t.offsetTop}},w.children=function(t){var e=[];return this.each((function(t,n){l.apply(e,n.children)})),e=b(L(e)),t?e.filter((function(e,n){return j(n,t)})):e},w.contents=function(){var t=[];return this.each((function(e,n){l.apply(t,'IFRAME'===n.tagName?[n.contentDocument]:n.childNodes)})),b(t.length&&L(t))},w.find=function(t){for(var e=[],n=0,r=this.length;n<r;n++){var i=m(t,this[n]);i.length&&l.apply(e,i)}return b(e.length&&L(e))},w.has=function(t){var e=_(t)?function(e,n){return!!m(t,n).length}:function(e,n){return n.contains(t)};return this.filter(e)},w.is=function(t){if(!t||!this[0])return!1;var e=A(t),n=!1;return this.each((function(r,i){return!(n=e(r,i,t))})),n},w.next=function(){return b(this[0]&&this[0].nextElementSibling)},w.not=function(t){if(!t||!this[0])return this;var e=A(t);return this.filter((function(n,r){return!e(n,r,t)}))},w.parent=function(){var t=[];return this.each((function(e,n){n&&n.parentNode&&t.push(n.parentNode)})),b(L(t))},w.index=function(t){var e=t?b(t)[0]:this[0],n=t?this:b(e).parent().children();return a.call(n,e)},w.closest=function(t){return t&&this[0]?this.is(t)?this.filter(t):this.parent().closest(t):b()},w.parents=function(t){var e,n=[];return this.each((function(i,o){for(e=o;e&&e.parentNode&&e!==r.body.parentNode;)e=e.parentNode,(!t||t&&j(e,t))&&n.push(e)})),b(L(n))},w.prev=function(){return b(this[0]&&this[0].previousElementSibling)},w.siblings=function(){var t=this[0];return this.parent().children().filter((function(e,n){return n!==t}))},e["default"]=b},function(t,e,n){t.exports=n(133)},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(12),s=n.n(o),a=n(0),c=n(1);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["a"]={getConfig:function(t){return this.__getConfig(t)},__getConfig:function(t){var e=this.config||{};return t?e[t]:e},getAll:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.all?t.array?s()(this.all.models):this.all:[]},getAllMap:function(){return this.getAll().reduce((function(t,e){return t[e.get(e.idAttribute)]=e,t}),{})},__initConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.config=u(u({},t),e),this.em=this.config.em},__initListen:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.all,n=this.em,r=this.events;e&&n&&e.on('add',(function(t,e,i){return n.trigger(r.add,t,i)})).on('remove',(function(t,e,i){return n.trigger(r.remove,t,i)})).on('change',(function(t,e){return n.trigger(r.update,t,t.changedAttributes(),e)})).on('all',this.__catchAllEvent,this),this.cls=[e].concat(t.collections||[]),(t.propagate||[]).forEach((function(t){var r=t.entity,i=t.event;r.on('all',(function(t,r,o,s){var a=u({event:t},s||o);[n,e].map((function(t){return t.trigger(i,r,a)}))}))}))},__remove:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,i=Object(a["isString"])(t)?this.get(t):t,o=function(){return i&&e.all.remove(i,n),i};return!n.silent&&r&&r.trigger(this.events.removeBefore,i,o,n),!n.abort&&o()},__catchAllEvent:function(t,e,n,r){var i=this.em,o=this.events,s=r||n;i&&o.all&&i.trigger(o.all,{event:t,model:e,options:s}),this.__onAllEvent()},__appendTo:function(){var t=this.getConfig().appendTo;if(t){var e=Object(a["isElement"])(t)?t:document.querySelector(t);if(!e)return this.__logWarn('"appendTo" element not found');e.appendChild(this.render())}},__onAllEvent:function(){},__logWarn:function(t){this.em.logWarning("[".concat(this.name,"]: ").concat(t))},_createId:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,n=this.getAll(),r=n.length+e,i=this.getAllMap();do{t=Object(c["createId"])(r)}while(i[t]);return t},__listenAdd:function(t,e){var n=this;t.on('add',(function(t,r,i){return n.em.trigger(e,t,i)}))},__listenRemove:function(t,e){var n=this;t.on('remove',(function(t,r,i){return n.em.trigger(e,t,i)}))},__listenUpdate:function(t,e){var n=this;t.on('change',(function(t,r){return n.em.trigger(e,t,t.changedAttributes(),r)}))},__destroy:function(){this.cls.forEach((function(t){t.stopListening(),t.reset()})),this.em=0}}},function(t,e,n){"use strict";n.r(e);var r=n(16),i=n.n(r),o=n(2),s=n.n(o),a=n(3),c=n.n(a),l=n(0),u=n(1),f=n(14),h=n(44);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=c.a.View.extend({events:function(){return this.model.get('events')||{mousedown:'handleClick'}},attributes:function(){return this.model.get('attributes')},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.config,n=void 0===e?{}:e;this.em=n.em,this.editor=n.editor},handleClick:function(t){t.preventDefault(),t.stopPropagation();var e=this.editor,n=this.em,r=e.Canvas.getFrameEl().getBoundingClientRect(),i=r.left,o=r.top,s=p(p({},t),{},{clientX:t.clientX-i,clientY:t.clientY-o});n.trigger('toolbar:run:before'),this.execCommand(s)},execCommand:function(t){var e={event:t},n=this.model.get('command'),r=this.editor;'function'==typeof n&&n(r,null,e),'string'==typeof n&&r.runCommand(n,e)},render:function(){var t=this.editor,e=this.$el,n=this.model,r=n.get('id'),i=n.get('label'),o=t.getConfig('stylePrefix');return e.addClass("".concat(o,"toolbar-item")),r&&e.addClass("".concat(o,"toolbar-item__").concat(r)),i&&e.append(i),this}}),v=h["a"].extend({itemView:g,initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config={editor:t.editor||'',em:t.em},this.listenTo(this.collection,'reset',this.render)}}),m=c.a.Model.extend({defaults:{command:'',attributes:{}}}),y=c.a.Collection.extend({model:m});function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O,x=c.a.$;e["default"]={init:function(t){Object(l["bindAll"])(this,'onHover','onOut','onClick','onFrameScroll','onFrameUpdated','onContainerChange')},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),O=1},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(t){var e=this,n=this.em,r=n.getConfig('listenToEl'),i=n.getContainer().parentNode,o=t?'on':'off',s={on:u["on"],off:u["off"]};!r.length&&i&&r.push(i);s[o](window,'resize',this.onFrameUpdated),s[o](r,'scroll',this.onContainerChange),n[o]('component:toggled component:update undo redo',this.onSelect,this),n[o]('change:componentHovered',this.onHovered,this),n[o]('component:resize styleable:change component:input',this.updateGlobalPos,this),n[o]('component:update:toolbar',this._upToolbar,this),n[o]('change:canvasOffset',this.updateAttached,this),n[o]('frame:updated',this.onFrameUpdated,this),n[o]('canvas:updateTools',this.onFrameUpdated,this),n.get('Canvas').getFrames().forEach((function(t){var n,r,i=t.view;i&&(n=i.getWindow(),r=i.getBody(),s[o](r,'mouseover',e.onHover),s[o](r,'mouseleave',e.onOut),s[o](r,'click touchend',e.onClick),s[o](n,'scroll',e.onFrameScroll,!0))}))},onHover:function(t){t.stopPropagation();var e=this.em,n=t.target,r=Object(u["getViewEl"])(n),i=r&&r._getFrame(),o=x(n),s=o.data('model');if(!s)for(var a=o.parent();!s&&a.length&&!Object(f["i"])(a[0]);)s=a.data('model'),a=a.parent();this.currentDoc=n.ownerDocument,e.setHovered(s,{useValid:!0}),i&&e.set('currentFrame',i)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(t,e){var n=this,r={};e?e.views.forEach((function(t){var i=t.el,o=n.getElementPos(i);r={el:i,pos:o,component:e,view:Object(u["getViewEl"])(i)},n.updateToolsLocal(r),i.ownerDocument===n.currentDoc&&(n.elHovered=r)})):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach((function(t){var e=t.view,r=e&&e.getToolsEl();r&&n.toggleToolsEl(0,0,{el:r})})))},onSelect:Object(l["debounce"])((function(){var t=this.em,e=t.getSelected(),n=t.get('currentFrame')||{},r=e&&e.getView(n.model),i=r&&r.el,o={};i&&Object(f["j"])(i)&&(o={el:i,pos:this.getElementPos(i),component:e,view:Object(u["getViewEl"])(i)});this.elSelected=o,this.updateToolsGlobal(),this.updateLocalPos(o),this.initResize(e)})),updateGlobalPos:function(){var t=this.getElSelected();t.el&&(t.pos=this.getElementPos(t.el),this.updateToolsGlobal())},updateLocalPos:function(t){var e=this.getElHovered();e.el&&(e.pos=this.getElementPos(e.el),this.updateToolsLocal(t))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered(0)},toggleToolsEl:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.el||this.canvas.getToolsEl(e);return r&&(r.style.display=t?'':'none'),r||{}},showElementOffset:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};O&&this.editor.runCommand('show-offset',{el:t,elPos:e,view:n.view,force:1,top:0,left:0})},hideElementOffset:function(t){this.editor.stopCommand('show-offset',{view:t})},showFixedElementOffset:function(t,e){this.editor.runCommand('show-offset',{el:t,elPos:e,state:'Fixed'})},hideFixedElementOffset:function(t,e){this.editor&&this.editor.stopCommand('show-offset',{state:'Fixed'})},hideHighlighter:function(t){this.canvas.getHighlighter(t).style.opacity=0},onClick:function(t){t.stopPropagation(),t.preventDefault();var e=this.em;if(e.get('_cmpDrag'))return e.set('_cmpDrag');var n=x(t.target),r=n.data('model');if('freezed-remote-selected'!=r.get('status')){if(!r)for(var i=n.parent();!r&&i.length&&!Object(f["i"])(i[0]);)r=i.data('model'),i=i.parent();if(r){if(e.isEditing()&&!r.get('textable')&&r.isChildOf('text'))return;this.select(r,t)}}},select:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&(this.editor.select(t,{event:e,useValid:!0}),this.initResize(t))},updateBadge:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.canvas,i=x(t).data('model');if(i&&i.get('badgable')){var o=this.getBadge(n);if(!n.posOnly){var s=this.canvas.getConfig(),a=i.getIcon(),c=s.pStylePrefix||'',l="".concat(c,"badge"),u=s.customBadgeLabel,f="".concat(a?"<div class=\"".concat(l,"__icon\">").concat(a,"</div>"):'',"\n        <div class=\"").concat(l,"__name\">").concat(i.getName(),"</div>"),h=i.get('chooser');o.innerHTML='freezed-remote-selected'==i.get('status')?h:u?u(i):f}var d='px',p=o.style;p.display='block';var g=r.getTargetToElementFixed(t,o,{pos:e}),v=g.top,m=n.leftOff<0?-n.leftOff:0;p.top=v+d,p.left=m+d}},showHighlighter:function(t){this.canvas.getHighlighter(t).style.opacity=''},initResize:function(t){var e,n=this.em,r=this.canvas,o=n?n.get('Editor'):'',s=(n?n.get('Config'):'').stylePrefix||'',a="".concat(s,"resizing"),c=!Object(l["isElement"])(t)&&Object(u["isTaggableNode"])(t)?t:n.getSelected(),f=c&&c.get('resizable'),h={},d=function(t,e,n){var r=n.docs;r&&r.forEach((function(e){var n=e.body,r=n.className||'';n.className=('add'==t?"".concat(r," ").concat(a):r.replace(a,'')).trim()}))};if(o&&f){var p=Object(l["isElement"])(t)?t:c.getEl();h={onStart:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.el,s=i.config,a=i.resizer,l=s.keyHeight,f=s.keyWidth,h=s.currentUnit,p=s.keepAutoHeight,g=s.keepAutoWidth;d('add',0,i),e=n.get('StyleManager').getModelToStyle(c),r.toggleFramesEvents();var v=getComputedStyle(o),m=e.getStyle(),y=m[f];s.autoWidth=g&&'auto'===y,isNaN(parseFloat(y))&&(y=v[f]);var b=m[l];s.autoHeight=p&&'auto'===b,isNaN(parseFloat(b))&&(b=v[l]),a.startDim.w=parseFloat(y),a.startDim.h=parseFloat(b),O=0,h&&(s.unitHeight=Object(u["getUnitFromValue"])(b),s.unitWidth=Object(u["getUnitFromValue"])(y))},onMove:function(){o.trigger('component:resize')},onEnd:function(t,e){d('remove',0,e),o.trigger('component:resize'),r.toggleFramesEvents(1),O=1},updateTarget:function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var s=o.store,a=o.selectedHandler,c=o.config,l=c.keyHeight,u=c.keyWidth,f=c.autoHeight,h=c.autoWidth,d=c.unitWidth,p=c.unitHeight,g=['tc','bc'].indexOf(a)>=0,v=['cl','cr'].indexOf(a)>=0,m={},y=s?'':1;if(!g){var b=r.getBody().offsetWidth,O=i.w<b?i.w:b;m[u]=h?'auto':"".concat(O).concat(d)}v||(m[l]=f?'auto':"".concat(i.h).concat(p)),e.addStyle(w(w({},m),{},{en:y}),{avoidStore:!s});var x="update:component:style",C="".concat(x,":").concat(l," ").concat(x,":").concat(u);n&&n.trigger(C,null,null,{noEmit:1})}}},'object'==i()(f)&&(h=w(w(w({},h),f),{},{parent:h})),this.resizer=o.runCommand('resize',{el:p,options:h,force:1})}else o.stopCommand('resize'),this.resizer=null},updateToolbar:function(t){var e=this.config.em,n=t==e?e.getSelected():t,r=this.canvas.getToolbarEl(),i=r.style,o=n.get('toolbar'),s=e.get('Config').showToolbar;if(n&&s&&o&&o.length){if(i.display='',!this.toolbar){r.innerHTML='',this.toolbar=new y(o);var a=new v({collection:this.toolbar,editor:this.editor,em:e});r.appendChild(a.render().el)}this.toolbar.reset(o),i.top='-100px',i.left=0}else i.display='none'},updateToolbarPos:function(t){var e='px',n=this.canvas.getToolbarEl().style;n.top="".concat(t.top).concat(e),n.left="".concat(t.left).concat(e),n.opacity=''},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.canvas.getBadgeEl(t.view)},onFrameScroll:function(){this.updateTools()},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(t){return t&&'selected'===t.get('status')},updateToolsLocal:function(t){var e=t||this.getElHovered(),n=e.el,r=e.pos,i=e.view,o=e.component;if(n){var s=o.get('hoverable'),a=this.lastHovered!==n,c=a?{}:{posOnly:1};a&&s&&(this.lastHovered=n,this.showHighlighter(i),this.showElementOffset(n,r,{view:i})),this.isCompSelected(o)&&(this.hideHighlighter(i),this.hideElementOffset(i));var l='px',u=this.toggleToolsEl(1,i),f=u.style,h=this.canvas.canvasRectOffset(n,r),d=h.top,p=h.left;this.updateBadge(n,r,w(w({},c),{},{view:i,topOff:d,leftOff:p})),f.top=d+l,f.left=p+l,f.width=r.width+l,f.height=r.height+l,this._trgToolUp('local',{component:o,el:u,top:d,left:p,width:r.width,height:r.height})}else this.lastHovered=0},_upToolbar:Object(l["debounce"])((function(){this.updateToolsGlobal({force:1})})),_trgToolUp:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.em.trigger('canvas:tools:update',w({type:t},e))},updateToolsGlobal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getElSelected(),n=e.el,r=e.pos,i=e.component;if(!n)return this.toggleToolsEl(),void(this.lastSelected=0);var o=this.canvas,s=this.lastSelected!==n;(s||t.force)&&(this.lastSelected=n,this.updateToolbar(i));var a='px',c=this.toggleToolsEl(1),l=c.style,u=o.getTargetToElementFixed(n,o.getToolbarEl(),{pos:r}),f=u.canvasOffsetTop,h=u.canvasOffsetLeft;l.top=f+a,l.left=h+a,l.width=r.width+a,l.height=r.height+a,this.updateToolbarPos({top:u.top,left:u.left}),this._trgToolUp('global',{component:i,el:c,top:f,left:h,width:r.width,height:r.height})},updateAttached:Object(l["debounce"])((function(){this.updateGlobalPos()})),onContainerChange:Object(l["debounce"])((function(){this.em.refreshCanvas()}),150),getElementPos:function(t){return this.canvas.getCanvasView().getElementPos(t)},hideBadge:function(){this.getBadge().style.display='none'},cleanPrevious:function(t){t&&t.set({status:'',state:''})},getContentWindow:function(){return this.canvas.getWindow()},run:function(t){Object(u["hasWin"])()&&(this.editor=t&&t.get('Editor'),this.enable())},stop:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(u["hasWin"])()){var r=this.em,i=this.editor;this.onHovered(),this.stopSelectComponent(),!n.preserveSelected&&r.setSelected(null),this.toggleToolsEl(),i&&i.stopCommand('resize')}}}},function(t,e,n){"use strict";(function(e){var r=n(39),i={},o=!1,s=e.chrome&&e.chrome.app&&e.chrome.app.runtime;t.exports={attachEvent:function(t,n){void 0!==e.addEventListener?e.addEventListener(t,n,!1):e.document&&e.attachEvent&&(e.document.attachEvent('on'+t,n),e.attachEvent('on'+t,n))},detachEvent:function(t,n){void 0!==e.addEventListener?e.removeEventListener(t,n,!1):e.document&&e.detachEvent&&(e.document.detachEvent('on'+t,n),e.detachEvent('on'+t,n))},unloadAdd:function(t){if(s)return null;var e=r.string(8);return i[e]=t,o&&setTimeout(this.triggerUnloadCallbacks,0),e},unloadDel:function(t){t in i&&delete i[t]},triggerUnloadCallbacks:function(){for(var t in i)i[t](),delete i[t]}};s||t.exports.attachEvent('unload',(function(){o||(o=!0,t.exports.triggerUnloadCallbacks())}))}).call(this,n(17))},function(t,e,n){"use strict";n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return v}));const{parse:r,stringify:i}=JSON,{keys:o}=Object,s=String,a='string',c={},l='object',u=(t,e)=>e,f=t=>t instanceof s?s(t):t,h=(t,e)=>typeof e===a?new s(e):e,d=(t,e,n,r)=>{const i=[];for(let a=o(n),{length:u}=a,f=0;f<u;f++){const o=a[f],u=n[o];if(u instanceof s){const s=t[u];typeof s!==l||e.has(s)?n[o]=r.call(n,o,s):(e.add(s),n[o]=c,i.push({k:o,a:[t,e,s,r]}))}else n[o]!==c&&(n[o]=r.call(n,o,u))}for(let{length:t}=i,e=0;e<t;e++){const{k:t,a:o}=i[e];n[t]=r.call(n,t,d.apply(null,o))}return n},p=(t,e,n)=>{const r=s(e.push(n)-1);return t.set(n,r),r},g=(t,e)=>{const n=r(t,h).map(f),i=n[0],o=e||u,s=typeof i===l&&i?d(n,new Set,i,o):i;return o.call({'':s},'',s)},v=(t,e,n)=>{const r=e&&typeof e===l?(t,n)=>''===t||-1<e.indexOf(t)?n:void 0:e||u,o=new Map,s=[],c=[];let f=+p(o,s,r.call({'':t},'',t)),h=!f;for(;f<s.length;)h=!0,c[f]=i(s[f++],d,n);return'['+c.join(',')+']';function d(t,e){if(h)return h=!h,e;const n=r.call(this,t,e);switch(typeof n){case l:if(null===n)return n;case a:return o.get(n)||p(o,s,n)}return n}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(2),i=n.n(r),o=n(5),s=n.n(o),a=n(6),c=n.n(a),l=n(0),u=n(1);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s()(this,t),this.opts={container:null,onStart:null,onDrag:null,onEnd:null,setPosition:null,getPosition:null,guidesStatic:null,guidesTarget:null,snapOffset:5,doc:0,scale:1},Object(l["bindAll"])(this,'drag','stop','keyHandle','handleScroll'),this.setOptions(e),this.delta={x:0,y:0},this}return c()(t,[{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=h(h({},this.opts),t)}},{key:"toggleDrag",value:function(t){var e=this.getDocumentEl(),n=this.getContainerEl(),r=this.getWindowEl(),i=t?'on':'off',o={on:u["on"],off:u["off"]};o[i](n,'mousemove dragover',this.drag),o[i](e,'mouseup dragend touchend',this.stop),o[i](e,'keydown',this.keyHandle),o[i](r,'scroll',this.handleScroll)}},{key:"handleScroll",value:function(){var t=this.lastScroll,e=this.delta,n=this.getScrollInfo(),r={x:n.x-t.x,y:n.y-t.y};this.move(e.x+r.x,e.y+r.y),this.lastScrollDiff=r}},{key:"start",value:function(t){var e=this.opts,n=e.onStart;this.toggleDrag(1),this.startPointer=this.getPointerPos(t),this.guidesStatic=Object(l["result"])(e,'guidesStatic')||[],this.guidesTarget=Object(l["result"])(e,'guidesTarget')||[],Object(l["isFunction"])(n)&&n(t,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(t)}},{key:"drag",value:function(t){var e=this,n=this.opts,r=this.lastScrollDiff,i=this.globScrollDiff,o=n.onDrag,s=this.startPointer,a=this.getPointerPos(t),c={x:i.x+r.x,y:i.y+r.y};this.globScrollDiff=c;var u={x:a.x-s.x+c.x,y:a.y-s.y+c.y};this.lastScrollDiff={x:0,y:0};var f=this.lockedAxis;'x'===(f=t.shiftKey?!f&&this.detectAxisLock(u.x,u.y):null)?u.x=s.x:'y'===f&&(u.y=s.y);var d=function(r){['x','y'].forEach((function(t){return r[t]=r[t]*Object(l["result"])(n,'scale')})),e.delta=r,e.move(r.x,r.y),Object(l["isFunction"])(o)&&o(t,e)},p=h({},u);if(this.currentPointer=a,this.lockedAxis=f,this.lastScroll=this.getScrollInfo(),d(u),this.guidesTarget.length){var g=this.snapGuides(p),v=g.newDelta,m=g.trgX,y=g.trgY;(m||y)&&d(v)}0===t.which&&this.stop(t)}},{key:"snapGuides",value:function(t){var e=this,n=t,r=this.trgX,i=this.trgY;return this.guidesTarget.forEach((function(n){n.x&&e.trgX||n.y&&e.trgY||(n.active=0,e.guidesStatic.forEach((function(o){if(!(n.y&&o.x||n.x&&o.y)){var s=n.y&&o.y,a=s?'y':'x',c=n[a],u=o[a],f=t[a],h=s?i:r;if(e.isPointIn(c,u)&&Object(l["isUndefined"])(h)){var d=f-(c-u);e.setGuideLock(n,d)}}})))})),r=this.trgX,i=this.trgY,['x','y'].forEach((function(r){var i=r.toUpperCase(),o=e["trg".concat(i)];o&&!e.isPointIn(t[r],o.lock)&&(e.setGuideLock(o,null),o=null),o&&!Object(l["isUndefined"])(o.lock)&&(n[r]=o.lock)})),{newDelta:n,trgX:this.trgX,trgY:this.trgY}}},{key:"isPointIn",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.offset,i=r||this.opts.snapOffset;return t>=e&&t<=e+i||t<=e&&t>=e-i}},{key:"setGuideLock",value:function(t,e){var n=Object(l["isUndefined"])(t.x)?'Y':'X',r="trg".concat(n);return null!==e?(t.active=1,t.lock=e,this[r]=t):(delete t.active,delete t.lock,delete this[r]),t}},{key:"stop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.delta,r=e.cancel,i=r?0:n.x,o=r?0:n.y;this.toggleDrag(),this.lockedAxis=null,this.move(i,o,1);var s=this.opts.onEnd;Object(l["isFunction"])(s)&&s(t,this,{cancelled:r})}},{key:"keyHandle",value:function(t){Object(u["isEscKey"])(t)&&this.stop(t,{cancel:1})}},{key:"move",value:function(t,e,n){var r=this.el,i=this.opts,o=this.startPosition;if(o){var s=i.setPosition,a=o.x+t,c=o.y+e;this.position={x:a,y:c,end:n},Object(l["isFunction"])(s)&&s(this.position),r&&(r.style.left="".concat(a,"px"),r.style.top="".concat(c,"px"))}}},{key:"getContainerEl",value:function(){var t=this.opts.container;return t?[t]:this.getDocumentEl()}},{key:"getWindowEl",value:function(){return this.getContainerEl().map((function(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow}))}},{key:"getDocumentEl",value:function(t){var e=this.opts.doc;if(t=t||this.el,!this.docs){var n=[document];t&&n.push(t.ownerDocument),e&&n.push(e),this.docs=n}return this.docs}},{key:"getPointerPos",value:function(t){var e=this.opts.getPointerPosition,n=Object(u["getPointerEvent"])(t);return e?e(t):{x:n.clientX,y:n.clientY}}},{key:"getStartPosition",value:function(){var t=this.el,e=this.opts.getPosition,n={x:0,y:0};return Object(l["isFunction"])(e)?n=e():t&&(n={x:parseFloat(t.style.left),y:parseFloat(t.style.top)}),n}},{key:"getScrollInfo",value:function(){var t=this.opts.doc,e=t&&t.body;return{y:e?e.scrollTop:0,x:e?e.scrollLeft:0}}},{key:"detectAxisLock",value:function(t,e){var n=t,r=e,i=Math.abs(n),o=Math.abs(r);return r>=i||r<=-i?'x':n>o||n<-o?'y':void 0}}]),t}()},function(t,e,n){"use strict";var r=n(3),i=n.n(r),o=i.a.$;e["a"]=i.a.View.extend({events:{change:'handleChange'},template:function(){return"<span class=\"".concat(this.holderClass(),"\"></span>")},inputClass:function(){return"".concat(this.ppfx,"field")},holderClass:function(){return"".concat(this.ppfx,"input-holder")},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.ppfx||'';this.opts=t,this.ppfx=e,this.em=t.target||{},!t.onChange&&this.listenTo(this.model,'change:value',this.handleModelChange)},elementUpdated:function(){this.model.trigger('el:change')},setValue:function(t){var e=this.model,n=t||e.get('defaults'),r=this.getInputEl();r&&(r.value=n)},handleModelChange:function(t,e,n){this.setValue(e,n)},handleChange:function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},__onInputChange:function(t){this.model.set({value:t},{fromInput:1})},getInputEl:function(){if(!this.inputEl){var t=this.model,e=this.opts.type||'text',n=t.get('placeholder')||t.get('defaults')||t.get('default')||'';this.inputEl=o("<input type=\"".concat(e,"\" placeholder=\"").concat(n,"\">"))}return this.inputEl.get(0)},render:function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this}})},function(t,e){function n(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var s=t.apply(e,r);function a(t){n(s,i,o,a,c,"next",t)}function c(t){n(s,i,o,a,c,"throw",t)}a(void 0)}))}},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){"use strict";var r=n(141),i='abcdefghijklmnopqrstuvwxyz012345';t.exports={string:function(t){for(var e=i.length,n=r.randomBytes(t),o=[],s=0;s<t;s++)o.push(i.substr(n[s]%e,1));return o.join('')},number:function(t){return Math.floor(Math.random()*t)},numberString:function(t){var e=(''+(t-1)).length;return(new Array(e+1).join('0')+this.number(t)).slice(-e)}}},function(t,e,n){"use strict";var r=n(15),i=n(28),o=n(78);function s(t,e,n,r){o.call(this,t,e,function(t){return function(e,n,r){var o={};'string'==typeof n&&(o.headers={'Content-type':'text/plain'});var s=i.addPath(e,'/xhr_send'),a=new t('POST',s,n,o);return a.once('finish',(function(t){if(a=null,200!==t&&204!==t)return r(new Error('http status '+t));r()})),function(){a.close(),a=null;var t=new Error('Aborted');t.code=1e3,r(t)}}}(r),n,r)}r(s,o),t.exports=s},function(t,e,n){"use strict";var r=n(22);function i(t,e,n,r,i){Error.call(this),this.message=t,this.name='AxiosError',e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=i.prototype,s={};['ERR_BAD_OPTION_VALUE','ERR_BAD_OPTION','ECONNABORTED','ETIMEDOUT','ERR_NETWORK','ERR_FR_TOO_MANY_REDIRECTS','ERR_DEPRECATED','ERR_BAD_RESPONSE','ERR_BAD_REQUEST','ERR_CANCELED'].forEach((function(t){s[t]={value:t}})),Object.defineProperties(i,s),Object.defineProperty(o,'isAxiosError',{value:!0}),i.from=function(t,e,n,s,a,c){var l=Object.create(o);return r.toFlatObject(t,l,(function(t){return t!==Error.prototype})),i.call(l,t.message,e,n,s,a),l.name=t.name,c&&Object.assign(l,c),l},t.exports=i},function(t,e,n){1&&(t.exports=function(){'use strict';var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),r=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),s=r||i||o,a=s&&(r?document.documentMode||6:+(o||i)[1]),c=!o&&/WebKit\//.test(t),l=c&&/Qt\/\d+\.\d+/.test(t),u=!o&&/Chrome\//.test(t),f=/Opera\//.test(t),h=/Apple Computer/.test(navigator.vendor),d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),p=/PhantomJS/.test(t),g=h&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),v=/Android/.test(t),m=g||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),y=g||/Mac/.test(e),b=/\bCrOS\b/.test(t),w=/win/i.test(e),O=f&&t.match(/Version\/(\d*\.\d*)/);O&&(O=Number(O[1])),O&&O>=15&&(f=!1,c=!0);var x=y&&(l||f&&(null==O||O<12.11)),C=n||s&&a>=9;function S(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var k,j=function(t,e){var n=t.className,r=S(e).exec(n);if(r){var i=n.slice(r.index+r[0].length);t.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function E(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function _(t,e){return E(t).appendChild(e)}function P(t,e,n,r){var i=document.createElement(t);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof e)i.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function T(t,e,n,r){var i=P(t,e,n,r);return i.setAttribute("role","presentation"),i}function A(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function D(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function M(t,e){var n=t.className;S(e).test(n)||(t.className+=(n?" ":"")+e)}function L(t,e){for(var n=t.split(" "),r=0;r<n.length;r++)n[r]&&!S(n[r]).test(e)&&(e+=" "+n[r]);return e}k=document.createRange?function(t,e,n,r){var i=document.createRange();return i.setEnd(r||t,n),i.setStart(t,e),i}:function(t,e,n){var r=document.body.createTextRange();try{r.moveToElementText(t.parentNode)}catch(t){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",e),r};var R=function(t){t.select()};function N(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function I(t,e,n){for(var r in e||(e={}),t)!t.hasOwnProperty(r)||!1===n&&e.hasOwnProperty(r)||(e[r]=t[r]);return e}function F(t,e,n,r,i){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=r||0,s=i||0;;){var a=t.indexOf("\t",o);if(a<0||a>=e)return s+(e-o);s+=a-o,s+=n-s%n,o=a+1}}g?R=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:s&&(R=function(t){try{t.select()}catch(t){}});var B=function(){this.id=null,this.f=null,this.time=0,this.handler=N(this.onTimeout,this)};function V(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}B.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},B.prototype.set=function(t,e){this.f=e;var n=+new Date+t;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=n)};var U=50,z={toString:function(){return"CodeMirror.Pass"}},H={scroll:!1},W={origin:"*mouse"},$={origin:"+move"};function q(t,e,n){for(var r=0,i=0;;){var o=t.indexOf("\t",r);-1==o&&(o=t.length);var s=o-r;if(o==t.length||i+s>=e)return r+Math.min(s,e-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=e)return r}}var G=[""];function K(t){for(;G.length<=t;)G.push(Y(G)+" ");return G[t]}function Y(t){return t[t.length-1]}function J(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r],r);return n}function X(){}function Z(t,e){var n;return Object.create?n=Object.create(t):(X.prototype=t,n=new X),e&&I(e,n),n}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tt(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Q.test(t))}function et(t,e){return e?!!(e.source.indexOf("\\w")>-1&&tt(t))||e.test(t):tt(t)}function nt(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var rt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function it(t){return t.charCodeAt(0)>=768&&rt.test(t)}function ot(t,e,n){for(;(n<0?e>0:e<t.length)&&it(t.charAt(e));)e+=n;return e}function st(t,e,n){for(var r=e>n?-1:1;;){if(e==n)return e;var i=(e+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+r}}var at=null;function ct(t,e,n){var r;at=null;for(var i=0;i<t.length;++i){var o=t[i];if(o.from<e&&o.to>e)return i;o.to==e&&(o.from!=o.to&&"before"==n?r=i:at=i),o.from==e&&(o.from!=o.to&&"before"!=n?r=i:at=i)}return null!=r?r:at}var lt=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",e="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,s=/[1n]/;function a(t,e,n){this.level=t,this.from=e,this.to=n}return function(c,l){var u="ltr"==l?"L":"R";if(0==c.length||"ltr"==l&&!n.test(c))return!1;for(var f,h=c.length,d=[],p=0;p<h;++p)d.push((f=c.charCodeAt(p))<=247?t.charAt(f):1424<=f&&f<=1524?"R":1536<=f&&f<=1785?e.charAt(f-1536):1774<=f&&f<=2220?"r":8192<=f&&f<=8203?"w":8204==f?"b":"L");for(var g=0,v=u;g<h;++g){var m=d[g];"m"==m?d[g]=v:v=m}for(var y=0,b=u;y<h;++y){var w=d[y];"1"==w&&"r"==b?d[y]="n":i.test(w)&&(b=w,"r"==w&&(d[y]="R"))}for(var O=1,x=d[0];O<h-1;++O){var C=d[O];"+"==C&&"1"==x&&"1"==d[O+1]?d[O]="1":","!=C||x!=d[O+1]||"1"!=x&&"n"!=x||(d[O]=x),x=C}for(var S=0;S<h;++S){var k=d[S];if(","==k)d[S]="N";else if("%"==k){var j=void 0;for(j=S+1;j<h&&"%"==d[j];++j);for(var E=S&&"!"==d[S-1]||j<h&&"1"==d[j]?"1":"N",_=S;_<j;++_)d[_]=E;S=j-1}}for(var P=0,T=u;P<h;++P){var A=d[P];"L"==T&&"1"==A?d[P]="L":i.test(A)&&(T=A)}for(var D=0;D<h;++D)if(r.test(d[D])){var M=void 0;for(M=D+1;M<h&&r.test(d[M]);++M);for(var L="L"==(D?d[D-1]:u),R=L==("L"==(M<h?d[M]:u))?L?"L":"R":u,N=D;N<M;++N)d[N]=R;D=M-1}for(var I,F=[],B=0;B<h;)if(o.test(d[B])){var V=B;for(++B;B<h&&o.test(d[B]);++B);F.push(new a(0,V,B))}else{var U=B,z=F.length,H="rtl"==l?1:0;for(++B;B<h&&"L"!=d[B];++B);for(var W=U;W<B;)if(s.test(d[W])){U<W&&(F.splice(z,0,new a(1,U,W)),z+=H);var $=W;for(++W;W<B&&s.test(d[W]);++W);F.splice(z,0,new a(2,$,W)),z+=H,U=W}else++W;U<B&&F.splice(z,0,new a(1,U,B))}return"ltr"==l&&(1==F[0].level&&(I=c.match(/^\s+/))&&(F[0].from=I[0].length,F.unshift(new a(0,0,I[0].length))),1==Y(F).level&&(I=c.match(/\s+$/))&&(Y(F).to-=I[0].length,F.push(new a(0,h-I[0].length,h)))),"rtl"==l?F.reverse():F}}();function ut(t,e){var n=t.order;return null==n&&(n=t.order=lt(t.text,e)),n}var ft=[],ht=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var r=t._handlers||(t._handlers={});r[e]=(r[e]||ft).concat(n)}};function dt(t,e){return t._handlers&&t._handlers[e]||ft}function pt(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var r=t._handlers,i=r&&r[e];if(i){var o=V(i,n);o>-1&&(r[e]=i.slice(0,o).concat(i.slice(o+1)))}}}function gt(t,e){var n=dt(t,e);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function vt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),gt(t,n||e.type,t,e),xt(e)||e.codemirrorIgnore}function mt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),r=0;r<e.length;++r)-1==V(n,e[r])&&n.push(e[r])}function yt(t,e){return dt(t,e).length>0}function bt(t){t.prototype.on=function(t,e){ht(this,t,e)},t.prototype.off=function(t,e){pt(this,t,e)}}function wt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Ot(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function xt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Ct(t){wt(t),Ot(t)}function St(t){return t.target||t.srcElement}function kt(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),y&&t.ctrlKey&&1==e&&(e=3),e}var jt,Et,_t=function(){if(s&&a<9)return!1;var t=P('div');return"draggable"in t||"dragDrop"in t}();function Pt(t){if(null==jt){var e=P("span","​");_(t,P("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(jt=e.offsetWidth<=1&&e.offsetHeight>2&&!(s&&a<8))}var n=jt?P("span","​"):P("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Tt(t){if(null!=Et)return Et;var e=_(t,document.createTextNode("AخA")),n=k(e,0,1).getBoundingClientRect(),r=k(e,1,2).getBoundingClientRect();return E(t),!(!n||n.left==n.right)&&(Et=r.right-n.right<3)}var At,Dt=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],r=t.length;e<=r;){var i=t.indexOf("\n",e);-1==i&&(i=t.length);var o=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=i+1)}return n}:function(t){return t.split(/\r\n?|\n/)},Mt=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Lt="oncopy"in(At=P("div"))||(At.setAttribute("oncopy","return;"),"function"==typeof At.oncopy),Rt=null,Nt={},It={};function Ft(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Nt[t]=e}function Bt(t){if("string"==typeof t&&It.hasOwnProperty(t))t=It[t];else if(t&&"string"==typeof t.name&&It.hasOwnProperty(t.name)){var e=It[t.name];"string"==typeof e&&(e={name:e}),(t=Z(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Bt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Bt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Vt(t,e){e=Bt(e);var n=Nt[e.name];if(!n)return Vt(t,"text/plain");var r=n(t,e);if(Ut.hasOwnProperty(e.name)){var i=Ut[e.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=e.name,e.helperType&&(r.helperType=e.helperType),e.modeProps)for(var s in e.modeProps)r[s]=e.modeProps[s];return r}var Ut={};function zt(t,e){I(e,Ut.hasOwnProperty(t)?Ut[t]:Ut[t]={})}function Ht(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Wt(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function $t(t,e,n){return!t.startState||t.startState(e,n)}var qt=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Gt(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(e<o){n=i;break}e-=o}return n.lines[e]}function Kt(t,e,n){var r=[],i=e.line;return t.iter(e.line,n.line+1,(function(t){var o=t.text;i==n.line&&(o=o.slice(0,n.ch)),i==e.line&&(o=o.slice(e.ch)),r.push(o),++i})),r}function Yt(t,e,n){var r=[];return t.iter(e,n,(function(t){r.push(t.text)})),r}function Jt(t,e){var n=e-t.height;if(n)for(var r=t;r;r=r.parent)r.height+=n}function Xt(t){if(null==t.parent)return null;for(var e=t.parent,n=V(e.lines,t),r=e.parent;r;e=r,r=r.parent)for(var i=0;r.children[i]!=e;++i)n+=r.children[i].chunkSize();return n+e.first}function Zt(t,e){var n=t.first;t:do{for(var r=0;r<t.children.length;++r){var i=t.children[r],o=i.height;if(e<o){t=i;continue t}e-=o,n+=i.chunkSize()}return n}while(!t.lines);for(var s=0;s<t.lines.length;++s){var a=t.lines[s].height;if(e<a)break;e-=a}return n+s}function Qt(t,e){return e>=t.first&&e<t.first+t.size}function te(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function ee(t,e,n){if(void 0===n&&(n=null),!(this instanceof ee))return new ee(t,e,n);this.line=t,this.ch=e,this.sticky=n}function ne(t,e){return t.line-e.line||t.ch-e.ch}function re(t,e){return t.sticky==e.sticky&&0==ne(t,e)}function ie(t){return ee(t.line,t.ch)}function oe(t,e){return ne(t,e)<0?e:t}function se(t,e){return ne(t,e)<0?t:e}function ae(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function ce(t,e){if(e.line<t.first)return ee(t.first,0);var n=t.first+t.size-1;return e.line>n?ee(n,Gt(t,n).text.length):function(t,e){var n=t.ch;return null==n||n>e?ee(t.line,e):n<0?ee(t.line,0):t}(e,Gt(t,e.line).text.length)}function le(t,e){for(var n=[],r=0;r<e.length;r++)n[r]=ce(t,e[r]);return n}qt.prototype.eol=function(){return this.pos>=this.string.length},qt.prototype.sol=function(){return this.pos==this.lineStart},qt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},qt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},qt.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},qt.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},qt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},qt.prototype.skipToEnd=function(){this.pos=this.string.length},qt.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},qt.prototype.backUp=function(t){this.pos-=t},qt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},qt.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},qt.prototype.match=function(t,e,n){if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&!1!==e&&(this.pos+=r[0].length),r)}var i=function(t){return n?t.toLowerCase():t};if(i(this.string.substr(this.pos,t.length))==i(t))return!1!==e&&(this.pos+=t.length),!0},qt.prototype.current=function(){return this.string.slice(this.start,this.pos)},qt.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},qt.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},qt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var ue=function(t,e){this.state=t,this.lookAhead=e},fe=function(t,e,n,r){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function he(t,e,n,r){var i=[t.state.modeGen],o={};Oe(t,e.text,t.doc.mode,n,(function(t,e){return i.push(t,e)}),o,r);for(var s=n.state,a=function(r){n.baseTokens=i;var a=t.state.overlays[r],c=1,l=0;n.state=!0,Oe(t,e.text,a.mode,n,(function(t,e){for(var n=c;l<t;){var r=i[c];r>t&&i.splice(c,1,t,i[c+1],r),c+=2,l=Math.min(t,r)}if(e)if(a.opaque)i.splice(n,c-n,t,"overlay "+e),c=n+2;else for(;n<c;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+e}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},c=0;c<t.state.overlays.length;++c)a(c);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function de(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var r=pe(t,Xt(e)),i=e.text.length>t.options.maxHighlightLength&&Ht(t.doc.mode,r.state),o=he(t,e,r);i&&(r.state=i),e.stateAfter=r.save(!i),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function pe(t,e,n){var r=t.doc,i=t.display;if(!r.mode.startState)return new fe(r,!0,e);var o=function(t,e,n){for(var r,i,o=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=o.first)return o.first;var c=Gt(o,a-1),l=c.stateAfter;if(l&&(!n||a+(l instanceof ue?l.lookAhead:0)<=o.modeFrontier))return a;var u=F(c.text,null,t.options.tabSize);(null==i||r>u)&&(i=a-1,r=u)}return i}(t,e,n),s=o>r.first&&Gt(r,o-1).stateAfter,a=s?fe.fromSaved(r,s,o):new fe(r,$t(r.mode),o);return r.iter(o,e,(function(n){ge(t,n.text,a);var r=a.line;n.stateAfter=r==e-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?a.save():null,a.nextLine()})),n&&(r.modeFrontier=a.line),a}function ge(t,e,n,r){var i=t.doc.mode,o=new qt(e,t.options.tabSize,n);for(o.start=o.pos=r||0,""==e&&ve(i,n.state);!o.eol();)me(i,o,n.state),o.start=o.pos}function ve(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Wt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function me(t,e,n,r){for(var i=0;i<10;i++){r&&(r[0]=Wt(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}fe.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},fe.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},fe.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},fe.fromSaved=function(t,e,n){return e instanceof ue?new fe(t,Ht(t.mode,e.state),n,e.lookAhead):new fe(t,Ht(t.mode,e),n)},fe.prototype.save=function(t){var e=!1!==t?Ht(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ue(e,this.maxLookAhead):e};var ye=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function be(t,e,n,r){var i,o,s=t.doc,a=s.mode,c=Gt(s,(e=ce(s,e)).line),l=pe(t,e.line,n),u=new qt(c.text,t.options.tabSize,l);for(r&&(o=[]);(r||u.pos<e.ch)&&!u.eol();)u.start=u.pos,i=me(a,u,l.state),r&&o.push(new ye(u,i,Ht(s.mode,l.state)));return r?o:new ye(u,i,l.state)}function we(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==e[r]?e[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(e[r])||(e[r]+=" "+n[2])}return t}function Oe(t,e,n,r,i,o,s){var a=n.flattenSpans;null==a&&(a=t.options.flattenSpans);var c,l=0,u=null,f=new qt(e,t.options.tabSize,r),h=t.options.addModeClass&&[null];for(""==e&&we(ve(n,r.state),o);!f.eol();){if(f.pos>t.options.maxHighlightLength?(a=!1,s&&ge(t,e,r,f.pos),f.pos=e.length,c=null):c=we(me(n,f,r.state,h),o),h){var d=h[0].name;d&&(c="m-"+(c?d+" "+c:d))}if(!a||u!=c){for(;l<f.start;)i(l=Math.min(f.start,l+5e3),u);u=c}f.start=f.pos}for(;l<f.pos;){var p=Math.min(f.pos,l+5e3);i(p,u),l=p}}var xe=!1,Ce=!1;function Se(t,e,n){this.marker=t,this.from=e,this.to=n}function ke(t,e){if(t)for(var n=0;n<t.length;++n){var r=t[n];if(r.marker==e)return r}}function je(t,e){for(var n,r=0;r<t.length;++r)t[r]!=e&&(n||(n=[])).push(t[r]);return n}function Ee(t,e){if(e.full)return null;var n=Qt(t,e.from.line)&&Gt(t,e.from.line).markedSpans,r=Qt(t,e.to.line)&&Gt(t,e.to.line).markedSpans;if(!n&&!r)return null;var i=e.from.ch,o=e.to.ch,s=0==ne(e.from,e.to),a=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e)||o.from==e&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(r||(r=[])).push(new Se(s,o.from,a?null:o.to))}}return r}(n,i,s),c=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);(r||(r=[])).push(new Se(s,a?null:o.from-e,null==o.to?null:o.to-e))}}return r}(r,o,s),l=1==e.text.length,u=Y(e.text).length+(l?i:0);if(a)for(var f=0;f<a.length;++f){var h=a[f];if(null==h.to){var d=ke(c,h.marker);d?l&&(h.to=null==d.to?null:d.to+u):h.to=i}}if(c)for(var p=0;p<c.length;++p){var g=c[p];null!=g.to&&(g.to+=u),null==g.from?ke(a,g.marker)||(g.from=u,l&&(a||(a=[])).push(g)):(g.from+=u,l&&(a||(a=[])).push(g))}a&&(a=_e(a)),c&&c!=a&&(c=_e(c));var v=[a];if(!l){var m,y=e.text.length-2;if(y>0&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(m||(m=[])).push(new Se(a[b].marker,null,null));for(var w=0;w<y;++w)v.push(m);v.push(c)}return v}function _e(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Pe(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Te(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Ae(t){return t.inclusiveLeft?-1:0}function De(t){return t.inclusiveRight?1:0}function Me(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var r=t.find(),i=e.find(),o=ne(r.from,i.from)||Ae(t)-Ae(e);if(o)return-o;var s=ne(r.to,i.to)||De(t)-De(e);return s||e.id-t.id}function Le(t,e){var n,r=Ce&&t.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(e?i.from:i.to)&&(!n||Me(n,i.marker)<0)&&(n=i.marker);return n}function Re(t){return Le(t,!0)}function Ne(t){return Le(t,!1)}function Ie(t,e){var n,r=Ce&&t.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||Me(n,o.marker)<0)&&(n=o.marker)}return n}function Fe(t,e,n,r,i){var o=Gt(t,e),s=Ce&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var c=s[a];if(c.marker.collapsed){var l=c.marker.find(0),u=ne(l.from,n)||Ae(c.marker)-Ae(i),f=ne(l.to,r)||De(c.marker)-De(i);if(!(u>=0&&f<=0||u<=0&&f>=0)&&(u<=0&&(c.marker.inclusiveRight&&i.inclusiveLeft?ne(l.to,n)>=0:ne(l.to,n)>0)||u>=0&&(c.marker.inclusiveRight&&i.inclusiveLeft?ne(l.from,r)<=0:ne(l.from,r)<0)))return!0}}}function Be(t){for(var e;e=Re(t);)t=e.find(-1,!0).line;return t}function Ve(t,e){var n=Gt(t,e),r=Be(n);return n==r?e:Xt(r)}function Ue(t,e){if(e>t.lastLine())return e;var n,r=Gt(t,e);if(!ze(t,r))return e;for(;n=Ne(r);)r=n.find(1,!0).line;return Xt(r)+1}function ze(t,e){var n=Ce&&e.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&He(t,e,r))return!0}}function He(t,e,n){if(null==n.to){var r=n.marker.find(1,!0);return He(t,r.line,ke(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var i=void 0,o=0;o<e.markedSpans.length;++o)if((i=e.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&He(t,e,i))return!0}function We(t){for(var e=0,n=(t=Be(t)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==t)break;e+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;e+=a.height}return e}function $e(t){if(0==t.height)return 0;for(var e,n=t.text.length,r=t;e=Re(r);){var i=e.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=t;e=Ne(r);){var o=e.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function qe(t){var e=t.display,n=t.doc;e.maxLine=Gt(n,n.first),e.maxLineLength=$e(e.maxLine),e.maxLineChanged=!0,n.iter((function(t){var n=$e(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)}))}var Ge=function(t,e,n){this.text=t,Te(this,e),this.height=n?n(this):1};function Ke(t){t.parent=null,Pe(t)}Ge.prototype.lineNo=function(){return Xt(this)},bt(Ge);var Ye={},Je={};function Xe(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Je:Ye;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Ze(t,e){var n=T("span",null,null,c?"padding-right: .1px":null),r={pre:T("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var i=0;i<=(e.rest?e.rest.length:0);i++){var o=i?e.rest[i-1]:e.line,s=void 0;r.pos=0,r.addToken=tn,Tt(t.display.measure)&&(s=ut(o,t.doc.direction))&&(r.addToken=en(r.addToken,s)),r.map=[],rn(o,r,de(t,o,e!=t.display.externalMeasured&&Xt(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=L(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=L(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Pt(t.display.measure))),0==i?(e.measure.map=r.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(r.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(c){var a=r.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return gt(t,"renderLine",t,e.line,r.pre),r.pre.className&&(r.textClass=L(r.pre.className,r.textClass||"")),r}function Qe(t){var e=P("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function tn(t,e,n,r,i,o,c){if(e){var l,u=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,r="",i=0;i<t.length;i++){var o=t.charAt(i);" "!=o||!n||i!=t.length-1&&32!=t.charCodeAt(i+1)||(o=" "),r+=o,n=" "==o}return r}(e,t.trailingSpace):e,f=t.cm.state.specialChars,h=!1;if(f.test(e)){l=document.createDocumentFragment();for(var d=0;1;){f.lastIndex=d;var p=f.exec(e),g=p?p.index-d:e.length-d;if(g){var v=document.createTextNode(u.slice(d,d+g));s&&a<9?l.appendChild(P("span",[v])):l.appendChild(v),t.map.push(t.pos,t.pos+g,v),t.col+=g,t.pos+=g}if(!p)break;d+=g+1;var m=void 0;if("\t"==p[0]){var y=t.cm.options.tabSize,b=y-t.col%y;(m=l.appendChild(P("span",K(b),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),t.col+=b}else"\r"==p[0]||"\n"==p[0]?((m=l.appendChild(P("span","\r"==p[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",p[0]),t.col+=1):((m=t.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),s&&a<9?l.appendChild(P("span",[m])):l.appendChild(m),t.col+=1);t.map.push(t.pos,t.pos+1,m),t.pos++}}else t.col+=e.length,l=document.createTextNode(u),t.map.push(t.pos,t.pos+e.length,l),s&&a<9&&(h=!0),t.pos+=e.length;if(t.trailingSpace=32==u.charCodeAt(e.length-1),n||r||i||h||o||c){var w=n||"";r&&(w+=r),i&&(w+=i);var O=P("span",[l],w,o);if(c)for(var x in c)c.hasOwnProperty(x)&&"style"!=x&&"class"!=x&&O.setAttribute(x,c[x]);return t.content.appendChild(O)}t.content.appendChild(l)}}function en(t,e){return function(n,r,i,o,s,a,c){i=i?i+" cm-force-border":"cm-force-border";for(var l=n.pos,u=l+r.length;;){for(var f=void 0,h=0;h<e.length&&!((f=e[h]).to>l&&f.from<=l);h++);if(f.to>=u)return t(n,r,i,o,s,a,c);t(n,r.slice(0,f.to-l),i,o,null,a,c),o=null,r=r.slice(f.to-l),l=f.to}}}function nn(t,e,n,r){var i=!r&&n.widgetNode;i&&t.map.push(t.pos,t.pos+e,i),!r&&t.cm.display.input.needsContentAttribute&&(i||(i=t.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(t.cm.display.input.setUneditable(i),t.content.appendChild(i)),t.pos+=e,t.trailingSpace=!1}function rn(t,e,n){var r=t.markedSpans,i=t.text,o=0;if(r)for(var s,a,c,l,u,f,h,d=i.length,p=0,g=1,v="",m=0;;){if(m==p){c=l=u=a="",h=null,f=null,m=1/0;for(var y=[],b=void 0,w=0;w<r.length;++w){var O=r[w],x=O.marker;if("bookmark"==x.type&&O.from==p&&x.widgetNode)y.push(x);else if(O.from<=p&&(null==O.to||O.to>p||x.collapsed&&O.to==p&&O.from==p)){if(null!=O.to&&O.to!=p&&m>O.to&&(m=O.to,l=""),x.className&&(c+=" "+x.className),x.css&&(a=(a?a+";":"")+x.css),x.startStyle&&O.from==p&&(u+=" "+x.startStyle),x.endStyle&&O.to==m&&(b||(b=[])).push(x.endStyle,O.to),x.title&&((h||(h={})).title=x.title),x.attributes)for(var C in x.attributes)(h||(h={}))[C]=x.attributes[C];x.collapsed&&(!f||Me(f.marker,x)<0)&&(f=O)}else O.from>p&&m>O.from&&(m=O.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==m&&(l+=" "+b[S]);if(!f||f.from==p)for(var k=0;k<y.length;++k)nn(e,0,y[k]);if(f&&(f.from||0)==p){if(nn(e,(null==f.to?d+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=d)break;for(var j=Math.min(d,m);1;){if(v){var E=p+v.length;if(!f){var _=E>j?v.slice(0,j-p):v;e.addToken(e,_,s?s+c:c,u,p+_.length==m?l:"",a,h)}if(E>=j){v=v.slice(j-p),p=j;break}p=E,u=""}v=i.slice(o,o=n[g++]),s=Xe(n[g++],e.cm.options)}}else for(var P=1;P<n.length;P+=2)e.addToken(e,i.slice(o,o=n[P]),Xe(n[P+1],e.cm.options))}function on(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=Ne(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?Xt(Y(this.rest))-n+1:1,this.node=this.text=null,this.hidden=ze(t,e)}function sn(t,e,n){for(var r,i=[],o=e;o<n;o=r){var s=new on(t.doc,Gt(t.doc,o),o);r=o+s.size,i.push(s)}return i}var an=null,cn=null;function ln(t,e){var n=dt(t,e);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);an?r=an.delayedCallbacks:cn?r=cn:(r=cn=[],setTimeout(un,0));for(var o=function(t){r.push((function(){return n[t].apply(null,i)}))},s=0;s<n.length;++s)o(s)}}function un(){var t=cn;cn=null;for(var e=0;e<t.length;++e)t[e]()}function fn(t,e,n,r){for(var i=0;i<e.changes.length;i++){var o=e.changes[i];"text"==o?pn(t,e):"gutter"==o?vn(t,e,n,r):"class"==o?gn(t,e):"widget"==o&&mn(t,e,r)}e.changes=null}function hn(t){return t.node==t.text&&(t.node=P("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),s&&a<8&&(t.node.style.zIndex=2)),t.node}function dn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Ze(t,e)}function pn(t,e){var n=e.text.className,r=dn(t,e);e.text==e.node&&(e.node=r.pre),e.text.parentNode.replaceChild(r.pre,e.text),e.text=r.pre,r.bgClass!=e.bgClass||r.textClass!=e.textClass?(e.bgClass=r.bgClass,e.textClass=r.textClass,gn(t,e)):n&&(e.text.className=n)}function gn(t,e){!function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var r=hn(e);e.background=r.insertBefore(P("div",null,n),r.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?hn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function vn(t,e,n,r){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var i=hn(e);e.gutterBackground=P("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),i.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var s=hn(e),a=e.gutter=P("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(a.setAttribute("aria-hidden","true"),t.display.input.setUneditable(a),s.insertBefore(a,e.text),e.line.gutterClass&&(a.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=a.appendChild(P("div",te(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var c=0;c<t.display.gutterSpecs.length;++c){var l=t.display.gutterSpecs[c].className,u=o.hasOwnProperty(l)&&o[l];u&&a.appendChild(P("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[l]+"px; width: "+r.gutterWidth[l]+"px"))}}}function mn(t,e,n){e.alignable&&(e.alignable=null);for(var r=S("CodeMirror-linewidget"),i=e.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,r.test(i.className)&&e.node.removeChild(i);bn(t,e,n)}function yn(t,e,n,r){var i=dn(t,e);return e.text=e.node=i.pre,i.bgClass&&(e.bgClass=i.bgClass),i.textClass&&(e.textClass=i.textClass),gn(t,e),vn(t,e,n,r),bn(t,e,r),e.node}function bn(t,e,n){if(wn(t,e.line,e,n,!0),e.rest)for(var r=0;r<e.rest.length;r++)wn(t,e.rest[r],e,n,!1)}function wn(t,e,n,r,i){if(e.widgets)for(var o=hn(n),s=0,a=e.widgets;s<a.length;++s){var c=a[s],l=P("div",[c.node],"CodeMirror-linewidget"+(c.className?" "+c.className:""));c.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),On(c,l,n,r),t.display.input.setUneditable(l),i&&c.above?o.insertBefore(l,n.gutter||n.text):o.appendChild(l),ln(c,"redraw")}}function On(t,e,n,r){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var i=r.wrapperWidth;e.style.left=r.fixedPos+"px",t.coverGutter||(i-=r.gutterTotalWidth,e.style.paddingLeft=r.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-r.gutterTotalWidth+"px"))}function xn(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!A(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),_(e.display.measure,P("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function Cn(t,e){for(var n=St(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function Sn(t){return t.lineSpace.offsetTop}function kn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function jn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=_(t.measure,P("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(t.cachedPaddingH=r),r}function En(t){return U-t.display.nativeBarWidth}function _n(t){return t.display.scroller.clientWidth-En(t)-t.display.barWidth}function Pn(t){return t.display.scroller.clientHeight-En(t)-t.display.barHeight}function Tn(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var r=0;r<t.rest.length;r++)if(t.rest[r]==e)return{map:t.measure.maps[r],cache:t.measure.caches[r]};for(var i=0;i<t.rest.length;i++)if(Xt(t.rest[i])>n)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}function An(t,e,n,r){return Ln(t,Mn(t,e),n,r)}function Dn(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[fr(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Mn(t,e){var n=Xt(e),r=Dn(t,n);r&&!r.text?r=null:r&&r.changes&&(fn(t,r,n,sr(t)),t.curOp.forceUpdate=!0),r||(r=function(t,e){var n=Xt(e=Be(e)),r=t.display.externalMeasured=new on(t.doc,e,n);r.lineN=n;var i=r.built=Ze(t,r);return r.text=i.pre,_(t.display.lineMeasure,i.pre),r}(t,e));var i=Tn(r,e,n);return{line:e,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Ln(t,e,n,r,i){e.before&&(n=-1);var o,c=n+(r||"");return e.cache.hasOwnProperty(c)?o=e.cache[c]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,n){var r=t.options.lineWrapping,i=r&&_n(t);if(!e.measure.heights||r&&e.measure.width!=i){var o=e.measure.heights=[];if(r){e.measure.width=i;for(var s=e.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var c=s[a],l=s[a+1];Math.abs(c.bottom-l.bottom)>2&&o.push((c.bottom+l.top)/2-n.top)}}o.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(o=function(t,e,n,r){var i,o=In(e.map,n,r),c=o.node,l=o.start,u=o.end,f=o.collapse;if(3==c.nodeType){for(var h=0;h<4;h++){for(;l&&it(e.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+u<o.coverEnd&&it(e.line.text.charAt(o.coverStart+u));)++u;if((i=s&&a<9&&0==l&&u==o.coverEnd-o.coverStart?c.parentNode.getBoundingClientRect():Fn(k(c,l,u).getClientRects(),r)).left||i.right||0==l)break;u=l,l-=1,f="right"}s&&a<11&&(i=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=Rt)return Rt;var e=_(t,P("span","x")),n=e.getBoundingClientRect(),r=k(e,0,1).getBoundingClientRect();return Rt=Math.abs(n.left-r.left)>1}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*r,bottom:e.bottom*r}}(t.display.measure,i))}else{var d;l>0&&(f=r="right"),i=t.options.lineWrapping&&(d=c.getClientRects()).length>1?d["right"==r?d.length-1:0]:c.getBoundingClientRect()}if(s&&a<9&&!l&&(!i||!i.left&&!i.right)){var p=c.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+or(t.display),top:p.top,bottom:p.bottom}:Nn}for(var g=i.top-e.rect.top,v=i.bottom-e.rect.top,m=(g+v)/2,y=e.view.measure.heights,b=0;b<y.length-1&&!(m<y[b]);b++);var w=b?y[b-1]:0,O=y[b],x={left:("right"==f?i.right:i.left)-e.rect.left,right:("left"==f?i.left:i.right)-e.rect.left,top:w,bottom:O};return i.left||i.right||(x.bogus=!0),t.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=v),x}(t,e,n,r)).bogus||(e.cache[c]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Rn,Nn={left:0,right:0,top:0,bottom:0};function In(t,e,n){for(var r,i,o,s,a,c,l=0;l<t.length;l+=3)if(a=t[l],c=t[l+1],e<a?(i=0,o=1,s="left"):e<c?o=(i=e-a)+1:(l==t.length-3||e==c&&t[l+3]>e)&&(i=(o=c-a)-1,e>=c&&(s="right")),null!=i){if(r=t[l+2],a==c&&n==(r.insertLeft?"left":"right")&&(s=n),"left"==n&&0==i)for(;l&&t[l-2]==t[l-3]&&t[l-1].insertLeft;)r=t[(l-=3)+2],s="left";if("right"==n&&i==c-a)for(;l<t.length-3&&t[l+3]==t[l+4]&&!t[l+5].insertLeft;)r=t[(l+=3)+2],s="right";break}return{node:r,start:i,end:o,collapse:s,coverStart:a,coverEnd:c}}function Fn(t,e){var n=Nn;if("left"==e)for(var r=0;r<t.length&&(n=t[r]).left==n.right;r++);else for(var i=t.length-1;i>=0&&(n=t[i]).left==n.right;i--);return n}function Bn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Vn(t){t.display.externalMeasure=null,E(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Bn(t.display.view[e])}function Un(t){Vn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function zn(){return u&&v?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Hn(){return u&&v?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Wn(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=xn(t.widgets[n]));return e}function $n(t,e,n,r,i){if(!i){var o=Wn(e);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var s=We(e);if("local"==r?s+=Sn(t.display):s-=t.display.viewOffset,"page"==r||"window"==r){var a=t.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==r?0:Hn());var c=a.left+("window"==r?0:zn());n.left+=c,n.right+=c}return n.top+=s,n.bottom+=s,n}function qn(t,e,n){if("div"==n)return e;var r=e.left,i=e.top;if("page"==n)r-=zn(),i-=Hn();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:r-s.left,top:i-s.top}}function Gn(t,e,n,r,i){return r||(r=Gt(t.doc,e.line)),$n(t,r,An(t,r,e.ch,i),n)}function Kn(t,e,n,r,i,o){function s(e,s){var a=Ln(t,i,e,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,$n(t,r,a,n)}r=r||Gt(t.doc,e.line),i||(i=Mn(t,r));var a=ut(r,t.doc.direction),c=e.ch,l=e.sticky;if(c>=r.text.length?(c=r.text.length,l="before"):c<=0&&(c=0,l="after"),!a)return s("before"==l?c-1:c,"before"==l);function u(t,e,n){return s(n?t-1:t,1==a[e].level!=n)}var f=ct(a,c,l),h=at,d=u(c,f,"before"==l);return null!=h&&(d.other=u(c,h,"before"!=l)),d}function Yn(t,e){var n=0;e=ce(t.doc,e),t.options.lineWrapping||(n=or(t.display)*e.ch);var r=Gt(t.doc,e.line),i=We(r)+Sn(t.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Jn(t,e,n,r,i){var o=ee(t,e,n);return o.xRel=i,r&&(o.outside=r),o}function Xn(t,e,n){var r=t.doc;if((n+=t.display.viewOffset)<0)return Jn(r.first,0,null,-1,-1);var i=Zt(r,n),o=r.first+r.size-1;if(i>o)return Jn(r.first+r.size-1,Gt(r,o).text.length,null,1,1);e<0&&(e=0);for(var s=Gt(r,i);;){var a=er(t,s,i,e,n),c=Ie(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!c)return a;var l=c.find(1);if(l.line==i)return l;s=Gt(r,i=l.line)}}function Zn(t,e,n,r){r-=Wn(e);var i=e.text.length,o=st((function(e){return Ln(t,n,e-1).bottom<=r}),i,0);return{begin:o,end:i=st((function(e){return Ln(t,n,e).top>r}),o,i)}}function Qn(t,e,n,r){return n||(n=Mn(t,e)),Zn(t,e,n,$n(t,e,Ln(t,n,r),"line").top)}function tr(t,e,n,r){return!(t.bottom<=n)&&(t.top>n||(r?t.left:t.right)>e)}function er(t,e,n,r,i){i-=We(e);var o=Mn(t,e),s=Wn(e),a=0,c=e.text.length,l=!0,u=ut(e,t.doc.direction);if(u){var f=(t.options.lineWrapping?rr:nr)(t,e,n,o,u,r,i);a=(l=1!=f.level)?f.from:f.to-1,c=l?f.to:f.from-1}var h,d,p=null,g=null,v=st((function(e){var n=Ln(t,o,e);return n.top+=s,n.bottom+=s,!!tr(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(p=e,g=n),!0)}),a,c),m=!1;if(g){var y=r-g.left<g.right-r,b=y==l;v=p+(b?0:1),d=b?"after":"before",h=y?g.left:g.right}else{l||v!=c&&v!=a||v++,d=0==v?"after":v==e.text.length?"before":Ln(t,o,v-(l?1:0)).bottom+s<=i==l?"after":"before";var w=Kn(t,ee(n,v,d),"line",e,o);h=w.left,m=i<w.top?-1:i>=w.bottom?1:0}return Jn(n,v=ot(e.text,v,1),d,m,r-h)}function nr(t,e,n,r,i,o,s){var a=st((function(a){var c=i[a],l=1!=c.level;return tr(Kn(t,ee(n,l?c.to:c.from,l?"before":"after"),"line",e,r),o,s,!0)}),0,i.length-1),c=i[a];if(a>0){var l=1!=c.level,u=Kn(t,ee(n,l?c.from:c.to,l?"after":"before"),"line",e,r);tr(u,o,s,!0)&&u.top>s&&(c=i[a-1])}return c}function rr(t,e,n,r,i,o,s){var a=Zn(t,e,r,s),c=a.begin,l=a.end;/\s/.test(e.text.charAt(l-1))&&l--;for(var u=null,f=null,h=0;h<i.length;h++){var d=i[h];if(!(d.from>=l||d.to<=c)){var p=Ln(t,r,1!=d.level?Math.min(l,d.to)-1:Math.max(c,d.from)).right,g=p<o?o-p+1e9:p-o;(!u||f>g)&&(u=d,f=g)}}return u||(u=i[i.length-1]),u.from<c&&(u={from:c,to:u.to,level:u.level}),u.to>l&&(u={from:u.from,to:l,level:u.level}),u}function ir(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Rn){Rn=P("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)Rn.appendChild(document.createTextNode("x")),Rn.appendChild(P("br"));Rn.appendChild(document.createTextNode("x"))}_(t.measure,Rn);var n=Rn.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),E(t.measure),n||1}function or(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=P("span","xxxxxxxxxx"),n=P("pre",[e],"CodeMirror-line-like");_(t.measure,n);var r=e.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(t.cachedCharWidth=i),i||10}function sr(t){for(var e=t.display,n={},r={},i=e.gutters.clientLeft,o=e.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=t.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+i,r[a]=o.clientWidth}return{fixedPos:ar(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:e.wrapper.clientWidth}}function ar(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function cr(t){var e=ir(t.display),n=t.options.lineWrapping,r=n&&Math.max(5,t.display.scroller.clientWidth/or(t.display)-3);return function(i){if(ze(t.doc,i))return 0;var o=0;if(i.widgets)for(var s=0;s<i.widgets.length;s++)i.widgets[s].height&&(o+=i.widgets[s].height);return n?o+(Math.ceil(i.text.length/r)||1)*e:o+e}}function lr(t){var e=t.doc,n=cr(t);e.iter((function(t){var e=n(t);e!=t.height&&Jt(t,e)}))}function ur(t,e,n,r){var i=t.display;if(!n&&"true"==St(e).getAttribute("cm-not-content"))return null;var o,s,a=i.lineSpace.getBoundingClientRect();try{o=e.clientX-a.left,s=e.clientY-a.top}catch(t){return null}var c,l=Xn(t,o,s);if(r&&l.xRel>0&&(c=Gt(t.doc,l.line).text).length==l.ch){var u=F(c,c.length,t.options.tabSize)-c.length;l=ee(l.line,Math.max(0,Math.round((o-jn(t.display).left)/or(t.display))-u))}return l}function fr(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,r=0;r<n.length;r++)if((e-=n[r].size)<0)return r}function hr(t,e,n,r){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),r||(r=0);var i=t.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>e)&&(i.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=i.viewTo)Ce&&Ve(t.doc,e)<i.viewTo&&pr(t);else if(n<=i.viewFrom)Ce&&Ue(t.doc,n+r)>i.viewFrom?pr(t):(i.viewFrom+=r,i.viewTo+=r);else if(e<=i.viewFrom&&n>=i.viewTo)pr(t);else if(e<=i.viewFrom){var o=gr(t,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):pr(t)}else if(n>=i.viewTo){var s=gr(t,e,e,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):pr(t)}else{var a=gr(t,e,e,-1),c=gr(t,n,n+r,1);a&&c?(i.view=i.view.slice(0,a.index).concat(sn(t,a.lineN,c.lineN)).concat(i.view.slice(c.index)),i.viewTo+=r):pr(t)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:e<l.lineN+l.size&&(i.externalMeasured=null))}function dr(t,e,n){t.curOp.viewChanged=!0;var r=t.display,i=t.display.externalMeasured;if(i&&e>=i.lineN&&e<i.lineN+i.size&&(r.externalMeasured=null),!(e<r.viewFrom||e>=r.viewTo)){var o=r.view[fr(t,e)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==V(s,n)&&s.push(n)}}}function pr(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function gr(t,e,n,r){var i,o=fr(t,e),s=t.display.view;if(!Ce||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var a=t.display.viewFrom,c=0;c<o;c++)a+=s[c].size;if(a!=e){if(r>0){if(o==s.length-1)return null;i=a+s[o].size-e,o++}else i=a-e;e+=i,n+=i}for(;Ve(t.doc,n)!=n;){if(o==(r<0?0:s.length-1))return null;n+=r*s[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function vr(t){for(var e=t.display.view,n=0,r=0;r<e.length;r++){var i=e[r];i.hidden||i.node&&!i.changes||++n}return n}function mr(t){t.display.input.showSelection(t.display.input.prepareSelection())}function yr(t,e){void 0===e&&(e=!0);for(var n=t.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(e||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var c=a.empty();(c||t.options.showCursorWhenSelecting)&&br(t,a.head,i),c||Or(t,a,o)}}return r}function br(t,e,n){var r=Kn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),i=n.appendChild(P("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var o=Gn(t,e,"div",null,null);o.right-o.left>0&&(i.style.width=o.right-o.left+"px")}if(r.other){var s=n.appendChild(P("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=r.other.left+"px",s.style.top=r.other.top+"px",s.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function wr(t,e){return t.top-e.top||t.left-e.left}function Or(t,e,n){var r=t.display,i=t.doc,o=document.createDocumentFragment(),s=jn(t.display),a=s.left,c=Math.max(r.sizerWidth,_n(t)-r.sizer.offsetLeft)-s.right,l="ltr"==i.direction;function u(t,e,n,r){e<0&&(e=0),e=Math.round(e),r=Math.round(r),o.appendChild(P("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?c-t:n)+"px;\n                             height: "+(r-e)+"px"))}function f(e,n,r){var o,s,f=Gt(i,e),h=f.text.length;function d(n,r){return Gn(t,ee(e,n),"div",f,r)}function p(e,n,r){var i=Qn(t,f,null,e),o="ltr"==n==("after"==r)?"left":"right";return d("after"==r?i.begin:i.end-(/\s/.test(f.text.charAt(i.end-1))?2:1),o)[o]}var g=ut(f,i.direction);return function(t,e,n,r){if(!t)return r(e,n,"ltr",0);for(var i=!1,o=0;o<t.length;++o){var s=t[o];(s.from<n&&s.to>e||e==n&&s.to==e)&&(r(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),i=!0)}i||r(e,n,"ltr")}(g,n||0,null==r?h:r,(function(t,e,i,f){var v="ltr"==i,m=d(t,v?"left":"right"),y=d(e-1,v?"right":"left"),b=null==n&&0==t,w=null==r&&e==h,O=0==f,x=!g||f==g.length-1;if(y.top-m.top<=3){var C=(l?w:b)&&x,S=(l?b:w)&&O?a:(v?m:y).left,k=C?c:(v?y:m).right;u(S,m.top,k-S,m.bottom)}else{var j,E,_,P;v?(j=l&&b&&O?a:m.left,E=l?c:p(t,i,"before"),_=l?a:p(e,i,"after"),P=l&&w&&x?c:y.right):(j=l?p(t,i,"before"):a,E=!l&&b&&O?c:m.right,_=!l&&w&&x?a:y.left,P=l?p(e,i,"after"):c),u(j,m.top,E-j,m.bottom),m.bottom<y.top&&u(a,m.bottom,null,y.top),u(_,y.top,P-_,y.bottom)}(!o||wr(m,o)<0)&&(o=m),wr(y,o)<0&&(o=y),(!s||wr(m,s)<0)&&(s=m),wr(y,s)<0&&(s=y)})),{start:o,end:s}}var h=e.from(),d=e.to();if(h.line==d.line)f(h.line,h.ch,d.ch);else{var p=Gt(i,h.line),g=Gt(i,d.line),v=Be(p)==Be(g),m=f(h.line,h.ch,v?p.text.length+1:null).end,y=f(d.line,v?0:null,d.ch).start;v&&(m.top<y.top-2?(u(m.right,m.top,null,m.bottom),u(a,y.top,y.left,y.bottom)):u(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&u(a,m.bottom,null,y.top)}n.appendChild(o)}function xr(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval((function(){t.hasFocus()||jr(t),e.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Cr(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||kr(t))}function Sr(t){t.state.delayingBlurEvent=!0,setTimeout((function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&jr(t))}),100)}function kr(t,e){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(gt(t,"focus",t,e),t.state.focused=!0,M(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),c&&setTimeout((function(){return t.display.input.reset(!0)}),20)),t.display.input.receivedFocus()),xr(t))}function jr(t,e){t.state.delayingBlurEvent||(t.state.focused&&(gt(t,"blur",t,e),t.state.focused=!1,j(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150))}function Er(t){for(var e=t.display,n=e.lineDiv.offsetTop,r=Math.max(0,e.scroller.getBoundingClientRect().top),i=e.lineDiv.getBoundingClientRect().top,o=0,c=0;c<e.view.length;c++){var l=e.view[c],u=t.options.lineWrapping,f=void 0,h=0;if(!l.hidden){if(i+=l.line.height,s&&a<8){var d=l.node.offsetTop+l.node.offsetHeight;f=d-n,n=d}else{var p=l.node.getBoundingClientRect();f=p.bottom-p.top,!u&&l.text.firstChild&&(h=l.text.firstChild.getBoundingClientRect().right-p.left-1)}var g=l.line.height-f;if((g>.005||g<-.005)&&(i<r&&(o-=g),Jt(l.line,f),_r(l.line),l.rest))for(var v=0;v<l.rest.length;v++)_r(l.rest[v]);if(h>t.display.sizerWidth){var m=Math.ceil(h/or(t.display));m>t.display.maxLineLength&&(t.display.maxLineLength=m,t.display.maxLine=l.line,t.display.maxLineChanged=!0)}}}Math.abs(o)>2&&(e.scroller.scrollTop+=o)}function _r(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Pr(t,e,n){var r=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;r=Math.floor(r-Sn(t));var i=n&&null!=n.bottom?n.bottom:r+t.wrapper.clientHeight,o=Zt(e,r),s=Zt(e,i);if(n&&n.ensure){var a=n.ensure.from.line,c=n.ensure.to.line;a<o?(o=a,s=Zt(e,We(Gt(e,a))+t.wrapper.clientHeight)):Math.min(c,e.lastLine())>=s&&(o=Zt(e,We(Gt(e,c))-t.wrapper.clientHeight),s=c)}return{from:o,to:Math.max(s,o+1)}}function Tr(t,e){var n=t.display,r=ir(t.display);e.top<0&&(e.top=0);var i=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=Pn(t),s={};e.bottom-e.top>o&&(e.bottom=e.top+o);var a=t.doc.height+kn(n),c=e.top<r,l=e.bottom>a-r;if(e.top<i)s.scrollTop=c?0:e.top;else if(e.bottom>i+o){var u=Math.min(e.top,(l?a:e.bottom)-o);u!=i&&(s.scrollTop=u)}var f=t.options.fixedGutter?0:n.gutters.offsetWidth,h=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft-f,d=_n(t)-n.gutters.offsetWidth,p=e.right-e.left>d;return p&&(e.right=e.left+d),e.left<10?s.scrollLeft=0:e.left<h?s.scrollLeft=Math.max(0,e.left+f-(p?0:10)):e.right>d+h-3&&(s.scrollLeft=e.right+(p?0:10)-d),s}function Ar(t,e){null!=e&&(Lr(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Dr(t){Lr(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Mr(t,e,n){null==e&&null==n||Lr(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Lr(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Rr(t,Yn(t,e.from),Yn(t,e.to),e.margin))}function Rr(t,e,n,r){var i=Tr(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-r,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+r});Mr(t,i.scrollLeft,i.scrollTop)}function Nr(t,e){Math.abs(t.doc.scrollTop-e)<2||(n||li(t,{top:e}),Ir(t,e,!0),n&&li(t),ii(t,100))}function Ir(t,e,n){e=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e)),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function Fr(t,e,n,r){e=Math.max(0,Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!r||(t.doc.scrollLeft=e,hi(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Br(t){var e=t.display,n=e.gutters.offsetWidth,r=Math.round(t.doc.height+kn(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+En(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var Vr=function(t,e,n){this.cm=n;var r=this.vert=P("div",[P("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=P("div",[P("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,t(r),t(i),ht(r,"scroll",(function(){r.clientHeight&&e(r.scrollTop,"vertical")})),ht(i,"scroll",(function(){i.clientWidth&&e(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Vr.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,r=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?r+"px":"0";var i=t.viewHeight-(e?r:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:e?r:0}},Vr.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Vr.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Vr.prototype.zeroWidthHack=function(){var t=y&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new B,this.disableVert=new B},Vr.prototype.enableZeroWidthBar=function(t,e,n){t.style.pointerEvents="auto",e.set(1e3,(function r(){var i=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,r)}))},Vr.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Ur=function(){};function zr(t,e){e||(e=Br(t));var n=t.display.barWidth,r=t.display.barHeight;Hr(t,e);for(var i=0;i<4&&n!=t.display.barWidth||r!=t.display.barHeight;i++)n!=t.display.barWidth&&t.options.lineWrapping&&Er(t),Hr(t,Br(t)),n=t.display.barWidth,r=t.display.barHeight}function Hr(t,e){var n=t.display,r=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}Ur.prototype.update=function(){return{bottom:0,right:0}},Ur.prototype.setScrollLeft=function(){},Ur.prototype.setScrollTop=function(){},Ur.prototype.clear=function(){};var Wr={native:Vr,null:Ur};function $r(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&j(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Wr[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),ht(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){return t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,n){"horizontal"==n?Fr(t,e):Nr(t,e)}),t),t.display.scrollbars.addClass&&M(t.display.wrapper,t.display.scrollbars.addClass)}var qr=0;function Gr(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++qr,markArrays:null},e=t.curOp,an?an.ops.push(e):e.ownsGroup=an={ops:[e],delayedCallbacks:[]}}function Kr(t){var e=t.curOp;e&&function(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var r=0;r<t.ops.length;r++){var i=t.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<e.length)}(n)}finally{an=null,e(n)}}(e,(function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)Yr(e[n]);for(var r=0;r<e.length;r++)Jr(e[r]);for(var i=0;i<e.length;i++)Xr(e[i]);for(var o=0;o<e.length;o++)Zr(e[o]);for(var s=0;s<e.length;s++)Qr(e[s])}(t)}))}function Yr(t){var e=t.cm,n=e.display;!function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=En(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=En(t)+"px",e.scrollbarsClipped=!0)}(e),t.updateMaxLine&&qe(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new si(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Jr(t){t.updatedDisplay=t.mustUpdate&&ai(t.cm,t.update)}function Xr(t){var e=t.cm,n=e.display;t.updatedDisplay&&Er(e),t.barMeasure=Br(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=An(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+En(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-_n(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function Zr(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Fr(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==D();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&zr(e,t.barMeasure),t.updatedDisplay&&fi(e,t.barMeasure),t.selectionChanged&&xr(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&Cr(t.cm)}function Qr(t){var e=t.cm,n=e.display,r=e.doc;t.updatedDisplay&&ci(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Ir(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&Fr(e,t.scrollLeft,!0,!0),t.scrollToPos&&function(t,e){if(!vt(t,"scrollCursorIntoView")){var n=t.display,r=n.sizer.getBoundingClientRect(),i=null;if(e.top+r.top<0?i=!0:e.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=P("div","​",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-Sn(t.display))+"px;\n                         height: "+(e.bottom-e.top+En(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(i),t.display.lineSpace.removeChild(o)}}}(e,function(t,e,n,r){var i;null==r&&(r=0),t.options.lineWrapping||e!=n||(n="before"==e.sticky?ee(e.line,e.ch+1,"before"):e,e=e.ch?ee(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e);for(var o=0;o<5;o++){var s=!1,a=Kn(t,e),c=n&&n!=e?Kn(t,n):a,l=Tr(t,i={left:Math.min(a.left,c.left),top:Math.min(a.top,c.top)-r,right:Math.max(a.left,c.left),bottom:Math.max(a.bottom,c.bottom)+r}),u=t.doc.scrollTop,f=t.doc.scrollLeft;if(null!=l.scrollTop&&(Nr(t,l.scrollTop),Math.abs(t.doc.scrollTop-u)>1&&(s=!0)),null!=l.scrollLeft&&(Fr(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-f)>1&&(s=!0)),!s)break}return i}(e,ce(r,t.scrollToPos.from),ce(r,t.scrollToPos.to),t.scrollToPos.margin));var i=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(i)for(var s=0;s<i.length;++s)i[s].lines.length||gt(i[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&gt(o[a],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&gt(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function ti(t,e){if(t.curOp)return e();Gr(t);try{return e()}finally{Kr(t)}}function ei(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Gr(t);try{return e.apply(t,arguments)}finally{Kr(t)}}}function ni(t){return function(){if(this.curOp)return t.apply(this,arguments);Gr(this);try{return t.apply(this,arguments)}finally{Kr(this)}}}function ri(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Gr(e);try{return t.apply(this,arguments)}finally{Kr(e)}}}function ii(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,N(oi,t))}function oi(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,r=pe(t,e.highlightFrontier),i=[];e.iter(r.line,Math.min(e.first+e.size,t.display.viewTo+500),(function(o){if(r.line>=t.display.viewFrom){var s=o.styles,a=o.text.length>t.options.maxHighlightLength?Ht(e.mode,r.state):null,c=he(t,o,r,!0);a&&(r.state=a),o.styles=c.styles;var l=o.styleClasses,u=c.classes;u?o.styleClasses=u:l&&(o.styleClasses=null);for(var f=!s||s.length!=o.styles.length||l!=u&&(!l||!u||l.bgClass!=u.bgClass||l.textClass!=u.textClass),h=0;!f&&h<s.length;++h)f=s[h]!=o.styles[h];f&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=t.options.maxHighlightLength&&ge(t,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ii(t,t.options.workDelay),!0})),e.highlightFrontier=r.line,e.modeFrontier=Math.max(e.modeFrontier,r.line),i.length&&ti(t,(function(){for(var e=0;e<i.length;e++)dr(t,i[e],"text")}))}}var si=function(t,e,n){var r=t.display;this.viewport=e,this.visible=Pr(r,t.doc,e),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=_n(t),this.force=n,this.dims=sr(t),this.events=[]};function ai(t,e){var n=t.display,r=t.doc;if(e.editorIsHidden)return pr(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==vr(t))return!1;di(t)&&(pr(t),e.dims=sr(t));var i=r.first+r.size,o=Math.max(e.visible.from-t.options.viewportMargin,r.first),s=Math.min(i,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(i,n.viewTo)),Ce&&(o=Ve(t.doc,o),s=Ue(t.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;!function(t,e,n){var r=t.display;0==r.view.length||e>=r.viewTo||n<=r.viewFrom?(r.view=sn(t,e,n),r.viewFrom=e):(r.viewFrom>e?r.view=sn(t,e,r.viewFrom).concat(r.view):r.viewFrom<e&&(r.view=r.view.slice(fr(t,e))),r.viewFrom=e,r.viewTo<n?r.view=r.view.concat(sn(t,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,fr(t,n)))),r.viewTo=n}(t,o,s),n.viewOffset=We(Gt(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var l=vr(t);if(!a&&0==l&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(t){if(t.hasFocus())return null;var e=D();if(!e||!A(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&A(t.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(t);return l>4&&(n.lineDiv.style.display="none"),function(t,e,n){var r=t.display,i=t.options.lineNumbers,o=r.lineDiv,s=o.firstChild;function a(e){var n=e.nextSibling;return c&&y&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var l=r.view,u=r.viewFrom,f=0;f<l.length;f++){var h=l[f];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;s!=h.node;)s=a(s);var d=i&&null!=e&&e<=u&&h.lineNumber;h.changes&&(V(h.changes,"gutter")>-1&&(d=!1),fn(t,h,u,n)),d&&(E(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(te(t.options,u)))),s=h.node.nextSibling}else{var p=yn(t,h,u,n);o.insertBefore(p,s)}u+=h.size}for(;s;)s=a(s)}(t,n.updateLineNumbers,e.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=D()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&A(document.body,t.anchorNode)&&A(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(u),E(n.cursorDiv),E(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,ii(t,400)),n.updateLineNumbers=null,!0}function ci(t,e){for(var n=e.viewport,r=!0;;r=!1){if(r&&t.options.lineWrapping&&e.oldDisplayWidth!=_n(t))r&&(e.visible=Pr(t.display,t.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(t.doc.height+kn(t.display)-Pn(t),n.top)}),e.visible=Pr(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!ai(t,e))break;Er(t);var i=Br(t);mr(t),zr(t,i),fi(t,i),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function li(t,e){var n=new si(t,e);if(ai(t,n)){Er(t),ci(t,n);var r=Br(t);mr(t),zr(t,r),fi(t,r),n.finish()}}function ui(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px",ln(t,"gutterChanged",t)}function fi(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+En(t)+"px"}function hi(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=ar(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,o=r+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var c=0;c<a.length;c++)a[c].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=r+i+"px")}}function di(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=te(t.options,e.first+e.size-1),r=t.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(P("div",[P("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,s=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-s)+1,r.lineNumWidth=r.lineNumInnerWidth+s,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ui(t.display),!0}return!1}function pi(t,e){for(var n=[],r=!1,i=0;i<t.length;i++){var o=t[i],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!e)continue;r=!0}n.push({className:o,style:s})}return e&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function gi(t){var e=t.gutters,n=t.gutterSpecs;E(e),t.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],o=i.className,s=i.style,a=e.appendChild(P("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&(t.lineGutter=a,a.style.width=(t.lineNumWidth||1)+"px")}e.style.display=n.length?"":"none",ui(t)}function vi(t){gi(t.display),hr(t),hi(t)}function mi(t,e,r,i){var o=this;this.input=r,o.scrollbarFiller=P("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=P("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=T("div",null,"CodeMirror-code"),o.selectionDiv=P("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=P("div",null,"CodeMirror-cursors"),o.measure=P("div",null,"CodeMirror-measure"),o.lineMeasure=P("div",null,"CodeMirror-measure"),o.lineSpace=T("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var l=T("div",[o.lineSpace],"CodeMirror-lines");o.mover=P("div",[l],null,"position: relative"),o.sizer=P("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=P("div",null,null,"position: absolute; height: "+U+"px; width: 1px;"),o.gutters=P("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=P("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=P("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),o.wrapper.setAttribute('translate','no'),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),c||n&&m||(o.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(o.wrapper):t(o.wrapper)),o.viewFrom=o.viewTo=e.first,o.reportedViewFrom=o.reportedViewTo=e.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=pi(i.gutters,i.lineNumbers),gi(o),r.init(o)}si.prototype.signal=function(t,e){yt(t,e)&&this.events.push(arguments)},si.prototype.finish=function(){for(var t=0;t<this.events.length;t++)gt.apply(null,this.events[t])};var yi=0,bi=null;function wi(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function Oi(t){var e=wi(t);return e.x*=bi,e.y*=bi,e}function xi(t,e){var r=wi(e),i=r.x,o=r.y,s=t.display,a=s.scroller,l=a.scrollWidth>a.clientWidth,u=a.scrollHeight>a.clientHeight;if(i&&l||o&&u){if(o&&y&&c)t:for(var h=e.target,d=s.view;h!=a;h=h.parentNode)for(var p=0;p<d.length;p++)if(d[p].node==h){t.display.currentWheelTarget=h;break t}if(i&&!n&&!f&&null!=bi)return o&&u&&Nr(t,Math.max(0,a.scrollTop+o*bi)),Fr(t,Math.max(0,a.scrollLeft+i*bi)),(!o||o&&u)&&wt(e),void(s.wheelStartX=null);if(o&&null!=bi){var g=o*bi,v=t.doc.scrollTop,m=v+s.wrapper.clientHeight;g<0?v=Math.max(0,v+g-50):m=Math.min(t.doc.height,m+g+50),li(t,{top:v,bottom:m})}yi<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var t=a.scrollLeft-s.wheelStartX,e=a.scrollTop-s.wheelStartY,n=e&&s.wheelDY&&e/s.wheelDY||t&&s.wheelDX&&t/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(bi=(bi*yi+n)/(yi+1),++yi)}}),200)):(s.wheelDX+=i,s.wheelDY+=o))}}s?bi=-.53:n?bi=15:u?bi=-.7:h&&(bi=-1/3);var Ci=function(t,e){this.ranges=t,this.primIndex=e};Ci.prototype.primary=function(){return this.ranges[this.primIndex]},Ci.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],r=t.ranges[e];if(!re(n.anchor,r.anchor)||!re(n.head,r.head))return!1}return!0},Ci.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new Si(ie(this.ranges[e].anchor),ie(this.ranges[e].head));return new Ci(t,this.primIndex)},Ci.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Ci.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ne(e,r.from())>=0&&ne(t,r.to())<=0)return n}return-1};var Si=function(t,e){this.anchor=t,this.head=e};function ki(t,e,n){var r=t&&t.options.selectionsMayTouch,i=e[n];e.sort((function(t,e){return ne(t.from(),e.from())})),n=V(e,i);for(var o=1;o<e.length;o++){var s=e[o],a=e[o-1],c=ne(a.to(),s.from());if(r&&!s.empty()?c>0:c>=0){var l=se(a.from(),s.from()),u=oe(a.to(),s.to()),f=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,e.splice(--o,2,new Si(f?u:l,f?l:u))}}return new Ci(e,n)}function ji(t,e){return new Ci([new Si(t,e||t)],0)}function Ei(t){return t.text?ee(t.from.line+t.text.length-1,Y(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function _i(t,e){if(ne(t,e.from)<0)return t;if(ne(t,e.to)<=0)return Ei(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=Ei(e).ch-e.to.ch),ee(n,r)}function Pi(t,e){for(var n=[],r=0;r<t.sel.ranges.length;r++){var i=t.sel.ranges[r];n.push(new Si(_i(i.anchor,e),_i(i.head,e)))}return ki(t.cm,n,t.sel.primIndex)}function Ti(t,e,n){return t.line==e.line?ee(n.line,t.ch-e.ch+n.ch):ee(n.line+(t.line-e.line),t.ch)}function Ai(t){t.doc.mode=Vt(t.options,t.doc.modeOption),Di(t)}function Di(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ii(t,100),t.state.modeGen++,t.curOp&&hr(t)}function Mi(t,e){return 0==e.from.ch&&0==e.to.ch&&""==Y(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Li(t,e,n,r){function i(t){return n?n[t]:null}function o(t,n,i){!function(t,e,n,r){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Pe(t),Te(t,n);var i=r?r(t):1;i!=t.height&&Jt(t,i)}(t,n,i,r),ln(t,"change",t,e)}function s(t,e){for(var n=[],o=t;o<e;++o)n.push(new Ge(l[o],i(o),r));return n}var a=e.from,c=e.to,l=e.text,u=Gt(t,a.line),f=Gt(t,c.line),h=Y(l),d=i(l.length-1),p=c.line-a.line;if(e.full)t.insert(0,s(0,l.length)),t.remove(l.length,t.size-l.length);else if(Mi(t,e)){var g=s(0,l.length-1);o(f,f.text,d),p&&t.remove(a.line,p),g.length&&t.insert(a.line,g)}else if(u==f)if(1==l.length)o(u,u.text.slice(0,a.ch)+h+u.text.slice(c.ch),d);else{var v=s(1,l.length-1);v.push(new Ge(h+u.text.slice(c.ch),d,r)),o(u,u.text.slice(0,a.ch)+l[0],i(0)),t.insert(a.line+1,v)}else if(1==l.length)o(u,u.text.slice(0,a.ch)+l[0]+f.text.slice(c.ch),i(0)),t.remove(a.line+1,p);else{o(u,u.text.slice(0,a.ch)+l[0],i(0)),o(f,h+f.text.slice(c.ch),d);var m=s(1,l.length-1);p>1&&t.remove(a.line+1,p-1),t.insert(a.line+1,m)}ln(t,"change",t,e)}function Ri(t,e,n){!function t(r,i,o){if(r.linked)for(var s=0;s<r.linked.length;++s){var a=r.linked[s];if(a.doc!=i){var c=o&&a.sharedHist;n&&!c||(e(a.doc,c),t(a.doc,r,c))}}}(t,null,!0)}function Ni(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,lr(t),Ai(t),Ii(t),t.options.direction=e.direction,t.options.lineWrapping||qe(t),t.options.mode=e.modeOption,hr(t)}function Ii(t){("rtl"==t.doc.direction?M:j)(t.display.lineDiv,"CodeMirror-rtl")}function Fi(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function Bi(t,e){var n={from:ie(e.from),to:Ei(e),text:Kt(t,e.from,e.to)};return Wi(t,n,e.from.line,e.to.line+1),Ri(t,(function(t){return Wi(t,n,e.from.line,e.to.line+1)}),!0),n}function Vi(t){for(;t.length&&Y(t).ranges;)t.pop()}function Ui(t,e,n,r){var i=t.history;i.undone.length=0;var o,s,a=+new Date;if((i.lastOp==r||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&i.lastModTime>a-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=function(t,e){return e?(Vi(t.done),Y(t.done)):t.done.length&&!Y(t.done).ranges?Y(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),Y(t.done)):void 0}(i,i.lastOp==r)))s=Y(o.changes),0==ne(e.from,e.to)&&0==ne(e.from,s.to)?s.to=Ei(e):o.changes.push(Bi(t,e));else{var c=Y(i.done);for(c&&c.ranges||Hi(t.sel,i.done),o={changes:[Bi(t,e)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=e.origin,s||gt(t,"historyAdded")}function zi(t,e,n,r){var i=t.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(t,e,n,r){var i=e.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,o,Y(i.done),e))?i.done[i.done.length-1]=e:Hi(e,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Vi(i.undone)}function Hi(t,e){var n=Y(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Wi(t,e,n,r){var i=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,r),(function(n){n.markedSpans&&((i||(i=e["spans_"+t.id]={}))[o]=n.markedSpans),++o}))}function $i(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function qi(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var r=[],i=0;i<e.text.length;++i)r.push($i(n[i]));return r}(t,e),r=Ee(t,e);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],s=r[i];if(o&&s)t:for(var a=0;a<s.length;++a){for(var c=s[a],l=0;l<o.length;++l)if(o[l].marker==c.marker)continue t;o.push(c)}else s&&(n[i]=s)}return n}function Gi(t,e,n){for(var r=[],i=0;i<t.length;++i){var o=t[i];if(o.ranges)r.push(n?Ci.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var c=0;c<s.length;++c){var l=s[c],u=void 0;if(a.push({from:l.from,to:l.to,text:l.text}),e)for(var f in l)(u=f.match(/^spans_(\d+)$/))&&V(e,Number(u[1]))>-1&&(Y(a)[f]=l[f],delete l[f])}}}return r}function Ki(t,e,n,r){if(r){var i=t.anchor;if(n){var o=ne(e,i)<0;o!=ne(n,i)<0?(i=e,e=n):o!=ne(e,n)<0&&(e=n)}return new Si(i,e)}return new Si(n||e,e)}function Yi(t,e,n,r,i){null==i&&(i=t.cm&&(t.cm.display.shift||t.extend)),to(t,new Ci([Ki(t.sel.primary(),e,n,i)],0),r)}function Ji(t,e,n){for(var r=[],i=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)r[o]=Ki(t.sel.ranges[o],e[o],null,i);to(t,ki(t.cm,r,t.sel.primIndex),n)}function Xi(t,e,n,r){var i=t.sel.ranges.slice(0);i[e]=n,to(t,ki(t.cm,i,t.sel.primIndex),r)}function Zi(t,e,n,r){to(t,ji(e,n),r)}function Qi(t,e,n){var r=t.history.done,i=Y(r);i&&i.ranges?(r[r.length-1]=e,eo(t,e,n)):to(t,e,n)}function to(t,e,n){eo(t,e,n),zi(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function eo(t,e,n){(yt(t,"beforeSelectionChange")||t.cm&&yt(t.cm,"beforeSelectionChange"))&&(e=function(t,e,n){var r={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new Si(ce(t,e[n].anchor),ce(t,e[n].head))},origin:n&&n.origin};return gt(t,"beforeSelectionChange",t,r),t.cm&&gt(t.cm,"beforeSelectionChange",t.cm,r),r.ranges!=e.ranges?ki(t.cm,r.ranges,r.ranges.length-1):e}(t,e,n));var r=n&&n.bias||(ne(e.primary().head,t.sel.primary().head)<0?-1:1);no(t,io(t,e,r,!0)),n&&!1===n.scroll||!t.cm||"nocursor"==t.cm.getOption("readOnly")||Dr(t.cm)}function no(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,mt(t.cm)),ln(t,"cursorActivity",t))}function ro(t){no(t,io(t,t.sel,null,!1))}function io(t,e,n,r){for(var i,o=0;o<e.ranges.length;o++){var s=e.ranges[o],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],c=so(t,s.anchor,a&&a.anchor,n,r),l=so(t,s.head,a&&a.head,n,r);(i||c!=s.anchor||l!=s.head)&&(i||(i=e.ranges.slice(0,o)),i[o]=new Si(c,l))}return i?ki(t.cm,i,e.primIndex):e}function oo(t,e,n,r,i){var o=Gt(t,e.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],c=a.marker,l="selectLeft"in c?!c.selectLeft:c.inclusiveLeft,u="selectRight"in c?!c.selectRight:c.inclusiveRight;if((null==a.from||(l?a.from<=e.ch:a.from<e.ch))&&(null==a.to||(u?a.to>=e.ch:a.to>e.ch))){if(i&&(gt(c,"beforeCursorEnter"),c.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!c.atomic)continue;if(n){var f=c.find(r<0?1:-1),h=void 0;if((r<0?u:l)&&(f=ao(t,f,-r,f&&f.line==e.line?o:null)),f&&f.line==e.line&&(h=ne(f,n))&&(r<0?h<0:h>0))return oo(t,f,e,r,i)}var d=c.find(r<0?-1:1);return(r<0?l:u)&&(d=ao(t,d,r,d.line==e.line?o:null)),d?oo(t,d,e,r,i):null}}return e}function so(t,e,n,r,i){var o=r||1,s=oo(t,e,n,o,i)||!i&&oo(t,e,n,o,!0)||oo(t,e,n,-o,i)||!i&&oo(t,e,n,-o,!0);return s||(t.cantEdit=!0,ee(t.first,0))}function ao(t,e,n,r){return n<0&&0==e.ch?e.line>t.first?ce(t,ee(e.line-1)):null:n>0&&e.ch==(r||Gt(t,e.line)).text.length?e.line<t.first+t.size-1?ee(e.line+1,0):null:new ee(e.line,e.ch+n)}function co(t){t.setSelection(ee(t.firstLine(),0),ee(t.lastLine()),H)}function lo(t,e,n){var r={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(e,n,i,o){e&&(r.from=ce(t,e)),n&&(r.to=ce(t,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),gt(t,"beforeChange",t,r),t.cm&&gt(t.cm,"beforeChange",t.cm,r),r.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function uo(t,e,n){if(t.cm){if(!t.cm.curOp)return ei(t.cm,uo)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(yt(t,"beforeChange")||t.cm&&yt(t.cm,"beforeChange"))||(e=lo(t,e,!0))){var r=xe&&!n&&function(t,e,n){var r=null;if(t.iter(e.line,n.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||r&&-1!=V(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:e,to:n}],o=0;o<r.length;++o)for(var s=r[o],a=s.find(0),c=0;c<i.length;++c){var l=i[c];if(!(ne(l.to,a.from)<0||ne(l.from,a.to)>0)){var u=[c,1],f=ne(l.from,a.from),h=ne(l.to,a.to);(f<0||!s.inclusiveLeft&&!f)&&u.push({from:l.from,to:a.from}),(h>0||!s.inclusiveRight&&!h)&&u.push({from:a.to,to:l.to}),i.splice.apply(i,u),c+=u.length-3}}return i}(t,e.from,e.to);if(r)for(var i=r.length-1;i>=0;--i)fo(t,{from:r[i].from,to:r[i].to,text:i?[""]:e.text,origin:e.origin});else fo(t,e)}}function fo(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ne(e.from,e.to)){var n=Pi(t,e);Ui(t,e,n,t.cm?t.cm.curOp.id:NaN),go(t,e,n,Ee(t,e));var r=[];Ri(t,(function(t,n){n||-1!=V(r,t.history)||(bo(t.history,e),r.push(t.history)),go(t,e,null,Ee(t,e))}))}}function ho(t,e,n){var r=t.cm&&t.cm.state.suppressEdits;if(!r||n){for(var i,o=t.history,s=t.sel,a="undo"==e?o.done:o.undone,c="undo"==e?o.undone:o.done,l=0;l<a.length&&(i=a[l],n?!i.ranges||i.equals(t.sel):i.ranges);l++);if(l!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(r)return void a.push(i);break}if(Hi(i,c),n&&!i.equals(t.sel))return void to(t,i,{clearRedo:!1});s=i}var u=[];Hi(s,c),c.push({changes:u,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var f=yt(t,"beforeChange")||t.cm&&yt(t.cm,"beforeChange"),h=function(n){var r=i.changes[n];if(r.origin=e,f&&!lo(t,r,!1))return a.length=0,{};u.push(Bi(t,r));var o=n?Pi(t,r):Y(a);go(t,r,o,qi(t,r)),!n&&t.cm&&t.cm.scrollIntoView({from:r.from,to:Ei(r)});var s=[];Ri(t,(function(t,e){e||-1!=V(s,t.history)||(bo(t.history,r),s.push(t.history)),go(t,r,null,qi(t,r))}))},d=i.changes.length-1;d>=0;--d){var p=h(d);if(p)return p.v}}}}function po(t,e){if(0!=e&&(t.first+=e,t.sel=new Ci(J(t.sel.ranges,(function(t){return new Si(ee(t.anchor.line+e,t.anchor.ch),ee(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){hr(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,r=n.viewFrom;r<n.viewTo;r++)dr(t.cm,r,"gutter")}}function go(t,e,n,r){if(t.cm&&!t.cm.curOp)return ei(t.cm,go)(t,e,n,r);if(e.to.line<t.first)po(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);po(t,i),e={from:ee(t.first,0),to:ee(e.to.line+i,e.to.ch),text:[Y(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:ee(o,Gt(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Kt(t,e.from,e.to),n||(n=Pi(t,e)),t.cm?function(t,e,n){var r=t.doc,i=t.display,o=e.from,s=e.to,a=!1,c=o.line;t.options.lineWrapping||(c=Xt(Be(Gt(r,o.line))),r.iter(c,s.line+1,(function(t){if(t==i.maxLine)return a=!0,!0}))),r.sel.contains(e.from,e.to)>-1&&mt(t),Li(r,e,n,cr(t)),t.options.lineWrapping||(r.iter(c,o.line+e.text.length,(function(t){var e=$e(t);e>i.maxLineLength&&(i.maxLine=t,i.maxLineLength=e,i.maxLineChanged=!0,a=!1)})),a&&(t.curOp.updateMaxLine=!0)),function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,r=e-1;r>n;r--){var i=Gt(t,r).stateAfter;if(i&&(!(i instanceof ue)||r+i.lookAhead<e)){n=r+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}(r,o.line),ii(t,400);var l=e.text.length-(s.line-o.line)-1;e.full?hr(t):o.line!=s.line||1!=e.text.length||Mi(t.doc,e)?hr(t,o.line,s.line+1,l):dr(t,o.line,"text");var u=yt(t,"changes"),f=yt(t,"change");if(f||u){var h={from:o,to:s,text:e.text,removed:e.removed,origin:e.origin};f&&ln(t,"change",t,h),u&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(h)}t.display.selForContextMenu=null}(t.cm,e,r):Li(t,e,r),eo(t,n,H),t.cantEdit&&so(t,ee(t.firstLine(),0))&&(t.cantEdit=!1)}}function vo(t,e,n,r,i){var o;r||(r=n),ne(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof e&&(e=t.splitLines(e)),uo(t,{from:n,to:r,text:e,origin:i})}function mo(t,e,n,r){n<t.line?t.line+=r:e<t.line&&(t.line=e,t.ch=0)}function yo(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i],s=!0;if(o.ranges){o.copied||((o=t[i]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)mo(o.ranges[a].anchor,e,n,r),mo(o.ranges[a].head,e,n,r)}else{for(var c=0;c<o.changes.length;++c){var l=o.changes[c];if(n<l.from.line)l.from=ee(l.from.line+r,l.from.ch),l.to=ee(l.to.line+r,l.to.ch);else if(e<=l.to.line){s=!1;break}}s||(t.splice(0,i+1),i=0)}}}function bo(t,e){var n=e.from.line,r=e.to.line,i=e.text.length-(r-n)-1;yo(t.done,n,r,i),yo(t.undone,n,r,i)}function wo(t,e,n,r){var i=e,o=e;return"number"==typeof e?o=Gt(t,ae(t,e)):i=Xt(e),null==i?null:(r(o,i)&&t.cm&&dr(t.cm,i,n),o)}function Oo(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function xo(t){this.children=t;for(var e=0,n=0,r=0;r<t.length;++r){var i=t[r];e+=i.chunkSize(),n+=i.height,i.parent=this}this.size=e,this.height=n,this.parent=null}Si.prototype.from=function(){return se(this.anchor,this.head)},Si.prototype.to=function(){return oe(this.anchor,this.head)},Si.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Oo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,r=t+e;n<r;++n){var i=this.lines[n];this.height-=i.height,Ke(i),ln(i,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var r=0;r<e.length;++r)e[r].parent=this},iterN:function(t,e,n){for(var r=t+e;t<r;++t)if(n(this.lines[t]))return!0}},xo.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(t<i){var o=Math.min(e,i-t),s=r.height;if(r.removeInner(t,o),this.height-=s-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(e-=o))break;t=0}else t-=i}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof Oo))){var a=[];this.collapse(a),this.children=[new Oo(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<=o){if(i.insertInner(t,e,n),i.lines&&i.lines.length>50){for(var s=i.lines.length%25+25,a=s;a<i.lines.length;){var c=new Oo(i.lines.slice(a,a+=25));i.height-=c.height,this.children.splice(++r,0,c),c.parent=this}i.lines=i.lines.slice(0,s),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new xo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=V(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var r=new xo(t.children);r.parent=t,t.children=[r,e],t=r}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<o){var s=Math.min(e,o-t);if(i.iterN(t,s,n))return!0;if(0==(e-=s))break;t=0}else t-=o}}};var Co=function(t,e,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=t,this.node=e};function So(t,e,n){We(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Ar(t,n)}Co.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,r=Xt(n);if(null!=r&&e){for(var i=0;i<e.length;++i)e[i]==this&&e.splice(i--,1);e.length||(n.widgets=null);var o=xn(this);Jt(n,Math.max(0,n.height-o)),t&&(ti(t,(function(){So(t,n,-o),dr(t,r,"widget")})),ln(t,"lineWidgetCleared",t,this,r))}},Co.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=xn(this)-e;i&&(ze(this.doc,r)||Jt(r,r.height+i),n&&ti(n,(function(){n.curOp.forceUpdate=!0,So(n,r,i),ln(n,"lineWidgetChanged",n,t,Xt(r))})))},bt(Co);var ko=0,jo=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++ko};function Eo(t,e,n,r,i){if(r&&r.shared)return function(t,e,n,r,i){(r=I(r)).shared=!1;var o=[Eo(t,e,n,r,i)],s=o[0],a=r.widgetNode;return Ri(t,(function(t){a&&(r.widgetNode=a.cloneNode(!0)),o.push(Eo(t,ce(t,e),ce(t,n),r,i));for(var c=0;c<t.linked.length;++c)if(t.linked[c].isParent)return;s=Y(o)})),new _o(o,s)}(t,e,n,r,i);if(t.cm&&!t.cm.curOp)return ei(t.cm,Eo)(t,e,n,r,i);var o=new jo(t,i),s=ne(e,n);if(r&&I(r,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=T("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Fe(t,e.line,e,n,o)||e.line!=n.line&&Fe(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ce=!0}o.addToHistory&&Ui(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var a,c=e.line,l=t.cm;if(t.iter(c,n.line+1,(function(r){l&&o.collapsed&&!l.options.lineWrapping&&Be(r)==l.display.maxLine&&(a=!0),o.collapsed&&c!=e.line&&Jt(r,0),function(t,e,n){var r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&r.has(t.markedSpans)?t.markedSpans.push(e):(t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],r&&r.add(t.markedSpans)),e.marker.attachLine(t)}(r,new Se(o,c==e.line?e.ch:null,c==n.line?n.ch:null),t.cm&&t.cm.curOp),++c})),o.collapsed&&t.iter(e.line,n.line+1,(function(e){ze(t,e)&&Jt(e,0)})),o.clearOnEnter&&ht(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(xe=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++ko,o.atomic=!0),l){if(a&&(l.curOp.updateMaxLine=!0),o.collapsed)hr(l,e.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var u=e.line;u<=n.line;u++)dr(l,u,"text");o.atomic&&ro(l.doc),ln(l,"markerAdded",l,o)}return o}jo.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Gr(t),yt(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=ke(s.markedSpans,this);t&&!this.collapsed?dr(t,Xt(s),"text"):t&&(null!=a.to&&(i=Xt(s)),null!=a.from&&(r=Xt(s))),s.markedSpans=je(s.markedSpans,a),null==a.from&&this.collapsed&&!ze(this.doc,s)&&t&&Jt(s,ir(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var l=Be(this.lines[c]),u=$e(l);u>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=u,t.display.maxLineChanged=!0)}null!=r&&t&&this.collapsed&&hr(t,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&ro(t.doc)),t&&ln(t,"markerCleared",t,this,r,i),e&&Kr(t),this.parent&&this.parent.clear()}},jo.prototype.find=function(t,e){var n,r;null==t&&"bookmark"==this.type&&(t=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],s=ke(o.markedSpans,this);if(null!=s.from&&(n=ee(e?o:Xt(o),s.from),-1==t))return n;if(null!=s.to&&(r=ee(e?o:Xt(o),s.to),1==t))return r}return n&&{from:n,to:r}},jo.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,r=this.doc.cm;e&&r&&ti(r,(function(){var i=e.line,o=Xt(e.line),s=Dn(r,o);if(s&&(Bn(s),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!ze(n.doc,i)&&null!=n.height){var a=n.height;n.height=null;var c=xn(n)-a;c&&Jt(i,i.height+c)}ln(r,"markerChanged",r,t)}))},jo.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=V(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},jo.prototype.detachLine=function(t){if(this.lines.splice(V(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},bt(jo);var _o=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function Po(t){return t.findMarks(ee(t.first,0),t.clipPos(ee(t.lastLine())),(function(t){return t.parent}))}function To(t){for(var e=function(e){var n=t[e],r=[n.primary.doc];Ri(n.primary.doc,(function(t){return r.push(t)}));for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==V(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<t.length;n++)e(n)}_o.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ln(this,"clear")}},_o.prototype.find=function(t,e){return this.primary.find(t,e)},bt(_o);var Ao=0,Do=function(t,e,n,r,i){if(!(this instanceof Do))return new Do(t,e,n,r,i);null==n&&(n=0),xo.call(this,[new Oo([new Ge("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=ee(n,0);this.sel=ji(o),this.history=new Fi(null),this.id=++Ao,this.modeOption=e,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Li(this,{from:o,to:o,text:t}),to(this,ji(o),H)};Do.prototype=Z(xo.prototype,{constructor:Do,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,r=0;r<e.length;++r)n+=e[r].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Yt(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:ri((function(t){var e=ee(this.first,0),n=this.first+this.size-1;uo(this,{from:e,to:ee(n,Gt(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Mr(this.cm,0,0),to(this,ji(e),H)})),replaceRange:function(t,e,n,r){vo(this,t,e=ce(this,e),n=n?ce(this,n):e,r)},getRange:function(t,e,n){var r=Kt(this,ce(this,t),ce(this,e));return!1===n?r:''===n?r.join(''):r.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(Qt(this,t))return Gt(this,t)},getLineNumber:function(t){return Xt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Gt(this,t)),Be(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return ce(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ri((function(t,e,n){Zi(this,ce(this,"number"==typeof t?ee(t,e||0):t),null,n)})),setSelection:ri((function(t,e,n){Zi(this,ce(this,t),ce(this,e||t),n)})),extendSelection:ri((function(t,e,n){Yi(this,ce(this,t),e&&ce(this,e),n)})),extendSelections:ri((function(t,e){Ji(this,le(this,t),e)})),extendSelectionsBy:ri((function(t,e){Ji(this,le(this,J(this.sel.ranges,t)),e)})),setSelections:ri((function(t,e,n){if(t.length){for(var r=[],i=0;i<t.length;i++)r[i]=new Si(ce(this,t[i].anchor),ce(this,t[i].head||t[i].anchor));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),to(this,ki(this.cm,r,e),n)}})),addSelection:ri((function(t,e,n){var r=this.sel.ranges.slice(0);r.push(new Si(ce(this,t),ce(this,e||t))),to(this,ki(this.cm,r,r.length-1),n)})),getSelection:function(t){for(var e,n=this.sel.ranges,r=0;r<n.length;r++){var i=Kt(this,n[r].from(),n[r].to());e=e?e.concat(i):i}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Kt(this,n[r].from(),n[r].to());!1!==t&&(i=i.join(t||this.lineSeparator())),e[r]=i}return e},replaceSelection:function(t,e,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=t;this.replaceSelections(r,e,n||"+input")},replaceSelections:ri((function(t,e,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var s=i.ranges[o];r[o]={from:s.from(),to:s.to(),text:this.splitLines(t[o]),origin:n}}for(var a=e&&"end"!=e&&function(t,e,n){for(var r=[],i=ee(t.first,0),o=i,s=0;s<e.length;s++){var a=e[s],c=Ti(a.from,i,o),l=Ti(Ei(a),i,o);if(i=a.to,o=l,"around"==n){var u=t.sel.ranges[s],f=ne(u.head,u.anchor)<0;r[s]=new Si(f?l:c,f?c:l)}else r[s]=new Si(c,c)}return new Ci(r,t.sel.primIndex)}(this,r,e),c=r.length-1;c>=0;c--)uo(this,r[c]);a?Qi(this,a):this.cm&&Dr(this.cm)})),undo:ri((function(){ho(this,"undo")})),redo:ri((function(){ho(this,"redo")})),undoSelection:ri((function(){ho(this,"undo",!0)})),redoSelection:ri((function(){ho(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,r=0;r<t.done.length;r++)t.done[r].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){var t=this;this.history=new Fi(this.history),Ri(this,(function(e){return e.history=t.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Gi(this.history.done),undone:Gi(this.history.undone)}},setHistory:function(t){var e=this.history=new Fi(this.history);e.done=Gi(t.done.slice(0),null,!0),e.undone=Gi(t.undone.slice(0),null,!0)},setGutterMarker:ri((function(t,e,n){return wo(this,t,"gutter",(function(t){var r=t.gutterMarkers||(t.gutterMarkers={});return r[e]=n,!n&&nt(r)&&(t.gutterMarkers=null),!0}))})),clearGutter:ri((function(t){var e=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[t]&&wo(e,n,"gutter",(function(){return n.gutterMarkers[t]=null,nt(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(t){var e;if("number"==typeof t){if(!Qt(this,t))return null;if(e=t,!(t=Gt(this,t)))return null}else if(null==(e=Xt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:ri((function(t,e,n){return wo(this,t,"gutter"==e?"gutter":"class",(function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[r]){if(S(n).test(t[r]))return!1;t[r]+=" "+n}else t[r]=n;return!0}))})),removeLineClass:ri((function(t,e,n){return wo(this,t,"gutter"==e?"gutter":"class",(function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",i=t[r];if(!i)return!1;if(null==n)t[r]=null;else{var o=i.match(S(n));if(!o)return!1;var s=o.index+o[0].length;t[r]=i.slice(0,o.index)+(o.index&&s!=i.length?" ":"")+i.slice(s)||null}return!0}))})),addLineWidget:ri((function(t,e,n){return function(t,e,n,r){var i=new Co(t,n,r),o=t.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),wo(t,e,"widget",(function(e){var n=e.widgets||(e.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length,Math.max(0,i.insertAt)),0,i),i.line=e,o&&!ze(t,e)){var r=We(e)<t.scrollTop;Jt(e,e.height+xn(i)),r&&Ar(o,i.height),o.curOp.forceUpdate=!0}return!0})),o&&ln(o,"lineWidgetAdded",o,i,"number"==typeof e?e:Xt(e)),i}(this,t,e,n)})),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return Eo(this,ce(this,t),ce(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return Eo(this,t=ce(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=Gt(this,(t=ce(this,t)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},findMarks:function(t,e,n){t=ce(this,t),e=ce(this,e);var r=[],i=t.line;return this.iter(t.line,e.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var c=s[a];null!=c.to&&i==t.line&&t.ch>=c.to||null==c.from&&i!=t.line||null!=c.from&&i==e.line&&c.from>=e.ch||n&&!n(c.marker)||r.push(c.marker.parent||c.marker)}++i})),r},getAllMarks:function(){var t=[];return this.iter((function(e){var n=e.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&t.push(n[r].marker)})),t},posFromIndex:function(t){var e,n=this.first,r=this.lineSeparator().length;return this.iter((function(i){var o=i.text.length+r;if(o>t)return e=t,!0;t-=o,++n})),ce(this,ee(n,e))},indexFromPos:function(t){var e=(t=ce(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,(function(t){e+=t.text.length+n})),e},copy:function(t){var e=new Do(Yt(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var r=new Do(Yt(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:t.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.find(),o=t.clipPos(i.from),s=t.clipPos(i.to);if(ne(o,s)){var a=Eo(t,o,s,r.primary,r.primary.type);r.markers.push(a),a.parent=r}}}(r,Po(this)),r},unlinkDoc:function(t){if(t instanceof Ps&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e)if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),To(Po(this));break}if(t.history==this.history){var n=[t.id];Ri(t,(function(t){return n.push(t.id)}),!0),t.history=new Fi(null),t.history.done=Gi(this.history.done,n),t.history.undone=Gi(this.history.undone,n)}},iterLinkedDocs:function(t){Ri(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Dt(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ri((function(t){var e;"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter((function(t){return t.order=null})),this.cm&&ti(e=this.cm,(function(){Ii(e),hr(e)})))}))}),Do.prototype.eachLine=Do.prototype.iter;var Mo=0;function Lo(t){var e=this;if(Ro(e),!vt(e,t)&&!Cn(e.display,t)){wt(t),s&&(Mo=+new Date);var n=ur(e,t,!0),r=t.dataTransfer.files;if(n&&!e.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,c=function(){++a==i&&ei(e,(function(){var t={from:n=ce(e.doc,n),to:n,text:e.doc.splitLines(o.filter((function(t){return null!=t})).join(e.doc.lineSeparator())),origin:"paste"};uo(e.doc,t),Qi(e.doc,ji(ce(e.doc,n),ce(e.doc,Ei(t))))}))()},l=function(t,n){if(e.options.allowDropFileTypes&&-1==V(e.options.allowDropFileTypes,t.type))c();else{var r=new FileReader;r.onerror=function(){return c()},r.onload=function(){var t=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(t)||(o[n]=t),c()},r.readAsText(t)}},u=0;u<r.length;u++)l(r[u],u);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout((function(){return e.display.input.focus()}),20);try{var f=t.dataTransfer.getData("Text");if(f){var h;if(e.state.draggingText&&!e.state.draggingText.copy&&(h=e.listSelections()),eo(e.doc,ji(n,n)),h)for(var d=0;d<h.length;++d)vo(e.doc,"",h[d].anchor,h[d].head,"drag");e.replaceSelection(f,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Ro(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function No(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<e.length;r++){var i=e[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation((function(){for(var e=0;e<n.length;e++)t(n[e])}))}}var Io=!1;function Fo(){var t;Io||(ht(window,"resize",(function(){null==t&&(t=setTimeout((function(){t=null,No(Bo)}),100))})),ht(window,"blur",(function(){return No(jr)})),Io=!0)}function Bo(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Vo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Uo=0;Uo<10;Uo++)Vo[Uo+48]=Vo[Uo+96]=String(Uo);for(var zo=65;zo<=90;zo++)Vo[zo]=String.fromCharCode(zo);for(var Ho=1;Ho<=12;Ho++)Vo[Ho+111]=Vo[Ho+63235]="F"+Ho;var Wo={};function $o(t){var e,n,r,i,o=t.split(/-(?!$)/);t=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);r=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),i&&(t="Cmd-"+t),r&&(t="Shift-"+t),t}function qo(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete t[n];continue}for(var i=J(n.split(" "),$o),o=0;o<i.length;o++){var s=void 0,a=void 0;o==i.length-1?(a=i.join(" "),s=r):(a=i.slice(0,o+1).join(" "),s="...");var c=e[a];if(c){if(c!=s)throw new Error("Inconsistent bindings for "+a)}else e[a]=s}delete t[n]}for(var l in e)t[l]=e[l];return t}function Go(t,e,n,r){var i=(e=Xo(e)).call?e.call(t,r):e[t];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Go(t,e.fallthrough,n,r);for(var o=0;o<e.fallthrough.length;o++){var s=Go(t,e.fallthrough[o],n,r);if(s)return s}}}function Ko(t){var e="string"==typeof t?t:Vo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Yo(t,e,n){var r=t;return e.altKey&&"Alt"!=r&&(t="Alt-"+t),(x?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(t="Ctrl-"+t),(x?e.ctrlKey:e.metaKey)&&"Mod"!=r&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=r&&(t="Shift-"+t),t}function Jo(t,e){if(f&&34==t.keyCode&&t["char"])return!1;var n=Vo[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Yo(n,t,e))}function Xo(t){return"string"==typeof t?Wo[t]:t}function Zo(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=e(n[i]);r.length&&ne(o.from,Y(r).to)<=0;){var s=r.pop();if(ne(s.from,o.from)<0){o.from=s.from;break}}r.push(o)}ti(t,(function(){for(var e=r.length-1;e>=0;e--)vo(t.doc,"",r[e].from,r[e].to,"+delete");Dr(t)}))}function Qo(t,e,n){var r=ot(t.text,e+n,n);return r<0||r>t.text.length?null:r}function ts(t,e,n){var r=Qo(t,e.ch,n);return null==r?null:new ee(e.line,r,n<0?"after":"before")}function es(t,e,n,r,i){if(t){"rtl"==e.doc.direction&&(i=-i);var o=ut(n,e.doc.direction);if(o){var s,a=i<0?Y(o):o[0],c=i<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==e.doc.direction){var l=Mn(e,n);s=i<0?n.text.length-1:0;var u=Ln(e,l,s).top;s=st((function(t){return Ln(e,l,t).top==u}),i<0==(1==a.level)?a.from:a.to-1,s),"before"==c&&(s=Qo(n,s,1))}else s=i<0?a.to:a.from;return new ee(r,s,c)}}return new ee(r,i<0?n.text.length:0,i<0?"before":"after")}Wo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Wo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Wo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Wo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Wo["default"]=y?Wo.macDefault:Wo.pcDefault;var ns={selectAll:co,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),H)},killLine:function(t){return Zo(t,(function(e){if(e.empty()){var n=Gt(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:ee(e.head.line+1,0)}:{from:e.head,to:ee(e.head.line,n)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return Zo(t,(function(e){return{from:ee(e.from().line,0),to:ce(t.doc,ee(e.to().line+1,0))}}))},delLineLeft:function(t){return Zo(t,(function(t){return{from:ee(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){return Zo(t,(function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}}))},delWrappedLineRight:function(t){return Zo(t,(function(e){var n=t.charCoords(e.head,"div").top+5,r=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:r}}))},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(ee(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(ee(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return rs(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return is(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){return function(t,e){var n=Gt(t.doc,e),r=function(t){for(var e;e=Ne(t);)t=e.find(1,!0).line;return t}(n);return r!=n&&(e=Xt(r)),es(!0,t,n,e,-1)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")}),$)},goLineLeft:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")}),$)},goLineLeftSmart:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5,r=t.coordsChar({left:0,top:n},"div");return r.ch<t.getLine(r.line).search(/\S/)?is(t,e.head):r}),$)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),r=t.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),s=F(t.getLine(o.line),o.ch,r);e.push(K(r-s%r))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return ti(t,(function(){for(var e=t.listSelections(),n=[],r=0;r<e.length;r++)if(e[r].empty()){var i=e[r].head,o=Gt(t.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new ee(i.line,i.ch-1)),i.ch>0)i=new ee(i.line,i.ch+1),t.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ee(i.line,i.ch-2),i,"+transpose");else if(i.line>t.doc.first){var s=Gt(t.doc,i.line-1).text;s&&(i=new ee(i.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+s.charAt(s.length-1),ee(i.line-1,s.length-1),i,"+transpose"))}n.push(new Si(i,i))}t.setSelections(n)}))},newlineAndIndent:function(t){return ti(t,(function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var r=0;r<e.length;r++)t.indentLine(e[r].from().line,null,!0);Dr(t)}))},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function rs(t,e){var n=Gt(t.doc,e),r=Be(n);return r!=n&&(e=Xt(r)),es(!0,t,r,e,1)}function is(t,e){var n=rs(t,e.line),r=Gt(t.doc,n.line),i=ut(r,t.doc.direction);if(!i||0==i[0].level){var o=Math.max(n.ch,r.text.search(/\S/)),s=e.line==n.line&&e.ch<=o&&e.ch;return ee(n.line,s?0:o,n.sticky)}return n}function os(t,e,n){if("string"==typeof e&&!(e=ns[e]))return!1;t.display.input.ensurePolled();var r=t.display.shift,i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),i=e(t)!=z}finally{t.display.shift=r,t.state.suppressEdits=!1}return i}var ss=new B;function as(t,e,n,r){var i=t.state.keySeq;if(i){if(Ko(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:ss.set(50,(function(){t.state.keySeq==i&&(t.state.keySeq=null,t.display.input.reset())})),cs(t,i+" "+e,n,r))return!0}return cs(t,e,n,r)}function cs(t,e,n,r){var i=function(t,e,n){for(var r=0;r<t.state.keyMaps.length;r++){var i=Go(e,t.state.keyMaps[r],n,t);if(i)return i}return t.options.extraKeys&&Go(e,t.options.extraKeys,n,t)||Go(e,t.options.keyMap,n,t)}(t,e,r);return"multi"==i&&(t.state.keySeq=e),"handled"==i&&ln(t,"keyHandled",t,e,n),"handled"!=i&&"multi"!=i||(wt(n),xr(t)),!!i}function ls(t,e){var n=Jo(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?as(t,"Shift-"+n,e,(function(e){return os(t,e,!0)}))||as(t,n,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return os(t,e)})):as(t,n,e,(function(e){return os(t,e)})))}var us=null;function fs(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||(e.curOp.focus=D(),vt(e,t)))){s&&a<11&&27==t.keyCode&&(t.returnValue=!1);var r=t.keyCode;e.display.shift=16==r||t.shiftKey;var i=ls(e,t);f&&(us=i?r:null,i||88!=r||Lt||!(y?t.metaKey:t.ctrlKey)||e.replaceSelection("",null,"cut")),n&&!y&&!i&&46==r&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=r||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(j(e,"CodeMirror-crosshair"),pt(document,"keyup",n),pt(document,"mouseover",n))}M(e,"CodeMirror-crosshair"),ht(document,"keyup",n),ht(document,"mouseover",n)}(e)}}function hs(t){16==t.keyCode&&(this.doc.sel.shift=!1),vt(this,t)}function ds(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||Cn(e.display,t)||vt(e,t)||t.ctrlKey&&!t.altKey||y&&t.metaKey)){var n=t.keyCode,r=t.charCode;if(f&&n==us)return us=null,void wt(t);if(!f||t.which&&!(t.which<10)||!ls(e,t)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(t,e,n){return as(t,"'"+n+"'",e,(function(e){return os(t,e,!0)}))}(e,t,i)||e.display.input.onKeyPress(t))}}}var ps,gs,vs=400,ms=function(t,e,n){this.time=t,this.pos=e,this.button=n};function ys(t){var e=this,n=e.display;if(!(vt(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,Cn(n,t))c||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!Os(e,t)){var r=ur(e,t),i=kt(t),o=r?function(t,e){var n=+new Date;return gs&&gs.compare(n,t,e)?(ps=gs=null,"triple"):ps&&ps.compare(n,t,e)?(gs=new ms(n,t,e),ps=null,"double"):(ps=new ms(n,t,e),gs=null,"single")}(r,i):"single";window.focus(),1==i&&e.state.selectingText&&e.state.selectingText(t),r&&function(t,e,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),as(t,Yo(o=(1==e?"Left":2==e?"Middle":"Right")+o,i),i,(function(e){if("string"==typeof e&&(e=ns[e]),!e)return!1;var r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),r=e(t,n)!=z}finally{t.state.suppressEdits=!1}return r}))}(e,i,r,o,t)||(1==i?r?function(t,e,n,r){s?setTimeout(N(Cr,t),0):t.curOp.focus=D();var i,o=function(t,e,n){var r=t.getOption("configureMouse"),i=r?r(t,e,n):{};if(null==i.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==i.extend||t.doc.extend)&&(i.extend=t.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=y?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(y?n.altKey:n.ctrlKey)),i}(t,n,r),l=t.doc.sel;t.options.dragDrop&&_t&&!t.isReadOnly()&&"single"==n&&(i=l.contains(e))>-1&&(ne((i=l.ranges[i]).from(),e)<0||e.xRel>0)&&(ne(i.to(),e)>0||e.xRel<0)?function(t,e,n,r){var i=t.display,o=!1,l=ei(t,(function(e){c&&(i.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:Sr(t)),pt(i.wrapper.ownerDocument,"mouseup",l),pt(i.wrapper.ownerDocument,"mousemove",u),pt(i.scroller,"dragstart",f),pt(i.scroller,"drop",l),o||(wt(e),r.addNew||Yi(t.doc,n,null,null,r.extend),c&&!h||s&&9==a?setTimeout((function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),u=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},f=function(){return o=!0};c&&(i.scroller.draggable=!0),t.state.draggingText=l,l.copy=!r.moveOnDrag,ht(i.wrapper.ownerDocument,"mouseup",l),ht(i.wrapper.ownerDocument,"mousemove",u),ht(i.scroller,"dragstart",f),ht(i.scroller,"drop",l),t.state.delayingBlurEvent=!0,setTimeout((function(){return i.input.focus()}),20),i.scroller.dragDrop&&i.scroller.dragDrop()}(t,r,e,o):function(t,e,n,r){s&&Sr(t);var i=t.display,o=t.doc;wt(e);var a,c,l=o.sel,u=l.ranges;if(r.addNew&&!r.extend?(c=o.sel.contains(n),a=c>-1?u[c]:new Si(n,n)):(a=o.sel.primary(),c=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(a=new Si(n,n)),n=ur(t,e,!0,!0),c=-1;else{var f=bs(t,n,r.unit);a=r.extend?Ki(a,f.anchor,f.head,r.extend):f}r.addNew?-1==c?(c=u.length,to(o,ki(t,u.concat([a]),c),{scroll:!1,origin:"*mouse"})):u.length>1&&u[c].empty()&&"char"==r.unit&&!r.extend?(to(o,ki(t,u.slice(0,c).concat(u.slice(c+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Xi(o,c,a,W):(c=0,to(o,new Ci([a],0),W),l=o.sel);var h=n;function d(e){if(0!=ne(h,e))if(h=e,"rectangle"==r.unit){for(var i=[],s=t.options.tabSize,u=F(Gt(o,n.line).text,n.ch,s),f=F(Gt(o,e.line).text,e.ch,s),d=Math.min(u,f),p=Math.max(u,f),g=Math.min(n.line,e.line),v=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=v;g++){var m=Gt(o,g).text,y=q(m,d,s);d==p?i.push(new Si(ee(g,y),ee(g,y))):m.length>y&&i.push(new Si(ee(g,y),ee(g,q(m,p,s))))}i.length||i.push(new Si(n,n)),to(o,ki(t,l.ranges.slice(0,c).concat(i),c),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,w=a,O=bs(t,e,r.unit),x=w.anchor;ne(O.anchor,x)>0?(b=O.head,x=se(w.from(),O.anchor)):(b=O.anchor,x=oe(w.to(),O.head));var C=l.ranges.slice(0);C[c]=function(t,e){var n=e.anchor,r=e.head,i=Gt(t.doc,n.line);if(0==ne(n,r)&&n.sticky==r.sticky)return e;var o=ut(i);if(!o)return e;var s=ct(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return e;var c,l=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==l||l==o.length)return e;if(r.line!=n.line)c=(r.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var u=ct(o,r.ch,r.sticky),f=u-s||(r.ch-n.ch)*(1==a.level?-1:1);c=u==l-1||u==l?f<0:f>0}var h=o[l+(c?-1:0)],d=c==(1==h.level),p=d?h.from:h.to,g=d?"after":"before";return n.ch==p&&n.sticky==g?e:new Si(new ee(n.line,p,g),r)}(t,new Si(ce(o,x),b)),to(o,ki(t,C,c),W)}}var p=i.wrapper.getBoundingClientRect(),g=0;function v(e){t.state.selectingText=!1,g=1/0,e&&(wt(e),i.input.focus()),pt(i.wrapper.ownerDocument,"mousemove",m),pt(i.wrapper.ownerDocument,"mouseup",y),o.history.lastSelOrigin=null}var m=ei(t,(function(e){0!==e.buttons&&kt(e)?function e(n){var s=++g,a=ur(t,n,!0,"rectangle"==r.unit);if(a)if(0!=ne(a,h)){t.curOp.focus=D(),d(a);var c=Pr(i,o);(a.line>=c.to||a.line<c.from)&&setTimeout(ei(t,(function(){g==s&&e(n)})),150)}else{var l=n.clientY<p.top?-20:n.clientY>p.bottom?20:0;l&&setTimeout(ei(t,(function(){g==s&&(i.scroller.scrollTop+=l,e(n))})),50)}}(e):v(e)})),y=ei(t,v);t.state.selectingText=y,ht(i.wrapper.ownerDocument,"mousemove",m),ht(i.wrapper.ownerDocument,"mouseup",y)}(t,r,e,o)}(e,r,o,t):St(t)==n.scroller&&wt(t):2==i?(r&&Yi(e.doc,r),setTimeout((function(){return n.input.focus()}),20)):3==i&&(C?e.display.input.onContextMenu(t):Sr(e)))}}function bs(t,e,n){if("char"==n)return new Si(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new Si(ee(e.line,0),ce(t.doc,ee(e.line+1,0)));var r=n(t,e);return new Si(r.from,r.to)}function ws(t,e,n,r){var i,o;if(e.touches)i=e.touches[0].clientX,o=e.touches[0].clientY;else try{i=e.clientX,o=e.clientY}catch(t){return!1}if(i>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;r&&wt(e);var s=t.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!yt(t,n))return xt(e);o-=a.top-s.viewOffset;for(var c=0;c<t.display.gutterSpecs.length;++c){var l=s.gutters.childNodes[c];if(l&&l.getBoundingClientRect().right>=i)return gt(t,n,t,Zt(t.doc,o),t.display.gutterSpecs[c].className,e),xt(e)}}function Os(t,e){return ws(t,e,"gutterClick",!0)}function xs(t,e){Cn(t.display,e)||function(t,e){return!!yt(t,"gutterContextMenu")&&ws(t,e,"gutterContextMenu",!1)}(t,e)||vt(t,e,"contextmenu")||C||t.display.input.onContextMenu(e)}function Cs(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Un(t)}ms.prototype.compare=function(t,e,n){return this.time+vs>t&&0==ne(e,this.pos)&&n==this.button};var Ss={toString:function(){return"CodeMirror.Init"}},ks={},js={};function Es(t,e,n){if(!e!=!(n&&n!=Ss)){var r=t.display.dragFunctions,i=e?ht:pt;i(t.display.scroller,"dragstart",r.start),i(t.display.scroller,"dragenter",r.enter),i(t.display.scroller,"dragover",r.over),i(t.display.scroller,"dragleave",r.leave),i(t.display.scroller,"drop",r.drop)}}function _s(t){t.options.lineWrapping?(M(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(j(t.display.wrapper,"CodeMirror-wrap"),qe(t)),lr(t),hr(t),Un(t),setTimeout((function(){return zr(t)}),100)}function Ps(t,e){var n=this;if(!(this instanceof Ps))return new Ps(t,e);this.options=e=e?I(e):{},I(ks,e,!1);var r=e.value;"string"==typeof r?r=new Do(r,e.mode,null,e.lineSeparator,e.direction):e.mode&&(r.modeOption=e.mode),this.doc=r;var i=new Ps.inputStyles[e.inputStyle](this),o=this.display=new mi(t,r,i,e);for(var l in o.wrapper.CodeMirror=this,Cs(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$r(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new B,keySeq:null,specialChars:null},e.autofocus&&!m&&o.input.focus(),s&&a<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(t){var e=t.display;ht(e.scroller,"mousedown",ei(t,ys)),ht(e.scroller,"dblclick",s&&a<11?ei(t,(function(e){if(!vt(t,e)){var n=ur(t,e);if(n&&!Os(t,e)&&!Cn(t.display,e)){wt(e);var r=t.findWordAt(n);Yi(t.doc,r.anchor,r.head)}}})):function(e){return vt(t,e)||wt(e)}),ht(e.scroller,"contextmenu",(function(e){return xs(t,e)})),ht(e.input.getField(),"contextmenu",(function(n){e.scroller.contains(n.target)||xs(t,n)}));var n,r={end:0};function i(){e.activeTouch&&(n=setTimeout((function(){return e.activeTouch=null}),1e3),(r=e.activeTouch).end=+new Date)}function o(t,e){if(null==e.left)return!0;var n=e.left-t.left,r=e.top-t.top;return n*n+r*r>20*20}ht(e.scroller,"touchstart",(function(i){if(!vt(t,i)&&!function(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}(i)&&!Os(t,i)){e.input.ensurePolled(),clearTimeout(n);var o=+new Date;e.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(e.activeTouch.left=i.touches[0].pageX,e.activeTouch.top=i.touches[0].pageY)}})),ht(e.scroller,"touchmove",(function(){e.activeTouch&&(e.activeTouch.moved=!0)})),ht(e.scroller,"touchend",(function(n){var r=e.activeTouch;if(r&&!Cn(e,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var s,a=t.coordsChar(e.activeTouch,"page");s=!r.prev||o(r,r.prev)?new Si(a,a):!r.prev.prev||o(r,r.prev.prev)?t.findWordAt(a):new Si(ee(a.line,0),ce(t.doc,ee(a.line+1,0))),t.setSelection(s.anchor,s.head),t.focus(),wt(n)}i()})),ht(e.scroller,"touchcancel",i),ht(e.scroller,"scroll",(function(){e.scroller.clientHeight&&(Nr(t,e.scroller.scrollTop),Fr(t,e.scroller.scrollLeft,!0),gt(t,"scroll",t))})),ht(e.scroller,"mousewheel",(function(e){return xi(t,e)})),ht(e.scroller,"DOMMouseScroll",(function(e){return xi(t,e)})),ht(e.wrapper,"scroll",(function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0})),e.dragFunctions={enter:function(e){vt(t,e)||Ct(e)},over:function(e){vt(t,e)||(function(t,e){var n=ur(t,e);if(n){var r=document.createDocumentFragment();br(t,n,r),t.display.dragCursor||(t.display.dragCursor=P("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),_(t.display.dragCursor,r)}}(t,e),Ct(e))},start:function(e){return function(t,e){if(s&&(!t.state.draggingText||+new Date-Mo<100))Ct(e);else if(!vt(t,e)&&!Cn(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!h)){var n=P("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}(t,e)},drop:ei(t,Lo),leave:function(e){vt(t,e)||Ro(t)}};var c=e.input.getField();ht(c,"keyup",(function(e){return hs.call(t,e)})),ht(c,"keydown",ei(t,fs)),ht(c,"keypress",ei(t,ds)),ht(c,"focus",(function(e){return kr(t,e)})),ht(c,"blur",(function(e){return jr(t,e)}))}(this),Fo(),Gr(this),this.curOp.forceUpdate=!0,Ni(this,r),e.autofocus&&!m||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&kr(n)}),20):jr(this),js)js.hasOwnProperty(l)&&js[l](this,e[l],Ss);di(this),e.finishInit&&e.finishInit(this);for(var u=0;u<Ts.length;++u)Ts[u](this);Kr(this),c&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ps.defaults=ks,Ps.optionHandlers=js;var Ts=[];function As(t,e,n,r){var i,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=pe(t,e).state:n="prev");var s=t.options.tabSize,a=Gt(o,e),c=F(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var l,u=a.text.match(/^\s*/)[0];if(r||/\S/.test(a.text)){if("smart"==n&&((l=o.mode.indent(i,a.text.slice(u.length),a.text))==z||l>150)){if(!r)return;n="prev"}}else l=0,n="not";"prev"==n?l=e>o.first?F(Gt(o,e-1).text,null,s):0:"add"==n?l=c+t.options.indentUnit:"subtract"==n?l=c-t.options.indentUnit:"number"==typeof n&&(l=c+n),l=Math.max(0,l);var f="",h=0;if(t.options.indentWithTabs)for(var d=Math.floor(l/s);d;--d)h+=s,f+="\t";if(h<l&&(f+=K(l-h)),f!=u)return vo(o,f,ee(e,0),ee(e,u.length),"+input"),a.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==e&&g.head.ch<u.length){var v=ee(e,u.length);Xi(o,p,new Si(v,v));break}}}Ps.defineInitHook=function(t){return Ts.push(t)};var Ds=null;function Ms(t){Ds=t}function Ls(t,e,n,r,i){var o=t.doc;t.display.shift=!1,r||(r=o.sel);var s=+new Date-200,a="paste"==i||t.state.pasteIncoming>s,c=Dt(e),l=null;if(a&&r.ranges.length>1)if(Ds&&Ds.text.join("\n")==e){if(r.ranges.length%Ds.text.length==0){l=[];for(var u=0;u<Ds.text.length;u++)l.push(o.splitLines(Ds.text[u]))}}else c.length==r.ranges.length&&t.options.pasteLinesPerSelection&&(l=J(c,(function(t){return[t]})));for(var f=t.curOp.updateInput,h=r.ranges.length-1;h>=0;h--){var d=r.ranges[h],p=d.from(),g=d.to();d.empty()&&(n&&n>0?p=ee(p.line,p.ch-n):t.state.overwrite&&!a?g=ee(g.line,Math.min(Gt(o,g.line).text.length,g.ch+Y(c).length)):a&&Ds&&Ds.lineWise&&Ds.text.join("\n")==c.join("\n")&&(p=g=ee(p.line,0)));var v={from:p,to:g,text:l?l[h%l.length]:c,origin:i||(a?"paste":t.state.cutIncoming>s?"cut":"+input")};uo(t.doc,v),ln(t,"inputRead",t,v)}e&&!a&&Ns(t,e),Dr(t),t.curOp.updateInput<2&&(t.curOp.updateInput=f),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Rs(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||ti(e,(function(){return Ls(e,n,0,null,"paste")})),!0}function Ns(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=t.getModeAt(i.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(e.indexOf(o.electricChars.charAt(a))>-1){s=As(t,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Gt(t.doc,i.head.line).text.slice(0,i.head.ch))&&(s=As(t,i.head.line,"smart"));s&&ln(t,"electricInput",t,i.head.line)}}}function Is(t){for(var e=[],n=[],r=0;r<t.doc.sel.ranges.length;r++){var i=t.doc.sel.ranges[r].head.line,o={anchor:ee(i,0),head:ee(i+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function Fs(t,e,n,r){t.setAttribute("autocorrect",n?"":"off"),t.setAttribute("autocapitalize",r?"":"off"),t.setAttribute("spellcheck",!!e)}function Bs(){var t=P("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=P("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?t.style.width="1000px":t.setAttribute("wrap","off"),g&&(t.style.border="1px solid black"),Fs(t),e}function Vs(t,e,n,r,i){var o=e,s=n,a=Gt(t,e.line),c=i&&"rtl"==t.direction?-n:n;function l(o){var s,l;if("codepoint"==r){var u=a.text.charCodeAt(e.ch+(n>0?0:-1));if(isNaN(u))s=null;else{var f=n>0?u>=55296&&u<56320:u>=56320&&u<57343;s=new ee(e.line,Math.max(0,Math.min(a.text.length,e.ch+n*(f?2:1))),-n)}}else s=i?function(t,e,n,r){var i=ut(e,t.doc.direction);if(!i)return ts(e,n,r);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ct(i,n.ch,n.sticky),s=i[o];if("ltr"==t.doc.direction&&s.level%2==0&&(r>0?s.to>n.ch:s.from<n.ch))return ts(e,n,r);var a,c=function(t,n){return Qo(e,t instanceof ee?t.ch:t,n)},l=function(n){return t.options.lineWrapping?(a=a||Mn(t,e),Qn(t,e,a,n)):{begin:0,end:e.text.length}},u=l("before"==n.sticky?c(n,-1):n.ch);if("rtl"==t.doc.direction||1==s.level){var f=1==s.level==r<0,h=c(n,f?1:-1);if(null!=h&&(f?h<=s.to&&h<=u.end:h>=s.from&&h>=u.begin)){var d=f?"before":"after";return new ee(n.line,h,d)}}var p=function(t,e,r){for(var o=function(t,e){return e?new ee(n.line,c(t,1),"before"):new ee(n.line,t,"after")};t>=0&&t<i.length;t+=e){var s=i[t],a=e>0==(1!=s.level),l=a?r.begin:c(r.end,-1);if(s.from<=l&&l<s.to)return o(l,a);if(l=a?s.from:c(s.to,-1),r.begin<=l&&l<r.end)return o(l,a)}},g=p(o+r,r,u);if(g)return g;var v=r>0?u.end:c(u.begin,-1);return null==v||r>0&&v==e.text.length||!(g=p(r>0?0:i.length-1,r,l(v)))?null:g}(t.cm,a,e,n):ts(a,e,n);if(null==s){if(o||(l=e.line+c)<t.first||l>=t.first+t.size||(e=new ee(l,e.ch,e.sticky),!(a=Gt(t,l))))return!1;e=es(i,t.cm,a,e.line,c)}else e=s;return!0}if("char"==r||"codepoint"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var u=null,f="group"==r,h=t.cm&&t.cm.getHelper(e,"wordChars"),d=!0;!(n<0)||l(!d);d=!1){var p=a.text.charAt(e.ch)||"\n",g=et(p,h)?"w":f&&"\n"==p?"n":!f||/\s/.test(p)?null:"p";if(!f||d||g||(g="s"),u&&u!=g){n<0&&(n=1,l(),e.sticky="after");break}if(g&&(u=g),n>0&&!l(!d))break}var v=so(t,e,o,s,!0);return re(o,v)&&(v.hitSide=!0),v}function Us(t,e,n,r){var i,o,s=t.doc,a=e.left;if("page"==r){var c=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(c-.5*ir(t.display),3);i=(n>0?e.bottom:e.top)+n*l}else"line"==r&&(i=n>0?e.bottom+3:e.top-3);for(;(o=Xn(t,a,i)).outside;){if(n<0?i<=0:i>=s.height){o.hitSide=!0;break}i+=5*n}return o}var zs=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new B,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Hs(t,e){var n=Dn(t,e.line);if(!n||n.hidden)return null;var r=Gt(t.doc,e.line),i=Tn(n,r,e.line),o=ut(r,t.doc.direction),s="left";o&&(s=ct(o,e.ch)%2?"right":"left");var a=In(i.map,e.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Ws(t,e){return e&&(t.bad=!0),t}function $s(t,e,n){var r;if(e==t.display.lineDiv){if(!(r=t.display.lineDiv.childNodes[n]))return Ws(t.clipPos(ee(t.display.viewTo-1)),!0);e=null,n=0}else for(r=e;;r=r.parentNode){if(!r||r==t.display.lineDiv)return null;if(r.parentNode&&r.parentNode==t.display.lineDiv)break}for(var i=0;i<t.display.view.length;i++){var o=t.display.view[i];if(o.node==r)return qs(o,e,n)}}function qs(t,e,n){var r=t.text.firstChild,i=!1;if(!e||!A(r,e))return Ws(ee(Xt(t.line),0),!0);if(e==r&&(i=!0,e=r.childNodes[n],n=0,!e)){var o=t.rest?Y(t.rest):t.line;return Ws(ee(Xt(o),o.text.length),i)}var s=3==e.nodeType?e:null,a=e;for(s||1!=e.childNodes.length||3!=e.firstChild.nodeType||(s=e.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=r;)a=a.parentNode;var c=t.measure,l=c.maps;function u(e,n,r){for(var i=-1;i<(l?l.length:0);i++)for(var o=i<0?c.map:l[i],s=0;s<o.length;s+=3){var a=o[s+2];if(a==e||a==n){var u=Xt(i<0?t.line:t.rest[i]),f=o[s]+r;return(r<0||a!=e)&&(f=o[s+(r?1:0)]),ee(u,f)}}}var f=u(s,a,n);if(f)return Ws(f,i);for(var h=a.nextSibling,d=s?s.nodeValue.length-n:0;h;h=h.nextSibling){if(f=u(h,h.firstChild,0))return Ws(ee(f.line,f.ch-d),i);d+=h.textContent.length}for(var p=a.previousSibling,g=n;p;p=p.previousSibling){if(f=u(p,p.firstChild,-1))return Ws(ee(f.line,f.ch+g),i);g+=p.textContent.length}}zs.prototype.init=function(t){var e=this,n=this,r=n.cm,i=n.div=t.lineDiv;function o(t){for(var e=t.target;e;e=e.parentNode){if(e==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(e.className))break}return!1}function s(t){if(o(t)&&!vt(r,t)){if(r.somethingSelected())Ms({lineWise:!1,text:r.getSelections()}),"cut"==t.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var e=Is(r);Ms({lineWise:!0,text:e.text}),"cut"==t.type&&r.operation((function(){r.setSelections(e.ranges,0,H),r.replaceSelection("",null,"cut")}))}if(t.clipboardData){t.clipboardData.clearData();var s=Ds.text.join("\n");if(t.clipboardData.setData("Text",s),t.clipboardData.getData("Text")==s)return void t.preventDefault()}var a=Bs(),c=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),c.value=Ds.text.join("\n");var l=D();R(c),setTimeout((function(){r.display.lineSpace.removeChild(a),l.focus(),l==i&&n.showPrimarySelection()}),50)}}i.contentEditable=!0,Fs(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),ht(i,"paste",(function(t){!o(t)||vt(r,t)||Rs(t,r)||a<=11&&setTimeout(ei(r,(function(){return e.updateFromDOM()})),20)})),ht(i,"compositionstart",(function(t){e.composing={data:t.data,done:!1}})),ht(i,"compositionupdate",(function(t){e.composing||(e.composing={data:t.data,done:!1})})),ht(i,"compositionend",(function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)})),ht(i,"touchstart",(function(){return n.forceCompositionEnd()})),ht(i,"input",(function(){e.composing||e.readFromDOMSoon()})),ht(i,"copy",s),ht(i,"cut",s)},zs.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute('aria-label',t):this.div.removeAttribute('aria-label')},zs.prototype.prepareSelection=function(){var t=yr(this.cm,!1);return t.focus=D()==this.div,t},zs.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},zs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},zs.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,r=e.doc.sel.primary(),i=r.from(),o=r.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var s=$s(e,t.anchorNode,t.anchorOffset),a=$s(e,t.focusNode,t.focusOffset);if(!s||s.bad||!a||a.bad||0!=ne(se(s,a),i)||0!=ne(oe(s,a),o)){var c=e.display.view,l=i.line>=e.display.viewFrom&&Hs(e,i)||{node:c[0].measure.map[2],offset:0},u=o.line<e.display.viewTo&&Hs(e,o);if(!u){var f=c[c.length-1].measure,h=f.maps?f.maps[f.maps.length-1]:f.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(l&&u){var d,p=t.rangeCount&&t.getRangeAt(0);try{d=k(l.node,l.offset,u.offset,u.node)}catch(t){}d&&(!n&&e.state.focused?(t.collapse(l.node,l.offset),d.collapsed||(t.removeAllRanges(),t.addRange(d))):(t.removeAllRanges(),t.addRange(d)),p&&null==t.anchorNode?t.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},zs.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation((function(){return t.cm.curOp.selectionChanged=!0}))}),20)},zs.prototype.showMultipleSelections=function(t){_(this.cm.display.cursorDiv,t.cursors),_(this.cm.display.selectionDiv,t.selection)},zs.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},zs.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return A(this.div,e)},zs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&D()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},zs.prototype.blur=function(){this.div.blur()},zs.prototype.getField=function(){return this.div},zs.prototype.supportsTouch=function(){return!0},zs.prototype.receivedFocus=function(){var t=this,e=this;this.selectionInEditor()?setTimeout((function(){return t.pollSelection()}),20):ti(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},zs.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},zs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(v&&u&&this.cm.display.gutterSpecs.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=$s(e,t.anchorNode,t.anchorOffset),r=$s(e,t.focusNode,t.focusOffset);n&&r&&ti(e,(function(){to(e.doc,ji(n,r),H),(n.bad||r.bad)&&(e.curOp.selectionChanged=!0)}))}}},zs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>r.firstLine()&&(s=ee(s.line-1,Gt(r.doc,s.line-1).length)),a.ch==Gt(r.doc,a.line).text.length&&a.line<r.lastLine()&&(a=ee(a.line+1,0)),s.line<i.viewFrom||a.line>i.viewTo-1)return!1;s.line==i.viewFrom||0==(t=fr(r,s.line))?(e=Xt(i.view[0].line),n=i.view[0].node):(e=Xt(i.view[t].line),n=i.view[t-1].node.nextSibling);var c,l,u=fr(r,a.line);if(u==i.view.length-1?(c=i.viewTo-1,l=i.lineDiv.lastChild):(c=Xt(i.view[u+1].line)-1,l=i.view[u+1].node.previousSibling),!n)return!1;for(var f=r.doc.splitLines(function(t,e,n,r,i){var o="",s=!1,a=t.doc.lineSeparator(),c=!1;function l(){s&&(o+=a,c&&(o+=a),s=c=!1)}function u(t){t&&(l(),o+=t)}function f(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void u(n);var o,h=e.getAttribute("cm-marker");if(h){var d=t.findMarks(ee(r,0),ee(i+1,0),(v=+h,function(t){return t.id==v}));return void(d.length&&(o=d[0].find(0))&&u(Kt(t.doc,o.from,o.to).join(a)))}if("false"==e.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;p&&l();for(var g=0;g<e.childNodes.length;g++)f(e.childNodes[g]);/^(pre|p)$/i.test(e.nodeName)&&(c=!0),p&&(s=!0)}else 3==e.nodeType&&u(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var v}for(;f(e),e!=n;)e=e.nextSibling,c=!1;return o}(r,n,l,e,c)),h=Kt(r.doc,ee(e,0),ee(c,Gt(r.doc,c).text.length));f.length>1&&h.length>1;)if(Y(f)==Y(h))f.pop(),h.pop(),c--;else{if(f[0]!=h[0])break;f.shift(),h.shift(),e++}for(var d=0,p=0,g=f[0],v=h[0],m=Math.min(g.length,v.length);d<m&&g.charCodeAt(d)==v.charCodeAt(d);)++d;for(var y=Y(f),b=Y(h),w=Math.min(y.length-(1==f.length?d:0),b.length-(1==h.length?d:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==f.length&&1==h.length&&e==s.line)for(;d&&d>s.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)d--,p++;f[f.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),f[0]=f[0].slice(d).replace(/\u200b+$/,"");var O=ee(e,d),x=ee(c,h.length?Y(h).length-p:0);return f.length>1||f[0]||ne(O,x)?(vo(r.doc,f,O,x,"+input"),!0):void 0},zs.prototype.ensurePolled=function(){this.forceCompositionEnd()},zs.prototype.reset=function(){this.forceCompositionEnd()},zs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},zs.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()}),80))},zs.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||ti(this.cm,(function(){return hr(t.cm)}))},zs.prototype.setUneditable=function(t){t.contentEditable="false"},zs.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||ei(this.cm,Ls)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},zs.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},zs.prototype.onContextMenu=function(){},zs.prototype.resetPosition=function(){},zs.prototype.needsContentAttribute=!0;var Gs=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new B,this.hasSelection=!1,this.composing=null};Gs.prototype.init=function(t){var e=this,n=this,r=this.cm;this.createField(t);var i=this.textarea;function o(t){if(!vt(r,t)){if(r.somethingSelected())Ms({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var e=Is(r);Ms({lineWise:!0,text:e.text}),"cut"==t.type?r.setSelections(e.ranges,null,H):(n.prevInput="",i.value=e.text.join("\n"),R(i))}"cut"==t.type&&(r.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),g&&(i.style.width="0px"),ht(i,"input",(function(){s&&a>=9&&e.hasSelection&&(e.hasSelection=null),n.poll()})),ht(i,"paste",(function(t){vt(r,t)||Rs(t,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())})),ht(i,"cut",o),ht(i,"copy",o),ht(t.scroller,"paste",(function(e){if(!Cn(t,e)&&!vt(r,e)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=e.clipboardData,i.dispatchEvent(o)}})),ht(t.lineSpace,"selectstart",(function(e){Cn(t,e)||wt(e)})),ht(i,"compositionstart",(function(){var t=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:r.markText(t,r.getCursor("to"),{className:"CodeMirror-composing"})}})),ht(i,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Gs.prototype.createField=function(t){this.wrapper=Bs(),this.textarea=this.wrapper.firstChild},Gs.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute('aria-label',t):this.textarea.removeAttribute('aria-label')},Gs.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,r=yr(t);if(t.options.moveInputWithCursor){var i=Kn(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),s=e.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+s.top-o.top)),r.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+s.left-o.left))}return r},Gs.prototype.showSelection=function(t){var e=this.cm.display;_(e.cursorDiv,t.cursors),_(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Gs.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&R(this.textarea),s&&a>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},Gs.prototype.getField=function(){return this.textarea},Gs.prototype.supportsTouch=function(){return!1},Gs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!m||D()!=this.textarea))try{this.textarea.focus()}catch(t){}},Gs.prototype.blur=function(){this.textarea.blur()},Gs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Gs.prototype.receivedFocus=function(){this.slowPoll()},Gs.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){t.poll(),t.cm.state.focused&&t.slowPoll()}))},Gs.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,(function n(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,n))}))},Gs.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||Mt(n)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=n.value;if(i==r&&!e.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var c=0,l=Math.min(r.length,i.length);c<l&&r.charCodeAt(c)==i.charCodeAt(c);)++c;return ti(e,(function(){Ls(e,i.slice(c),r.length-c,null,t.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=i,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Gs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Gs.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Gs.prototype.onContextMenu=function(t){var e=this,n=e.cm,r=n.display,i=e.textarea;e.contextMenuPending&&e.contextMenuPending();var o=ur(n,t),l=r.scroller.scrollTop;if(o&&!f){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&ei(n,to)(n.doc,ji(o),H);var u,h=i.style.cssText,d=e.wrapper.style.cssText,p=e.wrapper.offsetParent.getBoundingClientRect();if(e.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-p.top-5)+"px; left: "+(t.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",c&&(u=window.scrollY),r.input.focus(),c&&window.scrollTo(null,u),r.input.reset(),n.somethingSelected()||(i.value=e.prevInput=" "),e.contextMenuPending=m,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),s&&a>=9&&v(),C){Ct(t);var g=function(){pt(window,"mouseup",g),setTimeout(m,20)};ht(window,"mouseup",g)}else setTimeout(m,50)}function v(){if(null!=i.selectionStart){var t=n.somethingSelected(),o="​"+(t?i.value:"");i.value="⇚",i.value=o,e.prevInput=t?"":"​",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function m(){if(e.contextMenuPending==m&&(e.contextMenuPending=!1,e.wrapper.style.cssText=d,i.style.cssText=h,s&&a<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=l),null!=i.selectionStart)){(!s||s&&a<9)&&v();var t=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==e.prevInput?ei(n,co)(n):t++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},Gs.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},Gs.prototype.setUneditable=function(){},Gs.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function n(n,r,i,o){t.defaults[n]=r,i&&(e[n]=o?function(t,e,n){n!=Ss&&i(t,e,n)}:i)}t.defineOption=n,t.Init=Ss,n("value","",(function(t,e){return t.setValue(e)}),!0),n("mode",null,(function(t,e){t.doc.modeOption=e,Ai(t)}),!0),n("indentUnit",2,Ai,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(t){Di(t),Un(t),hr(t)}),!0),n("lineSeparator",null,(function(t,e){if(t.doc.lineSep=e,e){var n=[],r=t.doc.first;t.doc.iter((function(t){for(var i=0;;){var o=t.text.indexOf(e,i);if(-1==o)break;i=o+e.length,n.push(ee(r,o))}r++}));for(var i=n.length-1;i>=0;i--)vo(t.doc,e,n[i],ee(n[i].line,n[i].ch+e.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=Ss&&t.refresh()})),n("specialCharPlaceholder",Qe,(function(t){return t.refresh()}),!0),n("electricChars",!0),n("inputStyle",m?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(t,e){return t.getInputField().spellcheck=e}),!0),n("autocorrect",!1,(function(t,e){return t.getInputField().autocorrect=e}),!0),n("autocapitalize",!1,(function(t,e){return t.getInputField().autocapitalize=e}),!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",(function(t){Cs(t),vi(t)}),!0),n("keyMap","default",(function(t,e,n){var r=Xo(e),i=n!=Ss&&Xo(n);i&&i.detach&&i.detach(t,r),r.attach&&r.attach(t,i||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,_s,!0),n("gutters",[],(function(t,e){t.display.gutterSpecs=pi(e,t.options.lineNumbers),vi(t)}),!0),n("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?ar(t.display)+"px":"0",t.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(t){return zr(t)}),!0),n("scrollbarStyle","native",(function(t){$r(t),zr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(t,e){t.display.gutterSpecs=pi(t.options.gutters,e),vi(t)}),!0),n("firstLineNumber",1,vi,!0),n("lineNumberFormatter",(function(t){return t}),vi,!0),n("showCursorWhenSelecting",!1,mr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(t,e){"nocursor"==e&&(jr(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)})),n("screenReaderLabel",null,(function(t,e){e=''===e?null:e,t.display.input.screenReaderLabelChanged(e)})),n("disableInput",!1,(function(t,e){e||t.display.input.reset()}),!0),n("dragDrop",!0,Es),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,mr,!0),n("singleCursorHeightPerLine",!0,mr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Di,!0),n("addModeClass",!1,Di,!0),n("pollInterval",100),n("undoDepth",200,(function(t,e){return t.doc.history.undoDepth=e})),n("historyEventDelay",1250),n("viewportMargin",10,(function(t){return t.refresh()}),!0),n("maxHighlightLength",1e4,Di,!0),n("moveInputWithCursor",!0,(function(t,e){e||t.display.input.resetPosition()})),n("tabindex",null,(function(t,e){return t.display.input.getField().tabIndex=e||""})),n("autofocus",null),n("direction","ltr",(function(t,e){return t.doc.setDirection(e)}),!0),n("phrases",null)}(Ps),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var r=this.options,i=r[t];r[t]==n&&"mode"!=t||(r[t]=n,e.hasOwnProperty(t)&&ei(this,e[t])(this,n,i),gt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Xo(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:ni((function(e,n){var r=e.token?e:t.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");!function(t,e,n){for(var r=0,i=n(e);r<t.length&&n(t[r])<=i;)r++;t.splice(r,0,e)}(this.state.overlays,{mode:r,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(t){return t.priority})),this.state.modeGen++,hr(this)})),removeOverlay:ni((function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var r=e[n].modeSpec;if(r==t||"string"==typeof t&&r.name==t)return e.splice(n,1),this.state.modeGen++,void hr(this)}})),indentLine:ni((function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Qt(this.doc,t)&&As(this,t,e,n)})),indentSelection:ni((function(t){for(var e=this.doc.sel.ranges,n=-1,r=0;r<e.length;r++){var i=e[r];if(i.empty())i.head.line>n&&(As(this,i.head.line,t,!0),n=i.head.line,r==this.doc.sel.primIndex&&Dr(this));else{var o=i.from(),s=i.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var c=a;c<n;++c)As(this,c,t);var l=this.doc.sel.ranges;0==o.ch&&e.length==l.length&&l[r].from().ch>0&&Xi(this.doc,r,new Si(o,l[r].to()),H)}}})),getTokenAt:function(t,e){return be(this,t,e)},getLineTokens:function(t,e){return be(this,ee(t),e,!0)},getTokenTypeAt:function(t){t=ce(this.doc,t);var e,n=de(this,Gt(this.doc,t.line)),r=0,i=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var s=r+i>>1;if((s?n[2*s-1]:0)>=o)i=s;else{if(!(n[2*s+1]<o)){e=n[2*s+2];break}r=s+1}}var a=e?e.indexOf("overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var r=[];if(!n.hasOwnProperty(e))return r;var i=n[e],o=this.getModeAt(t);if("string"==typeof o[e])i[o[e]]&&r.push(i[o[e]]);else if(o[e])for(var s=0;s<o[e].length;s++){var a=i[o[e][s]];a&&r.push(a)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var c=0;c<i._global.length;c++){var l=i._global[c];l.pred(o,this)&&-1==V(r,l.val)&&r.push(l.val)}return r},getStateAfter:function(t,e){var n=this.doc;return pe(this,(t=ae(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return Kn(this,null==t?n.head:"object"==typeof t?ce(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return Gn(this,ce(this.doc,t),e||"page")},coordsChar:function(t,e){return Xn(this,(t=qn(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=qn(this,{top:t,left:0},e||"page").top,Zt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var r,i=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,i=!0),r=Gt(this.doc,t)}else r=t;return $n(this,r,{top:0,left:0},e||"page",n||i).top+(i?this.doc.height-We(r):0)},defaultTextHeight:function(){return ir(this.display)},defaultCharWidth:function(){return or(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,r,i){var o,s,a,c=this.display,l=(t=Kn(this,ce(this.doc,t))).bottom,u=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),c.sizer.appendChild(e),"over"==r)l=t.top;else if("above"==r||"near"==r){var f=Math.max(c.wrapper.clientHeight,this.doc.height),h=Math.max(c.sizer.clientWidth,c.lineSpace.clientWidth);('above'==r||t.bottom+e.offsetHeight>f)&&t.top>e.offsetHeight?l=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=f&&(l=t.bottom),u+e.offsetWidth>h&&(u=h-e.offsetWidth)}e.style.top=l+"px",e.style.left=e.style.right="","right"==i?(u=c.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(c.sizer.clientWidth-e.offsetWidth)/2),e.style.left=u+"px"),n&&(o=this,s={left:u,top:l,right:u+e.offsetWidth,bottom:l+e.offsetHeight},null!=(a=Tr(o,s)).scrollTop&&Nr(o,a.scrollTop),null!=a.scrollLeft&&Fr(o,a.scrollLeft))},triggerOnKeyDown:ni(fs),triggerOnKeyPress:ni(ds),triggerOnKeyUp:hs,triggerOnMouseDown:ni(ys),execCommand:function(t){if(ns.hasOwnProperty(t))return ns[t].call(null,this)},triggerElectric:ni((function(t){Ns(this,t)})),findPosH:function(t,e,n,r){var i=1;e<0&&(i=-1,e=-e);for(var o=ce(this.doc,t),s=0;s<e&&!(o=Vs(this.doc,o,i,n,r)).hitSide;++s);return o},moveH:ni((function(t,e){var n=this;this.extendSelectionsBy((function(r){return n.display.shift||n.doc.extend||r.empty()?Vs(n.doc,r.head,t,e,n.options.rtlMoveVisually):t<0?r.from():r.to()}),$)})),deleteH:ni((function(t,e){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Zo(this,(function(n){var i=Vs(r,n.head,t,e,!1);return t<0?{from:i,to:n.head}:{from:n.head,to:i}}))})),findPosV:function(t,e,n,r){var i=1,o=r;e<0&&(i=-1,e=-e);for(var s=ce(this.doc,t),a=0;a<e;++a){var c=Kn(this,s,"div");if(null==o?o=c.left:c.left=o,(s=Us(this,c,i,n)).hitSide)break}return s},moveV:ni((function(t,e){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(s){if(o)return t<0?s.from():s.to();var a=Kn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),i.push(a.left);var c=Us(n,a,t,e);return"page"==e&&s==r.sel.primary()&&Ar(n,Gn(n,c,"div").top-a.top),c}),$),i.length)for(var s=0;s<r.sel.ranges.length;s++)r.sel.ranges[s].goalColumn=i[s]})),findWordAt:function(t){var e=Gt(this.doc,t.line).text,n=t.ch,r=t.ch;if(e){var i=this.getHelper(t,"wordChars");"before"!=t.sticky&&r!=e.length||!n?++r:--n;for(var o=e.charAt(n),s=et(o,i)?function(t){return et(t,i)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!et(t)};n>0&&s(e.charAt(n-1));)--n;for(;r<e.length&&s(e.charAt(r));)++r}return new Si(ee(t.line,n),ee(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?M(this.display.cursorDiv,"CodeMirror-overwrite"):j(this.display.cursorDiv,"CodeMirror-overwrite"),gt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==D()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ni((function(t,e){Mr(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-En(this)-this.display.barHeight,width:t.scrollWidth-En(this)-this.display.barWidth,clientHeight:Pn(this),clientWidth:_n(this)}},scrollIntoView:ni((function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:ee(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Lr(t),t.curOp.scrollToPos=e}(this,t):Rr(this,t.from,t.to,t.margin)})),setSize:ni((function(t,e){var n=this,r=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.options.lineWrapping&&Vn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){dr(n,i,"widget");break}++i})),this.curOp.forceUpdate=!0,gt(this,"refresh",this)})),operation:function(t){return ti(this,t)},startOperation:function(){return Gr(this)},endOperation:function(){return Kr(this)},refresh:ni((function(){var t=this.display.cachedTextHeight;hr(this),this.curOp.forceUpdate=!0,Un(this),Mr(this,this.doc.scrollLeft,this.doc.scrollTop),ui(this.display),(null==t||Math.abs(t-ir(this.display))>.5||this.options.lineWrapping)&&lr(this),gt(this,"refresh",this)})),swapDoc:ni((function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Ni(this,t),Un(this),this.display.input.reset(),Mr(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,e),e})),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},bt(t),t.registerHelper=function(e,r,i){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][r]=i},t.registerGlobalHelper=function(e,r,i,o){t.registerHelper(e,r,o),n[e]._global.push({pred:i,val:o})}}(Ps);var Ks="iter insert remove copy getEditor constructor".split(" ");for(var Ys in Do.prototype)Do.prototype.hasOwnProperty(Ys)&&V(Ks,Ys)<0&&(Ps.prototype[Ys]=function(t){return function(){return t.apply(this.doc,arguments)}}(Do.prototype[Ys]));return bt(Do),Ps.inputStyles={textarea:Gs,contenteditable:zs},Ps.defineMode=function(t){Ps.defaults.mode||"null"==t||(Ps.defaults.mode=t),Ft.apply(this,arguments)},Ps.defineMIME=function(t,e){It[t]=e},Ps.defineMode("null",(function(){return{token:function(t){return t.skipToEnd()}}})),Ps.defineMIME("text/plain","null"),Ps.defineExtension=function(t,e){Ps.prototype[t]=e},Ps.defineDocExtension=function(t,e){Do.prototype[t]=e},Ps.fromTextArea=function(t,e){if((e=e?I(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=D();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function r(){t.value=a.getValue()}var i;if(t.form&&(ht(t.form,"submit",r),!e.leaveSubmitMethodAlone)){var o=t.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(t){}}e.finishInit=function(n){n.save=r,n.getTextArea=function(){return t},n.toTextArea=function(){n.toTextArea=isNaN,r(),t.parentNode.removeChild(n.getWrapperElement()),t.style.display="",t.form&&(pt(t.form,"submit",r),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=i))}},t.style.display="none";var a=Ps((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return a},function(t){t.off=pt,t.on=ht,t.wheelEventPixels=Oi,t.Doc=Do,t.splitLines=Dt,t.countColumn=F,t.findColumn=q,t.isWordChar=tt,t.Pass=z,t.signal=gt,t.Line=Ge,t.changeEnd=Ei,t.scrollbarModel=Wr,t.Pos=ee,t.cmpPos=ne,t.modes=Nt,t.mimeModes=It,t.resolveMode=Bt,t.getMode=Vt,t.modeExtensions=Ut,t.extendMode=zt,t.copyState=Ht,t.startState=$t,t.innerMode=Wt,t.commands=ns,t.keyMap=Wo,t.keyName=Jo,t.isModifierKey=Ko,t.lookupKey=Go,t.normalizeKeyMap=qo,t.StringStream=qt,t.SharedTextMarker=_o,t.TextMarker=jo,t.LineWidget=Co,t.e_preventDefault=wt,t.e_stopPropagation=Ot,t.e_stop=Ct,t.addClass=M,t.contains=A,t.rmClass=j,t.keyNames=Vo}(Ps),Ps.version="5.63.0",Ps}())},function(t,e,n){var r=n(167),i=n(168),o=n(73),s=n(169);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||s()},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n.n(i);e["a"]=o.a.View.extend({itemView:'',itemsView:'',itemType:'type',autoAdd:0,initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;this.config=e||t.config||{},this.autoAdd&&this.listenTo(this.collection,'add',this.addTo),this.items=[],this.init()},init:function(){},addTo:function(t){this.add(t)},itemViewNotFound:function(t){var e=this.config,n=this.ns,r=e.em,i="".concat(n?"[".concat(n,"]: "):'',"'").concat(t,"' type not found");r&&r.logWarning(i)},add:function(t,e){var n,i=this.config,o=this.reuseView,s=this.items,a=this.itemsView,c=void 0===a?{}:a,l=e||null,u=this.itemView,f=t.get(this.itemType);c[f]?u=c[f]:!f||c[f]||Object(r["includes"])(['button','checkbox','color','date','datetime-local','email','file','hidden','image','month','number','password','radio','range','reset','search','submit','tel','text','time','url','week'],f)||this.itemViewNotFound(f),n=t.view&&o?t.view:new u({model:t,config:i},i),s&&s.push(n);var h=n.render().el;l?l.appendChild(h):this.$el.append(h)},render:function(){var t=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each((function(e){this.add(e,t)}),this),this.$el.append(t),this.onRender(),this},onRender:function(){},onRemoveBefore:function(){},onRemove:function(){},remove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.items;this.onRemoveBefore(e,t),this.clearItems(),o.a.View.prototype.remove.apply(this,arguments),this.onRemove(e,t)},clearItems:function(){this.items}})},function(t,e,n){"use strict";n.r(e);var r=n(3);e["default"]=r["Model"].extend({initialize:function(t){this.config=t||{},this.editorModel=this.em=this.config.em||{},this.pfx=this.config.stylePrefix,this.ppfx=this.config.pStylePrefix,this.hoverClass=this.pfx+'hover',this.badgeClass=this.pfx+'badge',this.plhClass=this.pfx+'placeholder',this.freezClass=this.ppfx+'freezed',this.canvas=this.em.get&&this.em.get('Canvas'),this.init(this.config)},onFrameScroll:function(t){},getCanvas:function(){return this.canvas.getElement()},getCanvasBody:function(){return this.canvas.getBody()},getCanvasTools:function(){return this.canvas.getToolsEl()},offset:function(t){var e=t.getBoundingClientRect();return{top:e.top+t.ownerDocument.body.scrollTop,left:e.left+t.ownerDocument.body.scrollLeft}},init:function(t){},callRun:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.id;if(t.trigger("run:".concat(n,":before"),e),!e||!e.abort){var r=e.sender||t,i=this.run(t,r,e);return t.trigger("run:".concat(n),i,e),t.trigger('run',n,i,e),i}t.trigger("abort:".concat(n),e)},callStop:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.id,r=e.sender||t;t.trigger("stop:".concat(n,":before"),e);var i=this.stop(t,r,e);return t.trigger("stop:".concat(n),i,e),t.trigger('stop',n,i,e),i},stopCommand:function(){this.em.get('Commands').stop(this.id)},run:function(t,e){},stop:function(t,e){}})},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(0),s=n(1),a=n(61);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=Object(a["a"])().parseStyle;e["a"]={parseStyle:u,extendStyle:function(t){return l(l({},this.getStyle()),t)},getStyle:function(t){var e=l({},this.get('style')||{});return t&&Object(o["isString"])(t)?e[t]:e},setStyle:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o["isString"])(e)&&(e=u(e));var r=this.getStyle(n),i=l({},e);this.set('style',i,n);var a=Object(s["shallowDiff"])(r,i);return Object(o["keys"])(a).forEach((function(e){var r=t.em;n.noEvent||(t.trigger("change:style:".concat(e)),r&&(r.trigger("styleable:change",t,e,n),r.trigger("styleable:change:".concat(e),t,e,n)))})),i},addStyle:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'',n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};'string'==typeof t?t={prop:e}:n=e||{},t=this.extendStyle(t),this.setStyle(t,n)},removeStyle:function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},styleToString:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],n=this.getStyle(t);for(var r in n){var i=t.important,s=Object(o["isArray"])(i)?i.indexOf(r)>=0:i,a="".concat(n[r]).concat(s?' !important':''),c='__'==r.substr(0,2);a&&!c&&e.push("".concat(r,":").concat(a,";"))}return e.join('')},getSelectors:function(){return this.get('selectors')||this.get('classes')},getSelectorsString:function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},_validate:function(t,e){var n,r=t.style,i=this.em||e.em,s=null==i||null===(n=i.get('CssComposer'))||void 0===n?void 0:n.getConfig().onBeforeStyle;if(r&&s){var a=s(l({},r));a&&Object(o["keys"])(r).map((function(e){Object(o["isUndefined"])(a[e])&&delete t.style[e]})),a&&Object(o["keys"])(a).map((function(e){t.style[e]=a[e]}))}return!0}}},function(t,e,n){"use strict";var r=n(15),i=n(79);function o(t,e,n){i.call(this,t,e,n,{noCredentials:!0})}r(o,i),o.enabled=i.enabled,t.exports=o},function(t,e,n){"use strict";(function(e){t.exports={isOpera:function(){return e.navigator&&/opera/i.test(e.navigator.userAgent)},isKonqueror:function(){return e.navigator&&/konqueror/i.test(e.navigator.userAgent)},hasDomain:function(){if(!e.document)return!0;try{return!!e.document.domain}catch(t){return!1}}}}).call(this,n(17))},function(t,e,n){"use strict";(function(e){var r=n(34),i=n(48);t.exports={WPrefix:'_jp',currentWindowId:null,polluteGlobalNamespace:function(){t.exports.WPrefix in e||(e[t.exports.WPrefix]={})},postMessage:function(n,r){e.parent!==e&&e.parent.postMessage(JSON.stringify({windowId:t.exports.currentWindowId,type:n,data:r||''}),'*')},createIframe:function(t,n){var i,o,s=e.document.createElement('iframe'),a=function(){clearTimeout(i);try{s.onload=null}catch(t){}s.onerror=null},c=function(){s&&(a(),setTimeout((function(){s&&s.parentNode.removeChild(s),s=null}),0),r.unloadDel(o))},l=function(t){s&&(c(),n(t))};return s.src=t,s.style.display='none',s.style.position='absolute',s.onerror=function(){l('onerror')},s.onload=function(){clearTimeout(i),i=setTimeout((function(){l('onload timeout')}),2e3)},e.document.body.appendChild(s),i=setTimeout((function(){l('timeout')}),15e3),o=r.unloadAdd(c),{post:function(t,e){setTimeout((function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(t,e)}catch(t){}}),0)},cleanup:c,loaded:a}},createHtmlfile:function(n,i){var o,s,a,c=['Active'].concat('Object').join('X'),l=new e[c]('htmlfile'),u=function(){clearTimeout(o),a.onerror=null},f=function(){l&&(u(),r.unloadDel(s),a.parentNode.removeChild(a),a=l=null,CollectGarbage())},h=function(t){l&&(f(),i(t))};l.open(),l.write('<html><s'+'cript>'+'document.domain="'+e.document.domain+'";'+'</s'+'cript></html>'),l.close(),l.parentWindow[t.exports.WPrefix]=e[t.exports.WPrefix];var d=l.createElement('div');return l.body.appendChild(d),a=l.createElement('iframe'),d.appendChild(a),a.src=n,a.onerror=function(){h('onerror')},o=setTimeout((function(){h('timeout')}),15e3),s=r.unloadAdd(f),{post:function(t,e){try{setTimeout((function(){a&&a.contentWindow&&a.contentWindow.postMessage(t,e)}),0)}catch(t){}},cleanup:f,loaded:u}}},t.exports.iframeEnabled=!1,e.document&&(t.exports.iframeEnabled=('function'==typeof e.postMessage||'object'==typeof e.postMessage)&&!i.isKonqueror())}).call(this,n(17))},function(t,e,n){t.exports=n(173)},function(t,e,n){"use strict";var r=n(15),i=n(26).EventEmitter;function o(t,e){i.call(this);var n=this;this.bufferPosition=0,this.xo=new e('POST',t,null),this.xo.on('chunk',this._chunkHandler.bind(this)),this.xo.once('finish',(function(t,e){n._chunkHandler(t,e),n.xo=null;var r=200===t?'network':'permanent';n.emit('close',null,r),n._cleanup()}))}r(o,i),o.prototype._chunkHandler=function(t,e){if(200===t&&e)for(var n=-1;;this.bufferPosition+=n+1){var r=e.slice(this.bufferPosition);if(-1===(n=r.indexOf('\n')))break;var i=r.slice(0,n);i&&this.emit('message',i)}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit('close',null,'user'),this.xo=null),this._cleanup()},t.exports=o},function(t,e,n){"use strict";var r=n(15),i=n(79);function o(t,e,n,r){i.call(this,t,e,n,r)}r(o,i),o.enabled=i.enabled&&i.supportsCORS,t.exports=o},function(t,e,n){"use strict";var r=n(41);function i(t){r.call(this,null==t?'canceled':t,r.ERR_CANCELED),this.name='CanceledError'}n(22).inherits(i,r,{__CANCEL__:!0}),t.exports=i},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r).a.$;e["default"]={startSelectPosition:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isPointed=!1;var i=this.editorModel.get('Utils'),o=t.ownerDocument.body;i&&!this.sorter&&(this.sorter=new i.Sorter({container:o,placer:this.canvas.getPlacerEl(),containerSel:'*',itemSel:'*',pfx:this.ppfx,direction:'a',document:e,wmargin:1,nested:1,em:this.editorModel,canvasRelative:1,scale:function(){return n.em.getZoomDecimal()}})),r.onStart&&(this.sorter.onStart=r.onStart),t&&this.sorter.startSort(t,{container:o})},getOffsetDim:function(){var t=this.offset(this.canvas.getFrameEl()),e=this.offset(this.canvas.getElement());return{top:t.top-e.top,left:t.left-e.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex='after'==this.posMethod&&0!==this.cDim.length?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=0!==this.cDim.length&&'after'==this.posMethod&&this.posIndex==this.cDim.length,this.posTargetEl=0===this.cDim.length?i(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?i(this.cDim[this.posIndex][5]).parent():i(this.outsideElem),this.posTargetModel=this.posTargetEl.data('model'),this.posTargetCollection=this.posTargetEl.data('model-comp'))},enable:function(){this.startSelectPosition()},nearFloat:function(t,e,n){var r=t||0,i=e||'before',o=n.length,s=0!==o&&'after'==i&&r==o;return 0!==o&&(!s&&!n[r][4]||n[r-1]&&!n[r-1][4]||s&&!n[r-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css('cursor',''),this.$wrapper.unbind()}}},function(t,e,n){"use strict";var r=n(64),i=n(1);Object(i["hasWin"])()&&(window.Promise=window.Promise||r["a"]),e["a"]='function'==typeof fetch?fetch.bind():function(t,e){return new r["a"]((function(n,i){var o=new XMLHttpRequest;for(var s in o.open(e.method||'get',t),o.withCredentials='include'==e.credentials,e.headers||{})o.setRequestHeader(s,e.headers[s]);o.onload=function(t){return n({status:o.status,statusText:o.statusText,text:function(){return r["a"].resolve(o.responseText)}})},o.onerror=i,o.upload&&e.onProgress&&(o.upload.onprogress=e.onProgress),e.body?o.send(e.body):o.send()}))}},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(0),s=n(3),a=n.n(s);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=a.a.Model,f=a.a.View;e["a"]={types:[],initialize:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.em;this.em=r,this.opts=n,this.model=function(){var t,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o&&o.type){var a=e.getBaseType();t=(i=e.getType(o.type))?i.model:a.model,n=i?i.view:a.view}else{var c=e.recognizeType(o);t=(i=c.type).model,n=i.view,o=c.attributes}var u=new t(o,l(l({},s),{},{em:r}));return u.typeView=n,u};var i=this.init&&this.init.bind(this);i&&i()},recognizeType:function(t){for(var e=this.getTypes(),n=0;n<e.length;n++){var r=e[n],i=r.isType(t);if(i='boolean'==typeof i&&i?{type:r.id}:i)return{type:r,attributes:i}}return{type:this.getBaseType(),attributes:t}},getBaseType:function(){var t=this.getTypes();return t[t.length-1]},getTypes:function(){return this.types},getType:function(t){for(var e=this.getTypes(),n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}},addType:function(t,e){var n=this.getType(t),r=this.getBaseType(),i=n?n.model:r.model,s=n?n.view:r.view,a=e.model,c=e.view,l=e.isType;a=a instanceof u||Object(o["isFunction"])(a)?a:i.extend(a||{}),c=c instanceof f||Object(o["isFunction"])(c)?c:s.extend(c||{}),!this.extendViewApi||e.model||e.view||(c=c.extend(e)),n?(n.model=a,n.view=c,n.isType=l||n.isType):(e.id=t,e.model=a,e.view=c,e.isType=l||function(e){if(e&&e.type==t)return!0},this.getTypes().unshift(e))}}},function(t,e,n){"use strict";var r=n(3),i=n.n(r),o=n(0),s=n(1),a=n(37);i.a.$;e["a"]=a["a"].extend({events:{'change input':'handleChange','change select':'handleUnitChange','click [data-arrow-up]':'upArrowClick','click [data-arrow-down]':'downArrowClick','mousedown [data-arrows]':'downIncrement',keydown:'handleKeyDown'},template:function(){var t=this.ppfx;return"\n      <span class=\"".concat(t,"input-holder\"></span>\n      <span class=\"").concat(t,"field-units\"></span>\n      <div class=\"").concat(t,"field-arrows\" data-arrows>\n        <div class=\"").concat(t,"field-arrow-u\" data-arrow-up></div>\n        <div class=\"").concat(t,"field-arrow-d\" data-arrow-down></div>\n      </div>\n    ")},inputClass:function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},initialize:function(){a["a"].prototype.initialize.apply(this,arguments),Object(o["bindAll"])(this,'moveIncrement','upIncrement'),this.doc=document,this.listenTo(this.model,'change:unit',this.handleModelChange)},setValue:function(t,e){var n=e||{},r=this.validateInputValue(t,{deepCheck:1}),i={value:r.value};(r.unit||r.force)&&(i.unit=r.unit),this.model.set(i,n),n.silent&&this.handleModelChange()},handleChange:function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},handleUnitChange:function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set('unit',e),this.elementUpdated()},handleKeyDown:function(t){'ArrowUp'===t.key&&(t.preventDefault(),this.upArrowClick()),'ArrowDown'===t.key&&(t.preventDefault(),this.downArrowClick())},elementUpdated:function(){this.model.trigger('el:change')},handleModelChange:function(){var t=this.model;this.getInputEl().value=t.get('value');var e=this.getUnitEl();e&&(e.value=t.get('unit')||'')},getUnitEl:function(){if(!this.unitEl){var t=this.model,e=t.get('units')||[];if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach((function(e){var r=e==t.get('unit')?'selected':'';n.push("<option ".concat(r,">").concat(e,"</option>"))}));var r=document.createElement('div');r.innerHTML="<select class=\"".concat(this.ppfx,"input-unit\">").concat(n.join(''),"</select>"),this.unitEl=r.firstChild}}return this.unitEl},upArrowClick:function(){var t=this.model,e=t.get('step'),n=parseFloat(t.get('value'));this.setValue(this.normalizeValue(n+e)),this.elementUpdated()},downArrowClick:function(){var t=this.model,e=t.get('step'),n=parseFloat(t.get('value'));this.setValue(this.normalizeValue(n-e)),this.elementUpdated()},downIncrement:function(t){t.preventDefault(),this.moved=0;var e=this.model.get('value')||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},Object(s["on"])(this.doc,'mousemove',this.moveIncrement),Object(s["on"])(this.doc,'mouseup',this.upIncrement)},moveIncrement:function(t){this.moved=1;var e=this.model,n=e.get('step'),r=this.current,i=this.normalizeValue(r.val+(r.y-t.pageY)*n),o=this.validateInputValue(i),s=o.value,a=o.unit;return this.prValue=s,e.set({value:s,unit:a},{avoidStore:1}),!1},upIncrement:function(){var t=this.model,e=t.get('step');if(Object(s["off"])(this.doc,'mouseup',this.upIncrement),Object(s["off"])(this.doc,'mousemove',this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-e;t.set('value',n,{avoidStore:1}).set('value',n+e),this.elementUpdated()}},normalizeValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.model,r=n.get('step'),i=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var o=r.toString().split('.')[1];i=o?o.length:0}return i?parseFloat(t.toFixed(i)):t},validateInputValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,r=e||{},i=this.model,s='',a=Object(o["isUndefined"])(t)?s:t,c=e.units||i.get('units')||[],l=i.get('unit')||c.length&&c[0]||'',u=Object(o["isUndefined"])(e.max)?i.get('max'):e.max,f=Object(o["isUndefined"])(e.min)?i.get('min'):e.min,h=!!i.get('limitlessMax'),d=!!i.get('limitlessMin');if(r.deepCheck){var p=i.get('fixedValues')||[];if(''===a&&(l=''),a){var g=new RegExp('^'+p.join('|'),'g');if(p.length&&g.test(a))a=a.match(g)[0],l='',n=1;else{var v=a+'';a+='',a=parseFloat(a.replace(',','.')),a=isNaN(a)?s:a;var m=v.replace(a,'');Object(o["indexOf"])(c,m)>=0&&(l=m)}}}return h||Object(o["isUndefined"])(u)||''===u||(a=a>u?u:a),d||Object(o["isUndefined"])(f)||''===f||(a=a<f?f:a),{force:n,value:a,unit:l}},render:function(){a["a"].prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this}})},function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));var r=n(3),i=n.n(r),o=n(0),s=n(1),a=Number.MAX_VALUE,c=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?e[0]:''};e["a"]=i.a.Model.extend({initialize:function(){Object(o["bindAll"])(this,'sortRules'),this.compCls=[],this.ids=[]},buildFromModel:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r='',i=this.em,o=i&&i.getConfig('avoidInlineStyle'),s=t.styleToString(),a=t.get('classes'),c=n.wrapperIsBody,l=t.get('wrapper');if(this.ids.push("#".concat(t.getId())),a.each((function(t){return e.compCls.push(t.getFullName())})),!o&&s){var u="#".concat(t.getId());r="".concat(u=c&&l?'body':u,"{").concat(s,"}")}var f=t.components();return f.each((function(t){return r+=e.buildFromModel(t,n)})),r},build:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.json,i=n.em||'',a=n.cssc||i&&i.get('CssComposer');this.em=i,this.compCls=[],this.ids=[],this.model=t;var c=[],l=t?this.buildFromModel(t,n):'',u=Object(o["isUndefined"])(n.clearStyles)&&i?i.getConfig('clearStyles'):n.clearStyles;if(a){var f=n.rules||a.getAll(),h={},d=[];n.onlyMatched&&t&&Object(s["hasWin"])()&&(f=this.matchedRules(t,f)),f.forEach((function(t){var i=t.getAtRule();if(i){var o=h[i];o?o.push(t):h[i]=[t]}else{var s=e.buildFromRule(t,d,n);r?c.push(s):l+=s}})),this.sortMediaObject(h).forEach((function(t){var i='',o=t.key;t.value.forEach((function(t){var s=e.buildFromRule(t,d,n);t.get('singleAtRule')?l+="".concat(o,"{").concat(s,"}"):i+=s,r&&c.push(s)})),i&&(l+="".concat(o,"{").concat(i,"}"))})),i&&u&&f.remove&&f.remove(d)}return r?c.filter((function(t){return t})):l},buildFromRule:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o='',s=this.model,a=t.selectorsToString({skipAdd:1}),c=t.get('selectorsAdd'),l=t.get('singleAtRule');if(t.get('selectors').each((function(t){var e=t.getFullName();(r.compCls.indexOf(e)>=0||r.ids.indexOf(e)>=0||i.keepUnusedStyles)&&(n=1)})),a&&n||c||l||!s){var u=t.getDeclaration({body:1});u&&(i.json?o=t:o+=u)}else e.push(t);return o},matchedRules:function(t,e){var n=this,r=t.getEl(),i=[];return e.forEach((function(t){try{t.selectorsToString().split(',').some((function(t){return r.matches(n.__cleanSelector(t))}))&&i.push(t)}catch(t){}})),t.components().forEach((function(t){i=i.concat(n.matchedRules(t,e))})),i=i.filter((function(t,e){return i.indexOf(t)===e}))},getQueryLength:function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):a},sortMediaObject:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];return Object(o["each"])(e,(function(t,e){return n.push({key:e,value:t})})),n.sort((function(e,n){var r=[e.key,n.key].every((function(t){return-1!==t.indexOf('min-width')})),i=r?e.key:n.key,o=r?n.key:e.key;return t.getQueryLength(i)-t.getQueryLength(o)}))},sortRules:function(t,e){var n=function(t){return t.get('mediaText')},r=[n(t),n(e)].every((function(t){return-1!==t.indexOf('min-width')})),i=n(r?t:e),o=n(r?e:t);return this.getQueryLength(i)-this.getQueryLength(o)},__cleanSelector:function(t){return t.split(' ').map((function(t){return t.split(':')[0]})).join(' ')}})},function(t,e,n){"use strict";var r=n(3),i=n.n(r),o=n(0);e["a"]=i.a.View.extend({initialize:function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,'add',this.addTo),this.listenTo(e,'reset',this.resetChildren),this.listenTo(e,'remove',this.removeChildren)},removeChildren:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.views.forEach((function(t){if(t){var e=t.childrenView,n=t.scriptContainer;e&&e.stopListening(),n&&n.remove(),t.remove.apply(t)}}));var i=t.components();i.forEach((function(t){return n.removeChildren(t,e,r)}))},addTo:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.config.em,r=this.collection.indexOf(t);if(this.addToCollection(t,null,r),n&&!e.temporary){var i=function t(e){n.trigger('component:add',e),e.components().forEach((function(e){return t(e)}))};i(t)}},addToCollection:function(t,e,r){this.compView||(this.compView=n(13).default);for(var i=this.config,s=this.opts,a=this.em,c=e||null,l=i.frameView,u=void 0===l?{}:l,f=u.model&&t.getView(u.model),h=s.componentTypes||a&&a.get('DomComponents').getTypes(),d=t.get('type')||'default',p=this.compView,g=0;g<h.length;g++)if(h[g].id==d){p=h[g].view;break}var v,m=f||new p({model:t,config:i,componentTypes:h});try{v=m.render().el}catch(t){v=document.createTextNode(''),a.logError(t)}if(c)c.appendChild(v);else{var y=this.parentEl,b=y.childNodes;if(Object(o["isUndefined"])(r))y.appendChild(v);else{var w=b.length==r;w&&r--,w||!b.length?y.appendChild(v):y.insertBefore(v,b[r])}}return t.opt.temporary||null==a||a.trigger('component:mount',t),v},resetChildren:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.previousModels,i=void 0===r?[]:r;this.parentEl.innerHTML='',i.forEach((function(t){return e.removeChildren(t,e.collection)})),t.each((function(t){return e.addToCollection(t)}))},render:function(t){var e=this,n=this.el,r=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each((function(t){return e.addToCollection(t,r)})),n.innerHTML='',n.appendChild(r),this}})},function(t,e,n){"use strict";var r=n(3),i=n.n(r),o=i.a.View.extend({tagName:'style',initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=t.config||{};var e=this.model;this.listenTo(e,'change',this.render),this.listenTo(e,'destroy remove',this.remove),this.listenTo(e.get('selectors'),'change',this.render)},render:function(){var t=this.model,e=this.el,n=t.get('important');return e.innerHTML=t.toCSS({important:n}),this}}),s=o.extend({_createElement:function(t){return document.createTextNode('')},render:function(){var t=this.model,e=t.get('important');return this.el.textContent=t.getDeclaration({important:e}),this}}),a=i.a.$,c=function(t,e){return"".concat(t).concat(e?"-".concat(parseFloat(e)):'')};e["a"]=i.a.View.extend({initialize:function(t){var e=t.config||{};this.atRules={},this.config=e,this.em=e.em,this.pfx=e.stylePrefix||'',this.className=this.pfx+'rules';var n=this.collection;this.listenTo(n,'add',this.addTo),this.listenTo(n,'reset',this.render)},addTo:function(t){this.addToCollection(t)},addToCollection:function(t,e){if(this.renderStarted){var n,r,i=e||null,a={model:t,config:this.config};if('keyframes'===t.get('atRuleType')){var l=t.getAtRule(),u=this.atRules[l];if(!u){var f=document.createElement('style');u=document.createTextNode(''),f.appendChild(document.createTextNode("".concat(l,"{"))),f.appendChild(u),f.appendChild(document.createTextNode("}")),this.atRules[l]=u,n=f}r=new s(a),u.appendData(r.render().el.textContent)}else n=(r=new o(a)).render().el;var h=this.className,d=t.get('mediaText'),p=c(h),g=p;if(d&&(g=c(h,this.getMediaWidth(d))),n){var v,m=i||this.el;try{v=m.querySelector("#".concat(g))}catch(t){}v||(v=m.querySelector("#".concat(p))),v.appendChild(n)}return n}},getMediaWidth:function(t){return t&&t.replace("(".concat(this.em.getConfig('mediaCondition'),": "),'').replace(')','')},render:function(){var t=this;this.renderStarted=1,this.atRules={};var e=this.em,n=this.$el,r=this.className,i=this.collection,o=document.createDocumentFragment();n.empty();var s=e.get('DeviceManager').getAll().pluck('priority');return s.every((function(t){return t}))&&s.unshift(0),s.forEach((function(t){return a("<div id=\"".concat(c(r,t),"\"></div>")).appendTo(o)})),i.each((function(e){return t.addToCollection(e,o)})),n.append(o),n.attr('class',r),this}})},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(16),s=n.n(o),a=n(0),c='text/html',l=c,u=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new DOMParser,i=n.htmlType||l,o=i===c,s=o?t:"<div>".concat(t,"</div>"),u=r.parseFromString(s,i);if(o){var f=u.head,h=u.body,d=f.querySelectorAll('script');Object(a["each"])(d,(function(t){return h.appendChild(t)}));var p=[];Object(a["each"])(f.children,(function(t){return p.push(t)})),Object(a["each"])(p,(function(t,e){return h.insertBefore(t,h.children[e])})),e=h}else e=u.firstChild;return e};function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["a"]=function(t){var e=t,n='data-gjs-',r='parse:html';return{compTypes:'',modelAttrStart:n,splitPropsFromAttr:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},i={};return Object(a["each"])(e,(function(e,o){if(0===o.indexOf(t.modelAttrStart)){var s=o.replace(n,''),c=e.length,l=e&&Object(a["isString"])(e),u=l&&e.substr(0,1),f=l&&e.substr(c-1);e='false'!==(e='true'===e||e)&&e;try{e='{'==u&&'}'==f||'['==u&&']'==f?JSON.parse(e):e}catch(t){}r[s]=e}else i[o]=e})),{props:r,attrs:i}},parseStyle:function(t){for(var e={},n=t.split(';'),r=0,i=n.length;r<i;r++){var o=n[r].trim();if(o){var s=o.split(':');e[s[0].trim()]=s.slice(1).join(':').trim()}}return e},parseClass:function(t){for(var e=[],n=t.split(' '),r=0,i=n.length;r<i;r++){var o=n[r].trim();o&&e.push(o)}return e},parseNode:function(r){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[],a=r.childNodes,c=0,l=a.length;c<l;c++){var u=a[c],f=u.attributes||[],d=f.length,p=o[o.length-1],g=u.childNodes.length,v=this.compTypes,m={};if(v){var y='',b=u.getAttribute&&u.getAttribute("".concat(n,"type"));if(b)m={type:b};else{for(var w=0;w<v.length;w++){var O=v[w];if(y=O.model.isComponent(u,i)){'object'!==s()(y)&&(y={type:O.id});break}}m=y}}m.tagName||(m.tagName=u.tagName?u.tagName.toLowerCase():''),d&&(m.attributes={});for(var x=0;x<d;x++){var C=f[x].nodeName,S=f[x].nodeValue;if('style'==C)m.style=this.parseStyle(S);else if('class'==C)m.classes=this.parseClass(S);else{if('contenteditable'==C)continue;if(0===C.indexOf(n)){var k=C.replace(n,''),j=S.length,E=S&&S.substr(0,1),_=S&&S.substr(j-1);S='false'!==(S='true'===S||S)&&S;try{S='{'==E&&'}'==_||'['==E&&']'==_?JSON.parse(S):S}catch(t){}m[k]=S}else''===S&&!0===u[C]&&(S=!0),m.attributes[C]=S}}if(g&&!m.components){var P=u.childNodes[0];1===g&&3===P.nodeType?(!m.type&&(m.type='text'),m.components={type:'textnode',content:P.nodeValue}):m.components=this.parseNode(u,h(h({},i),{},{inSvg:i.inSvg||'svg'===m.type}))}if('textnode'==m.type){if(p&&'textnode'==p.type){p.content+=m.content;continue}if(!t.keepEmptyTextNodes){var T=u.nodeValue;if(' '!=T&&!T.trim())continue}}g||'/>'!=="".concat(u.outerHTML).slice(-2)||(m.void=!0);var A=m.components;if(!m.type&&A){for(var D=1,M=0,L=0;L<A.length;L++){var R=A[L],N=R.type;if(['text','textnode'].indexOf(N)<0&&e.textTags.indexOf(R.tagName)<0){D=0;break}'textnode'==N&&(M=1)}D&&M&&(m.type='text')}(m.tagName||'textnode'==m.type)&&o.push(m)}return o},parse:function(n,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=e.em,l=c&&c.get('Config')||{},f={html:null,css:null},d=h(h({},t),s),p=h(h({},t.optionsHtml),{},{htmlType:(null===(o=t.optionsHtml)||void 0===o?void 0:o.htmlType)||t.htmlType},s),g=Object(a["isFunction"])(d.parserHtml)?d.parserHtml(n,p):u(n,p),v=g.querySelectorAll('script'),m=v.length,y=Object(a["isUndefined"])(l.allowScripts)?p.allowScripts:l.allowScripts;if(!y)for(;m--;)v[m].parentNode.removeChild(v[m]);if(p.allowUnsafeAttr||this.__clearUnsafeAttr(g),i){for(var b=g.querySelectorAll('style'),w=b.length,O='';w--;)O=b[w].innerHTML+O,b[w].parentNode.removeChild(b[w]);O&&(f.css=i.parse(O))}c&&c.trigger("".concat(r,":root"),{input:n,root:g});var x=this.parseNode(g),C=1!==x.length||e.returnArray?x:x[0];return f.html=C,c&&c.trigger(r,{input:n,output:f}),f},__clearUnsafeAttr:function(t){var e=this,n=t.attributes||[],r=t.childNodes||[],i=[];Object(a["each"])(n,(function(t){var e=t.nodeName||'';0===e.indexOf('on')&&i.push(e)})),i.map((function(e){return t.removeAttribute(e)})),Object(a["each"])(r,(function(t){return e.__clearUnsafeAttr(t)}))}}}},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(3),s=n.n(o),a=n(0),c=n(16),l=n.n(c),u=n(1),f=n(37);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=s.a.$;p&&function(t,e){if(Object(u["hasWin"])()){var n={beforeShow:_,move:_,change:_,show:_,hide:_,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:'body',maxSelectionSize:7,cancelText:'cancel',chooseText:'choose',togglePaletteMoreText:'more',togglePaletteLessText:'less',clearText:'Clear Color Selection',noColorSelectedText:'No Color Selected',preferredFormat:!1,className:'',containerClassName:'',replacerClassName:'',showAlpha:!1,theme:'sp-light',palette:[['#ffffff','#000000','#ff0000','#ff8000','#ffff00','#008000','#0000ff','#4b0082','#9400d3']],selectionPalette:[],disabled:!1,offset:null},r=[],i=!!/msie/i.exec(window.navigator.userAgent),o=function(){function t(t,e){return!!~(''+t).indexOf(e)}var e=document.createElement('div').style;return e.cssText='background-color:rgba(0,0,0,.5)',t(e.backgroundColor,'rgba')||t(e.backgroundColor,'hsla')}(),s=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>",'</div>'].join(''),a=function(){var t='';if(i)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>",'</div>','</div>',"<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>",'</div>','</div>','</div>',"<div class='sp-clear sp-clear-display'>",'</div>',"<div class='sp-hue'>","<div class='sp-slider'></div>",t,'</div>','</div>',"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>",'</div>',"<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />",'</div>',"<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>",'</div>','</div>','</div>'].join('')}(),c='spectrum.id';t.fn.spectrum=function(e,n){if('string'==typeof e){var i=this,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=r[t(this).data(c)];if(n){var s=n[e];if(!s)throw new Error("Spectrum: no such method: '"+e+"'");'get'==e?i=n.get():'container'==e?i=n.container:'option'==e?i=n.option.apply(n,o):'destroy'==e?(n.destroy(),t(this).removeData(c)):s.apply(n,o)}})),i}return this.spectrum('destroy').each((function(){var n=E(this,t.extend({},e,t(this).data()));t(this).data(c,n.id)}))},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=A,t.fn.spectrum.defaults=n,t.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var n=t("<input type='color'/>")[0];e._cachedResult='color'===n.type&&''!==n.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t('input[type=color]');e.length&&!D()&&e.spectrum({preferredFormat:'hex6'})};var f=/^[\s,#]+/,h=/\s+$/,d=0,p=Math,g=p.round,v=p.min,m=p.max,y=p.random,b=function t(e,n){if(n=n||{},(e=e||'')instanceof t)return e;if(!(this instanceof t))return new t(e,n);var r=function(t){var e={r:0,g:0,b:0},n=1,r=!1,i=!1;'string'==typeof t&&(t=function(t){t=t.replace(f,'').replace(h,'').toLowerCase();var e,n=!1;if(C[t])t=C[t],n=!0;else if('transparent'==t)return{r:0,g:0,b:0,a:0,format:'name'};if(e=k.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=k.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=k.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=k.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=k.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=k.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=k.hex8.exec(t))return{a:(r=e[1],Q(r)/255),r:Q(e[2]),g:Q(e[3]),b:Q(e[4]),format:n?'name':'hex8'};var r;if(e=k.hex6.exec(t))return{r:Q(e[1]),g:Q(e[2]),b:Q(e[3]),format:n?'name':'hex'};if(e=k.hex3.exec(t))return{r:Q(e[1]+''+e[1]),g:Q(e[2]+''+e[2]),b:Q(e[3]+''+e[3]),format:n?'name':'hex'};return!1}(t));'object'==l()(t)&&(t.hasOwnProperty('r')&&t.hasOwnProperty('g')&&t.hasOwnProperty('b')?(o=t.r,s=t.g,a=t.b,e={r:255*X(o,255),g:255*X(s,255),b:255*X(a,255)},r=!0,i='%'===String(t.r).substr(-1)?'prgb':'rgb'):t.hasOwnProperty('h')&&t.hasOwnProperty('s')&&t.hasOwnProperty('v')?(t.s=et(t.s),t.v=et(t.v),e=function(t,e,n){t=6*X(t,360),e=X(e,100),n=X(n,100);var r=p.floor(t),i=t-r,o=n*(1-e),s=n*(1-i*e),a=n*(1-(1-i)*e),c=r%6;return{r:255*[n,s,o,o,a,n][c],g:255*[a,n,n,s,o,o][c],b:255*[o,o,a,n,n,s][c]}}(t.h,t.s,t.v),r=!0,i='hsv'):t.hasOwnProperty('h')&&t.hasOwnProperty('s')&&t.hasOwnProperty('l')&&(t.s=et(t.s),t.l=et(t.l),e=function(t,e,n){var r,i,o;function s(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=X(t,360),e=X(e,100),n=X(n,100),0===e)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;r=s(c,a,t+1/3),i=s(c,a,t),o=s(c,a,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,t.s,t.l),r=!0,i='hsl'),t.hasOwnProperty('a')&&(n=t.a));var o,s,a;return n=J(n),{ok:r,format:t.format||i,r:v(255,m(e.r,0)),g:v(255,m(e.g,0)),b:v(255,m(e.b,0)),a:n}}(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=g(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=g(this._r)),this._g<1&&(this._g=g(this._g)),this._b<1&&(this._b=g(this._b)),this._ok=r.ok,this._tc_id=d++};b.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=J(t),this._roundA=g(100*this._a)/100,this},toHsv:function(){var t=L(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=L(this._r,this._g,this._b),e=g(360*t.h),n=g(100*t.s),r=g(100*t.v);return 1==this._a?'hsv('+e+', '+n+'%, '+r+'%)':'hsva('+e+', '+n+'%, '+r+'%, '+this._roundA+')'},toHsl:function(){var t=M(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=M(this._r,this._g,this._b),e=g(360*t.h),n=g(100*t.s),r=g(100*t.l);return 1==this._a?'hsl('+e+', '+n+'%, '+r+'%)':'hsla('+e+', '+n+'%, '+r+'%, '+this._roundA+')'},toHex:function(t){return R(this._r,this._g,this._b,t)},toHexString:function(t){return'#'+this.toHex(t)},toHex8:function(){return N(this._r,this._g,this._b,this._a)},toHex8String:function(){return'#'+this.toHex8()},toRgb:function(){return{r:g(this._r),g:g(this._g),b:g(this._b),a:this._a}},toRgbString:function(){return 1==this._a?'rgb('+g(this._r)+', '+g(this._g)+', '+g(this._b)+')':'rgba('+g(this._r)+', '+g(this._g)+', '+g(this._b)+', '+this._roundA+')'},toPercentageRgb:function(){return{r:g(100*X(this._r,255))+'%',g:g(100*X(this._g,255))+'%',b:g(100*X(this._b,255))+'%',a:this._a}},toPercentageRgbString:function(){return 1==this._a?'rgb('+g(100*X(this._r,255))+'%, '+g(100*X(this._g,255))+'%, '+g(100*X(this._b,255))+'%)':'rgba('+g(100*X(this._r,255))+'%, '+g(100*X(this._g,255))+'%, '+g(100*X(this._b,255))+'%, '+this._roundA+')'},toName:function(){return 0===this._a?'transparent':!(this._a<1)&&(S[R(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e='#'+N(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?'GradientType = 1, ':'';t&&(n=b(t).toHex8String());return'progid:DXImageTransform.Microsoft.gradient('+r+'startColorstr='+e+',endColorstr='+n+')'},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||'hex'!==t&&'hex6'!==t&&'hex3'!==t&&'name'!==t?('rgb'===t&&(n=this.toRgbString()),'prgb'===t&&(n=this.toPercentageRgbString()),'hex'!==t&&'hex6'!==t||(n=this.toHexString()),'hex3'===t&&(n=this.toHexString(!0)),'hex8'===t&&(n=this.toHex8String()),'name'===t&&(n=this.toName()),'hsl'===t&&(n=this.toHslString()),'hsv'===t&&(n=this.toHsvString()),n||this.toHexString()):'name'===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(V,arguments)},brighten:function(){return this._applyModification(U,arguments)},darken:function(){return this._applyModification(z,arguments)},desaturate:function(){return this._applyModification(I,arguments)},saturate:function(){return this._applyModification(F,arguments)},greyscale:function(){return this._applyModification(B,arguments)},spin:function(){return this._applyModification(H,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(K,arguments)},complement:function(){return this._applyCombination(W,arguments)},monochromatic:function(){return this._applyCombination(Y,arguments)},splitcomplement:function(){return this._applyCombination(G,arguments)},triad:function(){return this._applyCombination($,arguments)},tetrad:function(){return this._applyCombination(q,arguments)}},b.fromRatio=function(t,e){if('object'==l()(t)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]='a'===r?t[r]:et(t[r]));t=n}return b(t,e)},b.equals=function(t,e){return!(!t||!e)&&b(t).toRgbString()==b(e).toRgbString()},b.random=function(){return b.fromRatio({r:y(),g:y(),b:y()})},b.mix=function(t,e,n){n=0===n?0:n||50;var r,i=b(t).toRgb(),o=b(e).toRgb(),s=n/100,a=2*s-1,c=o.a-i.a,l=1-(r=((r=a*c==-1?a:(a+c)/(1+a*c))+1)/2),u={r:o.r*r+i.r*l,g:o.g*r+i.g*l,b:o.b*r+i.b*l,a:o.a*s+i.a*(1-s)};return b(u)},b.readability=function(t,e){var n=b(t),r=b(e),i=n.toRgb(),o=r.toRgb(),s=n.getBrightness(),a=r.getBrightness(),c=Math.max(i.r,o.r)-Math.min(i.r,o.r)+Math.max(i.g,o.g)-Math.min(i.g,o.g)+Math.max(i.b,o.b)-Math.min(i.b,o.b);return{brightness:Math.abs(s-a),color:c}},b.isReadable=function(t,e){var n=b.readability(t,e);return n.brightness>125&&n.color>500},b.mostReadable=function(t,e){for(var n=null,r=0,i=!1,o=0;o<e.length;o++){var s=b.readability(t,e[o]),a=s.brightness>125&&s.color>500,c=3*(s.brightness/125)+s.color/500;(a&&!i||a&&i&&c>r||!a&&!i&&c>r)&&(i=a,r=c,n=b(e[o]))}return n};var w,O,x,C=b.names={aliceblue:'f0f8ff',antiquewhite:'faebd7',aqua:'0ff',aquamarine:'7fffd4',azure:'f0ffff',beige:'f5f5dc',bisque:'ffe4c4',black:'000',blanchedalmond:'ffebcd',blue:'00f',blueviolet:'8a2be2',brown:'a52a2a',burlywood:'deb887',burntsienna:'ea7e5d',cadetblue:'5f9ea0',chartreuse:'7fff00',chocolate:'d2691e',coral:'ff7f50',cornflowerblue:'6495ed',cornsilk:'fff8dc',crimson:'dc143c',cyan:'0ff',darkblue:'00008b',darkcyan:'008b8b',darkgoldenrod:'b8860b',darkgray:'a9a9a9',darkgreen:'006400',darkgrey:'a9a9a9',darkkhaki:'bdb76b',darkmagenta:'8b008b',darkolivegreen:'556b2f',darkorange:'ff8c00',darkorchid:'9932cc',darkred:'8b0000',darksalmon:'e9967a',darkseagreen:'8fbc8f',darkslateblue:'483d8b',darkslategray:'2f4f4f',darkslategrey:'2f4f4f',darkturquoise:'00ced1',darkviolet:'9400d3',deeppink:'ff1493',deepskyblue:'00bfff',dimgray:'696969',dimgrey:'696969',dodgerblue:'1e90ff',firebrick:'b22222',floralwhite:'fffaf0',forestgreen:'228b22',fuchsia:'f0f',gainsboro:'dcdcdc',ghostwhite:'f8f8ff',gold:'ffd700',goldenrod:'daa520',gray:'808080',green:'008000',greenyellow:'adff2f',grey:'808080',honeydew:'f0fff0',hotpink:'ff69b4',indianred:'cd5c5c',indigo:'4b0082',ivory:'fffff0',khaki:'f0e68c',lavender:'e6e6fa',lavenderblush:'fff0f5',lawngreen:'7cfc00',lemonchiffon:'fffacd',lightblue:'add8e6',lightcoral:'f08080',lightcyan:'e0ffff',lightgoldenrodyellow:'fafad2',lightgray:'d3d3d3',lightgreen:'90ee90',lightgrey:'d3d3d3',lightpink:'ffb6c1',lightsalmon:'ffa07a',lightseagreen:'20b2aa',lightskyblue:'87cefa',lightslategray:'789',lightslategrey:'789',lightsteelblue:'b0c4de',lightyellow:'ffffe0',lime:'0f0',limegreen:'32cd32',linen:'faf0e6',magenta:'f0f',maroon:'800000',mediumaquamarine:'66cdaa',mediumblue:'0000cd',mediumorchid:'ba55d3',mediumpurple:'9370db',mediumseagreen:'3cb371',mediumslateblue:'7b68ee',mediumspringgreen:'00fa9a',mediumturquoise:'48d1cc',mediumvioletred:'c71585',midnightblue:'191970',mintcream:'f5fffa',mistyrose:'ffe4e1',moccasin:'ffe4b5',navajowhite:'ffdead',navy:'000080',oldlace:'fdf5e6',olive:'808000',olivedrab:'6b8e23',orange:'ffa500',orangered:'ff4500',orchid:'da70d6',palegoldenrod:'eee8aa',palegreen:'98fb98',paleturquoise:'afeeee',palevioletred:'db7093',papayawhip:'ffefd5',peachpuff:'ffdab9',peru:'cd853f',pink:'ffc0cb',plum:'dda0dd',powderblue:'b0e0e6',purple:'800080',rebeccapurple:'663399',red:'f00',rosybrown:'bc8f8f',royalblue:'4169e1',saddlebrown:'8b4513',salmon:'fa8072',sandybrown:'f4a460',seagreen:'2e8b57',seashell:'fff5ee',sienna:'a0522d',silver:'c0c0c0',skyblue:'87ceeb',slateblue:'6a5acd',slategray:'708090',slategrey:'708090',snow:'fffafa',springgreen:'00ff7f',steelblue:'4682b4',tan:'d2b48c',teal:'008080',thistle:'d8bfd8',tomato:'ff6347',turquoise:'40e0d0',violet:'ee82ee',wheat:'f5deb3',white:'fff',whitesmoke:'f5f5f5',yellow:'ff0',yellowgreen:'9acd32'},S=b.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(C),k=(O='[\\s|\\(]+('+(w='(?:'+'[-\\+]?\\d*\\.\\d+%?'+')|(?:'+'[-\\+]?\\d+%?'+')')+')[,|\\s]+('+w+')[,|\\s]+('+w+')\\s*\\)?',x='[\\s|\\(]+('+w+')[,|\\s]+('+w+')[,|\\s]+('+w+')[,|\\s]+('+w+')\\s*\\)?',{rgb:new RegExp('rgb'+O),rgba:new RegExp('rgba'+x),hsl:new RegExp('hsl'+O),hsla:new RegExp('hsla'+x),hsv:new RegExp('hsv'+O),hsva:new RegExp('hsva'+x),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=b,t((function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}))}function j(e,n,r,i){for(var s=[],a=0;a<e.length;a++){var c=e[a];if(c){var l=b(c),u=l.toHsl().l<.5?'sp-thumb-el sp-thumb-dark':'sp-thumb-el sp-thumb-light';u+=b.equals(n,c)?' sp-thumb-active':'';var f=l.toString(i.preferredFormat||'rgb'),h=o?'background-color:'+l.toRgbString():'filter:'+l.toFilter();s.push('<span title="'+f+'" data-color="'+l.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+h+';"></span></span>')}else{s.push(t('<div />').append(t('<span data-color="" style="background-color:transparent;" class="'+'sp-clear-display'+'"></span>').attr('title',i.noColorSelectedText)).html())}}return"<div class='sp-cf "+r+"'>"+s.join('')+'</div>'}function E(c,l){var u,f,h,d,p=function(e,r){var i=t.extend({},n,e);return i.callbacks={move:T(i.move,r),change:T(i.change,r),show:T(i.show,r),hide:T(i.hide,r),beforeShow:T(i.beforeShow,r)},i}(l,c),g=p.flat,v=p.showSelectionPalette,m=p.localStorageKey,y=p.theme,w=p.callbacks,O=(u=$t,f=10,function(){var t=this,e=arguments,n=function(){d=null,u.apply(t,e)};h&&clearTimeout(d),!h&&d||(d=setTimeout(n,f))}),x=!1,C=!1,S=!0,k=0,E=0,_=0,M=0,L=0,R=0,N=0,I=0,F=0,B=0,V=1,U=[],z=[],H={},W=p.selectionPalette.slice(0),$=p.maxSelectionSize,q='sp-dragging',G=null,K=c.ownerDocument,Y=(K.body,t(c)),J=!1,X=t(a,K).addClass(y),Z=X.find('.sp-picker-container'),Q=X.find('.sp-color'),tt=X.find('.sp-dragger'),et=X.find('.sp-hue'),nt=X.find('.sp-slider'),rt=X.find('.sp-alpha-inner'),it=X.find('.sp-alpha'),ot=X.find('.sp-alpha-handle'),st=X.find('.sp-input'),at=X.find('.sp-palette'),ct=X.find('.sp-initial'),lt=X.find('.sp-cancel'),ut=X.find('.sp-clear'),ft=X.find('.sp-choose'),ht=X.find('.sp-palette-toggle'),dt=Y.is('input'),pt=dt&&'color'===Y.attr('type')&&D(),gt=dt&&!g,vt=gt?t(s).addClass(y).addClass(p.className).addClass(p.replacerClassName):t([]),mt=gt?vt:Y,yt=vt.find('.sp-preview-inner'),bt=p.color||dt&&Y.val(),wt=!1,Ot=p.preferredFormat,xt=!p.showButtons||p.clickoutFiresChange,Ct=!bt,St=p.allowEmpty&&!pt;function kt(){if(p.showPaletteOnly&&(p.showPalette=!0),ht.text(p.showPaletteOnly?p.togglePaletteMoreText:p.togglePaletteLessText),p.palette){U=p.palette.slice(0),z=t.isArray(U[0])?U:[U],H={};for(var e=0;e<z.length;e++)for(var n=0;n<z[e].length;n++){var r=b(z[e][n]).toRgbString();H[r]=!0}}X.toggleClass('sp-flat',g),X.toggleClass('sp-input-disabled',!p.showInput),X.toggleClass('sp-alpha-enabled',p.showAlpha),X.toggleClass('sp-clear-enabled',St),X.toggleClass('sp-buttons-disabled',!p.showButtons),X.toggleClass('sp-palette-buttons-disabled',!p.togglePaletteOnly),X.toggleClass('sp-palette-disabled',!p.showPalette),X.toggleClass('sp-palette-only',p.showPaletteOnly),X.toggleClass('sp-initial-disabled',!p.showInitial),X.addClass(p.className).addClass(p.containerClassName),$t()}function jt(){if(m&&window.localStorage){try{var e=window.localStorage[m].split(',#');e.length>1&&(delete window.localStorage[m],t.each(e,(function(t,e){Et(e)})))}catch(t){}try{W=window.localStorage[m].split(';')}catch(t){}}}function Et(e){if(v){var n=b(e).toRgbString();if(!H[n]&&-1===t.inArray(n,W))for(W.push(n);W.length>$;)W.shift();if(m&&window.localStorage)try{window.localStorage[m]=W.join(';')}catch(t){}}}function _t(){var e=Vt(),n=t.map(z,(function(t,n){return j(t,e,'sp-palette-row sp-palette-row-'+n,p)}));jt(),W&&n.push(j(function(){var t=[];if(p.showPalette)for(var e=0;e<W.length;e++){var n=b(W[e]).toRgbString();H[n]||t.push(W[e])}return t.reverse().slice(0,p.maxSelectionSize)}(),e,'sp-palette-row sp-palette-row-selection',p)),at.html(n.join(''))}function Pt(){if(p.showInitial){var t=wt,e=Vt();ct.html(j([t,e],e,'sp-palette-row-initial',p))}}function Tt(){(E<=0||k<=0||M<=0)&&$t(),C=!0,X.addClass(q),G=null,Y.trigger('dragstart.spectrum',[Vt()])}function At(){C=!1,X.removeClass(q),Y.trigger('dragstop.spectrum',[Vt()])}function Dt(){var t=st.val();if(null!==t&&''!==t||!St){var e=b(t);e.isValid()?(Bt(e),Wt(!0)):st.addClass('sp-validation-error')}else Bt(null),Wt(!0)}function Mt(){x?It():Lt()}function Lt(){var e=t.Event('beforeShow.spectrum');if(x)$t();else if(Y.trigger('beforeShow.spectrum',[Vt()]),!1!==w.beforeShow(Vt())&&!e.isDefaultPrevented()){!function(){for(var t=0;t<r.length;t++)r[t]&&r[t].hide()}(),x=!0;var n=t(K);n.bind('keydown.spectrum',Rt),n.bind('click.spectrum',Nt),t(window).bind('resize.spectrum',O),vt.addClass('sp-active'),X.removeClass('sp-hidden'),$t(),zt(),wt=Vt(),Pt(),w.show(wt),Y.trigger('show.spectrum',[wt])}}function Rt(t){27===t.keyCode&&It()}function Nt(t){2!=t.button&&(C||(xt?Wt(!0):Ft(),It()))}function It(){x&&!g&&(x=!1,t(K).unbind('keydown.spectrum',Rt),t(K).unbind('click.spectrum',Nt),t(window).unbind('resize.spectrum',O),vt.removeClass('sp-active'),X.addClass('sp-hidden'),w.hide(Vt()),Y.trigger('hide.spectrum',[Vt()]))}function Ft(){Bt(wt,!0)}function Bt(t,e){var n,r;b.equals(t,Vt())?zt():(!t&&St?Ct=!0:(Ct=!1,S=!t,r=(n=b(t)).toHsv(),I=r.h%360/360,F=r.s,B=r.v,V=r.a),zt(),n&&n.isValid()&&!e&&(Ot=p.preferredFormat||n.getFormat()))}function Vt(t){return t=t||{},St&&Ct?null:b.fromRatio({h:I,s:F,v:B,a:Math.round(100*V)/100},{format:t.format||Ot})}function Ut(){zt(),w.move(Vt()),Y.trigger('move.spectrum',[Vt()])}function zt(){st.removeClass('sp-validation-error'),Ht();var t=b.fromRatio({h:I,s:1,v:1});Q.css('background-color',t.toHexString());var e=Ot;V<1&&(0!==V||'name'!==e)&&('hex'!==e&&'hex3'!==e&&'hex6'!==e&&'name'!==e||(e='rgb'));var n=Vt({format:e}),r='';if(yt.removeClass('sp-clear-display'),yt.css('background-color','transparent'),!n&&St)yt.addClass('sp-clear-display');else{var s=n.toHexString(),a=n.toRgbString();if(o||1===n.alpha?yt.css('background-color',a):(yt.css('background-color','transparent'),yt.css('filter',n.toFilter())),p.showAlpha){var c=n.toRgb();c.a=0;var l=b(c).toRgbString(),u='linear-gradient(left, '+l+', '+s+')';i?rt.css('filter',b(l).toFilter({gradientType:1},s)):(rt.css('background','-webkit-'+u),rt.css('background','-moz-'+u),rt.css('background','-ms-'+u),rt.css('background','linear-gradient(to right, '+l+', '+s+')'))}r=n.toString(e)}p.showInput&&st.val(r),p.showPalette&&_t(),Pt()}function Ht(){var t=F,e=B;if(St&&Ct)ot.hide(),nt.hide(),tt.hide();else{ot.show(),nt.show(),tt.show();var n=t*k,r=E-e*E;n=Math.max(-_,Math.min(k-_,n-_)),r=Math.max(-_,Math.min(E-_,r-_)),tt.css({top:r+'px',left:n+'px'});var i=V*L;ot.css({left:i-R/2+'px'});var o=I*M;nt.css({top:o-N+'px'})}}function Wt(t){var e=Vt(),n='',r=!!S||!b.equals(e,wt);e&&(n=e.toString(Ot),!x&&Et(e)),dt&&Y.val(n),t&&r&&(w.change(e),Y.trigger('change',[e]))}function $t(){x&&(k=Q.width(),E=Q.height(),_=tt.height(),et.width(),M=et.height(),N=nt.height(),L=it.width(),R=ot.width(),g||(X.css('position','absolute'),p.offset?X.offset(p.offset):X.offset(function(e,n){var r=0,i=e.outerWidth(),o=e.outerHeight(),s=n.outerHeight(),a=e[0].ownerDocument,c=a.documentElement,l=c.clientWidth,u=c.clientHeight,f=t(a).scrollLeft(),h=t(a).scrollTop(),d=l+f,p=u+h,g=n.offset();return g.top+=s,g.left-=Math.min(g.left,g.left+i>d&&d>i?Math.abs(g.left+i-d):0),g.top-=Math.min(g.top,g.top+o>p&&p>o?Math.abs(o+s-r):r),g}(X,mt))),Ht(),p.showPalette&&_t(),Y.trigger('reflow.spectrum'))}function qt(){It(),J=!0,Y.attr('disabled',!0),mt.addClass('sp-disabled')}!function(){if(i&&X.find('*:not(input)').attr('unselectable','on'),kt(),gt&&Y.after(vt).hide(),St||ut.hide(),g)Y.after(X).hide();else{var e='parent'===p.appendTo?Y.parent():t(p.appendTo);1!==e.length&&(e=t('body')),e.append(X)}function n(e){return e.data&&e.data.ignore?(Bt(t(e.target).closest('.sp-thumb-el').data('color')),Ut()):(Bt(t(e.target).closest('.sp-thumb-el').data('color')),Ut(),p.hideAfterPaletteSelect&&(Wt(!0),It())),!1}jt(),mt.bind('click.spectrum touchstart.spectrum',(function(e){J||Mt(),e.stopPropagation(),t(e.target).is('input')||e.preventDefault()})),(Y.is(':disabled')||!0===p.disabled)&&qt(),X.click(P),st.change(Dt),st.bind('paste',(function(){setTimeout(Dt,1)})),st.keydown((function(t){13==t.keyCode&&Dt()})),lt.text(p.cancelText),lt.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),Ft(),It()})),ut.attr('title',p.clearText),ut.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),Ct=!0,Ut(),g&&Wt(!0)})),ft.text(p.chooseText),ft.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),i&&st.is(':focus')&&st.trigger('change'),st.hasClass('sp-validation-error')||(Wt(!0),It())})),ht.text(p.showPaletteOnly?p.togglePaletteMoreText:p.togglePaletteLessText),ht.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),p.showPaletteOnly=!p.showPaletteOnly,p.showPaletteOnly||g||X.css('left','-='+(Z.outerWidth(!0)+5)),kt()})),A(it,(function(t,e,n){V=t/L,Ct=!1,n.shiftKey&&(V=Math.round(10*V)/10),Ut()}),Tt,At),A(et,(function(t,e){I=parseFloat(e/M),Ct=!1,p.showAlpha||(V=1),Ut()}),Tt,At),A(Q,(function(t,e,n){if(n.shiftKey){if(!G){var r=F*k,i=E-B*E,o=Math.abs(t-r)>Math.abs(e-i);G=o?'x':'y'}}else G=null;var s=!G||'y'===G;(!G||'x'===G)&&(F=parseFloat(t/k)),s&&(B=parseFloat((E-e)/E)),Ct=!1,p.showAlpha||(V=1),Ut()}),Tt,At),bt?(Bt(bt),zt(),Ot=p.preferredFormat||b(bt).getFormat(),Et(bt)):zt(),g&&Lt();var r=i?'mousedown.spectrum':'click.spectrum touchstart.spectrum';at.delegate('.sp-thumb-el',r,n),ct.delegate('.sp-thumb-el:nth-child(1)',r,{ignore:!0},n)}();var Gt={show:Lt,hide:It,toggle:Mt,reflow:$t,option:function(n,r){return n===e?t.extend({},p):r===e?p[n]:(p[n]=r,'preferredFormat'===n&&(Ot=p.preferredFormat),void kt())},enable:function(){J=!1,Y.attr('disabled',!1),mt.removeClass('sp-disabled')},disable:qt,offset:function(t){p.offset=t,$t()},set:function(t){Bt(t),Wt()},get:Vt,destroy:function(){Y.show(),mt.unbind('click.spectrum touchstart.spectrum'),X.remove(),vt.remove(),r[Gt.id]=null},container:X};return Gt.id=r.push(Gt)-1,Gt}function _(){}function P(t){t.stopPropagation()}function T(t,e){var n=Array.prototype.slice,r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}function A(e,n,r,o){n=n||function(){},r=r||function(){},o=o||function(){};var s=document,a=!1,c={},l=0,u=0,f='ontouchstart'in window,h={};function d(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function p(t){if(a){if(i&&s.documentMode<9&&!t.button)return g();var r=t&&t.touches&&t.touches[0],o=r&&r.pageX||t.pageX,h=r&&r.pageY||t.pageY,p=Math.max(0,Math.min(o-c.left,u)),v=Math.max(0,Math.min(h-c.top,l));f&&d(t),n.apply(e,[p,v,t])}}function g(){a&&(t(s).unbind(h),t(s.body).removeClass('sp-dragging'),setTimeout((function(){o.apply(e,arguments)}),0)),a=!1}h['selectstart']=d,h['dragstart']=d,h['touchmove mousemove']=p,h['touchend mouseup']=g,t(e).bind('touchstart mousedown',(function(n){var i=n.which?3==n.which:2==n.button;i||a||!1!==r.apply(e,arguments)&&(a=!0,l=t(e).height(),u=t(e).width(),c=t(e).offset(),t(s).bind(h),t(s.body).addClass('sp-dragging'),p(n),d(n))}))}function D(){return t.fn.spectrum.inputTypeColorSupport()}function M(t,e,n){t=X(t,255),e=X(e,255),n=X(n,255);var r,i,o=m(t,e,n),s=v(t,e,n),a=(o+s)/2;if(o==s)r=i=0;else{var c=o-s;switch(i=a>.5?c/(2-o-s):c/(o+s),o){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return{h:r,s:i,l:a}}function L(t,e,n){t=X(t,255),e=X(e,255),n=X(n,255);var r,i,o=m(t,e,n),s=v(t,e,n),a=o,c=o-s;if(i=0===o?0:c/o,o==s)r=0;else{switch(o){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return{h:r,s:i,v:a}}function R(t,e,n,r){var i=[tt(g(t).toString(16)),tt(g(e).toString(16)),tt(g(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join('')}function N(t,e,n,r){var i;return[tt((i=r,Math.round(255*parseFloat(i)).toString(16))),tt(g(t).toString(16)),tt(g(e).toString(16)),tt(g(n).toString(16))].join('')}function I(t,e){e=0===e?0:e||10;var n=b(t).toHsl();return n.s-=e/100,n.s=Z(n.s),b(n)}function F(t,e){e=0===e?0:e||10;var n=b(t).toHsl();return n.s+=e/100,n.s=Z(n.s),b(n)}function B(t){return b(t).desaturate(100)}function V(t,e){e=0===e?0:e||10;var n=b(t).toHsl();return n.l+=e/100,n.l=Z(n.l),b(n)}function U(t,e){e=0===e?0:e||10;var n=b(t).toRgb();return n.r=m(0,v(255,n.r-g(255*(-e/100)))),n.g=m(0,v(255,n.g-g(255*(-e/100)))),n.b=m(0,v(255,n.b-g(255*(-e/100)))),b(n)}function z(t,e){e=0===e?0:e||10;var n=b(t).toHsl();return n.l-=e/100,n.l=Z(n.l),b(n)}function H(t,e){var n=b(t).toHsl(),r=(g(n.h)+e)%360;return n.h=r<0?360+r:r,b(n)}function W(t){var e=b(t).toHsl();return e.h=(e.h+180)%360,b(e)}function $(t){var e=b(t).toHsl(),n=e.h;return[b(t),b({h:(n+120)%360,s:e.s,l:e.l}),b({h:(n+240)%360,s:e.s,l:e.l})]}function q(t){var e=b(t).toHsl(),n=e.h;return[b(t),b({h:(n+90)%360,s:e.s,l:e.l}),b({h:(n+180)%360,s:e.s,l:e.l}),b({h:(n+270)%360,s:e.s,l:e.l})]}function G(t){var e=b(t).toHsl(),n=e.h;return[b(t),b({h:(n+72)%360,s:e.s,l:e.l}),b({h:(n+216)%360,s:e.s,l:e.l})]}function K(t,e,n){e=e||6,n=n||30;var r=b(t).toHsl(),i=360/n,o=[b(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(b(r));return o}function Y(t,e){e=e||6;for(var n=b(t).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/e;e--;)s.push(b({h:r,s:i,v:o})),o=(o+a)%1;return s}function J(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function X(t,e){(function(t){return'string'==typeof t&&-1!=t.indexOf('.')&&1===parseFloat(t)})(t)&&(t='100%');var n=function(t){return'string'==typeof t&&-1!=t.indexOf('%')}(t);return t=v(e,m(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),p.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Z(t){return v(1,m(0,t))}function Q(t){return parseInt(t,16)}function tt(t){return 1==t.length?'0'+t:''+t}function et(t){return t<=1&&(t=100*t+'%'),t}}(p);var g=function(t){var e='name'===t.getFormat()&&t.toName(),n=1==t.getAlpha()?t.toHexString():t.toRgbString();return e||n.replace(/ /g,'')};e["a"]=f["a"].extend({template:function(){var t=this.ppfx;return"\n      <div class=\"".concat(this.holderClass(),"\"></div>\n      <div class=\"").concat(t,"field-colorp\">\n        <div class=\"").concat(t,"field-colorp-c\" data-colorp-c>\n          <div class=\"").concat(t,"checker-bg\"></div>\n        </div>\n      </div>\n    ")},inputClass:function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},holderClass:function(){return"".concat(this.ppfx,"input-holder")},remove:function(){f["a"].prototype.remove.apply(this,arguments),this.colorEl.spectrum('destroy')},handleChange:function(t){t.stopPropagation();var e=t.target.value;Object(a["isUndefined"])(e)||this.__onInputChange(e)},__onInputChange:function(t){var e=this.model,n=this.opts.onChange,r=t,i=this.getColorEl();if(i){i.spectrum('set',r);var o=i.spectrum('get'),s=r&&g(o);s&&(r=s)}n?n(r):e.set({value:r},{fromInput:1})},setValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model,r=Object(a["isUndefined"])(e.def)?n.get('defaults'):e.def,i=Object(a["isUndefined"])(t)?Object(a["isUndefined"])(r)?'':r:t,o=this.getInputEl(),s=this.getColorEl(),c='none'!=i?i:'';o.value=i,s.get(0).style.backgroundColor=c,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(s.spectrum('set',c),this.noneColor='none'==i)},getColorEl:function(){if(!this.colorEl){var t,e=this.em,n=this.model,r=this.opts,i=this,o=this.ppfx,s=r.onChange,a=p("<div class=\"".concat(this.ppfx,"field-color-picker\"></div>")),c=a.get(0).style,l=e&&e.config?e.config.el:'',u=e&&e.getConfig&&e.getConfig('colorPicker')||{},f=0;this.$el.find("[data-colorp-c]").append(a),a.spectrum(d(d(d({color:n.getValue()||!1,containerClassName:"".concat(o,"one-bg ").concat(o,"two-color"),appendTo:l||'body',maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:'Ok',cancelText:'⨯',palette:[]},u),n.get('colorPicker')||{}),{},{move:function(t){var e=g(t);c.backgroundColor=e,s?s(e,!0):n.setValueFromInput(e,0)},change:function(t){f=1;var e=g(t);c.backgroundColor=e,s?s(e):(n.setValueFromInput(0,0),n.setValueFromInput(e)),i.noneColor=0},show:function(e){f=0,t=s?n.getValue({noDefault:!0}):g(e)},hide:function(e){f||!t&&!s||(i.noneColor&&(t=''),c.backgroundColor=t,a.spectrum('set',t),s?s(t,!0):n.setValueFromInput(t,0))}})),e&&e.on&&this.listenTo(e,'component:selected',(function(){f=1,a.spectrum('hide')})),this.colorEl=a}return this.colorEl},render:function(){return f["a"].prototype.render.call(this),this.getColorEl(),this}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var r=n(2),i=n.n(r),o=n(5),s=n.n(o),a=n(6),c=n.n(a),l=n(7),u=n.n(l),f=n(8),h=n.n(f),d=n(4),p=n.n(d),g=n(0),v=n(3),m=n(12),y=n.n(m),b=n(1);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var C='__aw',S='__ah',k=function(t){u()(n,t);var e=x(n);function n(){return s()(this,n),e.apply(this,arguments)}return c()(n,[{key:"defaults",value:function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:'',styles:'',_undo:!0,_undoexc:['changesCount']}}},{key:"initialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.config,r=n.em,i=this.attributes,o=i.styles,s=i.component,a=r.get('DomComponents'),c=a.getConfig(),l=r.get('CssComposer').getAll(),u={};this.em=r;var f={em:r,config:c,frame:this,idMap:u};if(!Object(b["isComponent"])(s)){var h=Object(b["isObject"])(s)?s:{components:s};!h.type&&(h.type='wrapper');var d=a.getType('wrapper').model;this.set('component',new d(h,f))}if(o){if(!Object(b["isObject"])(o)){var p=Object.keys(u);p.length&&Array.isArray(o)&&o.forEach((function(t){var e=t.selectors;if(e&&1==e.length){var n=e[0],r=n.name&&2===n.type&&n;if(r&&u[r.name])r.name=u[r.name];else if(Object(g["isString"])(n)&&'#'===n[0]){var i=n.substring(1);i&&u[i]&&(e[0]="#".concat(u[i]))}}})),l.add(o),this.set('styles',l)}}else this.set('styles',l);!t.width&&this.set(C,1),!t.height&&this.set(S,1)}},{key:"onRemove",value:function(){this.getComponent().remove({root:1})}},{key:"changesUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.temporary||t.noCount||t.avoidStore||this.set('changesCount',this.get('changesCount')+1)}},{key:"getComponent",value:function(){return this.get('component')}},{key:"getStyles",value:function(){return this.get('styles')}},{key:"disable",value:function(){this.trigger('disable')}},{key:"remove",value:function(){this.view=0;var t=this.collection;return t&&t.remove(this)}},{key:"getHead",value:function(){var t=this.get('head')||[];return y()(t)}},{key:"setHead",value:function(t){return this.set('head',y()(t))}},{key:"addHeadItem",value:function(t){var e=this.getHead();e.push(t),this.setHead(e)}},{key:"getHeadByAttr",value:function(t,e,n){return this.getHead().filter((function(r){return r.attributes&&r.attributes[t]==e&&(!n||n===r.tag)}))[0]}},{key:"removeHeadByAttr",value:function(t,e,n){var r=this.getHead(),i=this.getHeadByAttr(t,e,n),o=r.indexOf(i);o>=0&&(r.splice(o,1),this.setHead(r))}},{key:"addLink",value:function(t){var e='link';!this.getHeadByAttr('href',t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:'stylesheet'}})}},{key:"removeLink",value:function(t){this.removeHeadByAttr('href',t,'link')}},{key:"addScript",value:function(t){var e='script';!this.getHeadByAttr('src',t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})}},{key:"removeScript",value:function(t){this.removeHeadByAttr('src',t,'script')}},{key:"getPage",value:function(){var t=this.collection;return t&&t.page}},{key:"_emitUpdated",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.em.trigger('frame:updated',O({frame:this},t))}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=v["Model"].prototype.toJSON.call(this,t),n=this.em,r=n&&n.get('StorageManager'),i=r&&r.getConfig(),o=Object(g["result"])(this,'defaults');if(i&&!t.fromUndo){var s={component:this.getComponent()};i.storeHtml&&(e.html=n.getHtml(s)),i.storeCss&&(e.css=n.getCss(s))}return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[C]&&delete e.width,e[S]&&delete e.height,Object(g["forEach"])(e,(function(t,n){0===n.indexOf('_')&&delete e[n]})),Object(g["forEach"])(o,(function(t,n){e[n]===t&&delete e[n]})),Object(g["forEach"])(['attributes','head'],(function(t){Object(g["isEmpty"])(e[t])&&delete e[t]})),e}}]),n}(v["Model"]);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var P=function(t){u()(n,t);var e=_(n);function n(){return s()(this,n),e.apply(this,arguments)}return c()(n,[{key:"initialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g["bindAll"])(this,'itemLoaded'),this.config=e,this.on('reset',this.onReset),this.on('remove',this.onRemove)}},{key:"onReset",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.previousModels||[];r.map((function(t){return e.onRemove(t)}))}},{key:"onRemove",value:function(t){t&&t.onRemove()}},{key:"itemLoaded",value:function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger('loaded:all'),this.listenToLoadItems(0))}},{key:"listenToLoad",value:function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(1)}},{key:"listenToLoadItems",value:function(t){var e=this;this.forEach((function(n){return n[t?'on':'off']('loaded',e.itemLoaded)}))}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.config;return v["Collection"].prototype.add.call(this,t,E(E({},e),{},{config:n}))}}]),n}(v["Collection"]);P.prototype.model=k},function(t,e,n){"use strict";(function(t){var r=n(16),i=n.n(r),o=n(128),s=n(129),a=setTimeout;function c(t){return Boolean(t&&void 0!==t.length)}function l(){}function u(t){if(!(this instanceof u))throw new TypeError('Promises must be constructed via new');if('function'!=typeof t)throw new TypeError('not a function');this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],v(t,this)}function f(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void d(e.promise,t)}h(e.promise,r)}else(1===t._state?h:d)(e.promise,t._value)}))):t._deferreds.push(e)}function h(t,e){try{if(e===t)throw new TypeError('A promise cannot be resolved with itself.');if(e&&('object'===i()(e)||'function'==typeof e)){var n=e.then;if(e instanceof u)return t._state=3,t._value=e,void p(t);if('function'==typeof n)return void v((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,p(t)}catch(e){d(t,e)}var r,o}function d(t,e){t._state=2,t._value=e,p(t)}function p(t){2===t._state&&0===t._deferreds.length&&u._immediateFn((function(){t._handled||u._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)f(t,t._deferreds[e]);t._deferreds=null}function g(t,e,n){this.onFulfilled='function'==typeof t?t:null,this.onRejected='function'==typeof e?e:null,this.promise=n}function v(t,e){var n=!1;try{t((function(t){n||(n=!0,h(e,t))}),(function(t){n||(n=!0,d(e,t))}))}catch(t){if(n)return;n=!0,d(e,t)}}u.prototype['catch']=function(t){return this.then(null,t)},u.prototype.then=function(t,e){var n=new this.constructor(l);return f(this,new g(t,e,n)),n},u.prototype['finally']=o["a"],u.all=function(t){return new u((function(e,n){if(!c(t))return n(new TypeError('Promise.all accepts an array'));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function s(t,a){try{if(a&&('object'===i()(a)||'function'==typeof a)){var c=a.then;if('function'==typeof c)return void c.call(a,(function(e){s(t,e)}),n)}r[t]=a,0==--o&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)s(a,r[a])}))},u.allSettled=s["a"],u.resolve=function(t){return t&&'object'===i()(t)&&t.constructor===u?t:new u((function(e){e(t)}))},u.reject=function(t){return new u((function(e,n){n(t)}))},u.race=function(t){return new u((function(e,n){if(!c(t))return n(new TypeError('Promise.race accepts an array'));for(var r=0,i=t.length;r<i;r++)u.resolve(t[r]).then(e,n)}))},u._immediateFn='function'==typeof t&&function(e){t(e)}||function(t){a(t,0)},u._unhandledRejectionFn=function(t){'undefined'!=typeof console&&console&&console.warn('Possible Unhandled Promise Rejection:',t)},e["a"]=u}).call(this,n(195).setImmediate)},function(t,e,n){"use strict";(function(e){var r=n(26).EventEmitter,i=n(15),o=n(34),s=n(48),a=n(28);function c(t,e,n){var i=this;r.call(this),setTimeout((function(){i._start(t,e,n)}),0)}i(c,r),c.prototype._start=function(t,n,r){var i=this,s=new e.XDomainRequest;n=a.addQuery(n,'t='+ +new Date),s.onerror=function(){i._error()},s.ontimeout=function(){i._error()},s.onprogress=function(){s.responseText,i.emit('chunk',200,s.responseText)},s.onload=function(){i.emit('finish',200,s.responseText),i._cleanup(!1)},this.xdr=s,this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xdr.open(t,n),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(t){this._error()}},c.prototype._error=function(){this.emit('finish',0,''),this._cleanup(!1)},c.prototype._cleanup=function(t){if(this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,t)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!e.XDomainRequest||!s.hasDomain()),t.exports=c}).call(this,n(17))},function(t,e,n){"use strict";(function(e){var r=n(15),i=n(83),o=n(67);t.exports=function(t){function n(e,n){i.call(this,t.transportName,e,n)}return r(n,i),n.enabled=function(n,r){if(!e.document)return!1;var s=o.extend({},r);return s.sameOrigin=!0,t.enabled(s)&&i.enabled()},n.transportName='iframe-'+t.transportName,n.needBody=!0,n.roundTrips=i.roundTrips+t.roundTrips-1,n.facadeTransport=t,n}}).call(this,n(17))},function(t,e,n){"use strict";t.exports={isObject:function(t){var e=typeof t;return'function'===e||'object'===e&&!!t},extend:function(t){if(!this.isObject(t))return t;for(var e,n,r=1,i=arguments.length;r<i;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}}},function(t,e,n){"use strict";function r(t){this.type=t}r.prototype.initEvent=function(t,e,n){return this.type=t,this.bubbles=e,this.cancelable=n,this.timeStamp=+new Date,this},r.prototype.stopPropagation=function(){},r.prototype.preventDefault=function(){},r.CAPTURING_PHASE=1,r.AT_TARGET=2,r.BUBBLING_PHASE=3,t.exports=r},function(t,e,n){"use strict";(function(e){var r=n(22),i=n(178),o=n(41),s=n(93),a=n(94),c={'Content-Type':'application/x-www-form-urlencoded'};function l(t,e){!r.isUndefined(t)&&r.isUndefined(t['Content-Type'])&&(t['Content-Type']=e)}var u,f={transitional:s,adapter:(('undefined'!=typeof XMLHttpRequest||void 0!==e&&'[object process]'===Object.prototype.toString.call(e))&&(u=n(95)),u),transformRequest:[function(t,e){if(i(e,'Accept'),i(e,'Content-Type'),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t))return t;if(r.isArrayBufferView(t))return t.buffer;if(r.isURLSearchParams(t))return l(e,'application/x-www-form-urlencoded;charset=utf-8'),t.toString();var n,o=r.isObject(t),s=e&&e['Content-Type'];if((n=r.isFileList(t))||o&&'multipart/form-data'===s){var c=this.env&&this.env.FormData;return a(n?{'files[]':t}:t,c&&new c)}return o||'application/json'===s?(l(e,'application/json'),function(t,e,n){if(r.isString(t))try{return(e||JSON.parse)(t),r.trim(t)}catch(t){if('SyntaxError'!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||f.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,s=!n&&'json'===this.responseType;if(s||i&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(s){if('SyntaxError'===t.name)throw o.from(t,o.ERR_BAD_RESPONSE,this,null,this.response);throw t}}return t}],timeout:0,xsrfCookieName:'XSRF-TOKEN',xsrfHeaderName:'X-XSRF-TOKEN',maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(190)},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:'application/json, text/plain, */*'}}};r.forEach(['delete','get','head'],(function(t){f.headers[t]={}})),r.forEach(['post','put','patch'],(function(t){f.headers[t]=r.merge(c)})),t.exports=f}).call(this,n(92))},function(t,e,n){"use strict";n.r(e),n.d(e,"evAll",(function(){return P})),n.d(e,"evPfx",(function(){return T})),n.d(e,"evPageSelect",(function(){return A})),n.d(e,"evPageSelectBefore",(function(){return D})),n.d(e,"evPageUpdate",(function(){return M})),n.d(e,"evPageAdd",(function(){return L})),n.d(e,"evPageAddBefore",(function(){return R})),n.d(e,"evPageRemove",(function(){return N})),n.d(e,"evPageRemoveBefore",(function(){return I}));var r=n(12),i=n.n(r),o=n(2),s=n.n(o),a=n(0),c=n(1),l=n(3),u=n(5),f=n.n(u),h=n(6),d=n.n(h),p=n(7),g=n.n(p),v=n(8),m=n.n(v),y=n(4),b=n.n(y),w=n(63);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}var x=function(t){g()(n,t);var e=O(n);function n(){return f()(this,n),e.apply(this,arguments)}return d()(n,[{key:"defaults",value:function(){return{frames:[],_undo:!0}}},{key:"initialize",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.config,i=void 0===r?{}:r,o=i.em,s={};this.em=o,t.frames||(s.component=t.component,s.styles=t.styles,['component','styles'].map((function(t){return e.unset(t)})));var a=t.frames||[s],c=new w["a"](a,i);c.page=this,this.set('frames',c);var l=o&&o.get('UndoManager');l&&l.add(c)}},{key:"onRemove",value:function(){this.get('frames').reset()}},{key:"getFrames",value:function(){return this.get('frames')}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.get('name')}},{key:"setName",value:function(t){return this.get({name:t})}},{key:"getAllFrames",value:function(){return this.getFrames().models||[]}},{key:"getMainFrame",value:function(){return this.getFrames().at(0)}},{key:"getMainComponent",value:function(){var t=this.getMainFrame();return t&&t.getComponent()}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=l["Model"].prototype.toJSON.call(this,t),n=Object(a["result"])(this,'defaults');return Object(a["forEach"])(e,(function(t,n){0===n.indexOf('_')&&delete e[n]})),Object(a["forEach"])(n,(function(t,n){e[n]===t&&delete e[n]})),e}}]),n}(l["Model"]);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}var j=function(t){g()(n,t);var e=k(n);function n(){return f()(this,n),e.apply(this,arguments)}return d()(n,[{key:"initialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.config=e,this.on('reset',this.onReset),this.on('remove',this.onRemove)}},{key:"onReset",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.previousModels||[];r.map((function(t){return e.onRemove(t)}))}},{key:"onRemove",value:function(t){t&&t.onRemove()}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.config;return l["Collection"].prototype.add.call(this,t,S(S({},e),{},{config:n}))}}]),n}(l["Collection"]);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}j.prototype.model=x;var P='page',T="".concat(P,":"),A="".concat(T,"select"),D="".concat(A,":before"),M="".concat(T,"update"),L="".concat(T,"add"),R="".concat(L,":before"),N="".concat(T,"remove"),I="".concat(N,":before"),F='change:selected',B='main';e["default"]=function(){return{name:'PageManager',storageKey:'pages',Page:x,Pages:j,events:{all:P,select:A,selectBefore:D,update:M,add:L,addBefore:R,remove:N,removeBefore:I},init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a["bindAll"])(this,'_onPageChange');var n=e.em,r=_({},e);this.config=r,this.em=n;var i=new j([],r);this.pages=i;var o=new l["Model"]({_undo:!0});return this.model=o,i.on('add',(function(t,e,r){return n.trigger(L,t,r)})),i.on('remove',(function(t,e,r){return n.trigger(N,t,r)})),i.on('change',(function(t,e){n.trigger(M,t,t.changedAttributes(),e)})),i.on('reset',(function(e){return e.at(0)&&t.select(e.at(0))})),i.on('all',this.__onChange,this),o.on(F,this._onPageChange),this},__onChange:function(t,e,n,r){var i=r||n;this.em.trigger(P,{event:t,page:e,options:i})},onLoad:function(){var t=this.pages,e={silent:!0};t.add(this.config.pages||[],e);var n=t.length?this.getMain():this.add({type:B},e);this.select(n,e)},_onPageChange:function(t,e,n){var r=this.em,i=r.get('LayerManager'),o=e.getMainComponent();i&&o&&i.setRoot(o),r.trigger(A,e,t.previous('selected')),this.__onChange(F,e,n)},postLoad:function(){var t=this.em,e=this.model,n=t.get('UndoManager');n&&n.add(e),n&&n.add(this.pages)},add:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em;t.id=t.id||this._createId();var i=function(){var r=e.pages.add(t,n);return n.select&&e.select(r),r};return!n.silent&&r.trigger(R,t,i,n),!n.abort&&i()},remove:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,i=Object(a["isString"])(t)?this.get(t):t,o=function(){return i&&e.pages.remove(i,n),i};return!n.silent&&r.trigger(I,i,o,n),!n.abort&&o()},get:function(t){return this.pages.filter((function(e){return e.get('id')===t}))[0]},getMain:function(){var t=this.pages;return t.filter((function(t){return t.get('type')===B}))[0]||t.at(0)},getAll:function(){return i()(this.pages.models)},getAllWrappers:function(){var t=this.getAll();return Object(a["unique"])(Object(a["flatten"])(t.map((function(t){return t.getAllFrames().map((function(t){return t.getComponent()}))}))))},getAllMap:function(){return this.getAll().reduce((function(t,e){return t[e.get('id')]=e,t}),{})},select:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a["isString"])(t)?this.get(t):t;return n&&(this.em.trigger(D,n,e),this.model.set('selected',n,e)),this},getSelected:function(){return this.model.get('selected')},destroy:function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),['selected','config','em','pages','model'].map((function(e){return t[e]=0}))},store:function(t){if(!this.em.get('hasPages'))return{};var e={},n=this.config;return e[this.storageKey]=JSON.stringify(this.getAll()),!t&&n.stm&&n.stm.store(e),e},load:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.storageKey,n=t[e]||[];if('string'==typeof n)try{n=JSON.parse(t[e])}catch(t){}return n&&n.length&&this.pages.reset(n),n},_createId:function(){var t,e=this.getAll().length+16,n=this.getAllMap();do{t=Object(c["createId"])(e)}while(n[t]);return t}}}},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r),o=i.a.Model.extend({defaults:{id:'',label:'',tagName:'span',className:'',command:'',context:'',buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1},initialize:function(t){if(this.get('buttons').length){var e=n(71).default;this.set('buttons',new e(this.get('buttons')))}}});e["default"]=i.a.Collection.extend({model:o,deactivateAllExceptOne:function(t,e){this.forEach((function(n,r){n!==t&&(n.set('active',!1),e&&n.get('buttons').length&&n.get('buttons').deactivateAllExceptOne(t,e))}))},deactivateAll:function(t,e){var n=t||'';this.forEach((function(t){t.get('context')==n&&t!==e&&t.set('active',!1,{fromCollection:1})}))},disableAllButtons:function(t){var e=t||'';this.forEach((function(t,n){t.get('context')==e&&t.set('disable',!0)}))},disableAllButtonsExceptOne:function(t,e){this.forEach((function(n,r){n!==t&&(n.set('disable',!0),e&&n.get('buttons').length&&n.get('buttons').disableAllButtonsExceptOne(t,e))}))}})},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){var r=n(72);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){(function(){var t,n,r,i,o={}.hasOwnProperty,s=[].slice;t={LF:'\n',NULL:'\0'},r=function(){var e;function n(t,e,n){this.command=t,this.headers=null!=e?e:{},this.body=null!=n?n:''}return n.prototype.toString=function(){var e,r,i,s,a;for(r in e=[this.command],(i=!1===this.headers['content-length'])&&delete this.headers['content-length'],a=this.headers)o.call(a,r)&&(s=a[r],e.push(r+":"+s));return this.body&&!i&&e.push("content-length:"+n.sizeOfUTF8(this.body)),e.push(t.LF+this.body),e.join(t.LF)},n.sizeOfUTF8=function(t){return t?encodeURI(t).match(/%..|./g).length:0},e=function(e){var r,i,o,s,a,c,l,u,f,h,d,p,g,v,m,y,b;for(s=e.search(RegExp(""+t.LF+t.LF)),o=(a=e.substring(0,s).split(t.LF)).shift(),c={},p=function(t){return t.replace(/^\s+|\s+$/g,'')},g=0,m=(y=a.reverse()).length;g<m;g++)u=(h=y[g]).indexOf(':'),c[p(h.substring(0,u))]=p(h.substring(u+1));if(r='',d=s+2,c['content-length'])f=parseInt(c['content-length']),r=(''+e).substring(d,d+f);else for(i=null,l=v=d,b=e.length;(d<=b?v<b:v>b)&&(i=e.charAt(l))!==t.NULL;l=d<=b?++v:--v)r+=i;return new n(o,c,r)},n.unmarshall=function(n){var r;return function(){var i,o,s,a;for(a=[],i=0,o=(s=n.split(RegExp(""+t.NULL+t.LF+"*"))).length;i<o;i++)(null!=(r=s[i])?r.length:void 0)>0&&a.push(e(r));return a}()},n.marshall=function(e,r,i){return new n(e,r,i).toString()+t.NULL},n}(),n=function(){var e;function n(t){this.ws=t,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16*1024,this.subscriptions={}}return n.prototype.debug=function(t){var e;return"undefined"!=typeof window&&null!==window&&null!=(e=window.console)?e.log(t):void 0},e=function(){return Date.now?Date.now():(new Date).valueOf},n.prototype._transmit=function(t,e,n){var i;for(i=r.marshall(t,e,n),"function"==typeof this.debug&&this.debug(">>> "+i);1;){if(!(i.length>this.maxWebSocketFrameSize))return this.ws.send(i);this.ws.send(i.substring(0,this.maxWebSocketFrameSize)),i=i.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+i.length)}},n.prototype._setupHeartbeat=function(n){var r,o,s,a,c,l,u;if((c=n.version)===i.VERSIONS.V1_1||c===i.VERSIONS.V1_2)return o=(l=function(){var t,e,r,i;for(i=[],t=0,e=(r=n['heart-beat'].split(",")).length;t<e;t++)a=r[t],i.push(parseInt(a));return i}())[0],r=l[1],0!==this.heartbeat.outgoing&&0!==r&&(s=Math.max(this.heartbeat.outgoing,r),"function"==typeof this.debug&&this.debug("send PING every "+s+"ms"),this.pinger=i.setInterval(s,(u=this,function(){return u.ws.send(t.LF),"function"==typeof u.debug?u.debug(">>> PING"):void 0}))),0!==this.heartbeat.incoming&&0!==o?(s=Math.max(this.heartbeat.incoming,o),"function"==typeof this.debug&&this.debug("check PONG every "+s+"ms"),this.ponger=i.setInterval(s,function(t){return function(){var n;if((n=e()-t.serverActivity)>2*s)return"function"==typeof t.debug&&t.debug("did not receive server activity for the last "+n+"ms"),t.ws.close()}}(this))):void 0},n.prototype._parseConnect=function(){var t,e,n,r;switch(r={},(t=1<=arguments.length?s.call(arguments,0):[]).length){case 2:r=t[0],e=t[1];break;case 3:t[1]instanceof Function?(r=t[0],e=t[1],n=t[2]):(r.login=t[0],r.passcode=t[1],e=t[2]);break;case 4:r.login=t[0],r.passcode=t[1],e=t[2],n=t[3];break;default:r.login=t[0],r.passcode=t[1],e=t[2],n=t[3],r.host=t[4]}return[r,e,n]},n.prototype.connect=function(){var n,o,a,c,l;return n=1<=arguments.length?s.call(arguments,0):[],c=this._parseConnect.apply(this,n),a=c[0],this.connectCallback=c[1],o=c[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=(l=this,function(n){var i,s,a,c,u,f,h,d,p,g,v,m;if(c='undefined'!=typeof ArrayBuffer&&n.data instanceof ArrayBuffer?(i=new Uint8Array(n.data),"function"==typeof l.debug&&l.debug("--- got data length: "+i.length),function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)s=i[t],n.push(String.fromCharCode(s));return n}().join('')):n.data,l.serverActivity=e(),c!==t.LF){for("function"==typeof l.debug&&l.debug("<<< "+c),m=[],p=0,g=(v=r.unmarshall(c)).length;p<g;p++)switch((u=v[p]).command){case"CONNECTED":"function"==typeof l.debug&&l.debug("connected to server "+u.headers.server),l.connected=!0,l._setupHeartbeat(u.headers),m.push("function"==typeof l.connectCallback?l.connectCallback(u):void 0);break;case"MESSAGE":d=u.headers.subscription,(h=l.subscriptions[d]||l.onreceive)?(a=l,f=u.headers["message-id"],u.ack=function(t){return null==t&&(t={}),a.ack(f,d,t)},u.nack=function(t){return null==t&&(t={}),a.nack(f,d,t)},m.push(h(u))):m.push("function"==typeof l.debug?l.debug("Unhandled received MESSAGE: "+u):void 0);break;case"RECEIPT":m.push("function"==typeof l.onreceipt?l.onreceipt(u):void 0);break;case"ERROR":m.push("function"==typeof o?o(u):void 0);break;default:m.push("function"==typeof l.debug?l.debug("Unhandled frame: "+u):void 0)}return m}"function"==typeof l.debug&&l.debug("<<< PONG")}),this.ws.onclose=function(t){return function(){var e;return e="Whoops! Lost connection to "+t.ws.url,"function"==typeof t.debug&&t.debug(e),t._cleanUp(),"function"==typeof o?o(e):void 0}}(this),this.ws.onopen=function(t){return function(){return"function"==typeof t.debug&&t.debug('Web Socket Opened...'),a["accept-version"]=i.VERSIONS.supportedVersions(),a["heart-beat"]=[t.heartbeat.outgoing,t.heartbeat.incoming].join(','),t._transmit("CONNECT",a)}}(this)},n.prototype.disconnect=function(t,e){return null==e&&(e={}),this._transmit("DISCONNECT",e),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof t?t():void 0},n.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&i.clearInterval(this.pinger),this.ponger)return i.clearInterval(this.ponger)},n.prototype.send=function(t,e,n){return null==e&&(e={}),null==n&&(n=''),e.destination=t,this._transmit("SEND",e,n)},n.prototype.subscribe=function(t,e,n){var r;return null==n&&(n={}),n.id||(n.id="sub-"+this.counter++),n.destination=t,this.subscriptions[n.id]=e,this._transmit("SUBSCRIBE",n),r=this,{id:n.id,unsubscribe:function(){return r.unsubscribe(n.id)}}},n.prototype.unsubscribe=function(t){return delete this.subscriptions[t],this._transmit("UNSUBSCRIBE",{id:t})},n.prototype.begin=function(t){var e,n;return n=t||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:n}),e=this,{id:n,commit:function(){return e.commit(n)},abort:function(){return e.abort(n)}}},n.prototype.commit=function(t){return this._transmit("COMMIT",{transaction:t})},n.prototype.abort=function(t){return this._transmit("ABORT",{transaction:t})},n.prototype.ack=function(t,e,n){return null==n&&(n={}),n["message-id"]=t,n.subscription=e,this._transmit("ACK",n)},n.prototype.nack=function(t,e,n){return null==n&&(n={}),n["message-id"]=t,n.subscription=e,this._transmit("NACK",n)},n}(),i={VERSIONS:{V1_0:'1.0',V1_1:'1.1',V1_2:'1.2',supportedVersions:function(){return'1.1,1.0'}},client:function(t,e){var r;return null==e&&(e=['v10.stomp','v11.stomp']),r=new(i.WebSocketClass||WebSocket)(t,e),new n(r)},over:function(t){return new n(t)},Frame:r},1&&null!==e&&(e.Stomp=i),"undefined"!=typeof window&&null!==window?(i.setInterval=function(t,e){return window.setInterval(e,t)},i.clearInterval=function(t){return window.clearInterval(t)},window.Stomp=i):e||(self.Stomp=i)}).call(this)},function(t,e,n){(function(t){var e=n(75);for(k in e)t[k]=e[k]}).call(this,n(17))},function(t,e,n){"use strict";(function(e){var r=n(142),i=n(143),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function f(t){return(t||'').toString().replace(o,'')}var h=[['#','hash'],['?','query'],function(t,e){return g(e.protocol)?t.replace(/\\/g,'/'):t},['/','pathname'],['@','auth',1],[NaN,'host',void 0,1,1],[/:(\d*)$/,'port',void 0,1],[NaN,'hostname',void 0,1,1]],d={hash:1,query:1};function p(t){var n,r=('undefined'!=typeof window?window:void 0!==e?e:'undefined'!=typeof self?self:{}).location||{},i={},o=typeof(t=t||r);if('blob:'===t.protocol)i=new m(unescape(t.pathname),{});else if('string'===o)for(n in i=new m(t,{}),d)delete i[n];else if('object'===o){for(n in t)n in d||(i[n]=t[n]);void 0===i.slashes&&(i.slashes=a.test(t.href))}return i}function g(t){return'file:'===t||'ftp:'===t||'http:'===t||'https:'===t||'ws:'===t||'wss:'===t}function v(t,e){t=(t=f(t)).replace(s,''),e=e||{};var n,r=l.exec(t),i=r[1]?r[1].toLowerCase():'',o=!!r[2],a=!!r[3],c=0;return o?a?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):a?(n=r[3]+r[4],c=r[3].length):n=r[4],'file:'===i?c>=2&&(n=n.slice(2)):g(i)?n=r[4]:i?o&&(n=n.slice(2)):c>=2&&g(e.protocol)&&(n=r[4]),{protocol:i,slashes:o||g(i),slashesCount:c,rest:n}}function m(t,e,n){if(t=(t=f(t)).replace(s,''),!(this instanceof m))return new m(t,e,n);var o,a,c,l,d,y,b=h.slice(),w=typeof e,O=this,x=0;for('object'!==w&&'string'!==w&&(n=e,e=null),n&&'function'!=typeof n&&(n=i.parse),o=!(a=v(t||'',e=p(e))).protocol&&!a.slashes,O.slashes=a.slashes||o&&e.slashes,O.protocol=a.protocol||e.protocol||'',t=a.rest,('file:'===a.protocol&&(2!==a.slashesCount||u.test(t))||!a.slashes&&(a.protocol||a.slashesCount<2||!g(O.protocol)))&&(b[3]=[/(.*)/,'pathname']);x<b.length;x++)'function'!=typeof(l=b[x])?(c=l[0],y=l[1],c!=c?O[y]=t:'string'==typeof c?~(d='@'===c?t.lastIndexOf(c):t.indexOf(c))&&('number'==typeof l[2]?(O[y]=t.slice(0,d),t=t.slice(d+l[2])):(O[y]=t.slice(d),t=t.slice(0,d))):(d=c.exec(t))&&(O[y]=d[1],t=t.slice(0,d.index)),O[y]=O[y]||o&&l[3]&&e[y]||'',l[4]&&(O[y]=O[y].toLowerCase())):t=l(t,O);n&&(O.query=n(O.query)),o&&e.slashes&&'/'!==O.pathname.charAt(0)&&(''!==O.pathname||''!==e.pathname)&&(O.pathname=function(t,e){if(''===t)return e;for(var n=(e||'/').split('/').slice(0,-1).concat(t.split('/')),r=n.length,i=n[r-1],o=!1,s=0;r--;)'.'===n[r]?n.splice(r,1):'..'===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(''),'.'!==i&&'..'!==i||n.push(''),n.join('/')}(O.pathname,e.pathname)),'/'!==O.pathname.charAt(0)&&g(O.protocol)&&(O.pathname='/'+O.pathname),r(O.port,O.protocol)||(O.host=O.hostname,O.port=''),O.username=O.password='',O.auth&&(~(d=O.auth.indexOf(':'))?(O.username=O.auth.slice(0,d),O.username=encodeURIComponent(decodeURIComponent(O.username)),O.password=O.auth.slice(d+1),O.password=encodeURIComponent(decodeURIComponent(O.password))):O.username=encodeURIComponent(decodeURIComponent(O.auth)),O.auth=O.password?O.username+':'+O.password:O.username),O.origin='file:'!==O.protocol&&g(O.protocol)&&O.host?O.protocol+'//'+O.host:'null',O.href=O.toString()}m.prototype={set:function(t,e,n){var o=this;switch(t){case'query':'string'==typeof e&&e.length&&(e=(n||i.parse)(e)),o[t]=e;break;case'port':o[t]=e,r(e,o.protocol)?e&&(o.host=o.hostname+':'+e):(o.host=o.hostname,o[t]='');break;case'hostname':o[t]=e,o.port&&(e+=':'+o.port),o.host=e;break;case'host':o[t]=e,c.test(e)?(e=e.split(':'),o.port=e.pop(),o.hostname=e.join(':')):(o.hostname=e,o.port='');break;case'protocol':o.protocol=e.toLowerCase(),o.slashes=!n;break;case'pathname':case'hash':if(e){var s='pathname'===t?'/':'#';o[t]=e.charAt(0)!==s?s+e:e}else o[t]=e;break;case'username':case'password':o[t]=encodeURIComponent(e);break;case'auth':var a=e.indexOf(':');~a?(o.username=e.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=e.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(e))}for(var l=0;l<h.length;l++){var u=h[l];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.auth=o.password?o.username+':'+o.password:o.username,o.origin='file:'!==o.protocol&&g(o.protocol)&&o.host?o.protocol+'//'+o.host:'null',o.href=o.toString(),o},toString:function(t){t&&'function'==typeof t||(t=i.stringify);var e,n=this,r=n.host,o=n.protocol;o&&':'!==o.charAt(o.length-1)&&(o+=':');var s=o+(n.protocol&&n.slashes||g(n.protocol)?'//':'');return n.username?(s+=n.username,n.password&&(s+=':'+n.password),s+='@'):n.password?(s+=':'+n.password,s+='@'):'file:'!==n.protocol&&g(n.protocol)&&!r&&'/'!==n.pathname&&(s+='@'),(':'===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=':'),s+=r+n.pathname,(e='object'==typeof n.query?t(n.query):n.query)&&(s+='?'!==e.charAt(0)?'?'+e:e),n.hash&&(s+=n.hash),s}},m.extractProtocol=v,m.location=p,m.trimLeft=f,m.qs=i,t.exports=m}).call(this,n(17))},function(t,e,n){"use strict";function r(){this._listeners={}}r.prototype.addEventListener=function(t,e){t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];-1===n.indexOf(e)&&(n=n.concat([e])),this._listeners[t]=n},r.prototype.removeEventListener=function(t,e){var n=this._listeners[t];if(n){var r=n.indexOf(e);-1===r||(n.length>1?this._listeners[t]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[t])}},r.prototype.dispatchEvent=function(){var t=arguments[0],e=t.type,n=1===arguments.length?[t]:Array.apply(null,arguments);if(this['on'+e]&&this['on'+e].apply(this,n),e in this._listeners)for(var r=this._listeners[e],i=0;i<r.length;i++)r[i].apply(this,n)},t.exports=r},function(t,e,n){"use strict";var r=n(15),i=n(28),o=n(146),s=n(147);function a(t,e,n,r,a){var c=i.addPath(t,e),l=this;o.call(this,t,n),this.poll=new s(r,c,a),this.poll.on('message',(function(t){l.emit('message',t)})),this.poll.once('close',(function(t,e){l.poll=null,l.emit('close',t,e),l.close()}))}r(a,o),a.prototype.close=function(){o.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},t.exports=a},function(t,e,n){"use strict";(function(e){var r=n(26).EventEmitter,i=n(15),o=n(34),s=n(28),a=e.XMLHttpRequest;function c(t,e,n,i){var o=this;r.call(this),setTimeout((function(){o._start(t,e,n,i)}),0)}i(c,r),c.prototype._start=function(t,e,n,r){var i=this;try{this.xhr=new a}catch(t){}if(!this.xhr)return this.emit('finish',0,'no xhr support'),void this._cleanup();e=s.addQuery(e,'t='+ +new Date),this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xhr.open(t,e,!0),this.timeout&&'timeout'in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i.emit('finish',0,''),i._cleanup(!1)})}catch(t){return this.emit('finish',0,''),void this._cleanup(!1)}if(r&&r.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var l in r.headers)this.xhr.setRequestHeader(l,r.headers[l]);this.xhr.onreadystatechange=function(){if(i.xhr){var t,e,n=i.xhr;switch(n.readyState,n.readyState){case 3:try{e=n.status,t=n.responseText}catch(t){}1223===e&&(e=204),200===e&&t&&t.length>0&&i.emit('chunk',e,t);break;case 4:1223===(e=n.status)&&(e=204),12005!==e&&12029!==e||(e=0),n.responseText,i.emit('finish',e,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(t){i.emit('finish',0,''),i._cleanup(!1)}},c.prototype._cleanup=function(t){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),t)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!a;var l=['Active'].concat('Object').join('X');!c.enabled&&l in e&&(a=function(){try{return new e[l]('Microsoft.XMLHTTP')}catch(t){return null}},c.enabled=!!new a);var u=!1;try{u='withCredentials'in new a}catch(t){}c.supportsCORS=u,t.exports=c}).call(this,n(17))},function(t,e,n){"use strict";var r=n(15),i=n(40),o=n(51),s=n(65);function a(t){if(!s.enabled)throw new Error('Transport created when disabled');i.call(this,t,'/xhr_streaming',o,s)}r(a,i),a.enabled=function(t){return!t.cookie_needed&&!t.nullOrigin&&(s.enabled&&t.sameScheme)},a.transportName='xdr-streaming',a.roundTrips=2,t.exports=a},function(t,e,n){"use strict";var r=n(15),i=n(40),o=n(148),s=n(52),a=n(82);function c(t){if(!c.enabled())throw new Error('Transport created when disabled');i.call(this,t,'/eventsource',o,s)}r(c,i),c.enabled=function(){return!!a},c.transportName='eventsource',c.roundTrips=2,t.exports=c},function(t,e,n){(function(e){t.exports=e.EventSource}).call(this,n(17))},function(t,e,n){"use strict";var r=n(15),i=n(26).EventEmitter,o=n(84),s=n(28),a=n(49),c=n(34),l=n(39);function u(t,e,n){if(!u.enabled())throw new Error('Transport created when disabled');i.call(this);var r=this;this.origin=s.getOrigin(n),this.baseUrl=n,this.transUrl=e,this.transport=t,this.windowId=l.string(8);var o=s.addPath(n,'/iframe.html')+'#'+this.windowId;this.iframeObj=a.createIframe(o,(function(t){r.emit('close',1006,'Unable to load an iframe ('+t+')'),r.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent('message',this.onmessageCallback)}r(u,i),u.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent('message',this.onmessageCallback);try{this.postMessage('c')}catch(t){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},u.prototype._message=function(t){if(t.data,!s.isOriginEqual(t.origin,this.origin))return t.origin,void this.origin;var e;try{e=JSON.parse(t.data)}catch(e){return void t.data}if(e.windowId!==this.windowId)return e.windowId,void this.windowId;switch(e.type){case's':this.iframeObj.loaded(),this.postMessage('s',JSON.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case't':this.emit('message',e.data);break;case'c':var n;try{n=JSON.parse(e.data)}catch(t){return void e.data}this.emit('close',n[0],n[1]),this.close()}},u.prototype.postMessage=function(t,e){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:t,data:e||''}),this.origin)},u.prototype.send=function(t){this.postMessage('m',t)},u.enabled=function(){return a.iframeEnabled},u.transportName='iframe',u.roundTrips=2,t.exports=u},function(t,e){t.exports='1.6.0'},function(t,e,n){"use strict";var r=n(15),i=n(149),o=n(47),s=n(40);function a(t){if(!i.enabled)throw new Error('Transport created when disabled');s.call(this,t,'/htmlfile',i,o)}r(a,s),a.enabled=function(t){return i.enabled&&t.sameOrigin},a.transportName='htmlfile',a.roundTrips=2,t.exports=a},function(t,e,n){"use strict";var r=n(15),i=n(40),o=n(51),s=n(52),a=n(47);function c(t){if(!a.enabled&&!s.enabled)throw new Error('Transport created when disabled');i.call(this,t,'/xhr',o,s)}r(c,i),c.enabled=function(t){return!t.nullOrigin&&(!(!a.enabled||!t.sameOrigin)||s.enabled)},c.transportName='xhr-polling',c.roundTrips=2,t.exports=c},function(t,e,n){"use strict";(function(e){t.exports=e.location||{origin:'http://localhost:80',protocol:'http:',host:'localhost',port:80,href:'http://localhost/',hash:''}}).call(this,n(17))},function(t,e,n){"use strict";var r=n(15),i=n(26).EventEmitter,o=n(47),s=n(89);function a(t){var e=this;i.call(this),this.ir=new s(t,o),this.ir.once('finish',(function(t,n){e.ir=null,e.emit('message',JSON.stringify([t,n]))}))}r(a,i),a.transportName='iframe-info-receiver',a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=a},function(t,e,n){"use strict";var r=n(26).EventEmitter,i=n(15),o=n(67);function s(t,e){r.call(this);var n=this,i=+new Date;this.xo=new e('GET',t),this.xo.once('finish',(function(t,e){var r,s;if(200===t){if(s=+new Date-i,e)try{r=JSON.parse(e)}catch(t){}o.isObject(r)||(r={})}n.emit('finish',r,s),n.removeAllListeners()}))}i(s,r),s.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=s},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(22);function i(t){return encodeURIComponent(t).replace(/%3A/gi,':').replace(/%24/g,'$').replace(/%2C/gi,',').replace(/%20/g,'+').replace(/%5B/gi,'[').replace(/%5D/gi,']')}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+='[]':t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+'='+i(t))})))})),o=s.join('&')}if(o){var a=t.indexOf('#');-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf('?')?'?':'&')+o}return t}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error('setTimeout has not been defined')}function s(){throw new Error('clearTimeout has not been defined')}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n='function'==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r='function'==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,l=[],u=!1,f=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):f=-1,l.length&&d())}function d(){if(!u){var t=a(h);u=!0;for(var e=l.length;e;){for(c=l,l=[];++f<e;)c&&c[f].run();f=-1,e=l.length}c=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||u||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title='browser',i.browser=!0,i.env={},i.argv=[],i.version='',i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error('process.binding is not supported')},i.cwd=function(){return'/'},i.chdir=function(t){throw new Error('process.chdir is not supported')},i.umask=function(){return 0}},function(t,e,n){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},function(t,e,n){"use strict";(function(e){var r=n(22);t.exports=function(t,n){n=n||new FormData;var i=[];function o(t){return null===t?'':r.isDate(t)?t.toISOString():r.isArrayBuffer(t)||r.isTypedArray(t)?'function'==typeof Blob?new Blob([t]):e.from(t):t}return function t(e,s){if(r.isPlainObject(e)||r.isArray(e)){if(-1!==i.indexOf(e))throw Error('Circular reference detected in '+s);i.push(e),r.forEach(e,(function(e,i){if(!r.isUndefined(e)){var a,c=s?s+'.'+i:i;if(e&&!s&&'object'==typeof e)if(r.endsWith(i,'{}'))e=JSON.stringify(e);else if(r.endsWith(i,'[]')&&(a=r.toArray(e)))return void a.forEach((function(t){!r.isUndefined(t)&&n.append(c,o(t))}));t(e,c)}})),i.pop()}else n.append(s,o(e))}(t),n}}).call(this,n(179).Buffer)},function(t,e,n){"use strict";var r=n(22),i=n(183),o=n(184),s=n(91),a=n(96),c=n(187),l=n(188),u=n(93),f=n(41),h=n(53),d=n(189);t.exports=function(t){return new Promise((function(e,n){var p,g=t.data,v=t.headers,m=t.responseType;function y(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener('abort',p)}r.isFormData(g)&&r.isStandardBrowserEnv()&&delete v['Content-Type'];var b=new XMLHttpRequest;if(t.auth){var w=t.auth.username||'',O=t.auth.password?unescape(encodeURIComponent(t.auth.password)):'';v.Authorization='Basic '+btoa(w+':'+O)}var x=a(t.baseURL,t.url);function C(){if(b){var r='getAllResponseHeaders'in b?c(b.getAllResponseHeaders()):null,o={data:m&&'text'!==m&&'json'!==m?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:t,request:b};i((function(t){e(t),y()}),(function(t){n(t),y()}),o),b=null}}if(b.open(t.method.toUpperCase(),s(x,t.params,t.paramsSerializer),!0),b.timeout=t.timeout,'onloadend'in b?b.onloadend=C:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf('file:'))&&setTimeout(C)},b.onabort=function(){b&&(n(new f('Request aborted',f.ECONNABORTED,t,b)),b=null)},b.onerror=function(){n(new f('Network Error',f.ERR_NETWORK,t,b,b)),b=null},b.ontimeout=function(){var e=t.timeout?'timeout of '+t.timeout+'ms exceeded':'timeout exceeded',r=t.transitional||u;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new f(e,r.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,t,b)),b=null},r.isStandardBrowserEnv()){var S=(t.withCredentials||l(x))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;S&&(v[t.xsrfHeaderName]=S)}'setRequestHeader'in b&&r.forEach(v,(function(t,e){void 0===g&&'content-type'===e.toLowerCase()?delete v[e]:b.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(b.withCredentials=!!t.withCredentials),m&&'json'!==m&&(b.responseType=t.responseType),'function'==typeof t.onDownloadProgress&&b.addEventListener('progress',t.onDownloadProgress),'function'==typeof t.onUploadProgress&&b.upload&&b.upload.addEventListener('progress',t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(t){b&&(n(!t||t&&t.type?new h:t),b.abort(),b=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal&&(t.signal.aborted?p():t.signal.addEventListener('abort',p))),g||(g=null);var k=d(x);k&&-1===['http','https','file'].indexOf(k)?n(new f('Unsupported protocol '+k+':',f.ERR_BAD_REQUEST,t)):b.send(g)}))}},function(t,e,n){"use strict";var r=n(185),i=n(186);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";var r=n(22);t.exports=function(t,e){e=e||{};var n={};function i(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function o(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(t[n],e[n])}function s(t){if(!r.isUndefined(e[t]))return i(void 0,e[t])}function a(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(void 0,e[n])}function c(n){return n in e?i(t[n],e[n]):n in t?i(void 0,t[n]):void 0}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=l[t]||o,i=e(t);r.isUndefined(i)&&e!==c||(n[t]=i)})),n}},function(t,e){t.exports={version:"0.27.2"}},function(t,e,n){1&&function(t){"use strict";function e(t){for(var e={},n=0;n<t.length;++n)e[t[n].toLowerCase()]=!0;return e}t.defineMode("css",(function(e,n){var r=n.inline;n.propertyKeywords||(n=t.resolveMode("text/css"));var i,o,s=e.indentUnit,a=n.tokenHooks,c=n.documentTypes||{},l=n.mediaTypes||{},u=n.mediaFeatures||{},f=n.mediaValueKeywords||{},h=n.propertyKeywords||{},d=n.nonStandardPropertyKeywords||{},p=n.fontProperties||{},g=n.counterDescriptors||{},v=n.colorKeywords||{},m=n.valueKeywords||{},y=n.allowNested,b=n.lineComment,w=!0===n.supportsAtComponent,O=!1!==e.highlightNonStandardPropertyKeywords;function x(t,e){return i=e,t}function C(t,e){var n=t.next();if(a[n]){var r=a[n](t,e);if(!1!==r)return r}return"@"==n?(t.eatWhile(/[\w\\\-]/),x("def",t.current())):"="==n||("~"==n||"|"==n)&&t.eat("=")?x(null,"compare"):"\""==n||"'"==n?(e.tokenize=S(n),e.tokenize(t,e)):"#"==n?(t.eatWhile(/[\w\\\-]/),x("atom","hash")):"!"==n?(t.match(/^\s*\w*/),x("keyword","important")):/\d/.test(n)||"."==n&&t.eat(/\d/)?(t.eatWhile(/[\w.%]/),x("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?x(null,"select-op"):"."==n&&t.match(/^-?[_a-z][_a-z0-9-]*/i)?x("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?x(null,n):t.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(t.current())&&(e.tokenize=k),x("variable callee","variable")):/[\w\\\-]/.test(n)?(t.eatWhile(/[\w\\\-]/),x("property","word")):x(null,null):/[\d.]/.test(t.peek())?(t.eatWhile(/[\w.%]/),x("number","unit")):t.match(/^-[\w\\\-]*/)?(t.eatWhile(/[\w\\\-]/),t.match(/^\s*:/,!1)?x("variable-2","variable-definition"):x("variable-2","variable")):t.match(/^\w+-/)?x("meta","meta"):void 0}function S(t){return function(e,n){for(var r,i=!1;null!=(r=e.next());){if(r==t&&!i){")"==t&&e.backUp(1);break}i=!i&&"\\"==r}return(r==t||!i&&")"!=t)&&(n.tokenize=null),x("string","string")}}function k(t,e){return t.next(),t.match(/^\s*[\"\')]/,!1)?e.tokenize=null:e.tokenize=S(")"),x(null,"(")}function j(t,e,n){this.type=t,this.indent=e,this.prev=n}function E(t,e,n,r){return t.context=new j(n,e.indentation()+(!1===r?0:s),t.context),n}function _(t){return t.context.prev&&(t.context=t.context.prev),t.context.type}function P(t,e,n){return D[n.context.type](t,e,n)}function T(t,e,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return P(t,e,n)}function A(t){var e=t.current().toLowerCase();o=m.hasOwnProperty(e)?"atom":v.hasOwnProperty(e)?"keyword":"variable"}var D={top:function(t,e,n){if("{"==t)return E(n,e,"block");if("}"==t&&n.context.prev)return _(n);if(w&&/@component/i.test(t))return E(n,e,"atComponentBlock");if(/^@(-moz-)?document$/i.test(t))return E(n,e,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(t))return E(n,e,"atBlock");if(/^@(font-face|counter-style)/i.test(t))return n.stateArg=t,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(t))return"keyframes";if(t&&"@"==t.charAt(0))return E(n,e,"at");if("hash"==t)o="builtin";else if("word"==t)o="tag";else{if("variable-definition"==t)return"maybeprop";if("interpolation"==t)return E(n,e,"interpolation");if(":"==t)return"pseudo";if(y&&"("==t)return E(n,e,"parens")}return n.context.type},block:function(t,e,n){if("word"==t){var r=e.current().toLowerCase();return h.hasOwnProperty(r)?(o="property","maybeprop"):d.hasOwnProperty(r)?(o=O?"string-2":"property","maybeprop"):y?(o=e.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(o+=" error","maybeprop")}return"meta"==t?"block":y||"hash"!=t&&"qualifier"!=t?D.top(t,e,n):(o="error","block")},maybeprop:function(t,e,n){return":"==t?E(n,e,"prop"):P(t,e,n)},prop:function(t,e,n){if(";"==t)return _(n);if("{"==t&&y)return E(n,e,"propBlock");if("}"==t||"{"==t)return T(t,e,n);if("("==t)return E(n,e,"parens");if("hash"!=t||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(e.current())){if("word"==t)A(e);else if("interpolation"==t)return E(n,e,"interpolation")}else o+=" error";return"prop"},propBlock:function(t,e,n){return"}"==t?_(n):"word"==t?(o="property","maybeprop"):n.context.type},parens:function(t,e,n){return"{"==t||"}"==t?T(t,e,n):")"==t?_(n):"("==t?E(n,e,"parens"):"interpolation"==t?E(n,e,"interpolation"):("word"==t&&A(e),"parens")},pseudo:function(t,e,n){return"meta"==t?"pseudo":"word"==t?(o="variable-3",n.context.type):P(t,e,n)},documentTypes:function(t,e,n){return"word"==t&&c.hasOwnProperty(e.current())?(o="tag",n.context.type):D.atBlock(t,e,n)},atBlock:function(t,e,n){if("("==t)return E(n,e,"atBlock_parens");if("}"==t||";"==t)return T(t,e,n);if("{"==t)return _(n)&&E(n,e,y?"block":"top");if("interpolation"==t)return E(n,e,"interpolation");if("word"==t){var r=e.current().toLowerCase();o="only"==r||"not"==r||"and"==r||"or"==r?"keyword":l.hasOwnProperty(r)?"attribute":u.hasOwnProperty(r)?"property":f.hasOwnProperty(r)?"keyword":h.hasOwnProperty(r)?"property":d.hasOwnProperty(r)?O?"string-2":"property":m.hasOwnProperty(r)?"atom":v.hasOwnProperty(r)?"keyword":"error"}return n.context.type},atComponentBlock:function(t,e,n){return"}"==t?T(t,e,n):"{"==t?_(n)&&E(n,e,y?"block":"top",!1):("word"==t&&(o="error"),n.context.type)},atBlock_parens:function(t,e,n){return")"==t?_(n):"{"==t||"}"==t?T(t,e,n,2):D.atBlock(t,e,n)},restricted_atBlock_before:function(t,e,n){return"{"==t?E(n,e,"restricted_atBlock"):"word"==t&&"@counter-style"==n.stateArg?(o="variable","restricted_atBlock_before"):P(t,e,n)},restricted_atBlock:function(t,e,n){return"}"==t?(n.stateArg=null,_(n)):"word"==t?(o="@font-face"==n.stateArg&&!p.hasOwnProperty(e.current().toLowerCase())||"@counter-style"==n.stateArg&&!g.hasOwnProperty(e.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(t,e,n){return"word"==t?(o="variable","keyframes"):"{"==t?E(n,e,"top"):P(t,e,n)},at:function(t,e,n){return";"==t?_(n):"{"==t||"}"==t?T(t,e,n):("word"==t?o="tag":"hash"==t&&(o="builtin"),"at")},interpolation:function(t,e,n){return"}"==t?_(n):"{"==t||";"==t?T(t,e,n):("word"==t?o="variable":"variable"!=t&&"("!=t&&")"!=t&&(o="error"),"interpolation")}};return{startState:function(t){return{tokenize:null,state:r?"block":"top",stateArg:null,context:new j(r?"block":"top",t||0,null)}},token:function(t,e){if(!e.tokenize&&t.eatSpace())return null;var n=(e.tokenize||C)(t,e);return n&&"object"==typeof n&&(i=n[1],n=n[0]),o=n,"comment"!=i&&(e.state=D[e.state](i,t,e)),o},indent:function(t,e){var n=t.context,r=e&&e.charAt(0),i=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),n.prev&&("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"restricted_atBlock"!=n.type?(")"!=r||"parens"!=n.type&&"atBlock_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"atBlock"!=n.type)||(i=Math.max(0,n.indent-s)):i=(n=n.prev).indent),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:b,fold:"brace"}}));var n=["domain","regexp","url","url-prefix"],r=e(n),i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=e(i),s=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],a=e(s),c=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],l=e(c),u=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],f=e(u),h=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],d=e(h),p=e(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),g=e(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),v=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],m=e(v),y=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],b=e(y),w=n.concat(i).concat(s).concat(c).concat(u).concat(h).concat(v).concat(y);function O(t,e){for(var n,r=!1;null!=(n=t.next());){if(r&&"/"==n){e.tokenize=null;break}r="*"==n}return["comment","comment"]}t.registerHelper("hintWords","css",w),t.defineMIME("text/css",{documentTypes:r,mediaTypes:o,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:f,nonStandardPropertyKeywords:d,fontProperties:p,counterDescriptors:g,colorKeywords:m,valueKeywords:b,tokenHooks:{"/":function(t,e){return!!t.eat("*")&&(e.tokenize=O,O(t,e))}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:f,nonStandardPropertyKeywords:d,colorKeywords:m,valueKeywords:b,fontProperties:p,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=O,O(t,e)):["operator","operator"]},":":function(t){return!!t.match(/^\s*\{/,!1)&&[null,null]},$:function(t){return t.match(/^[\w-]+/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(t){return!!t.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:f,nonStandardPropertyKeywords:d,colorKeywords:m,valueKeywords:b,fontProperties:p,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=O,O(t,e)):["operator","operator"]},"@":function(t){return t.eat("{")?[null,"interpolation"]:!t.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(t.eatWhile(/[\w\\\-]/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:r,mediaTypes:o,mediaFeatures:a,propertyKeywords:f,nonStandardPropertyKeywords:d,fontProperties:p,counterDescriptors:g,colorKeywords:m,valueKeywords:b,supportsAtComponent:!0,tokenHooks:{"/":function(t,e){return!!t.eat("*")&&(e.tokenize=O,O(t,e))}},name:"css",helperType:"gss"})}(n(42))},function(t,e,n){"use strict";n.r(e),e["default"]={run:function(t){t.DomComponents.clear(),t.CssComposer.clear()}}},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n(1),o=n(36);e["default"]={run:function(t){Object(r["bindAll"])(this,'onKeyUp','enableDragger','disableDragger'),this.editor=t,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(t){this.toggleMove(),this.disableDragger()},onKeyUp:function(t){' '===Object(i["getKeyChar"])(t)&&this.editor.stopCommand(this.id)},enableDragger:function(t){this.toggleDragger(1,t)},disableDragger:function(t){this.toggleDragger(0,t)},toggleDragger:function(t,e){var n=this.canvasModel,r=this.em,i=this.dragger,s=t?'add':'remove';this.getCanvas().classList[s]("".concat(this.ppfx,"is__grabbing")),i||(i=new o["a"]({getPosition:function(){return{x:n.get('x'),y:n.get('y')}},setPosition:function(t){var e=t.x,r=t.y;n.set({x:e,y:r})},onStart:function(t,e){r.trigger('canvas:move:start',e)},onDrag:function(t,e){r.trigger('canvas:move',e)},onEnd:function(t,e){r.trigger('canvas:move:end',e)}}),this.dragger=i),t?i.start(e):i.stop()},toggleMove:function(t){var e=this.ppfx,n=t?'add':'remove',r=t?'on':'off',o={on:i["on"],off:i["off"]},s=this.getCanvas(),a=["".concat(e,"is__grab")];!t&&a.push("".concat(e,"is__grabbing")),a.forEach((function(t){return s.classList[n](t)})),o[r](document,'keyup',this.onKeyUp),o[r](s,'mousedown',this.enableDragger),o[r](document,'mouseup',this.disableDragger)}}},function(t,e,n){"use strict";n.r(e);var r=n(12),i=n.n(r),o=n(0),s=n(9);e["default"]={run:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],c=r.component||t.getSelectedAll();return c=Object(o["isArray"])(c)?i()(c):[c],t.select(null),c.forEach((function(t){var e=t.getId(),r=t.collection.indexOf(t),i=t.parent().getId();if(!t||!t.get('removable'))return n.em.logWarning('The element is not removable',{component:t});if(t.remove(),t.collection&&a.push(t),e){var o={action:'delete-component',opts:{id:e,index:r,parentId:i}};s["c"]==s["d"].Synced?(Object(s["h"])(s["d"].ApplyingLocalOp),Object(s["b"])(o)):s["c"]!=s["d"].AwaitingACK&&s["c"]!=s["d"].AwaitingWithBuffer||(Object(s["h"])(s["d"].ApplyingBufferedLocalOp),Object(s["a"])(o))}})),a.length&&t.select(a),c}}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),o=n(0),s=n(36);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l='dmode';e["default"]={run:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o["bindAll"])(this,'setPosition','onStart','onDrag','onEnd','getPosition','getGuidesStatic','renderGuide','getGuidesTarget');var i=r.target,a=r.event,u=r.mode,f=r.dragger,h=void 0===f?{}:f,d=i.getEl(),p=c({doc:d.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return n.guidesStatic},guidesTarget:function(){return n.guidesTarget}},h);this.setupGuides(),this.opts=r,this.editor=t,this.em=t.getModel(),this.target=i,this.isTran='translate'==u,this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var g=this.dragger;return g?g.setOptions(p):(g=new s["a"](p),this.dragger=g),a&&g.start(a),this.toggleDrag(1),this.em.trigger("".concat(l,":start"),this.getEventOpts()),g},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach((function(t){var e=t.guide;e&&e.parentNode.removeChild(e)})),this.guides=[]},getGuidesContainer:function(){var t=this,e=this.guidesEl;if(!e){var n=this.editor,r=this.em,i=this.opts,s=n.getConfig('stylePrefix'),a=document.createElement('div'),c=document.createElement('div'),l="<div class=\"".concat(s,"guide-info__line ").concat(s,"danger-bg\">\n        <div class=\"").concat(s,"guide-info__content ").concat(s,"danger-color\"></div>\n      </div>");(e=document.createElement('div')).className="".concat(s,"guides"),a.className="".concat(s,"guide-info ").concat(s,"guide-info__x"),c.className="".concat(s,"guide-info ").concat(s,"guide-info__y"),a.innerHTML=l,c.innerHTML=l,e.appendChild(a),e.appendChild(c),n.Canvas.getGlobalToolsEl().appendChild(e),this.guidesEl=e,this.elGuideInfoX=a,this.elGuideInfoY=c,this.elGuideInfoContentX=a.querySelector(".".concat(s,"guide-info__content")),this.elGuideInfoContentY=c.querySelector(".".concat(s,"guide-info__content")),r.on('canvas:update frame:scroll',Object(o["debounce"])((function(){t.updateGuides(),i.debug&&t.guides.forEach((function(e){return t.renderGuide(e)}))}),200))}return e},getGuidesStatic:function(){var t=this,e=[],n=this.target.getEl(),r=n.parentNode,i=void 0===r?{}:r;return Object(o["each"])(i.children,(function(r){return e=e.concat(n!==r?t.getElementGuides(r):[])})),e.concat(this.getElementGuides(i))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(t){var e,n,r=this;(t||this.guides).forEach((function(t){var i=t.origin,s=e===i?n:r.getElementPos(i);e=i,n=s,Object(o["each"])(r.getGuidePosUpdate(t,s),(function(e,n){return t[n]=e})),t.originRect=s}))},getGuidePosUpdate:function(t,e){var n={},r=e.top,i=e.height,o=e.left,s=e.width;switch(t.type){case't':n.y=r;break;case'b':n.y=r+i;break;case'l':n.x=o;break;case'r':n.x=o+s;break;case'x':n.x=o+s/2;break;case'y':n.y=r+i/2}return n},renderGuide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.guide||document.createElement('div'),n='px',r=t.active?2:1,i=e.children[0];return e.style="position: absolute; background-color: ".concat(t.active?'green':'red',";"),e.children.length||((i=document.createElement('div')).style='position: absolute; color: red; padding: 5px; top: 0; left: 0;',e.appendChild(i)),t.y?(e.style.width='100%',e.style.height="".concat(r).concat(n),e.style.top="".concat(t.y).concat(n),e.style.left=0):(e.style.width="".concat(r).concat(n),e.style.height='100%',e.style.left="".concat(t.x).concat(n),e.style.top="0".concat(n)),!t.guide&&this.guidesContainer.appendChild(e),e},getElementPos:function(t){return this.editor.Canvas.getElementPos(t,{noScroll:1})},getElementGuides:function(t){var e=this,n=this.opts,r=this.getElementPos(t),i=r.top,o=r.height,s=r.left,a=r.width,l=[{type:'t',y:i},{type:'b',y:i+o},{type:'l',x:s},{type:'r',x:s+a},{type:'x',x:s+a/2},{type:'y',y:i+o/2}].map((function(i){return c(c({},i),{},{origin:t,originRect:r,guide:n.debug&&e.renderGuide(i)})}));return l.forEach((function(t){return e.guides.push(t)})),l},getTranslate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'x',n=0;return(t||'').split(' ').forEach((function(t){var r=t.trim(),i="translate".concat(e.toUpperCase(),"(");0===r.indexOf(i)&&(n=parseFloat(r.replace(i,'')))})),n},setTranslate:function(t,e,n){var r="translate".concat(e.toUpperCase(),"("),i="".concat(r).concat(n,")"),o=(t||'').split(' ').map((function(t){return 0===t.trim().indexOf(r)&&(t=i),t})).join(' ');return o.indexOf(r)<0&&(o+=" ".concat(i)),o},getPosition:function(){var t=this.target,e=this.isTran,n=t.getStyle(),r=n.left,i=n.top,o=n.transform,s=0,a=0;return e?(s=this.getTranslate(o),a=this.getTranslate(o,'y')):(s=parseFloat(r||0),a=parseFloat(i||0)),{x:s,y:a}},setPosition:function(t){var e=t.x,n=t.y,r=t.end,i=t.position,s=t.width,a=t.height,c=this.target,l=this.isTran,u=this.em,f='px',h=r?'':1,d="".concat(e).concat(f),p="".concat(n).concat(f),g={};if(l){var v=c.getStyle()['transform']||'';v=this.setTranslate(v,'x',d),g={transform:v=this.setTranslate(v,'y',p),en:h},c.addStyle(g,{avoidStore:!r})}else{var m={position:i,width:s,height:a},y={left:d,top:p,en:h};Object(o["keys"])(m).forEach((function(t){var e=m[t];e&&(y[t]=e)})),g=y,c.addStyle(g,{avoidStore:!r})}u.getSelected()&&Object(o["keys"])(g).forEach((function(t){return u.trigger("update:component:style:".concat(t))}))},_getDragData:function(){var t=this.target;return{target:t,parent:t.parent(),index:t.index()}},onStart:function(t){var e=this.target,n=this.editor,r=this.isTran,i=this.opts,o=i.center,s=i.onStart,a=n.Canvas,c=e.getStyle(),l='absolute',u=[l,'relative'];if(s&&s(this._getDragData()),!r&&c.position!==l){var f,h=a.offset(e.getEl()),d=h.left,p=h.top,g=h.width,v=h.height,m=e.parent();do{var y=m.getStyle();f=u.indexOf(y.position)>=0?m:null,m=m.parent()}while(m&&!f);if(o){var b=a.getMouseRelativeCanvas(t);d=b.x,p=b.y}else if(f){var w=a.offset(f.getEl());d-=w.left,p-=w.top}this.setPosition({x:d,y:p,width:"".concat(g,"px"),height:"".concat(v,"px"),position:l})}},onDrag:function(){var t=this,e=this.guidesTarget,n=this.opts,r=n.onDrag;this.updateGuides(e),n.debug&&e.forEach((function(e){return t.renderGuide(e)})),n.guidesInfo&&this.renderGuideInfo(e.filter((function(t){return t.active}))),r&&r(this._getDragData())},onEnd:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.editor,i=this.opts,o=this.id,s=i.onEnd;s&&s(t,n,c(c({event:t},n),this._getDragData())),r.stopCommand(o),this.hideGuidesInfo(),this.em.trigger("".concat(l,":end"),this.getEventOpts())},hideGuidesInfo:function(){var t=this;['X','Y'].forEach((function(e){var n=t["elGuideInfo".concat(e)];n&&(n.style.display='none')}))},renderGuideInfo:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.guidesStatic;this.hideGuidesInfo(),e.forEach((function(e){var r=e.origin,i=e.x,s=t.getElementPos(r),a=Object(o["isUndefined"])(i)?'y':'x',u='y'===a,f=s[u?'left':'top'],h=s.rect[u?'left':'top'],d=u?f+s.width:f+s.height,p=u?h+s.rect.width:h+s.rect.height,g=t["elGuideInfo".concat(a.toUpperCase())],v=t["elGuideInfoContent".concat(a.toUpperCase())],m=g.style,y=n.filter((function(t){return t.type===e.type})).map((function(t){var e=t.originRect,n=e.left,r=e.width,i=e.top,o=e.height,s=u?n+r:i+o;return{gap:s<f?f-s:(u?n:i)-d,guide:t}})).filter((function(t){return t.gap>0})).sort((function(t,e){return t.gap-e.gap})).map((function(t){return t.guide}))[0];if(y){var b=y.originRect,w=b.left,O=b.width,x=b.top,C=b.height,S=b.rect,k=u?w<s.left:x<s.top,j=u?w:x,E=u?S.left:S.top,_=u?w+O:x+C,P=u?S.left+S.width:S.top+S.height,T=u?e.y:e.x,A=k?_:d,D="".concat(T,"px"),M=k?f-_:j-d,L=k?h-P:E-p;m.display='',m[u?'top':'left']=D,m[u?'left':'top']="".concat(A,"px"),m[u?'width':'height']="".concat(M,"px"),v.innerHTML="".concat(Math.round(L),"px"),t.em.trigger("".concat(l,":active"),c(c({},t.getEventOpts()),{},{guide:e,guidesStatic:n,matched:y,posFirst:T,posSecond:A,size:M,sizeRaw:L,elGuideInfo:g,elGuideInfoCnt:v}))}}))},toggleDrag:function(t){var e=this.ppfx,n=this.editor,r=t?'add':'remove',i=["".concat(e,"is__grabbing")],o=n.Canvas,s=o.getBody();i.forEach((function(t){return s.classList[r](t)})),o[t?'startAutoscroll':'stopAutoscroll']()}}},function(t,e,n){"use strict";n.r(e),e["default"]={run:function(t){if(t.Canvas.hasFocus()){var e=[];t.getSelectedAll().forEach((function(t){var n=t.components(),r=n&&n.filter((function(t){return t.get('selectable')}))[0];r&&e.push(r)})),e.length&&t.select(e)}}}},function(t,e,n){"use strict";n.r(e),e["default"]={run:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.Canvas.hasFocus()||n.force){var r=[];t.getSelectedAll().forEach((function(t){for(var e=t.parent();e&&!e.get('selectable');)e=e.parent();e&&r.push(e)})),r.length&&t.select(r)}}}},function(t,e,n){"use strict";n.r(e),e["default"]={run:function(t){if(t.Canvas.hasFocus()){var e=[];t.getSelectedAll().forEach((function(t){var n=t.parent();if(n){var r,i=n.components().length,o=0,s=0;do{o++,r=(s=t.index()+o)<=i?n.getChildAt(s):null}while(r&&!r.get('selectable'));e.push(r||t)}})),e.length&&t.select(e)}}}},function(t,e,n){"use strict";n.r(e),e["default"]={run:function(t){if(t.Canvas.hasFocus()){var e=[];t.getSelectedAll().forEach((function(t){var n=t.parent();if(n){var r,i=0,o=0;do{i++,r=(o=t.index()-i)>=0?n.getChildAt(o):null}while(r&&!r.get('selectable'));e.push(r||t)}})),e.length&&t.select(e)}}}},function(t,e,n){"use strict";n.r(e);var r=n(0);e["default"]={run:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.target,o=[];if(!i.get('styles'))return o;var s=i.get('type'),a=t.Pages.getAllWrappers(),c=Object(r["flatten"])(a.map((function(t){return t.findType(s)}))).length;if(!c){var l=t.CssComposer.getAll();o=l.filter((function(t){return t.get('group')==="cmp:".concat(s)})),l.remove(o)}return o}}},function(t,e,n){"use strict";n.r(e);var r=n(12),i=n.n(r);e["default"]={run:function(t){var e=t.getModel(),n=i()(t.getSelectedAll());n.length&&e.set('clipboard',n)}}},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n(3),o=n.n(i),s=n(33),a=o.a.$;e["default"]=Object(r["extend"])({},s["default"],{init:function(t){Object(r["bindAll"])(this,'startDelete','stopDelete','onDelete'),this.hoverClass=this.pfx+'hover-delete',this.badgeClass=this.pfx+'badge-red'},enable:function(){this.$el.find('*').mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(t){t.stopPropagation();var e=a(t.target);e.data('model').get('removable')&&(e.addClass(this.hoverClass),this.attachBadge(e.get(0)))},stopDelete:function(t){t.stopPropagation(),a(t.target).removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(t){t.stopPropagation();var e=a(t.target);e.data('model').get('removable')&&(e.data('model').destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(t){this.badge.html('Remove '+t.getName())}})},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r).a.$;e["default"]={run:function(t,e){var n=this;e&&e.set&&e.set('active',0);var r=t.getConfig(),o=t.Modal,s=r.stylePrefix;if(this.cm=t.CodeManager||null,!this.$editors){var a=this.buildEditor('htmlmixed','hopscotch','HTML'),c=this.buildEditor('css','hopscotch','CSS');this.htmlEditor=a.el,this.cssEditor=c.el;var l=i("<div class=\"".concat(s,"export-dl\"></div>"));l.append(a.$el).append(c.$el),this.$editors=l}o.open({title:r.textViewCode,content:this.$editors}).getModel().once('change:open',(function(){return t.stopCommand(n.id)})),this.htmlEditor.setContent(t.getHtml()),this.cssEditor.setContent(t.getCss())},stop:function(t){var e=t.Modal;e&&e.close()},buildEditor:function(t,e,n){var r=document.createElement('textarea');!this.codeMirror&&(this.codeMirror=this.cm.getViewer('CodeMirror'));var i=this.codeMirror.clone().set({label:n,codeName:t,theme:e,input:r}),o=new this.cm.EditorView({model:i,config:this.cm.getConfig()}).render().$el;return i.init(r),{el:i,$el:o}}}},function(t,e,n){"use strict";n.r(e);var r=n(0);e["default"]={isEnabled:function(){var t=document;return t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement?1:0},enable:function(t){var e='';return t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?(e='webkit',t.webkitRequestFullscreen()):t.mozRequestFullScreen?(e='moz',t.mozRequestFullScreen()):t.msRequestFullscreen?t.msRequestFullscreen():console.warn('Fullscreen not supported'),e},disable:function(){var t=document;this.isEnabled()&&(t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen())},fsChanged:function(t,e){document;var n=(t||'')+'fullscreenchange';this.isEnabled()||(this.stop(null,this.sender),document.removeEventListener(n,this.fsChanged))},run:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.sender=e;var i=n.target,o=Object(r["isElement"])(i)?i:document.querySelector(i),s=this.enable(o||t.getContainer());this.fsChanged=this.fsChanged.bind(this,s),document.addEventListener(s+'fullscreenchange',this.fsChanged),t.trigger('change:canvasOffset')},stop:function(t,e){e&&e.set&&e.set('active',!1),this.disable(),t&&t.trigger('change:canvasOffset')}}},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n(3),o=n.n(i),s=n(1),a=n(33),c=n(54),l=o.a.$;e["default"]=Object(r["extend"])({},c["default"],a["default"],{init:function(t){a["default"].init.apply(this,arguments),Object(r["bindAll"])(this,'initSorter','rollback','onEndMove'),this.opt=t,this.hoverClass=this.ppfx+'highlighter-warning',this.badgeClass=this.ppfx+'badge-warning',this.noSelClass=this.ppfx+'no-select'},enable:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a["default"].enable.apply(this,e),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var r=this.$wrapper;r.css('cursor','move'),r.on('mousedown',this.initSorter),r.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(t){var e=l(t.target).data('model').get('draggable');e&&(this.cacheEl=null,this.startSelectPosition(t.target,this.frameEl.contentDocument),this.sorter.draggable=e,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off('mousedown',this.initSorter),Object(s["on"])(this.getContentWindow(),'keydown',this.rollback))},initSorterFromModel:function(t){var e=t.get('draggable');if(e){this.cacheEl=null;var n=t.view.el;this.startSelectPosition(n,this.frameEl.contentDocument),this.sorter.draggable=e,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),Object(s["on"])(this.getContentWindow(),'keydown',this.rollback)}},initSorterFromModels:function(t){this.cacheEl=null;var e=t[t.length-1],n=(this.em.get('currentFrame')||{}).model,r=e.getEl(n),i=r.ownerDocument;this.startSelectPosition(r,i,{onStart:this.onStart}),this.sorter.draggable=e.get('draggable'),this.sorter.toMove=t,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),Object(s["on"])(this.getContentWindow(),'keydown',this.rollback)},onEndMoveFromModel:function(){Object(s["off"])(this.getContentWindow(),'keydown',this.rollback)},onEndMove:function(){this.enable(),Object(s["off"])(this.getContentWindow(),'keydown',this.rollback)},onSelect:function(t,e){},rollback:function(t,e){(27==(t.which||t.keyCode)||e)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=l(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=l(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a["default"].stop.apply(this,e),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var r=this.$wrapper;r.css('cursor','').unbind().removeClass(this.noSelClass)}})},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n(14);e["default"]={open:function(t){var e=this,n=this.editor,i=this.title,o=this.config,s=this.am,a=o.custom;if(Object(r["isFunction"])(a.open))return a.open(s.__customData());n.Modal.open({title:i,content:t}).onceClose((function(){return n.stopCommand(e.id)}))},close:function(){var t=this.config.custom;if(Object(r["isFunction"])(t.close))return t.close(this.am.__customData());var e=this.editor.Modal;e&&e.close()},run:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.AssetManager,o=r.getConfig(),s=n.types,a=void 0===s?[]:s,c=n.accept,l=n.select;if(this.title=n.modalTitle||t.t('assetManager.modalTitle')||'',this.editor=t,this.config=o,this.am=r,r.setTarget(n.target),r.onClick(n.onClick),r.onDblClick(n.onDblClick),r.onSelect(n.onSelect),r.__behaviour({select:l,types:a,options:n}),o.custom)this.rendered=this.rendered||Object(i["f"])('div'),this.rendered.className="".concat(o.stylePrefix,"custom-wrp"),r.__behaviour({container:this.rendered}),r.__trgCustom();else{if(!this.rendered||a){var u=r.getAll().filter((function(t){return t}));a&&a.length&&(u=u.filter((function(t){return-1!==a.indexOf(t.get('type'))}))),r.render(u),this.rendered=r.getContainer()}if(c){var f=this.rendered.querySelector("input#".concat(o.stylePrefix,"uploadFile"));f&&f.setAttribute('accept',c)}}return this.open(this.rendered),this},stop:function(t){this.editor=t,this.close(this.rendered)}}},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n(14);e["default"]={open:function(){var t=this.container,e=this.editor,n=this.bm,i=this.config,o=i.custom,s=i.appendTo;if(Object(r["isFunction"])(o.open))return o.open(n.__customData());if(this.firstRender&&!s){var a='views-container',c=e.Panels;(c.getPanel(a)||c.addPanel({id:a})).set('appendContent',t).trigger('change:appendContent'),o||t.appendChild(n.render())}t&&(t.style.display='block')},close:function(){var t=this.container,e=this.config.custom;if(Object(r["isFunction"])(e.close))return e.close(this.bm.__customData());t&&(t.style.display='none')},run:function(t){var e=t.Blocks;this.config=e.getConfig(),this.firstRender=!this.container,this.container=this.container||Object(i["f"])('div'),this.editor=t,this.bm=e;var n=this.container;e.__behaviour({container:n}),this.config.custom&&e.__trgCustom(),this.open()},stop:function(){this.close()}}},function(t,e,n){"use strict";n.r(e),e["default"]={run:function(t){var e=t.LayerManager,n=t.Panels;if(!e.getConfig().appendTo){if(!this.layers){var r='views-container',i=document.createElement('div'),o=n.getPanel(r)||n.addPanel({id:r});i.appendChild(e.render()),o.set('appendContent',i).trigger('change:appendContent'),this.layers=i}this.layers.style.display='block'}},stop:function(){var t=this.layers;t&&(t.style.display='none')}}},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r).a.$;e["default"]={run:function(t,e){if(this.sender=e,!this.$cn){var n=t.getConfig(),r=t.Panels,o='change:appendContent';this.$cn=i('<div></div>'),this.$cn2=i('<div></div>'),this.$cn.append(this.$cn2);var s=t.DeviceManager;if(s&&n.showDevices){var a=r.addPanel({id:'devices-c'}),c=s.render();a.set('appendContent',c).trigger(o)}var l=t.SelectorManager;this.slm=l;var u=l.getConfig();u.custom?l.__trgCustom({container:this.$cn2.get(0)}):u.appendTo||this.$cn2.append(l.render([]));var f=t.StyleManager;this.sm=f;var h=f.getConfig(),d=h.stylePrefix;this.$header=i("<div class=\"".concat(d,"header\">").concat(t.t('styleManager.empty'),"</div>")),this.$cn.append(this.$header),h.custom?f.__trgCustom({container:this.$cn2.get(0)}):h.appendTo||this.$cn2.append(f.render());var p='views-container';this.panel=r.getPanel(p),this.panel||(this.panel=r.addPanel({id:p})),this.panel.set('appendContent',this.$cn).trigger(o),this.em=t.getModel(),this.listenTo(this.em,f.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var t,e,n,r,i=this.sender,o=this.sm;i&&i.get&&!i.get('active')||!o||(o.getSelected()?(null===(t=this.$cn2)||void 0===t||t.show(),null===(e=this.$header)||void 0===e||e.hide()):(null===(n=this.$cn2)||void 0===n||n.hide(),null===(r=this.$header)||void 0===r||r.show()))},stop:function(){var t,e;null===(t=this.$cn2)||void 0===t||t.hide(),null===(e=this.$header)||void 0===e||e.hide()}}},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n.n(r).a.$;e["default"]={run:function(t,e){this.sender=e;var n=t.getModel(),r=t.Config.stylePrefix,o=t.TraitManager,s=o.getConfig();if(!s.appendTo){if(!this.$cn){this.$cn=i('<div></div>'),this.$cn2=i('<div></div>'),this.$cn.append(this.$cn2),this.$header=i('<div>').append("<div class=\"".concat(s.stylePrefix,"header\">").concat(n.t('traitManager.empty'),"</div>")),this.$cn.append(this.$header),this.$cn2.append("<div class=\"".concat(r,"traits-label\">").concat(n.t('traitManager.label'),"</div>")),this.$cn2.append(o.render());var a=t.Panels;(a.getPanel('views-container')?a.getPanel('views-container'):a.addPanel({id:'views-container'})).set('appendContent',this.$cn.get(0)).trigger('change:appendContent'),this.target=t.getModel(),this.listenTo(this.target,'component:toggled',this.toggleTm)}this.toggleTm()}},toggleTm:function(){var t=this.sender;t&&t.get&&!t.get('active')||(1===this.target.getSelectedAll().length?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},function(t,e,n){"use strict";n.r(e);var r=n(0);e["default"]={run:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.getModel(),o=i.get('clipboard'),s=t.getSelected();o&&s&&(t.getSelectedAll().forEach((function(e){if(e){var i=e.collection;if(i){var s,a={at:i.indexOf(e)+1,action:n.action||'paste-component'},c=o.filter((function(t){return t.get('copyable')}));s=Object(r["contains"])(o,e)&&e.get('copyable')?i.add(e.clone(),a):i.add(c.map((function(t){return t.clone()})),a),(s=Object(r["isArray"])(s)?s:[s]).forEach((function(e){return t.trigger('component:paste',e)}))}}})),s.emitUpdate())}}},function(t,e,n){"use strict";n.r(e);var r=n(12),i=n.n(r),o=n(0),s='sw-visibility';e["default"]={getPanels:function(t){return this.panels||(this.panels=t.Panels.getPanels()),this.panels},preventDrag:function(t){t.abort=1},tglEffects:function(t){var e=this.em,n=t?'on':'off';if(e){var r=e.get('Canvas'),i=r.getBody(),s=r.getToolbarEl();s&&(s.style.display=t?'none':'');var a=i.querySelectorAll(".".concat(this.ppfx,"no-pointer"));Object(o["each"])(a,(function(e){return e.style.pointerEvents=t?'all':''})),e[n]('run:tlb-move:before',this.preventDrag)}},run:function(t,e){var n=this;this.sender=e,this.selected=i()(t.getSelectedAll()),t.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=t.Commands.isActive(s)),this.shouldRunSwVisibility&&t.stopCommand(s),t.getModel().stopDefault();var r=this.getPanels(t),o=t.Canvas.getElement(),a=t.getEl(),c=t.Config.stylePrefix;if(!this.helper){var l=document.createElement('span');l.className="".concat(c,"off-prv fa fa-eye-slash"),a.appendChild(l),l.onclick=function(){return n.stopCommand()},this.helper=l}this.helper.style.display='inline-block',r.forEach((function(t){return t.set('visible',!1)}));var u=o.style;u.width='100%',u.height='100%',u.top='0',u.left='0',u.padding='0',u.margin='0',t.refresh(),this.tglEffects(1)},stop:function(t){var e=this.sender,n=void 0===e?{}:e,r=this.selected;n.set&&n.set('active',0);var i=this.getPanels(t);this.shouldRunSwVisibility&&(t.runCommand(s),this.shouldRunSwVisibility=!1),t.getModel().runDefault(),i.forEach((function(t){return t.set('visible',!0)})),t.Canvas.getElement().setAttribute('style',''),r&&t.select(r),delete this.selected,this.helper&&(this.helper.style.display='none'),t.refresh(),this.tglEffects()}}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}e["default"]={run:function(t,e,n){var r=n||{},s=t.Canvas,a=s.getCanvasView(),c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({appendTo:s.getResizerEl(),prefix:t.getConfig().stylePrefix,posFetcher:a.getElementPos.bind(a),mousePosFetcher:s.getMouseRelativePos},r.options||{}),l=this.canvasResizer;return l&&!r.forceNew||(this.canvasResizer=t.Utils.Resizer.init(c),l=this.canvasResizer),l.setOptions(c),l.blur(),l.focus(r.el),l},stop:function(){var t;null===(t=this.canvasResizer)||void 0===t||t.blur()}}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),o=n(3),s=n.n(o),a=n(0),c=n(1);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var u=s.a.$;e["default"]={getOffsetMethod:function(t){return'get'+(t||'')+'OffsetViewerEl'},run:function(t,e,n){var r=n||{},o=r.state||'',s=t.getConfig(),f=this.em.getZoomDecimal(),h=r.el||'';if(!s.showOffsets||Object(c["isTextNode"])(h)||!s.showOffsetsSelected&&'Fixed'==o)t.stopCommand(this.id,n);else{var d=t.Canvas,p=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r.elPos||d.getElementPos(h));Object(a["isUndefined"])(r.top)||(p.top=r.top),Object(a["isUndefined"])(r.left)||(p.left=r.left);var g=window.getComputedStyle(h),v=this.ppfx,m=o+'State',y=d[this.getOffsetMethod(o)](n.view);y.style.opacity='';var b=this['marginT'+o],w=this['marginB'+o],O=this['marginL'+o],x=this['marginR'+o],C=this['padT'+o],S=this['padB'+o],k=this['padL'+o],j=this['padR'+o];if(y.childNodes.length&&(this[m]='1',b=y.querySelector('[data-offset-m-t]'),w=y.querySelector('[data-offset-m-b]'),O=y.querySelector('[data-offset-m-l]'),x=y.querySelector('[data-offset-m-r]'),C=y.querySelector('[data-offset-p-t]'),S=y.querySelector('[data-offset-p-b]'),k=y.querySelector('[data-offset-p-l]'),j=y.querySelector('[data-offset-p-r]')),!this[m]){var E=o.toLowerCase(),_=E+'margin-v',P=E+'padding-v',T=u("<div class=\"".concat(v,"marginName\">")).get(0),A=u("<div class=\"".concat(v,"paddingName\">")).get(0),D=v+P+'-el',M="".concat(v+_+'-el'," ").concat(v+_),L="".concat(D," ").concat(v+P);b=u("<div class=\"".concat(M,"-top\"></div>")).get(0),w=u("<div class=\"".concat(M,"-bottom\"></div>")).get(0),O=u("<div class=\"".concat(M,"-left\"></div>")).get(0),x=u("<div class=\"".concat(M,"-right\"></div>")).get(0),C=u("<div class=\"".concat(L,"-top\"></div>")).get(0),S=u("<div class=\"".concat(L,"-bottom\"></div>")).get(0),k=u("<div class=\"".concat(L,"-left\"></div>")).get(0),j=u("<div class=\"".concat(L,"-right\"></div>")).get(0),this['marginT'+o]=b,this['marginB'+o]=w,this['marginL'+o]=O,this['marginR'+o]=x,this['padT'+o]=C,this['padB'+o]=S,this['padL'+o]=k,this['padR'+o]=j,T.appendChild(b),T.appendChild(w),T.appendChild(O),T.appendChild(x),A.appendChild(C),A.appendChild(S),A.appendChild(k),A.appendChild(j),y.appendChild(T),y.appendChild(A),this[m]='1'}var R='px',N=parseFloat(g.marginLeft.replace(R,''))*f,I=parseFloat(g.marginRight.replace(R,''))*f,F=parseFloat(g.marginTop.replace(R,''))*f,B=parseFloat(g.marginBottom.replace(R,''))*f,V=b.style,U=w.style,z=O.style,H=x.style,W=C.style,$=S.style,q=k.style,G=j.style,K=parseFloat(p.left),Y=parseFloat(g.width)*f+R;V.height=F+R,V.width=Y,V.top=p.top-F+R,V.left=K+R,U.height=B+R,U.width=Y,U.top=p.top+p.height+R,U.left=K+R;var J=p.height+F+B+R,X=p.top-F+R;z.height=J,z.width=N+R,z.top=X,z.left=K-N+R,H.height=J,H.width=I+R,H.top=X,H.left=K+p.width+R;var Z=parseFloat(g.paddingTop)*f;W.height=Z+R;var Q=parseFloat(g.paddingBottom)*f;$.height=Q+R;var tt=p.height-Q-Z+R,et=p.top+Z+R;q.height=tt,q.width=parseFloat(g.paddingLeft)*f+R,q.top=et;var nt=parseFloat(g.paddingRight)*f;G.height=tt,G.width=nt+R,G.top=et}},stop:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n||{},i=r.state||'',o=this.getOffsetMethod(i),s=t.Canvas,a=s[o](n.view);a.style.opacity=0}}},function(t,e,n){"use strict";n.r(e);var r=n(0);e["default"]={init:function(){Object(r["bindAll"])(this,'_onFramesChange')},run:function(t){this.toggleVis(t)},stop:function(t){this.toggleVis(t,0)},toggleVis:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t.Commands.isActive('preview')){var r=t.Canvas,i=n?'on':'off';r.getFrames().forEach((function(t){return e._upFrame(t,n)})),r.getModel()[i]('change:frames',this._onFramesChange)}},_onFramesChange:function(t,e){var n=this;e.forEach((function(t){return n._upFrame(t,1)}))},_upFrame:function(t,e){var n=e?'add':'remove';t.view.getBody().classList[n]("".concat(this.ppfx,"dashed"))}}},function(t,e,n){var r=n(74),i=n(134);t.exports=r.Stomp,t.exports.overTCP=i.overTCP,t.exports.overWS=i.overWS},function(t,e,n){"use strict";(function(e){var r=n(139);t.exports=n(154)(r),'_sockjs_onload'in e&&setTimeout(e._sockjs_onload,1)}).call(this,n(17))},function(t,e,n){var r,i,o;1&&(i=[n(0),n(3)],void 0===(o='function'==typeof(r=function(t,e){var n=Array.prototype.slice;function r(t,e,n){return n.length<=4?t.call(e,n[0],n[1],n[2],n[3]):t.apply(e,n)}function i(t,e){return n.call(t,e)}function o(e,n){return null!=e&&(t.isArray(n)||(n=i(arguments,1)),t.all(n,(function(t){return t in e})))}var s,a,c=(s=!1,a=-1,function(){return s||(a++,s=!0,t.defer((function(){s=!1}))),a});function l(){this.registeredObjects=[],this.cidIndexes=[]}function u(e,n,r,i){for(var o,s=0,a=n.length;s<a;s++)if(o=n[s]){if("on"===e){if(!i.objectRegistry.register(o))continue}else if(!i.objectRegistry.unregister(o))continue;t.isFunction(o[e])&&o[e]("all",r,i)}}function f(e,n){var r=n.type,i=n.undoTypes,o=!i[r]||i[r][e];t.isFunction(o)&&o(n.object,n.before,n.after,n.options)}function h(e,r,i,o,s){if(!(i.isCurrentlyUndoRedoing||"undo"===e&&-1===i.pointer||"redo"===e&&i.pointer===i.length-1)){i.isCurrentlyUndoRedoing=!0;var a,c,l="undo"===e;for(s?c=l&&i.pointer===i.length-1||!l&&-1===i.pointer?t.clone(i.models):n.apply(i.models,l?[0,i.pointer]:[i.pointer,i.length-1]):(a=i.at(l?i.pointer:i.pointer+1),c=o?i.where({magicFusionIndex:a.get("magicFusionIndex")}):[a]),i.pointer+=(l?-1:1)*c.length;a=l?c.pop():c.shift();)a[e]();i.isCurrentlyUndoRedoing=!1,r.trigger(e,r)}}function d(t,e,n,i){if(t.track&&!t.isCurrentlyUndoRedoing&&e in i&&function(t,e){var n=t.condition,i=typeof n;return"function"===i?!!r(n,t,e):"boolean"!==i||n}(i[e],n)){var s=r(i[e]["on"],i[e],n);if(o(s,"object","before","after")){if(s.type=e,s.magicFusionIndex=c(),s.undoTypes=i,t.pointer<t.length-1)for(var a=t.length-t.pointer-1;a--;)t.pop();t.pointer=t.length,t.add(s),t.length>t.maximumStackLength&&(t.shift(),t.pointer--)}}}l.prototype={isRegistered:function(e){return e&&e.cid?this.registeredObjects[e.cid]:t.contains(this.registeredObjects,e)},register:function(t){return!this.isRegistered(t)&&(t&&t.cid?(this.registeredObjects[t.cid]=t,this.cidIndexes.push(t.cid)):this.registeredObjects.push(t),!0)},unregister:function(e){if(this.isRegistered(e)){if(e&&e.cid)delete this.registeredObjects[e.cid],this.cidIndexes.splice(t.indexOf(this.cidIndexes,e.cid),1);else{var n=t.indexOf(this.registeredObjects,e);this.registeredObjects.splice(n,1)}return!0}return!1},get:function(){return t.map(this.cidIndexes,(function(t){return this.registeredObjects[t]}),this).concat(this.registeredObjects)}};var p={add:{undo:function(t,e,n,r){t.remove(n,r)},redo:function(t,e,n,r){r.index&&(r.at=r.index),t.add(n,r)},on:function(e,n,r){return{object:n,before:void 0,after:e,options:t.clone(r)}}},remove:{undo:function(t,e,n,r){"index"in r&&(r.at=r.index),t.add(e,r)},redo:function(t,e,n,r){t.remove(e,r)},on:function(e,n,r){return{object:n,before:e,after:void 0,options:t.clone(r)}}},change:{undo:function(e,n,r,i){t.isEmpty(n)?t.each(t.keys(r),e.unset,e):(e.set(n),i&&i.unsetData&&i.unsetData.before&&i.unsetData.before.length&&t.each(i.unsetData.before,e.unset,e))},redo:function(e,n,r,i){t.isEmpty(r)?t.each(t.keys(n),e.unset,e):(e.set(r),i&&i.unsetData&&i.unsetData.after&&i.unsetData.after.length&&t.each(i.unsetData.after,e.unset,e))},on:function(e,n){var r=e.changedAttributes(),i=t.keys(r),o=t.pick(e.previousAttributes(),i),s=t.keys(o),a=(n||(n={})).unsetData={after:[],before:[]};return i.length!=s.length&&(i.length>s.length?t.each(i,(function(t){t in o||a.before.push(t)}),this):t.each(s,(function(t){t in r||a.after.push(t)}))),{object:e,before:o,after:r,options:t.clone(n)}}},reset:{undo:function(t,e,n){t.reset(e)},redo:function(t,e,n){t.reset(n)},on:function(e,n){return{object:e,before:n.previousModels,after:t.clone(e.models)}}}};function g(){}function v(e,n,r,i){if("object"==typeof n)return t.each(n,(function(t,n){2===e?v(e,t,r,i):v(e,n,t,r)}));switch(e){case 0:o(r,"undo","redo","on")&&t.all(t.pick(r,"undo","redo","on"),t.isFunction)&&(i[n]=r);break;case 1:i[n]&&t.isObject(r)&&(i[n]=t.extend({},i[n],r));break;case 2:delete i[n]}return this}g.prototype=p;var m=e.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(t){f("undo",this.attributes)},redo:function(t){f("redo",this.attributes)}}),y=e.Collection.extend({model:m,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(t){this.maximumStackLength=t}}),b=e.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(e){this.stack=new y,this.objectRegistry=new l,this.undoTypes=new g,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",(function(t,e){this.stack.setMaxLength(e)}),this),e&&e.track&&this.startTracking(),e&&e.register&&(t.isArray(e.register)||t.isArguments(e.register)?r(this.register,this,e.register):this.register(e.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(t){d(this.stack,t,i(arguments,1),this.undoTypes)},register:function(){u("on",arguments,this._addToStack,this)},unregister:function(){u("off",arguments,this._addToStack,this)},unregisterAll:function(){r(this.unregister,this,this.objectRegistry.get())},undo:function(t){h("undo",this,this.stack,t)},undoAll:function(){h("undo",this,this.stack,!1,!0)},redo:function(t){h("redo",this,this.stack,t)},redoAll:function(){h("redo",this,this.stack,!1,!0)},isAvailable:function(t){var e=this.stack,n=e.length;switch(t){case"undo":return n>0&&e.pointer>-1;case"redo":return n>0&&e.pointer<n-1;default:return!1}},merge:function(e){for(var n,r=t.isArray(e)?e:i(arguments);n=r.pop();)n instanceof b&&n.stack instanceof y&&(n.stack=this.stack)},addUndoType:function(t,e){v(0,t,e,this.undoTypes)},changeUndoType:function(t,e){v(1,t,e,this.undoTypes)},removeUndoType:function(t){v(2,t,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return t.extend(b,{defaults:function(e){t.extend(b.prototype.defaults,e)},addUndoType:function(t,e){v(0,t,e,p)},changeUndoType:function(t,e){v(1,t,e,p)},removeUndoType:function(t){v(2,t,void 0,p)}}),e.UndoManager=b})?r.apply(e,i):r)||(t.exports=o))},function(t,e,n){"use strict";e["a"]=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}},function(t,e,n){"use strict";var r=n(16),i=n.n(r);e["a"]=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(i()(t)+' '+t+' is not iterable(cannot read property Symbol(Symbol.iterator))'));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function s(t,n){if(n&&('object'===i()(n)||'function'==typeof n)){var a=n.then;if('function'==typeof a)return void a.call(n,(function(e){s(t,e)}),(function(n){r[t]={status:'rejected',reason:n},0==--o&&e(r)}))}r[t]={status:'fulfilled',value:n},0==--o&&e(r)}for(var a=0;a<r.length;a++)s(a,r[a])}))}},function(t,e,n){var r=n(72);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),s=new _(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;1;){var s=n.delegate;if(s){var a=k(s,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=u(t,e,n);if("normal"===c.type){if(r=n.done?p:h,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(t,n,s),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",g={};function v(){}function m(){}function y(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==n&&r.call(O,o)&&(b=O);var x=y.prototype=v.prototype=Object.create(b);function C(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){var n;this._invoke=function(i,o){function s(){return new e((function(n,s){!function n(i,o,s,a){var c=u(t[i],t,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,a)}))}a(c.arg)}(i,o,n,s)}))}return n=n?n.then(s,s):s()}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=u(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:T}}function T(){return{value:e,done:!0}}return m.prototype=x.constructor=y,y.constructor=m,m.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},C(S.prototype),S.prototype[s]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new S(l(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},C(x),c(x,a,"Generator"),x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(1?t.exports:void 0);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){(function(){var t,r,i,o,s,a;t=n(74),r=n(75),t.Stomp.setInterval=function(t,e){return setInterval(e,t)},t.Stomp.clearInterval=function(t){return clearInterval(t)},s=function(t,e){var n,i;return n=null,i={url:'tcp:// '+e+':'+t,send:function(t){return n.write(t)},close:function(){return n.end()}},(n=r.connect(t,e,(function(t){return i.onopen()}))).on('error',(function(t){return"function"==typeof i.onclose?i.onclose(t):void 0})),n.on('close',(function(t){return"function"==typeof i.onclose?i.onclose(t):void 0})),n.on('data',(function(t){var e;return e={data:t.toString()},i.onmessage(e)})),i},a=function(t){var e,r,i,o;return e=n(135).client,r=null,o={url:t,send:function(t){return r.sendUTF(t)},close:function(){return r.close()}},(i=new e).on('connect',(function(t){return r=t,o.onopen(),r.on('error',(function(t){return"function"==typeof o.onclose?o.onclose(t):void 0})),r.on('close',(function(){return"function"==typeof o.onclose?o.onclose():void 0})),r.on('message',(function(t){var e;if('utf8'===t.type)return e={data:t.utf8Data},o.onmessage(e)}))})),i.connect(t),o},i=function(e,n){var r;return r=s(n,e),t.Stomp.over(r)},o=function(e){var n;return n=a(e),t.Stomp.over(n)},e.overTCP=i,e.overWS=o}).call(this)},function(t,e,n){var r;if('object'==typeof globalThis)r=globalThis;else try{r=n(136)}catch(t){}finally{if(r||'undefined'==typeof window||(r=window),!r)throw new Error('Could not determine global this')}var i=r.WebSocket||r.MozWebSocket,o=n(137);function s(t,e){return e?new i(t,e):new i(t)}i&&['CONNECTING','OPEN','CLOSING','CLOSED'].forEach((function(t){Object.defineProperty(s,t,{get:function(){return i[t]}})})),t.exports={w3cwebsocket:i?s:null,version:o}},function(t,e){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},function(t,e,n){t.exports=n(138).version},function(t){t.exports=JSON.parse("{\"name\":\"websocket\",\"description\":\"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\"keywords\":[\"websocket\",\"websockets\",\"socket\",\"networking\",\"comet\",\"push\",\"RFC-6455\",\"realtime\",\"server\",\"client\"],\"author\":\"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)\",\"contributors\":[\"Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)\"],\"version\":\"1.0.34\",\"repository\":{\"type\":\"git\",\"url\":\"https://github.com/theturtle32/WebSocket-Node.git\"},\"homepage\":\"https://github.com/theturtle32/WebSocket-Node\",\"engines\":{\"node\":\">=4.0.0\"},\"dependencies\":{\"bufferutil\":\"^4.0.1\",\"debug\":\"^2.2.0\",\"es5-ext\":\"^0.10.50\",\"typedarray-to-buffer\":\"^3.1.5\",\"utf-8-validate\":\"^5.0.2\",\"yaeti\":\"^0.0.6\"},\"devDependencies\":{\"buffer-equal\":\"^1.0.0\",\"gulp\":\"^4.0.2\",\"gulp-jshint\":\"^2.0.4\",\"jshint-stylish\":\"^2.2.1\",\"jshint\":\"^2.0.0\",\"tape\":\"^4.9.1\"},\"config\":{\"verbose\":false},\"scripts\":{\"test\":\"tape test/unit/*.js\",\"gulp\":\"gulp\"},\"main\":\"index\",\"directories\":{\"lib\":\"./lib\"},\"browser\":\"lib/browser.js\",\"license\":\"Apache-2.0\"}")},function(t,e,n){"use strict";t.exports=[n(140),n(145),n(80),n(81),n(66)(n(81)),n(85),n(66)(n(85)),n(86),n(150),n(66)(n(86)),n(151)]},function(t,e,n){"use strict";var r=n(34),i=n(28),o=n(15),s=n(26).EventEmitter,a=n(144);function c(t,e,n){if(!c.enabled())throw new Error('Transport created when disabled');s.call(this);var o=this,l=i.addPath(t,'/websocket');l='https'===l.slice(0,5)?'wss'+l.slice(5):'ws'+l.slice(4),this.url=l,this.ws=new a(this.url,[],n),this.ws.onmessage=function(t){t.data,o.emit('message',t.data)},this.unloadRef=r.unloadAdd((function(){o.ws.close()})),this.ws.onclose=function(t){t.code,t.reason,o.emit('close',t.code,t.reason),o._cleanup()},this.ws.onerror=function(t){o.emit('close',1006,'WebSocket connection broken'),o._cleanup()}}o(c,s),c.prototype.send=function(t){var e='['+t+']';this.ws.send(e)},c.prototype.close=function(){var t=this.ws;this._cleanup(),t&&t.close()},c.prototype._cleanup=function(){var t=this.ws;t&&(t.onmessage=t.onclose=t.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!a},c.transportName='websocket',c.roundTrips=2,t.exports=c},function(t,e,n){"use strict";(function(e){e.crypto&&e.crypto.getRandomValues?t.exports.randomBytes=function(t){var n=new Uint8Array(t);return e.crypto.getRandomValues(n),n}:t.exports.randomBytes=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=Math.floor(256*Math.random());return e}}).call(this,n(17))},function(t,e,n){"use strict";t.exports=function(t,e){if(e=e.split(':')[0],!(t=+t))return!1;switch(e){case'http':case'ws':return 80!==t;case'https':case'wss':return 443!==t;case'ftp':return 21!==t;case'gopher':return 70!==t;case'file':return!1}return 0!==t}},function(t,e,n){"use strict";var r,i=Object.prototype.hasOwnProperty;function o(t){try{return decodeURIComponent(t.replace(/\+/g,' '))}catch(t){return null}}function s(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){e=e||'';var n,o,a=[];for(o in'string'!=typeof e&&(e='?'),t)if(i.call(t,o)){if((n=t[o])||null!==n&&n!==r&&!isNaN(n)||(n=''),o=s(o),n=s(n),null===o||null===n)continue;a.push(o+'='+n)}return a.length?e+a.join('&'):''},e.parse=function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,r={};e=n.exec(t);){var i=o(e[1]),s=o(e[2]);null===i||null===s||i in r||(r[i]=s)}return r}},function(t,e,n){"use strict";(function(e){var n=e.WebSocket||e.MozWebSocket;t.exports=n?function(t){return new n(t)}:void 0}).call(this,n(17))},function(t,e,n){"use strict";(function(e){var r=n(15),i=n(40),o=n(51),s=n(52),a=n(47),c=n(48);function l(t){if(!a.enabled&&!s.enabled)throw new Error('Transport created when disabled');i.call(this,t,'/xhr_streaming',o,s)}r(l,i),l.enabled=function(t){return!t.nullOrigin&&(!c.isOpera()&&s.enabled)},l.transportName='xhr-streaming',l.roundTrips=2,l.needBody=!!e.document,t.exports=l}).call(this,n(17))},function(t,e,n){"use strict";var r=n(15),i=n(26).EventEmitter;function o(t,e){i.call(this),this.sendBuffer=[],this.sender=e,this.url=t}r(o,i),o.prototype.send=function(t){this.sendBuffer.push(t),this.sendStop||this.sendSchedule()},o.prototype.sendScheduleWait=function(){var t,e=this;this.sendStop=function(){e.sendStop=null,clearTimeout(t)},t=setTimeout((function(){e.sendStop=null,e.sendSchedule()}),25)},o.prototype.sendSchedule=function(){this.sendBuffer.length;var t=this;if(this.sendBuffer.length>0){var e='['+this.sendBuffer.join(',')+']';this.sendStop=this.sender(this.url,e,(function(e){t.sendStop=null,e?(t.emit('close',e.code||1006,'Sending error: '+e),t.close()):t.sendScheduleWait()})),this.sendBuffer=[]}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=o},function(t,e,n){"use strict";var r=n(15),i=n(26).EventEmitter;function o(t,e,n){i.call(this),this.Receiver=t,this.receiveUrl=e,this.AjaxObject=n,this._scheduleReceiver()}r(o,i),o.prototype._scheduleReceiver=function(){var t=this,e=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);e.on('message',(function(e){t.emit('message',e)})),e.once('close',(function(n,r){t.pollIsClosing,t.poll=e=null,t.pollIsClosing||('network'===r?t._scheduleReceiver():(t.emit('close',n||1006,r),t.removeAllListeners()))}))},o.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=o},function(t,e,n){"use strict";var r=n(15),i=n(26).EventEmitter,o=n(82);function s(t){i.call(this);var e=this,n=this.es=new o(t);n.onmessage=function(t){t.data,e.emit('message',decodeURI(t.data))},n.onerror=function(t){n.readyState;var r=2!==n.readyState?'network':'permanent';e._cleanup(),e._close(r)}}r(s,i),s.prototype.abort=function(){this._cleanup(),this._close('user')},s.prototype._cleanup=function(){var t=this.es;t&&(t.onmessage=t.onerror=null,t.close(),this.es=null)},s.prototype._close=function(t){var e=this;setTimeout((function(){e.emit('close',null,t),e.removeAllListeners()}),200)},t.exports=s},function(t,e,n){"use strict";(function(e){var r=n(15),i=n(49),o=n(28),s=n(26).EventEmitter,a=n(39);function c(t){s.call(this);var n=this;i.polluteGlobalNamespace(),this.id='a'+a.string(6),t=o.addQuery(t,'c='+decodeURIComponent(i.WPrefix+'.'+this.id)),c.htmlfileEnabled;var r=c.htmlfileEnabled?i.createHtmlfile:i.createIframe;e[i.WPrefix][this.id]={start:function(){n.iframeObj.loaded()},message:function(t){n.emit('message',t)},stop:function(){n._cleanup(),n._close('network')}},this.iframeObj=r(t,(function(){n._cleanup(),n._close('permanent')}))}r(c,s),c.prototype.abort=function(){this._cleanup(),this._close('user')},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete e[i.WPrefix][this.id]},c.prototype._close=function(t){this.emit('close',null,t),this.removeAllListeners()},c.htmlfileEnabled=!1;var l=['Active'].concat('Object').join('X');if(l in e)try{c.htmlfileEnabled=!!new e[l]('htmlfile')}catch(t){}c.enabled=c.htmlfileEnabled||i.iframeEnabled,t.exports=c}).call(this,n(17))},function(t,e,n){"use strict";var r=n(15),i=n(40),o=n(80),s=n(51),a=n(65);function c(t){if(!a.enabled)throw new Error('Transport created when disabled');i.call(this,t,'/xhr',s,a)}r(c,i),c.enabled=o.enabled,c.transportName='xdr-polling',c.roundTrips=2,t.exports=c},function(t,e,n){"use strict";(function(e){var r=n(15),i=n(78),o=n(152),s=n(153);function a(t){if(!a.enabled())throw new Error('Transport created when disabled');i.call(this,t,'/jsonp',s,o)}r(a,i),a.enabled=function(){return!!e.document},a.transportName='jsonp-polling',a.roundTrips=1,a.needBody=!0,t.exports=a}).call(this,n(17))},function(t,e,n){"use strict";(function(e){var r=n(49),i=n(39),o=n(48),s=n(28),a=n(15),c=n(26).EventEmitter;function l(t){var n=this;c.call(this),r.polluteGlobalNamespace(),this.id='a'+i.string(6);var o=s.addQuery(t,'c='+encodeURIComponent(r.WPrefix+'.'+this.id));e[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(o),this.timeoutId=setTimeout((function(){n._abort(new Error('JSONP script loaded abnormally (timeout)'))}),l.timeout)}a(l,c),l.prototype.abort=function(){if(e[r.WPrefix][this.id]){var t=new Error('JSONP user aborted read');t.code=1e3,this._abort(t)}},l.timeout=35e3,l.scriptErrorTimeout=1e3,l.prototype._callback=function(t){this._cleanup(),this.aborting||(t&&this.emit('message',t),this.emit('close',null,'network'),this.removeAllListeners())},l.prototype._abort=function(t){this._cleanup(),this.aborting=!0,this.emit('close',t.code,t.message),this.removeAllListeners()},l.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var t=this.script;t.parentNode.removeChild(t),t.onreadystatechange=t.onerror=t.onload=t.onclick=null,this.script=null}delete e[r.WPrefix][this.id]},l.prototype._scriptError=function(){var t=this;this.errorTimer||(this.errorTimer=setTimeout((function(){t.loadedOkay||t._abort(new Error('JSONP script loaded abnormally (onerror)'))}),l.scriptErrorTimeout))},l.prototype._createScript=function(t){var n,r=this,s=this.script=e.document.createElement('script');if(s.id='a'+i.string(8),s.src=t,s.type='text/javascript',s.charset='UTF-8',s.onerror=this._scriptError.bind(this),s.onload=function(){r._abort(new Error('JSONP script loaded abnormally (onload)'))},s.onreadystatechange=function(){if(s.readyState,/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){r.loadedOkay=!0;try{s.onclick()}catch(t){}}s&&r._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'))}},void 0===s.async&&e.document.attachEvent)if(o.isOpera())(n=this.script2=e.document.createElement('script')).text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=n.async=!1;else{try{s.htmlFor=s.id,s.event='onclick'}catch(t){}s.async=!0}void 0!==s.async&&(s.async=!0);var a=e.document.getElementsByTagName('head')[0];a.insertBefore(s,a.firstChild),n&&a.insertBefore(n,a.firstChild)},t.exports=l}).call(this,n(17))},function(t,e,n){"use strict";(function(e){var r,i,o=n(39),s=n(28);t.exports=function(t,n,a){r||((r=e.document.createElement('form')).style.display='none',r.style.position='absolute',r.method='POST',r.enctype='application/x-www-form-urlencoded',r.acceptCharset='UTF-8',(i=e.document.createElement('textarea')).name='d',r.appendChild(i),e.document.body.appendChild(r));var c='a'+o.string(8);r.target=c,r.action=s.addQuery(s.addPath(t,'/jsonp_send'),'i='+c);var l=function(t){try{return e.document.createElement('<iframe name="'+t+'">')}catch(r){var n=e.document.createElement('iframe');return n.name=t,n}}(c);l.id=c,l.style.display='none',r.appendChild(l);try{i.value=n}catch(t){}r.submit();var u=function(t){l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,setTimeout((function(){l.parentNode.removeChild(l),l=null}),500),i.value='',a(t))};return l.onerror=function(){u()},l.onload=function(){u()},l.onreadystatechange=function(t){l.readyState,'complete'===l.readyState&&u()},function(){u(new Error('Aborted'))}}}).call(this,n(17))},function(t,e,n){"use strict";(function(e){n(155);var r,i=n(76),o=n(15),s=n(39),a=n(156),c=n(28),l=n(34),u=n(157),f=n(67),h=n(48),d=n(158),p=n(68),g=n(77),v=n(87),m=n(159),y=n(160),b=n(161);function w(t,e,n){if(!(this instanceof w))return new w(t,e,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");g.call(this),this.readyState=w.CONNECTING,this.extensions='',this.protocol='',(n=n||{}).protocols_whitelist&&d.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if('function'==typeof r)this._generateSessionId=r;else{if('number'!=typeof r)throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');this._generateSessionId=function(){return s.string(r)}}this._server=n.server||s.numberString(1e3);var o=new i(t);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+t+"' is invalid");if(o.hash)throw new SyntaxError('The URL must not contain a fragment');if('http:'!==o.protocol&&'https:'!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var a='https:'===o.protocol;if('https:'===v.protocol&&!a&&!c.isLoopbackAddr(o.hostname))throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');e?Array.isArray(e)||(e=[e]):e=[];var l=e.sort();l.forEach((function(t,e){if(!t)throw new SyntaxError("The protocols entry '"+t+"' is invalid.");if(e<l.length-1&&t===l[e+1])throw new SyntaxError("The protocols entry '"+t+"' is duplicated.")}));var u=c.getOrigin(v.href);this._origin=u?u.toLowerCase():null,o.set('pathname',o.pathname.replace(/\/+$/,'')),this.url=o.href,this.url,this._urlInfo={nullOrigin:!h.hasDomain(),sameOrigin:c.isOriginEqual(this.url,v.href),sameScheme:c.isSchemeEqual(this.url,v.href)},this._ir=new b(this.url,this._urlInfo),this._ir.once('finish',this._receiveInfo.bind(this))}function O(t){return 1e3===t||t>=3e3&&t<=4999}o(w,g),w.prototype.close=function(t,e){if(t&&!O(t))throw new Error('InvalidAccessError: Invalid code');if(e&&e.length>123)throw new SyntaxError('reason argument has an invalid length');if(this.readyState!==w.CLOSING&&this.readyState!==w.CLOSED){this._close(t||1e3,e||'Normal closure',!0)}},w.prototype.send=function(t){if('string'!=typeof t&&(t=''+t),this.readyState===w.CONNECTING)throw new Error('InvalidStateError: The connection has not been established yet');this.readyState===w.OPEN&&this._transport.send(a.quote(t))},w.version=n(84),w.CONNECTING=0,w.OPEN=1,w.CLOSING=2,w.CLOSED=3,w.prototype._receiveInfo=function(t,e){if(this._ir=null,t){this._rto=this.countRTO(e),this._transUrl=t.base_url?t.base_url:this.url,t=f.extend(t,this._urlInfo);var n=r.filterToEnabled(this._transportsWhitelist,t);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,'Cannot connect to server')},w.prototype._connect=function(){for(var t=this._transports.shift();t;t=this._transports.shift()){if(t.transportName,t.needBody&&(!e.document.body||void 0!==e.document.readyState&&'complete'!==e.document.readyState&&'interactive'!==e.document.readyState))return this._transports.unshift(t),void l.attachEvent('load',this._connect.bind(this));var n=Math.max(this._timeout,this._rto*t.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),n);var r=c.addPath(this._transUrl,'/'+this._server+'/'+this._generateSessionId()),i=this._transportOptions[t.transportName],o=new t(r,this._transUrl,i);return o.on('message',this._transportMessage.bind(this)),o.once('close',this._transportClose.bind(this)),o.transportName=t.transportName,void(this._transport=o)}this._close(2e3,'All transports failed',!1)},w.prototype._transportTimeout=function(){this.readyState===w.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,'Transport timed out'))},w.prototype._transportMessage=function(t){var e,n=this,r=t.slice(0,1),i=t.slice(1);switch(r){case'o':return void this._open();case'h':return this.dispatchEvent(new p('heartbeat')),void this.transport}if(i)try{e=JSON.parse(i)}catch(t){}if(void 0!==e)switch(r){case'a':Array.isArray(e)&&e.forEach((function(t){n.transport,n.dispatchEvent(new y(t))}));break;case'm':this.transport,this.dispatchEvent(new y(e));break;case'c':Array.isArray(e)&&2===e.length&&this._close(e[0],e[1],!0)}},w.prototype._transportClose=function(t,e){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),O(t)||2e3===t||this.readyState!==w.CONNECTING?this._close(t,e):this._connect()},w.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===w.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=w.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new p('open')),this.transport):this._close(1006,'Server lost session')},w.prototype._close=function(t,e,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===w.CLOSED)throw new Error('InvalidStateError: SockJS has already been closed');this.readyState=w.CLOSING,setTimeout(function(){this.readyState=w.CLOSED,r&&this.dispatchEvent(new p('error'));var i=new m('close');i.wasClean=n||!1,i.code=t||1e3,i.reason=e,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},w.prototype.countRTO=function(t){return t>100?4*t:300+t},t.exports=function(t){return r=u(t),n(164)(w,t),w}}).call(this,n(17))},function(t,e,n){"use strict";var r,i=Array.prototype,o=Object.prototype,s=Function.prototype,a=String.prototype,c=i.slice,l=o.toString,u=function(t){return'[object Function]'===o.toString.call(t)},f=function(t){return'[object String]'===l.call(t)},h=Object.defineProperty&&function(){try{return Object.defineProperty({},'x',{}),!0}catch(t){return!1}}();r=h?function(t,e,n,r){!r&&e in t||Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,r){!r&&e in t||(t[e]=n)};var d=function(t,e,n){for(var i in e)o.hasOwnProperty.call(e,i)&&r(t,i,e[i],n)},p=function(t){if(null==t)throw new TypeError("can't convert "+t+' to object');return Object(t)};function g(t){var e=+t;return e!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function v(){}d(s,{bind:function(t){var e=this;if(!u(e))throw new TypeError('Function.prototype.bind called on incompatible '+e);for(var n=c.call(arguments,1),r=function(){if(this instanceof a){var r=e.apply(this,n.concat(c.call(arguments)));return Object(r)===r?r:this}return e.apply(t,n.concat(c.call(arguments)))},i=Math.max(0,e.length-n.length),o=[],s=0;s<i;s++)o.push('$'+s);var a=Function('binder','return function ('+o.join(',')+'){ return binder.apply(this, arguments); }')(r);return e.prototype&&(v.prototype=e.prototype,a.prototype=new v,v.prototype=null),a}}),d(Array,{isArray:function(t){return'[object Array]'===l.call(t)}});var m,y,b,w=Object('a'),O='a'!==w[0]||!(0 in w);d(i,{forEach:function(t){var e=p(this),n=O&&f(this)?this.split(''):e,r=arguments[1],i=-1,o=n.length>>>0;if(!u(t))throw new TypeError;for(;++i<o;)i in n&&t.call(r,n[i],i,e)}},(m=i.forEach,y=!0,b=!0,m&&(m.call('foo',(function(t,e,n){'object'!=typeof n&&(y=!1)})),m.call([1],(function(){b='string'==typeof this}),'x')),!(m&&y&&b)));var x=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);d(i,{indexOf:function(t){var e=O&&f(this)?this.split(''):p(this),n=e.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=g(arguments[1])),r=r>=0?r:Math.max(0,n+r);r<n;r++)if(r in e&&e[r]===t)return r;return-1}},x);var C,S=a.split;2!=='ab'.split(/(?:ab)*/).length||4!=='.'.split(/(.?)(.?)/).length||'t'==='tesst'.split(/(s)*/)[1]||4!=='test'.split(/(?:)/,-1).length||''.split(/.?/).length||'.'.split(/()()/).length>1?(C=void 0===/()??/.exec('')[1],a.split=function(t,e){var n=this;if(void 0===t&&0===e)return[];if('[object RegExp]'!==l.call(t))return S.call(this,t,e);var r,o,s,a,c=[],u=(t.ignoreCase?'i':'')+(t.multiline?'m':'')+(t.extended?'x':'')+(t.sticky?'y':''),f=0;for(t=new RegExp(t.source,u+'g'),n+='',C||(r=new RegExp('^'+t.source+'$(?!\\s)',u)),e=void 0===e?-1>>>0:e>>>0;(o=t.exec(n))&&!((s=o.index+o[0].length)>f&&(c.push(n.slice(f,o.index)),!C&&o.length>1&&o[0].replace(r,(function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)})),o.length>1&&o.index<n.length&&i.push.apply(c,o.slice(1)),a=o[0].length,f=s,c.length>=e));)t.lastIndex===o.index&&t.lastIndex++;return f===n.length?!a&&t.test('')||c.push(''):c.push(n.slice(f)),c.length>e?c.slice(0,e):c}):'0'.split(void 0,0).length&&(a.split=function(t,e){return void 0===t&&0===e?[]:S.call(this,t,e)});var k=a.substr,j=''.substr&&'b'!=='0b'.substr(-1);d(a,{substr:function(t,e){return k.call(this,t<0&&(t=this.length+t)<0?0:t,e)}},j)},function(t,e,n){"use strict";var r,i=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;t.exports={quote:function(t){var e=JSON.stringify(t);return i.lastIndex=0,i.test(e)?(r||(r=function(t){var e,n={},r=[];for(e=0;e<65536;e++)r.push(String.fromCharCode(e));return t.lastIndex=0,r.join('').replace(t,(function(t){return n[t]='\\u'+('0000'+t.charCodeAt(0).toString(16)).slice(-4),''})),t.lastIndex=0,n}(i)),e.replace(i,(function(t){return r[t]}))):e}}},function(t,e,n){"use strict";t.exports=function(t){return{filterToEnabled:function(e,n){var r={main:[],facade:[]};return e?'string'==typeof e&&(e=[e]):e=[],t.forEach((function(t){t&&('websocket'===t.transportName&&!1===n.websocket||(e.length&&-1===e.indexOf(t.transportName)?t.transportName:t.enabled(n)?(t.transportName,r.main.push(t),t.facadeTransport&&r.facade.push(t.facadeTransport)):t.transportName))})),r}}}},function(t,e,n){"use strict";(function(e){var n={};['log','debug','warn'].forEach((function(t){var r;try{r=e.console&&e.console[t]&&e.console[t].apply}catch(t){}n[t]=r?function(){return e.console[t].apply(e.console,arguments)}:'log'===t?function(){}:n.log})),t.exports=n}).call(this,n(17))},function(t,e,n){"use strict";var r=n(15),i=n(68);function o(){i.call(this),this.initEvent('close',!1,!1),this.wasClean=!1,this.code=0,this.reason=''}r(o,i),t.exports=o},function(t,e,n){"use strict";var r=n(15),i=n(68);function o(t){i.call(this),this.initEvent('message',!1,!1),this.data=t}r(o,i),t.exports=o},function(t,e,n){"use strict";var r=n(26).EventEmitter,i=n(15),o=n(28),s=n(65),a=n(52),c=n(47),l=n(162),u=n(163),f=n(89);function h(t,e){var n=this;r.call(this),setTimeout((function(){n.doXhr(t,e)}),0)}i(h,r),h._getReceiver=function(t,e,n){return n.sameOrigin?new f(e,c):a.enabled?new f(e,a):s.enabled&&n.sameScheme?new f(e,s):u.enabled()?new u(t,e):new f(e,l)},h.prototype.doXhr=function(t,e){var n=this,r=o.addPath(t,'/info');this.xo=h._getReceiver(t,r,e),this.timeoutRef=setTimeout((function(){n._cleanup(!1),n.emit('finish')}),h.timeout),this.xo.once('finish',(function(t,e){n._cleanup(!0),n.emit('finish',t,e)}))},h.prototype._cleanup=function(t){clearTimeout(this.timeoutRef),this.timeoutRef=null,!t&&this.xo&&this.xo.close(),this.xo=null},h.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},h.timeout=8e3,t.exports=h},function(t,e,n){"use strict";var r=n(26).EventEmitter;function i(){var t=this;r.call(this),this.to=setTimeout((function(){t.emit('finish',200,'{}')}),i.timeout)}n(15)(i,r),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,t.exports=i},function(t,e,n){"use strict";(function(e){var r=n(26).EventEmitter,i=n(15),o=n(34),s=n(83),a=n(88);function c(t,n){var i=this;r.call(this);var c=function(){var e=i.ifr=new s(a.transportName,n,t);e.once('message',(function(t){if(t){var e;try{e=JSON.parse(t)}catch(t){return i.emit('finish'),void i.close()}var n=e[0],r=e[1];i.emit('finish',n,r)}i.close()})),e.once('close',(function(){i.emit('finish'),i.close()}))};e.document.body?c():o.attachEvent('load',c)}i(c,r),c.enabled=function(){return s.enabled()},c.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},t.exports=c}).call(this,n(17))},function(t,e,n){"use strict";var r=n(28),i=n(34),o=n(165),s=n(88),a=n(49),c=n(87);t.exports=function(t,e){var n,l={};e.forEach((function(t){t.facadeTransport&&(l[t.facadeTransport.transportName]=t.facadeTransport)})),l[s.transportName]=s,t.bootstrap_iframe=function(){var e;a.currentWindowId=c.hash.slice(1);i.attachEvent('message',(function(i){if(i.source===parent&&(void 0===n&&(n=i.origin),i.origin===n)){var s;try{s=JSON.parse(i.data)}catch(t){return void i.data}if(s.windowId===a.currentWindowId)switch(s.type){case's':var u;try{u=JSON.parse(s.data)}catch(t){s.data;break}var f=u[0],h=u[1],d=u[2],p=u[3];if(f!==t.version)throw new Error('Incompatible SockJS! Main site uses:'+' "'+f+'", the iframe:'+' "'+t.version+'".');if(!r.isOriginEqual(d,c.href)||!r.isOriginEqual(p,c.href))throw new Error('Can\'t connect to different domain from within an '+'iframe. ('+c.href+', '+d+', '+p+')');e=new o(new l[h](d,p));break;case'm':e._send(s.data);break;case'c':e&&e._close(),e=null}}})),a.postMessage('s')}}},function(t,e,n){"use strict";var r=n(49);function i(t){this._transport=t,t.on('message',this._transportMessage.bind(this)),t.on('close',this._transportClose.bind(this))}i.prototype._transportClose=function(t,e){r.postMessage('c',JSON.stringify([t,e]))},i.prototype._transportMessage=function(t){r.postMessage('t',t)},i.prototype._send=function(t){this._transport.send(t)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=i},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n["return"]||n["return"]()}finally{if(a)throw i}}return o}},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports["default"]=t.exports,n(e,r)}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports["default"]=t.exports},function(t,e,n){"use strict";n.r(e);var r=n(12),i=n.n(r),o=n(2),s=n.n(o),a=n(127),c=n.n(a),l=n(0);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["default"]=function(){var t,e,n,r,o={maximumStackLength:500,trackSelection:1},s=function(t){return t.avoidStore||t.noUndo},a=function(t){return Object.keys(t.changedAttributes())};return{name:'UndoManager',init:function(){var u=this,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=f(f({},o),h),t=n.em,this.em=t,n._disable&&(n=f(f({},n),{},{maximumStackLength:0}));var d=!0;return(e=new c.a(f({track:!0,register:[]},n))).changeUndoType('change',{condition:function(t){var e=t.get('_undo');if(e){var n=t.get('_undoexc');if(Object(l["isArray"])(n)&&a(t).some((function(t){return n.indexOf(t)>=0})))return!1;if(Object(l["isBoolean"])(e))return!0;if(Object(l["isArray"])(e)&&a(t).some((function(t){return e.indexOf(t)>=0})))return!0}return!1},on:function(t,e,n){!r&&(r=t.previousAttributes());var i=n||e||{};if(i.noUndo&&setTimeout((function(){r=null})),!s(i)){var o=t.toJSON({fromUndo:d}),a={object:t,before:r,after:o};if(r=null,!Object(l["isEmpty"])(o))return a}}}),e.changeUndoType('add',{on:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!s(n)&&u.isRegistered(e))return{object:e,before:void 0,after:t,options:f(f({},n),{},{fromUndo:d})}}}),e.changeUndoType('remove',{on:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!s(n)&&u.isRegistered(e))return{object:e,before:t,after:void 0,options:f(f({},n),{},{fromUndo:d})}}}),e.changeUndoType('reset',{undo:function(t,e){t.reset(e,{fromUndo:d})},redo:function(t,e,n){t.reset(n,{fromUndo:d})},on:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s(e)&&u.isRegistered(t))return{object:t,before:e.previousModels,after:i()(t.models),options:f(f({},e),{},{fromUndo:d})}}}),e.on('undo redo',(function(){t.trigger('change:canvasOffset'),t.getSelectedAll().map((function(t){return t.trigger('rerender:layer')}))})),['undo','redo'].forEach((function(n){return e.on(n,(function(){return t.trigger(n)}))})),this},postLoad:function(){n.trackSelection&&t&&this.add(t.get('selected'))},getConfig:function(){return n},add:function(t){return e.register(t),this},remove:function(t){return e.unregister(t),this},removeAll:function(){return e.unregisterAll(),this},start:function(){return e.startTracking(),this},stop:function(){return e.stopTracking(),this},undo:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!t.isEditing()&&e.undo(n),this},undoAll:function(){return e.undoAll(),this},redo:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!t.isEditing()&&e.redo(n),this},redoAll:function(){return e.redoAll(),this},hasUndo:function(){return e.isAvailable('undo')},hasRedo:function(){return e.isAvailable('redo')},isRegistered:function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},getStack:function(){return e.stack},getStackGroup:function(){var t=[],e=[];return this.getStack().forEach((function(n){var r=n.get('magicFusionIndex');e.indexOf(r)<0&&(e.push(r),t.push(n))})),t},skip:function(t){this.stop(),t(),this.start()},getGroupedStack:function(){var t={},e=this.getStack();return e.forEach((function(e,n){var r=e.get('magicFusionIndex'),i=function(t,e){var n=t.attributes,r=n.type,i=n.after,o=n.before,s=n.object,a=n.options;return{index:e,type:r,after:i,before:o,object:s,options:void 0===a?{}:a}}(e,n);t[r]?t[r].push(i):t[r]=[i]})),Object.keys(t).map((function(e){var n=t[e];return{index:n[n.length-1].index,actions:n,labels:Object(l["unique"])(n.reduce((function(t,e){var n,r=null===(n=e.options)||void 0===n?void 0:n.action;return r&&t.push(r),t}),[]))}}))},goToGroup:function(t){var e=this;if(t){var n=this.getPointer(),r=t.index-n;Object(l["times"])(Math.abs(r),(function(){e[r<0?'undo':'redo'](!1)}))}},getPointer:function(){return this.getStack().pointer},clear:function(){return e.clear(),this},getInstance:function(){return e},destroy:function(){this.clear().removeAll(),[t,e,n,r].forEach((function(t){return{}})),this.em={}}}}},function(t,e,n){"use strict";var r=n(22),i=n(90),o=n(174),s=n(98);var a=function t(e){var n=new o(e),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return t(s(e,n))},a}(n(69));a.Axios=o,a.CanceledError=n(53),a.CancelToken=n(192),a.isCancel=n(97),a.VERSION=n(99).version,a.toFormData=n(94),a.AxiosError=n(41),a.Cancel=a.CanceledError,a.all=function(t){return Promise.all(t)},a.spread=n(193),a.isAxiosError=n(194),t.exports=a,t.exports.default=a},function(t,e,n){"use strict";var r=n(22),i=n(91),o=n(175),s=n(176),a=n(98),c=n(96),l=n(191),u=l.validators;function f(t){this.defaults=t,this.interceptors={request:new o,response:new o}}f.prototype.request=function(t,e){'string'==typeof t?(e=e||{}).url=t:e=t||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method='get';var n=e.transitional;void 0!==n&&l.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(t){'function'==typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var o,c=[];if(this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)})),!i){var f=[s,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(c),o=Promise.resolve(e);f.length;)o=o.then(f.shift(),f.shift());return o}for(var h=e;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(t){p(t);break}}try{o=s(h)}catch(t){return Promise.reject(t)}for(;c.length;)o=o.then(c.shift(),c.shift());return o},f.prototype.getUri=function(t){t=a(this.defaults,t);var e=c(t.baseURL,t.url);return i(e,t.params,t.paramsSerializer)},r.forEach(['delete','get','head','options'],(function(t){f.prototype[t]=function(e,n){return this.request(a(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(['post','put','patch'],(function(t){function e(e){return function(n,r,i){return this.request(a(i||{},{method:t,headers:e?{'Content-Type':'multipart/form-data'}:{},url:n,data:r}))}}f.prototype[t]=e(),f.prototype[t+'Form']=e(!0)})),t.exports=f},function(t,e,n){"use strict";var r=n(22);function i(){this.handlers=[]}i.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,n){"use strict";var r=n(22),i=n(177),o=n(97),s=n(69),a=n(53);function c(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new a}t.exports=function(t){return c(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(['delete','get','head','post','put','patch','common'],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return c(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(c(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,n){"use strict";var r=n(22),i=n(69);t.exports=function(t,e,n){var o=this||i;return r.forEach(n,(function(n){t=n.call(o,t,e)})),t}},function(t,e,n){"use strict";var r=n(22);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},function(t,e,n){"use strict";(function(t){var r=n(180),i=n(181),o=n(182);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError('Invalid typed array length');return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if('number'==typeof t){if('string'==typeof e)throw new Error('If encoding is specified then the first argument must be a string');return f(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if('number'==typeof e)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError('\'offset\' is out of bounds');if(e.byteLength<n+(r||0))throw new RangeError('\'length\' is out of bounds');e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=h(t,e);return t}(t,e,n,r):'string'==typeof e?function(t,e,n){'string'==typeof n&&''!==n||(n='utf8');if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if('undefined'!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||'length'in e)return'number'!=typeof e.length||(r=e.length)!=r?a(t,0):h(t,e);if('Buffer'===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}(t,e)}function u(t){if('number'!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(u(e),t=a(t,e<0?0:0|d(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=s())throw new RangeError('Attempt to allocate Buffer larger than maximum '+'size: 0x'+s().toString(16)+' bytes');return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;'string'!=typeof t&&(t=''+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case'ascii':case'latin1':case'binary':return n;case'utf8':case'utf-8':case void 0:return U(t).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*n;case'hex':return n>>>1;case'base64':return z(t).length;default:if(r)return U(t).length;e=(''+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return'';if((void 0===n||n>this.length)&&(n=this.length),n<=0)return'';if((n>>>=0)<=(e>>>=0))return'';for(t||(t='utf8');1;)switch(t){case'hex':return T(this,e,n);case'utf8':case'utf-8':return j(this,e,n);case'ascii':return _(this,e,n);case'latin1':case'binary':return P(this,e,n);case'base64':return k(this,e,n);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return A(this,e,n);default:if(r)throw new TypeError('Unknown encoding: '+t);t=(t+'').toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if('string'==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if('string'==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if('number'==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError('val must be string, number or Buffer')}function y(t,e,n,r,i){var o,s=1,a=t.length,c=e.length;if(void 0!==r&&('ucs2'===(r=String(r).toLowerCase())||'ucs-2'===r||'utf16le'===r||'utf-16le'===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var u=-1;for(o=n;o<a;o++)if(l(t,o)===l(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var f=!0,h=0;h<c;h++)if(l(t,o+h)!==l(e,h)){f=!1;break}if(f)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError('Invalid hex string');r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return H(U(e,t.length-n),t,n,r)}function O(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return O(t,e,n,r)}function C(t,e,n,r){return H(z(e),t,n,r)}function S(t,e,n,r){return H(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function j(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,c,l=t[i],u=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(u=l);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,f=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=f}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);var n='',r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=E));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&'function'==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return u(e),e<=0?a(t,e):void 0!==n?'string'==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return f(null,t)},c.allocUnsafeSlow=function(t){return f(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('Arguments must be Buffers');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var e=0;e<t;e+=2)v(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?'':0===arguments.length?j(this,0,t):g.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError('Argument must be a Buffer');return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t='',n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString('hex',0,n).match(/.{2}/g).join(' '),this.length>n&&(t+=' ... ')),'<Buffer '+t+'>'},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError('Argument must be a Buffer');if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError('out of range index');if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),l=this.slice(r,i),u=t.slice(e,n),f=0;f<a;++f)if(l[f]!==u[f]){o=l[f],s=u[f];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r='utf8',n=this.length,e=0;else if(void 0===n&&'string'==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');e|=0,isFinite(n)?(n|=0,void 0===r&&(r='utf8')):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError('Attempt to write outside buffer bounds');r||(r='utf8');for(var o=!1;;)switch(r){case'hex':return b(this,t,e,n);case'utf8':case'utf-8':return w(this,t,e,n);case'ascii':return O(this,t,e,n);case'latin1':case'binary':return x(this,t,e,n);case'base64':return C(this,t,e,n);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return S(this,t,e,n);default:if(o)throw new TypeError('Unknown encoding: '+r);r=(''+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function _(t,e,n){var r='';n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){var r='';n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i='',o=e;o<n;++o)i+=V(t[o]);return i}function A(t,e,n){for(var r=t.slice(e,n),i='',o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError('offset is not uint');if(t+e>n)throw new RangeError('Trying to access beyond buffer length')}function M(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError('Index out of range')}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError('Index out of range');if(n<0)throw new RangeError('Index out of range')}function I(t,e,n,r,o){return o||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return I(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return I(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError('targetStart out of bounds');if(n<0||n>=this.length)throw new RangeError('sourceStart out of bounds');if(r<0)throw new RangeError('sourceEnd out of bounds');r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if('string'==typeof t){if('string'==typeof e?(r=e,e=0,n=this.length):'string'==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&'string'!=typeof r)throw new TypeError('encoding must be a string');if('string'==typeof r&&!c.isEncoding(r))throw new TypeError('Unknown encoding: '+r)}else'number'==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError('Out of range index');if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),'number'==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=c.isBuffer(t)?t:U(new c(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?'0'+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error('Invalid code point');if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,'')}(t).replace(B,'')).length<2)return'';for(;t.length%4!=0;)t+='=';return t}(t))}function H(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(17))},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=l(t),s=r[0],a=r[1],c=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),u=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,c[u++]=255&e);1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e);return c},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(u(t,a,a+s>c?c:a+s));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+'==')):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+'='));return o.join('')};for(var r=[],i=[],o='undefined'!=typeof Uint8Array?Uint8Array:Array,s='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error('Invalid string. Length must be a multiple of 4');var n=t.indexOf('=');return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join('')}i['-'.charCodeAt(0)]=62,i['_'.charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+t[e+f],f+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+f],f+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,r),o-=l}return(d?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,f=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(e*c-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+d]=255&s,d+=p,s/=256,l-=8);t[n+d-p]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return'[object Array]'==n.call(t)}},function(t,e,n){"use strict";var r=n(41);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new r('Request failed with status code '+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}},function(t,e,n){"use strict";var r=n(22);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,s){var a=[];a.push(t+'='+encodeURIComponent(e)),r.isNumber(n)&&a.push('expires='+new Date(n).toGMTString()),r.isString(i)&&a.push('path='+i),r.isString(o)&&a.push('domain='+o),!0===s&&a.push('secure'),document.cookie=a.join('; ')},read:function(t){var e=document.cookie.match(new RegExp('(^|;\\s*)('+t+')=([^;]*)'));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,'',Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,'')+'/'+e.replace(/^\/+/,''):t}},function(t,e,n){"use strict";var r=n(22),i=['age','authorization','content-length','content-type','etag','expires','from','host','if-modified-since','if-unmodified-since','last-modified','location','max-forwards','proxy-authorization','referer','retry-after','user-agent'];t.exports=function(t){var e,n,o,s={};return t?(r.forEach(t.split('\n'),(function(t){if(o=t.indexOf(':'),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]='set-cookie'===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+', '+n:n}})),s):s}},function(t,e,n){"use strict";var r=n(22);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement('a');function i(t){var r=t;return e&&(n.setAttribute('href',r),r=n.href),n.setAttribute('href',r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,''):'',host:n.host,search:n.search?n.search.replace(/^\?/,''):'',hash:n.hash?n.hash.replace(/^#/,''):'',hostname:n.hostname,port:n.port,pathname:'/'===n.pathname.charAt(0)?n.pathname:'/'+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";t.exports=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||''}},function(t,e){t.exports=null},function(t,e,n){"use strict";var r=n(99).version,i=n(41),o={};['object','boolean','number','function','string','symbol'].forEach((function(t,e){o[t]=function(n){return typeof n===t||'a'+(e<1?'n ':' ')+t}}));var s={};o.transitional=function(t,e,n){function o(t,e){return'[Axios v'+r+'] Transitional option \''+t+'\''+e+(n?'. '+n:'')}return function(n,r,a){if(!1===t)throw new i(o(r,' has been removed'+(e?' in '+e:'')),i.ERR_DEPRECATED);return e&&!s[r]&&(s[r]=!0,console.warn(o(r,' has been deprecated since v'+e+' and will be removed in the near future'))),!t||t(n,r,a)}},t.exports={assertOptions:function(t,e,n){if('object'!=typeof t)throw new i('options must be an object',i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),o=r.length;o-- >0;){var s=r[o],a=e[s];if(a){var c=t[s],l=void 0===c||a(c,s,t);if(!0!==l)throw new i('option '+s+' must be '+l,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i('Unknown option '+s,i.ERR_BAD_OPTION)}},validators:o}},function(t,e,n){"use strict";var r=n(53);function i(t){if('function'!=typeof t)throw new TypeError('executor must be a function.');var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},i.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";var r=n(22);t.exports=function(t){return r.isObject(t)&&!0===t.isAxiosError}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(196),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(17))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,s,a,c=1,l={},u=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[c]=i,r(c),c++},h.clearImmediate=d}function d(t){delete l[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{d(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(17),n(92))},function(t,e,n){1&&function(t){"use strict";var e={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},n={};function r(t,e){var r=t.match(function(t){var e=n[t];return e||(n[t]=new RegExp("\\s+"+t+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(e));return r?/^\s*(.*?)\s*$/.exec(r[2])[1]:""}function i(t,e){return new RegExp((e?"^":"")+"</s*"+t+"s*>","i")}function o(t,e){for(var n in t)for(var r=e[n]||(e[n]=[]),i=t[n],o=i.length-1;o>=0;o--)r.unshift(i[o])}t.defineMode("htmlmixed",(function(n,s){var a=t.getMode(n,{name:"xml",htmlMode:!0,multilineTagIndentFactor:s.multilineTagIndentFactor,multilineTagIndentPastTag:s.multilineTagIndentPastTag,allowMissingTagName:s.allowMissingTagName}),c={},l=s&&s.tags,u=s&&s.scriptTypes;if(o(e,c),l&&o(l,c),u)for(var f=u.length-1;f>=0;f--)c.script.unshift(["type",u[f].matches,u[f].mode]);function h(e,o){var s,l=a.token(e,o.htmlState),u=/\btag\b/.test(l);if(u&&!/[<>\s\/]/.test(e.current())&&(s=o.htmlState.tagName&&o.htmlState.tagName.toLowerCase())&&c.hasOwnProperty(s))o.inTag=s+" ";else if(o.inTag&&u&&/>$/.test(e.current())){var f=/^([\S]+) (.*)/.exec(o.inTag);o.inTag=null;var d=">"==e.current()&&function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(!i[0]||i[1].test(r(e,i[0])))return i[2]}}(c[f[1]],f[2]),p=t.getMode(n,d),g=i(f[1],!0),v=i(f[1],!1);o.token=function(t,e){return t.match(g,!1)?(e.token=h,e.localState=e.localMode=null,null):function(t,e,n){var r=t.current(),i=r.search(e);return i>-1?t.backUp(r.length-i):r.match(/<\/?$/)&&(t.backUp(r.length),t.match(e,!1)||t.match(r)),n}(t,v,e.localMode.token(t,e.localState))},o.localMode=p,o.localState=t.startState(p,a.indent(o.htmlState,"",""))}else o.inTag&&(o.inTag+=e.current(),e.eol()&&(o.inTag+=" "));return l}return{startState:function(){return{token:h,inTag:null,localMode:null,localState:null,htmlState:t.startState(a)}},copyState:function(e){var n;return e.localState&&(n=t.copyState(e.localMode,e.localState)),{token:e.token,inTag:e.inTag,localMode:e.localMode,localState:n,htmlState:t.copyState(a,e.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(e,n,r){return!e.localMode||/^\s*<\//.test(n)?a.indent(e.htmlState,n,r):e.localMode.indent?e.localMode.indent(e.localState,n,r):t.Pass},innerMode:function(t){return{state:t.localState||t.htmlState,mode:t.localMode||a}}}}),"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")}(n(42),n(198),n(199),n(100))},function(t,e,n){1&&function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",(function(r,i){var o,s,a=r.indentUnit,c={},l=i.htmlMode?e:n;for(var u in l)c[u]=l[u];for(var u in i)c[u]=i[u];function f(t,e){function n(n){return e.tokenize=n,n(t,e)}var r=t.next();return"<"==r?t.eat("!")?t.eat("[")?t.match("CDATA[")?n(d("atom","]]>")):null:t.match("--")?n(d("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(function t(e){return function(n,r){for(var i;null!=(i=n.next());){if("<"==i)return r.tokenize=t(e+1),r.tokenize(n,r);if(">"==i){if(1==e){r.tokenize=f;break}return r.tokenize=t(e-1),r.tokenize(n,r)}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=d("meta","?>"),"meta"):(o=t.eat("/")?"closeTag":"openTag",e.tokenize=h,"tag bracket"):"&"==r?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function h(t,e){var n,r,i=t.next();if(">"==i||"/"==i&&t.eat(">"))return e.tokenize=f,o=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return o="equals",null;if("<"==i){e.tokenize=f,e.state=y,e.tagName=e.tagStart=null;var s=e.tokenize(t,e);return s?s+" tag error":"tag error"}return/[\'\"]/.test(i)?(e.tokenize=(n=i,(r=function(t,e){for(;!t.eol();)if(t.next()==n){e.tokenize=h;break}return"string"}).isInAttribute=!0,r),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function d(t,e){return function(n,r){for(;!n.eol();){if(n.match(e)){r.tokenize=f;break}n.next()}return t}}function p(t){return t&&t.toLowerCase()}function g(t,e,n){this.prev=t.context,this.tagName=e||"",this.indent=t.indented,this.startOfLine=n,(c.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function v(t){t.context&&(t.context=t.context.prev)}function m(t,e){for(var n;1;){if(!t.context)return;if(n=t.context.tagName,!c.contextGrabbers.hasOwnProperty(p(n))||!c.contextGrabbers[p(n)].hasOwnProperty(p(e)))return;v(t)}}function y(t,e,n){return"openTag"==t?(n.tagStart=e.column(),b):"closeTag"==t?w:y}function b(t,e,n){return"word"==t?(n.tagName=e.current(),s="tag",C):c.allowMissingTagName&&"endTag"==t?(s="tag bracket",C(t,0,n)):(s="error",b)}function w(t,e,n){if("word"==t){var r=e.current();return n.context&&n.context.tagName!=r&&c.implicitlyClosed.hasOwnProperty(p(n.context.tagName))&&v(n),n.context&&n.context.tagName==r||!1===c.matchClosing?(s="tag",O):(s="tag error",x)}return c.allowMissingTagName&&"endTag"==t?(s="tag bracket",O(t,0,n)):(s="error",x)}function O(t,e,n){return"endTag"!=t?(s="error",O):(v(n),y)}function x(t,e,n){return s="error",O(t,0,n)}function C(t,e,n){if("word"==t)return s="attribute",S;if("endTag"==t||"selfcloseTag"==t){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||c.autoSelfClosers.hasOwnProperty(p(r))?m(n,r):(m(n,r),n.context=new g(n,r,i==n.indented)),y}return s="error",C}function S(t,e,n){return"equals"==t?k:(c.allowMissing||(s="error"),C(t,0,n))}function k(t,e,n){return"string"==t?j:"word"==t&&c.allowUnquoted?(s="string",C):(s="error",C(t,0,n))}function j(t,e,n){return"string"==t?j:C(t,0,n)}return f.isInText=!0,{startState:function(t){var e={tokenize:f,state:y,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;o=null;var n=e.tokenize(t,e);return(n||o)&&"comment"!=n&&(s=null,e.state=e.state(o||n,t,e),s&&(n="error"==s?n+" error":s)),n},indent:function(e,n,r){var i=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+a;if(i&&i.noIndent)return t.Pass;if(e.tokenize!=h&&e.tokenize!=f)return r?r.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==c.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+a*(c.multilineTagIndentFactor||1);if(c.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var o=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(o&&o[1])for(;i;){if(i.tagName==o[2]){i=i.prev;break}if(!c.implicitlyClosed.hasOwnProperty(p(i.tagName)))break;i=i.prev}else if(o)for(;i;){var s=c.contextGrabbers[p(i.tagName)];if(!s||!s.hasOwnProperty(p(o[2])))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+a:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:c.htmlMode?"html":"xml",helperType:c.htmlMode?"html":"xml",skipAttribute:function(t){t.state==k&&(t.state=C)},xmlCurrentTag:function(t){return t.tagName?{name:t.tagName,close:"closeTag"==t.type}:null},xmlCurrentContext:function(t){for(var e=[],n=t.context;n;n=n.prev)e.push(n.tagName);return e.reverse()}}})),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})}(n(42))},function(t,e,n){1&&function(t){"use strict";t.defineMode("javascript",(function(e,n){var r,i,o=e.indentUnit,s=n.statementIndent,a=n.jsonld,c=n.json||a,l=!1!==n.trackScope,u=n.typescript,f=n.wordCharacters||/[\w$\xa1-\uffff]/,h=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),n=t("keyword b"),r=t("keyword c"),i=t("keyword d"),o=t("operator"),s={type:"atom",style:"atom"};return{if:t("if"),while:e,with:e,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:t("new"),delete:r,void:r,throw:r,debugger:t("debugger"),var:t("var"),const:t("var"),let:t("var"),function:t("function"),catch:t("catch"),for:t("for"),switch:t("switch"),case:t("case"),default:t("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:t("this"),class:t("class"),super:t("atom"),yield:r,export:t("export"),import:t("import"),extends:r,await:r}}(),d=/[+\-*&%=<>!?|~^@]/,p=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function g(t,e,n){return r=t,i=n,e}function v(t,e){var n,r=t.next();if('"'==r||"'"==r)return e.tokenize=(n=r,function(t,e){var r,i=!1;if(a&&"@"==t.peek()&&t.match(p))return e.tokenize=v,g("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(e.tokenize=v),g("string","string")}),e.tokenize(t,e);if("."==r&&t.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return g("number","number");if("."==r&&t.match(".."))return g("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return g(r);if("="==r&&t.eat(">"))return g("=>","operator");if("0"==r&&t.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return g("number","number");if(/\d/.test(r))return t.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),g("number","number");if("/"==r)return t.eat("*")?(e.tokenize=m,m(t,e)):t.eat("/")?(t.skipToEnd(),g("comment","comment")):Qt(t,e,1)?(function(t){for(var e,n=!1,r=!1;null!=(e=t.next());){if(!n){if("/"==e&&!r)return;"["==e?r=!0:r&&"]"==e&&(r=!1)}n=!n&&"\\"==e}}(t),t.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),g("regexp","string-2")):(t.eat("="),g("operator","operator",t.current()));if("`"==r)return e.tokenize=y,y(t,e);if("#"==r&&"!"==t.peek())return t.skipToEnd(),g("meta","meta");if("#"==r&&t.eatWhile(f))return g("variable","property");if("<"==r&&t.match("!--")||"-"==r&&t.match("->")&&!/\S/.test(t.string.slice(0,t.start)))return t.skipToEnd(),g("comment","comment");if(d.test(r))return">"==r&&e.lexical&&">"==e.lexical.type||(t.eat("=")?"!"!=r&&"="!=r||t.eat("="):/[<>*+\-|&?]/.test(r)&&(t.eat(r),">"==r&&t.eat(r))),"?"==r&&t.eat(".")?g("."):g("operator","operator",t.current());if(f.test(r)){t.eatWhile(f);var i=t.current();if("."!=e.lastType){if(h.propertyIsEnumerable(i)){var o=h[i];return g(o.type,o.style,i)}if("async"==i&&t.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return g("async","keyword",i)}return g("variable","variable",i)}}function m(t,e){for(var n,r=!1;n=t.next();){if("/"==n&&r){e.tokenize=v;break}r="*"==n}return g("comment","comment")}function y(t,e){for(var n,r=!1;null!=(n=t.next());){if(!r&&("`"==n||"$"==n&&t.eat("{"))){e.tokenize=v;break}r=!r&&"\\"==n}return g("quasi","string-2",t.current())}var b="([{}])";function w(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var n=t.string.indexOf("=>",t.start);if(!(n<0)){if(u){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(t.string.slice(t.start,n));r&&(n=r.index)}for(var i=0,o=!1,s=n-1;s>=0;--s){var a=t.string.charAt(s),c=b.indexOf(a);if(c>=0&&c<3){if(!i){++s;break}if(0==--i){"("==a&&(o=!0);break}}else if(c>=3&&c<6)++i;else if(f.test(a))o=!0;else if(/["'\/`]/.test(a))for(;;--s){if(0==s)return;if(t.string.charAt(s-1)==a&&"\\"!=t.string.charAt(s-2)){s--;break}}else if(o&&!i){++s;break}}o&&!i&&(e.fatArrowAt=s)}}var O={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function x(t,e,n,r,i,o){this.indented=t,this.column=e,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function C(t,e){if(!l)return!1;for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0;for(var r=t.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==e)return!0}function S(t,e,n,r,i){var o=t.cc;for(k.state=t,k.stream=i,k.marked=null,k.cc=o,k.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);1;)if((o.length?o.pop():c?z:V)(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return k.marked?k.marked:"variable"==n&&C(t,r)?"variable-2":e}}var k={state:null,column:null,marked:null,cc:null};function j(){for(var t=arguments.length-1;t>=0;t--)k.cc.push(arguments[t])}function E(){return j.apply(null,arguments),!0}function _(t,e){for(var n=e;n;n=n.next)if(n.name==t)return!0;return!1}function P(t){var e=k.state;if(k.marked="def",l){if(e.context)if("var"==e.lexical.info&&e.context&&e.context.block){var r=function t(e,n){if(n){if(n.block){var r=t(e,n.prev);return r?r==n.prev?n:new A(r,n.vars,!0):null}return _(e,n.vars)?n:new A(n.prev,new D(e,n.vars),!1)}return null}(t,e.context);if(null!=r)return void(e.context=r)}else if(!_(t,e.localVars))return void(e.localVars=new D(t,e.localVars));n.globalVars&&!_(t,e.globalVars)&&(e.globalVars=new D(t,e.globalVars))}}function T(t){return"public"==t||"private"==t||"protected"==t||"abstract"==t||"readonly"==t}function A(t,e,n){this.prev=t,this.vars=e,this.block=n}function D(t,e){this.name=t,this.next=e}var M=new D("this",new D("arguments",null));function L(){k.state.context=new A(k.state.context,k.state.localVars,!1),k.state.localVars=M}function R(){k.state.context=new A(k.state.context,k.state.localVars,!0),k.state.localVars=null}function N(){k.state.localVars=k.state.context.vars,k.state.context=k.state.context.prev}function I(t,e){var n=function(){var n=k.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new x(r,k.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function F(){var t=k.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function B(t){return function e(n){return n==t?E():";"==t||"}"==n||")"==n||"]"==n?j():E(e)}}function V(t,e){return"var"==t?E(I("vardef",e),St,B(";"),F):"keyword a"==t?E(I("form"),W,V,F):"keyword b"==t?E(I("form"),V,F):"keyword d"==t?k.stream.match(/^\s*$/,!1)?E():E(I("stat"),q,B(";"),F):"debugger"==t?E(B(";")):"{"==t?E(I("}"),R,ct,F,N):";"==t?E():"if"==t?("else"==k.state.lexical.info&&k.state.cc[k.state.cc.length-1]==F&&k.state.cc.pop()(),E(I("form"),W,V,F,Tt)):"function"==t?E(Lt):"for"==t?E(I("form"),R,At,V,N,F):"class"==t||u&&"interface"==e?(k.marked="keyword",E(I("form","class"==t?t:e),Bt,F)):"variable"==t?u&&"declare"==e?(k.marked="keyword",E(V)):u&&("module"==e||"enum"==e||"type"==e)&&k.stream.match(/^\s*\w/,!1)?(k.marked="keyword","enum"==e?E(Xt):"type"==e?E(Nt,B("operator"),dt,B(";")):E(I("form"),kt,B("{"),I("}"),ct,F,F)):u&&"namespace"==e?(k.marked="keyword",E(I("form"),z,V,F)):u&&"abstract"==e?(k.marked="keyword",E(V)):E(I("stat"),et):"switch"==t?E(I("form"),W,B("{"),I("}","switch"),R,ct,F,F,N):"case"==t?E(z,B(":")):"default"==t?E(B(":")):"catch"==t?E(I("form"),L,U,V,F,N):"export"==t?E(I("stat"),Ht,F):"import"==t?E(I("stat"),$t,F):"async"==t?E(V):"@"==e?E(z,V):j(I("stat"),z,B(";"),F)}function U(t){if("("==t)return E(It,B(")"))}function z(t,e){return $(t,e,!1)}function H(t,e){return $(t,e,!0)}function W(t){return"("!=t?j():E(I(")"),q,B(")"),F)}function $(t,e,n){if(k.state.fatArrowAt==k.stream.start){var r=n?Z:X;if("("==t)return E(L,I(")"),st(It,")"),F,B("=>"),r,N);if("variable"==t)return j(L,kt,B("=>"),r,N)}var i=n?K:G;return O.hasOwnProperty(t)?E(i):"function"==t?E(Lt,i):"class"==t||u&&"interface"==e?(k.marked="keyword",E(I("form"),Ft,F)):"keyword c"==t||"async"==t?E(n?H:z):"("==t?E(I(")"),q,B(")"),F,i):"operator"==t||"spread"==t?E(n?H:z):"["==t?E(I("]"),Jt,F,i):"{"==t?at(rt,"}",null,i):"quasi"==t?j(Y,i):"new"==t?E(function(t){return function(e){return"."==e?E(t?tt:Q):"variable"==e&&u?E(Ot,t?K:G):j(t?H:z)}}(n)):E()}function q(t){return t.match(/[;\}\)\],]/)?j():j(z)}function G(t,e){return","==t?E(q):K(t,e,!1)}function K(t,e,n){var r=0==n?G:K,i=0==n?z:H;return"=>"==t?E(L,n?Z:X,N):"operator"==t?/\+\+|--/.test(e)||u&&"!"==e?E(r):u&&"<"==e&&k.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?E(I(">"),st(dt,">"),F,r):"?"==e?E(z,B(":"),i):E(i):"quasi"==t?j(Y,r):";"!=t?"("==t?at(H,")","call",r):"."==t?E(nt,r):"["==t?E(I("]"),q,B("]"),F,r):u&&"as"==e?(k.marked="keyword",E(dt,r)):"regexp"==t?(k.state.lastType=k.marked="operator",k.stream.backUp(k.stream.pos-k.stream.start-1),E(i)):void 0:void 0}function Y(t,e){return"quasi"!=t?j():"${"!=e.slice(e.length-2)?E(Y):E(q,J)}function J(t){if("}"==t)return k.marked="string-2",k.state.tokenize=y,E(Y)}function X(t){return w(k.stream,k.state),j("{"==t?V:z)}function Z(t){return w(k.stream,k.state),j("{"==t?V:H)}function Q(t,e){if("target"==e)return k.marked="keyword",E(G)}function tt(t,e){if("target"==e)return k.marked="keyword",E(K)}function et(t){return":"==t?E(F,V):j(G,B(";"),F)}function nt(t){if("variable"==t)return k.marked="property",E()}function rt(t,e){return"async"==t?(k.marked="property",E(rt)):"variable"==t||"keyword"==k.style?(k.marked="property","get"==e||"set"==e?E(it):(u&&k.state.fatArrowAt==k.stream.start&&(n=k.stream.match(/^\s*:\s*/,!1))&&(k.state.fatArrowAt=k.stream.pos+n[0].length),E(ot))):"number"==t||"string"==t?(k.marked=a?"property":k.style+" property",E(ot)):"jsonld-keyword"==t?E(ot):u&&T(e)?(k.marked="keyword",E(rt)):"["==t?E(z,lt,B("]"),ot):"spread"==t?E(H,ot):"*"==e?(k.marked="keyword",E(rt)):":"==t?j(ot):void 0;var n}function it(t){return"variable"!=t?j(ot):(k.marked="property",E(Lt))}function ot(t){return":"==t?E(H):"("==t?j(Lt):void 0}function st(t,e,n){function r(i,o){if(n?n.indexOf(i)>-1:","==i){var s=k.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),E((function(n,r){return n==e||r==e?j():j(t)}),r)}return i==e||o==e?E():n&&n.indexOf(";")>-1?j(t):E(B(e))}return function(n,i){return n==e||i==e?E():j(t,r)}}function at(t,e,n){for(var r=3;r<arguments.length;r++)k.cc.push(arguments[r]);return E(I(e,n),st(t,e),F)}function ct(t){return"}"==t?E():j(V,ct)}function lt(t,e){if(u){if(":"==t)return E(dt);if("?"==e)return E(lt)}}function ut(t,e){if(u&&(":"==t||"in"==e))return E(dt)}function ft(t){if(u&&":"==t)return k.stream.match(/^\s*\w+\s+is\b/,!1)?E(z,ht,dt):E(dt)}function ht(t,e){if("is"==e)return k.marked="keyword",E()}function dt(t,e){return"keyof"==e||"typeof"==e||"infer"==e||"readonly"==e?(k.marked="keyword",E("typeof"==e?H:dt)):"variable"==t||"void"==e?(k.marked="type",E(wt)):"|"==e||"&"==e?E(dt):"string"==t||"number"==t||"atom"==t?E(wt):"["==t?E(I("]"),st(dt,"]",","),F,wt):"{"==t?E(I("}"),gt,F,wt):"("==t?E(st(bt,")"),pt,wt):"<"==t?E(st(dt,">"),dt):"quasi"==t?j(mt,wt):void 0}function pt(t){if("=>"==t)return E(dt)}function gt(t){return t.match(/[\}\)\]]/)?E():","==t||";"==t?E(gt):j(vt,gt)}function vt(t,e){return"variable"==t||"keyword"==k.style?(k.marked="property",E(vt)):"?"==e||"number"==t||"string"==t?E(vt):":"==t?E(dt):"["==t?E(B("variable"),ut,B("]"),vt):"("==t?j(Rt,vt):t.match(/[;\}\)\],]/)?void 0:E()}function mt(t,e){return"quasi"!=t?j():"${"!=e.slice(e.length-2)?E(mt):E(dt,yt)}function yt(t){if("}"==t)return k.marked="string-2",k.state.tokenize=y,E(mt)}function bt(t,e){return"variable"==t&&k.stream.match(/^\s*[?:]/,!1)||"?"==e?E(bt):":"==t?E(dt):"spread"==t?E(bt):j(dt)}function wt(t,e){return"<"==e?E(I(">"),st(dt,">"),F,wt):"|"==e||"."==t||"&"==e?E(dt):"["==t?E(dt,B("]"),wt):"extends"==e||"implements"==e?(k.marked="keyword",E(dt)):"?"==e?E(dt,B(":"),dt):void 0}function Ot(t,e){if("<"==e)return E(I(">"),st(dt,">"),F,wt)}function xt(){return j(dt,Ct)}function Ct(t,e){if("="==e)return E(dt)}function St(t,e){return"enum"==e?(k.marked="keyword",E(Xt)):j(kt,lt,_t,Pt)}function kt(t,e){return u&&T(e)?(k.marked="keyword",E(kt)):"variable"==t?(P(e),E()):"spread"==t?E(kt):"["==t?at(Et,"]"):"{"==t?at(jt,"}"):void 0}function jt(t,e){return"variable"!=t||k.stream.match(/^\s*:/,!1)?("variable"==t&&(k.marked="property"),"spread"==t?E(kt):"}"==t?j():"["==t?E(z,B(']'),B(':'),jt):E(B(":"),kt,_t)):(P(e),E(_t))}function Et(){return j(kt,_t)}function _t(t,e){if("="==e)return E(H)}function Pt(t){if(","==t)return E(St)}function Tt(t,e){if("keyword b"==t&&"else"==e)return E(I("form","else"),V,F)}function At(t,e){return"await"==e?E(At):"("==t?E(I(")"),Dt,F):void 0}function Dt(t){return"var"==t?E(St,Mt):"variable"==t?E(Mt):j(Mt)}function Mt(t,e){return")"==t?E():";"==t?E(Mt):"in"==e||"of"==e?(k.marked="keyword",E(z,Mt)):j(z,Mt)}function Lt(t,e){return"*"==e?(k.marked="keyword",E(Lt)):"variable"==t?(P(e),E(Lt)):"("==t?E(L,I(")"),st(It,")"),F,ft,V,N):u&&"<"==e?E(I(">"),st(xt,">"),F,Lt):void 0}function Rt(t,e){return"*"==e?(k.marked="keyword",E(Rt)):"variable"==t?(P(e),E(Rt)):"("==t?E(L,I(")"),st(It,")"),F,ft,N):u&&"<"==e?E(I(">"),st(xt,">"),F,Rt):void 0}function Nt(t,e){return"keyword"==t||"variable"==t?(k.marked="type",E(Nt)):"<"==e?E(I(">"),st(xt,">"),F):void 0}function It(t,e){return"@"==e&&E(z,It),"spread"==t?E(It):u&&T(e)?(k.marked="keyword",E(It)):u&&"this"==t?E(lt,_t):j(kt,lt,_t)}function Ft(t,e){return"variable"==t?Bt(t,e):Vt(t,e)}function Bt(t,e){if("variable"==t)return P(e),E(Vt)}function Vt(t,e){return"<"==e?E(I(">"),st(xt,">"),F,Vt):"extends"==e||"implements"==e||u&&","==t?("implements"==e&&(k.marked="keyword"),E(u?dt:z,Vt)):"{"==t?E(I("}"),Ut,F):void 0}function Ut(t,e){return"async"==t||"variable"==t&&("static"==e||"get"==e||"set"==e||u&&T(e))&&k.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(k.marked="keyword",E(Ut)):"variable"==t||"keyword"==k.style?(k.marked="property",E(zt,Ut)):"number"==t||"string"==t?E(zt,Ut):"["==t?E(z,lt,B("]"),zt,Ut):"*"==e?(k.marked="keyword",E(Ut)):u&&"("==t?j(Rt,Ut):";"==t||","==t?E(Ut):"}"==t?E():"@"==e?E(z,Ut):void 0}function zt(t,e){if("!"==e)return E(zt);if("?"==e)return E(zt);if(":"==t)return E(dt,_t);if("="==e)return E(H);var n=k.state.lexical.prev;return j(n&&"interface"==n.info?Rt:Lt)}function Ht(t,e){return"*"==e?(k.marked="keyword",E(Yt,B(";"))):"default"==e?(k.marked="keyword",E(z,B(";"))):"{"==t?E(st(Wt,"}"),Yt,B(";")):j(V)}function Wt(t,e){return"as"==e?(k.marked="keyword",E(B("variable"))):"variable"==t?j(H,Wt):void 0}function $t(t){return"string"==t?E():"("==t?j(z):"."==t?j(G):j(qt,Gt,Yt)}function qt(t,e){return"{"==t?at(qt,"}"):("variable"==t&&P(e),"*"==e&&(k.marked="keyword"),E(Kt))}function Gt(t){if(","==t)return E(qt,Gt)}function Kt(t,e){if("as"==e)return k.marked="keyword",E(qt)}function Yt(t,e){if("from"==e)return k.marked="keyword",E(z)}function Jt(t){return"]"==t?E():j(st(H,"]"))}function Xt(){return j(I("form"),kt,B("{"),I("}"),st(Zt,"}"),F,F)}function Zt(){return j(kt,_t)}function Qt(t,e,n){return e.tokenize==v&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(n||0)))}return N.lex=!0,F.lex=!0,{startState:function(t){var e={tokenize:v,lastType:"sof",cc:[],lexical:new x((t||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new A(null,null,!1),indented:t||0};return n.globalVars&&"object"==typeof n.globalVars&&(e.globalVars=n.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),w(t,e)),e.tokenize!=m&&t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==r?n:(e.lastType="operator"!=r||"++"!=i&&"--"!=i?r:"incdec",S(e,n,r,i,t))},indent:function(e,r){if(e.tokenize==m||e.tokenize==y)return t.Pass;if(e.tokenize!=v)return 0;var i,a=r&&r.charAt(0),c=e.lexical;if(!/^\s*else\b/.test(r))for(var l=e.cc.length-1;l>=0;--l){var u=e.cc[l];if(u==F)c=c.prev;else if(u!=Tt&&u!=N)break}for(;("stat"==c.type||"form"==c.type)&&("}"==a||(i=e.cc[e.cc.length-1])&&(i==G||i==K)&&!/^[,\.=+\-*:?[\(]/.test(r));)c=c.prev;s&&")"==c.type&&"stat"==c.prev.type&&(c=c.prev);var f=c.type,h=a==f;return"vardef"==f?c.indented+("operator"==e.lastType||","==e.lastType?c.info.length+1:0):"form"==f&&"{"==a?c.indented:"form"==f?c.indented+o:"stat"==f?c.indented+(function(t,e){return"operator"==t.lastType||","==t.lastType||d.test(e.charAt(0))||/[,.]/.test(e.charAt(0))}(e,r)?s||o:0):"switch"!=c.info||h||0==n.doubleIndentSwitch?c.align?c.column+(h?0:1):c.indented+(h?0:o):c.indented+(/^(?:case|default)\b/.test(r)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:c?null:"/*",blockCommentEnd:c?null:"*/",blockCommentContinue:c?null:" * ",lineComment:c?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:c?"json":"javascript",jsonldMode:a,jsonMode:c,expressionAllowed:Qt,skipExpression:function(e){S(e,"atom","atom","true",new t.StringStream("",2,null))}}})),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(42))},function(t,e,n){1&&function(t){t.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(t,e){return/^[;{}]$/.test(e)}}),t.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(t,e,n,r){return this.jsonMode?/^[\[,{]$/.test(e)||/^}/.test(n):(";"!=e||!r.lexical||")"!=r.lexical.type)&&/^[;{}]$/.test(e)&&!/^;/.test(n)}});var e=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;t.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(t,n,r,i){var o=!1;return"html"==this.configuration&&(o=!!i.context&&e.test(i.context.tagName)),!o&&("tag"==t&&/>$/.test(n)&&i.context||/^</.test(r))}}),t.defineExtension("commentRange",(function(e,n,r){var i=this,o=t.innerMode(i.getMode(),i.getTokenAt(n).state).mode;i.operation((function(){if(e)i.replaceRange(o.commentEnd,r),i.replaceRange(o.commentStart,n),n.line==r.line&&n.ch==r.ch&&i.setCursor(n.line,n.ch+o.commentStart.length);else{var t=i.getRange(n,r),s=t.indexOf(o.commentStart),a=t.lastIndexOf(o.commentEnd);s>-1&&a>-1&&a>s&&(t=t.substr(0,s)+t.substring(s+o.commentStart.length,a)+t.substr(a+o.commentEnd.length)),i.replaceRange(t,n,r)}}))})),t.defineExtension("autoIndentRange",(function(t,e){var n=this;this.operation((function(){for(var r=t.line;r<=e.line;r++)n.indentLine(r,"smart")}))})),t.defineExtension("autoFormatRange",(function(e,n){var r=this,i=r.getMode(),o=r.getRange(e,n).split("\n"),s=t.copyState(i,r.getTokenAt(e).state),a=r.getOption("tabSize"),c="",l=0,u=0===e.ch;function f(){c+="\n",u=!0,++l}for(var h=0;h<o.length;++h){for(var d=new t.StringStream(o[h],a);!d.eol();){var p=t.innerMode(i,s),g=i.token(d,s),v=d.current();d.start=d.pos,u&&!/\S/.test(v)||(c+=v,u=!1),!u&&p.mode.newlineAfterToken&&p.mode.newlineAfterToken(g,v,d.string.slice(d.pos)||o[h+1]||"",p.state)&&f()}!d.pos&&i.blankLine&&i.blankLine(s),!u&&h<o.length-1&&f()}r.operation((function(){r.replaceRange(c,e,n);for(var t=e.line+1,i=e.line+l;t<=i;++t)r.indentLine(t,"smart");r.setSelection(e,r.getCursor(!1))}))}))}(n(42))},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n(11);e["default"]=r["View"].extend({initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.items=[],this.opt=t;var e=t.config||{};this.level=t.level,this.config=e,this.preview=t.preview,this.ppfx=e.pStylePrefix||'',this.pfx=e.stylePrefix||'',this.parent=t.parent,this.parentView=t.parentView;var n=this.pfx,r=this.ppfx,o=this.parent,s=this.collection;this.listenTo(s,'add',this.addTo),this.listenTo(s,'reset resetNavigator',this.render),this.listenTo(s,'remove',this.removeChildren),this.className="".concat(n,"layers");var a=e.em;if(e.sortable&&!this.opt.sorter){var c=a.get('Utils');this.opt.sorter=new c.Sorter({container:e.sortContainer||this.el,containerSel:".".concat(this.className),itemSel:".".concat(n,"layer"),ignoreViewChildren:1,onEndMove:function(t,e,n){var r=e.getSourceModel();a.setSelected(r,{forceChange:1}),a.trigger("".concat(i["b"],":end"),n)},avoidSelectOnEnd:1,nested:1,ppfx:r,pfx:n})}this.sorter=this.opt.sorter||'',this.$el.data('collection',s),o&&this.$el.data('model',o)},removeChildren:function(t){var e=t.viewLayer;e&&(e.remove(),t.viewLayer=0)},addTo:function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},addToCollection:function(t,e,n){var r=this.level,i=this.parentView,o=this.opt.ItemView,s=e||null,a=new o({ItemView:o,level:r,model:t,parentView:i,config:this.config,sorter:this.sorter,isCountable:this.isCountable,opened:this.opt.opened}),c=a.render().el;if(s)s.appendChild(c);else if(void 0!==n){var l='before';this.$el.children().length==n&&(n--,l='after'),n<0?this.$el.append(c):this.$el.children().eq(n)[l](c)}else this.$el.append(c);return this.items.push(a),c},remove:function(){r["View"].prototype.remove.apply(this,arguments),this.items.map((function(t){return t.remove()}))},isCountable:function(t,e){var n=t.get('type'),r=t.get('tagName');return!(('textnode'==n||'br'==r)&&e||!t.get('layerable'))},render:function(){var t=this,e=document.createDocumentFragment(),n=this.el;return n.innerHTML='',this.collection.each((function(n){return t.addToCollection(n,e)})),n.appendChild(e),n.className=this.className,this}})},function(t,e,n){var r={"./CanvasClear":101,"./CanvasClear.js":101,"./CanvasMove":102,"./CanvasMove.js":102,"./CommandAbstract":45,"./CommandAbstract.js":45,"./ComponentDelete":103,"./ComponentDelete.js":103,"./ComponentDrag":104,"./ComponentDrag.js":104,"./ComponentEnter":105,"./ComponentEnter.js":105,"./ComponentExit":106,"./ComponentExit.js":106,"./ComponentNext":107,"./ComponentNext.js":107,"./ComponentPrev":108,"./ComponentPrev.js":108,"./ComponentStyleClear":109,"./ComponentStyleClear.js":109,"./CopyComponent":110,"./CopyComponent.js":110,"./DeleteComponent":111,"./DeleteComponent.js":111,"./ExportTemplate":112,"./ExportTemplate.js":112,"./Fullscreen":113,"./Fullscreen.js":113,"./MoveComponent":114,"./MoveComponent.js":114,"./OpenAssets":115,"./OpenAssets.js":115,"./OpenBlocks":116,"./OpenBlocks.js":116,"./OpenLayers":117,"./OpenLayers.js":117,"./OpenStyleManager":118,"./OpenStyleManager.js":118,"./OpenTraitManager":119,"./OpenTraitManager.js":119,"./PasteComponent":120,"./PasteComponent.js":120,"./Preview":121,"./Preview.js":121,"./Resize":122,"./Resize.js":122,"./SelectComponent":33,"./SelectComponent.js":33,"./SelectPosition":54,"./SelectPosition.js":54,"./ShowOffset":123,"./ShowOffset.js":123,"./SwitchVisibility":124,"./SwitchVisibility.js":124};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code='MODULE_NOT_FOUND',e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=202},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),o=n(16),s=n.n(o),a=n(0),c={stylePrefix:'comp-',components:[],draggableComponents:1,storeWrapper:0,processor:0,voidElements:['area','base','br','col','embed','hr','img','input','keygen','link','menuitem','meta','param','source','track','wbr']},l=n(11),u=n(24),f=n(13),h=n(59),d=n(1);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v=l["a"].extend({defaults:g(g({},l["a"].prototype.defaults),{},{type:'cell',tagName:'td',draggable:['tr']})},{isComponent:function(t){return['td','th'].indexOf(Object(d["toLowerCase"])(t.tagName))>=0}}),m=f["default"].extend({});function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w='tr',O=l["a"].extend({defaults:b(b({},l["a"].prototype.defaults),{},{tagName:w,draggable:['thead','tbody','tfoot'],droppable:['th','td']})},{isComponent:function(t){return Object(d["toLowerCase"])(t.tagName)===w}}),x=f["default"].extend({});function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k='table',j=l["a"].extend({defaults:S(S({},l["a"].prototype.defaults),{},{type:k,tagName:k,droppable:['tbody','thead','tfoot']}),initialize:function(t,e){l["a"].prototype.initialize.apply(this,arguments);var n=this.get('components');!n.length&&n.add({type:'tbody'})}},{isComponent:function(t){return Object(d["toLowerCase"])(t.tagName)===k}}),E=f["default"].extend({events:{}});function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T='tbody',A=l["a"].extend({defaults:P(P({},l["a"].prototype.defaults),{},{type:T,tagName:T,draggable:['table'],droppable:['tr'],columns:1,rows:1}),initialize:function(t,e){l["a"].prototype.initialize.apply(this,arguments);var n=this.get('components'),r=this.get('columns'),i=this.get('rows');if(!n.length){for(var o=[];i--;){for(var s=[],a=r;a--;)s.push({type:'cell',classes:['cell']});o.push({type:'row',classes:['row'],components:s})}n.add(o)}}},{isComponent:function(t){return Object(d["toLowerCase"])(t.tagName)===T}});function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L='thead',R=A.extend({defaults:M(M({},A.prototype.defaults),{},{type:L,tagName:L})},{isComponent:function(t){return Object(d["toLowerCase"])(t.tagName)===L}}),N=f["default"].extend({}),I=f["default"].extend({});function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var V='tfoot',U=A.extend({defaults:B(B({},A.prototype.defaults),{},{type:V,tagName:V})},{isComponent:function(t){return Object(d["toLowerCase"])(t.tagName)===V}}),z=f["default"].extend({});function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',q=l["a"].extend({defaults:W(W({},l["a"].prototype.defaults),{},{type:'image',tagName:'img',void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:['alt'],src:"<svg ".concat($,">\n        <path d=\"M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z\"></path>\n      </svg>"),fallback:"<svg ".concat($,">\n        <path d=\"M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z\"></path>\n      </svg>"),file:''}),initialize:function(t,e){l["a"].prototype.initialize.apply(this,arguments);var n=this.get('attributes'),r=n.src;r&&this.set('src',r,{silent:1})},initToolbar:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];l["a"].prototype.initToolbar.apply(this,e);var r=this.em;if(r){var i=r.get('Commands'),o='image-editor';if(i.has(o)){for(var s=!1,a=this.get('toolbar'),c=0;c<a.length;c++)if('image-editor'===a[c].command){s=!0;break}s||(a.push({attributes:{class:'fa fa-pencil'},command:o}),this.set('toolbar',a))}}},getAttrToHTML:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=l["a"].prototype.getAttrToHTML.apply(this,e),i=this.getSrcResult();return i&&(r.src=i),r},getSrcResult:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.get(t.fallback?'fallback':'src')||'',n=e;return e&&'<svg'===e.substr(0,4)&&(n="data:image/svg+xml;base64,".concat(window.btoa(e))),n},isDefaultSrc:function(){return this.get('src')===Object(a["result"])(this,'defaults').src},toJSON:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=l["a"].prototype.toJSON.apply(this,e);return r.attributes&&r.src===r.attributes.src&&delete r.src,r},parseUri:function(t){var e=document.createElement('a');e.href=t;for(var n={},r=e.search.substring(1).split('&'),i=0;i<r.length;i++){var o=r[i].split('='),s=decodeURIComponent(o[0]);s&&(n[s]=decodeURIComponent(o[1]))}return{hostname:e.hostname,pathname:e.pathname,protocol:e.protocol,search:e.search,hash:e.hash,port:e.port,query:n}}},{isComponent:function(t){return'img'===Object(d["toLowerCase"])(t.tagName)}});function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y=q.extend({defaults:K(K({},q.prototype.defaults),{},{type:'map',src:'',void:0,mapUrl:'https://maps.google.com/maps',tagName:'iframe',mapType:'q',address:'',zoom:'1',attributes:{frameborder:0},toolbar:l["a"].prototype.defaults.toolbar,traits:[{label:'Address',name:'address',placeholder:'eg. London, UK',changeProp:1},{type:'select',label:'Map type',name:'mapType',changeProp:1,options:[{value:'q',name:'Roadmap'},{value:'w',name:'Satellite'}]},{label:'Zoom',name:'zoom',type:'range',min:'1',max:'20',changeProp:1}]}),initialize:function(t,e){this.get('src')?this.parseFromSrc():this.updateSrc(),q.prototype.initialize.apply(this,arguments),this.listenTo(this,'change:address change:zoom change:mapType',this.updateSrc)},updateSrc:function(){this.set('src',this.getMapUrl())},getMapUrl:function(){var t=this.get('address'),e=this.get('zoom'),n=this.get('mapType');t=t?'&q='+t:'',e=e?'&z='+e:'',n=n?'&t='+n:'';var r=this.get('mapUrl')+'?'+t+e+n;return r+='&output=embed'},parseFromSrc:function(){var t=this.parseUri(this.get('src')).query;t.q&&this.set('address',t.q),t.z&&this.set('zoom',t.z),t.t&&this.set('mapType',t.t)}},{isComponent:function(t){var e='';return'iframe'==Object(d["toLowerCase"])(t.tagName)&&/maps\.google\.com/.test(t.src)&&(e={type:'map',src:t.src}),e}}),J=(n(3),f["default"].extend({tagName:'img',events:{dblclick:'onActive',click:'initResize',error:'onError',load:'onLoad',dragstart:'noDrag'},initialize:function(t){f["default"].prototype.initialize.apply(this,arguments),this.listenTo(this.model,'change:src',this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},fetchFile:function(){if(!this.modelOpt.temporary){var t=this.model,e=this.em,n=t.get('file');if(n&&e){var r=e.get('AssetManager').FileUploader();console.log('ComponentImageView.js => fetchFile'),null==r||r.uploadFile({dataTransfer:{files:[n]}},(function(e){var n=e&&e.data&&e.data[0],r=n&&(Object(a["isString"])(n)?n:n.src);r&&t.set({src:r})})),t.set('file','')}}},updateSrc:function(){var t=this.model,e=this.classEmpty,n=this.$el,r=t.getSrcResult(),i=r&&!t.isDefaultSrc();t.addAttributes({src:r}),n[i?'removeClass':'addClass'](e)},onActive:function(t){t&&t.stopPropagation();var e=this.em,n=this.model,r=e&&e.get('AssetManager');r&&n.get('editable')&&r.open({select:function(t,e){n.set({src:t.getSrc()}),e&&r.close()},target:n,types:['image'],accept:'image/*'})},onError:function(){var t=this.model.getSrcResult({fallback:1});t&&(this.el.src=t)},onLoad:function(){this.em.trigger('change:canvasOffset')},noDrag:function(t){return t.preventDefault(),!1},render:function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this.$el,e=this.model,n=t.attr('class')||'';return!e.get('src')&&t.attr('class',"".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this}})),X=J.extend({tagName:'div',events:{},initialize:function(t){J.prototype.initialize.apply(this,arguments),this.classEmpty=this.ppfx+'plh-map'},updateSrc:function(){this.getIframe().src=this.model.get('src')},getIframe:function(){if(!this.iframe){var t=document.createElement('iframe');t.src=this.model.get('src'),t.frameBorder=0,t.style.height='100%',t.style.width='100%',t.className=this.ppfx+'no-pointer',this.iframe=t}return this.iframe},render:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return J.prototype.render.apply(this,e),this.updateClasses(),this.el.appendChild(this.getIframe()),this}}),Z=n(6),Q=n.n(Z),tt=n(5),et=n.n(tt),nt=n(7),rt=n.n(nt),it=n(8),ot=n.n(it),st=n(4),at=n.n(st);function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=at()(t);if(e){var i=at()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ot()(this,n)}}var ft=function(t){rt()(n,t);var e=ut(n);function n(){return et()(this,n),e.apply(this,arguments)}return Q()(n)}(l["a"]);function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}ft.prototype.defaults=lt(lt({},l["a"].getDefaults()),{},{type:'text',droppable:!1,editable:!0});var pt=ft.extend({defaults:dt(dt({},ft.prototype.defaults),{},{type:'link',tagName:'a',traits:['title','href','target']}),getAttrToHTML:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ft.prototype.getAttrToHTML.apply(this,e);return delete r.onmousedown,r}},{isComponent:function(t){var e;if('a'===Object(d["toLowerCase"])(t.tagName)){e={type:'link',editable:0};var n=t.childNodes,r=n.length;r||delete e.editable;for(var i=0;i<r;i++){var o=n[i];if(3==o.nodeType&&''!=o.textContent.trim()){delete e.editable;break}}}return e}}),gt=n(38),vt=n.n(gt),mt=n(31),yt=n.n(mt),bt=n(9);function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xt=f["default"].prototype,Ct=f["default"].extend({events:{dblclick:'onActive',input:'onInput'},initialize:function(t){xt.initialize.apply(this,arguments),Object(a["bindAll"])(this,'disableEditing','onDisable');var e=this.model,n=this.em;this.listenTo(e,'focus',this.onActive),this.listenTo(e,'change:content',this.updateContentText),this.listenTo(e,'sync:content',this.syncContent),this.rte=n&&n.get('RichTextEditor')},updateContentText:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!n.fromDisable&&this.disableEditing()},canActivate:function(){var t,e=this.model,n=this.rteEnabled,r=this.em,i=(null==r?void 0:r.getEditing())===e,o=!0,s=!1;if((n||!e.get('editable')||i||(s=e.isChildOf('text')))&&(o=!1,s&&!e.get('textable'))){for(var a=e.parent();a&&!a.isInstanceOf('text');)a=a.parent();t=a}return{result:o,delegate:t}},onActive:function(t){var e=this;return vt()(yt.a.mark((function n(){var r,i,o,s,a,c;return yt.a.wrap((function(n){for(;1;)switch(n.prev=n.next){case 0:if(i=e.rte,o=e.em,s=e.canActivate(),a=s.result,c=s.delegate,a){n.next=5;break}return c&&(o.setSelected(c),c.trigger('active',t)),n.abrupt("return");case 5:if(null==t||null===(r=t.stopPropagation)||void 0===r||r.call(t),e.lastContent=e.getContent(),!i){n.next=17;break}return n.prev=8,n.next=11,i.enable(e,e.activeRte,{event:t});case 11:e.activeRte=n.sent,n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](8),o.logError(n.t0);case 17:e.toggleEvents(1);case 18:case"end":return n.stop()}}),n,null,[[8,14]])})))()},onDisable:function(){this.disableEditing()},disableEditing:function(){var t=arguments,e=this;return vt()(yt.a.mark((function n(){var r,i,o,s,a,c;return yt.a.wrap((function(n){for(;1;)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:{},i=e.model,o=e.rte,s=e.activeRte,a=e.em,c=i&&i.get('editable'),!o){n.next=13;break}return n.prev=4,n.next=7,o.disable(e,s);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](4),a.logError(n.t0);case 12:c&&e.getContent()!==e.lastContent&&(e.syncContent(r),e.lastContent='');case 13:e.toggleEvents();case 14:case"end":return n.stop()}}),n,null,[[4,9]])})))()},getContent:function(){var t=this.activeRte;return t&&'function'==typeof t.getContent?t.getContent():this.getChildrenContainer().innerHTML},syncContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.model,n=this.rte,r=this.rteEnabled;if(r||t.force){var i=this.getContent(),o=e.components(),s=Ot({fromDisable:1},t);e.set('content','',s);var a=e.getId(),c={id:a,rteCustomRte:n.customRte,rteEnabled:r,content:i,opts:t};n.customRte?(o.length&&o.reset(null,t),e.set('content',i,s)):o.resetFromString(i,t);var l={action:'update-content',opts:c};bt["c"]==bt["d"].Synced?(Object(bt["h"])(bt["d"].ApplyingLocalOp),Object(bt["b"])(l)):bt["c"]!=bt["d"].AwaitingACK&&bt["c"]!=bt["d"].AwaitingWithBuffer||(Object(bt["h"])(bt["d"].ApplyingBufferedLocalOp),Object(bt["a"])(l))}},insertComponent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model,r=this.el,i=r.ownerDocument,o=i.getSelection();if(null!=o&&o.rangeCount){var s,a=o.getRangeAt(0),c=a.startContainer,l=a.startOffset,u=Object(d["getModel"])(c),f=[];if(u&&null!==(s=u.is)&&void 0!==s&&s.call(u,'textnode')){var h=u.collection;h.forEach((function(e){if(e===u){var n='textnode',r=e.get('content');f.push({type:n,content:r.slice(0,l)}),f.push(t),f.push({type:n,content:r.slice(l)})}else f.push(e)}));var p=f.filter(Boolean),g=p.indexOf(t);return h.reset(p,e),h.at(g)}}return n.append(t,e)},onInput:function(){var t=this.em,e='component',n=["".concat(e,":update"),"".concat(e,":input")].join(' ');t&&t.trigger(n,this.model)},disablePropagation:function(t){t.stopPropagation()},toggleEvents:function(t){var e=this.em,n=this.model,r=this.$el,i={on:d["on"],off:d["off"]},o=t?'on':'off';e.setEditing(t?this:0),this.rteEnabled=!!t;var s=[this.el.ownerDocument,document];if(i.off(s,'mousedown',this.onDisable),i[o](s,'mousedown',this.onDisable),e[o]('toolbar:run:before',this.onDisable),n&&(n[o]('removed',this.onDisable),n.trigger("rte:".concat(t?'enable':'disable'))),r&&r.off('mousedown',this.disablePropagation),r&&r[o]('mousedown',this.disablePropagation),this.config.draggableComponents)for(var a=this.el;a;)a.draggable=!t,(a=a.parentNode)&&'BODY'==a.tagName&&(a=0)}}),St=Ct.extend({render:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ct.prototype.render.apply(this,e),this.el.addEventListener('click',this.prevDef,!0),this}});function kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Et='label',_t=ft.extend({defaults:jt(jt({},ft.prototype.defaults),{},{type:Et,tagName:Et,traits:['id','title','for']})},{isComponent:function(t){return Object(d["toLowerCase"])(t.tagName)===Et}}),Pt=St.extend({tagName:'span'});function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function At(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Dt='video',Mt='yt',Lt='vi',Rt='ytnc',Nt=q.extend({defaults:At(At({},q.prototype.defaults),{},{type:Dt,tagName:Dt,videoId:'',void:0,provider:'so',ytUrl:'https://www.youtube.com/embed/',ytncUrl:'https://www.youtube-nocookie.com/embed/',viUrl:'https://player.vimeo.com/video/',loop:0,poster:'',muted:0,autoplay:0,controls:1,color:'',list:'',rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:'allowfullscreen'}}),initialize:function(t,e){this.em=e.em,this.get('src')&&this.parseFromSrc(),this.updateTraits(),this.listenTo(this,'change:provider',this.updateTraits),this.listenTo(this,'change:videoId change:provider',this.updateSrc),q.prototype.initialize.apply(this,arguments)},updateTraits:function(){var t,e='iframe';switch(this.get('provider')){case Mt:case Rt:t=this.getYoutubeTraits();break;case Lt:t=this.getVimeoTraits();break;default:e='video',t=this.getSourceTraits()}this.set({tagName:e},{silent:1}),this.set({traits:t}),this.em.trigger('component:toggled')},parseFromSrc:function(){var t=this.get('provider'),e=this.parseUri(this.get('src')),n=e.query;switch(t){case Mt:case Rt:case Lt:var r=e.pathname.split('/').pop();this.set('videoId',r),n.list&&this.set('list',n.list),n.autoplay&&this.set('autoplay',1),n.loop&&this.set('loop',1),0===parseInt(n.controls)&&this.set('controls',0),n.color&&this.set('color',n.color),'0'===n.rel&&this.set('rel',0),'1'===n.modestbranding&&this.set('modestbranding',1)}},updateSrc:function(){var t='';switch(this.get('provider')){case Mt:t=this.getYoutubeSrc();break;case Rt:t=this.getYoutubeNoCookieSrc();break;case Lt:t=this.getVimeoSrc()}this.set({src:t})},getAttrToHTML:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=q.prototype.getAttrToHTML.apply(this,e),i=this.get('provider');switch(i){case Mt:case Rt:case Lt:break;default:this.get('loop')&&(r.loop='loop'),this.get('autoplay')&&(r.autoplay='autoplay'),this.get('controls')&&(r.controls='controls')}return r},getProviderTrait:function(){return{type:'select',label:'Provider',name:'provider',changeProp:1,options:[{value:'so',name:'HTML5 Source'},{value:Mt,name:'Youtube'},{value:Rt,name:'Youtube (no cookie)'},{value:Lt,name:'Vimeo'}]}},getSourceTraits:function(){return[this.getProviderTrait(),{label:'Source',name:'src',placeholder:'eg. ./media/video.mp4',changeProp:1},{label:'Poster',name:'poster',placeholder:'eg. ./media/image.jpg'},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},getYoutubeTraits:function(){return[this.getProviderTrait(),{label:'Video ID',name:'videoId',placeholder:'eg. jNQXAC9IVRw',changeProp:1},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:'checkbox',label:'Related',name:'rel',changeProp:1},{type:'checkbox',label:'Modest',name:'modestbranding',changeProp:1}]},getVimeoTraits:function(){return[this.getProviderTrait(),{label:'Video ID',name:'videoId',placeholder:'eg. 123456789',changeProp:1},{label:'Color',name:'color',placeholder:'eg. FF0000',changeProp:1},this.getAutoplayTrait(),this.getLoopTrait()]},getAutoplayTrait:function(){return{type:'checkbox',label:'Autoplay',name:'autoplay',changeProp:1}},getLoopTrait:function(){return{type:'checkbox',label:'Loop',name:'loop',changeProp:1}},getControlsTrait:function(){return{type:'checkbox',label:'Controls',name:'controls',changeProp:1}},getYoutubeSrc:function(){var t=this.get('videoId'),e=this.get('ytUrl'),n=this.get('list');return e+=t+(t.indexOf('?')<0?'?':''),e+=n?"&list=".concat(n):'',e+=this.get('autoplay')?'&autoplay=1':'',e+=this.get('controls')?'':'&controls=0&showinfo=0',e+=this.get('loop')?"&loop=1&playlist=".concat(t):'',e+=this.get('rel')?'':'&rel=0',e+=this.get('modestbranding')?'&modestbranding=1':''},getYoutubeNoCookieSrc:function(){var t=this.getYoutubeSrc();return t=t.replace(this.get('ytUrl'),this.get('ytncUrl'))},getVimeoSrc:function(){var t=this.get('viUrl');return t+=this.get('videoId')+'?',t+=this.get('autoplay')?'&autoplay=1':'',t+=this.get('loop')?'&loop=1':'',t+=this.get('controls')?'':'&title=0&portrait=0&badge=0',t+=this.get('color')?'&color='+this.get('color'):''}},{isComponent:function(t){var e='',n=t.tagName,r=t.src,i=/youtube\.com\/embed/.test(r),o=/youtube-nocookie\.com\/embed/.test(r),s=/player\.vimeo\.com\/video/.test(r),a=i||o||s;return(Object(d["toLowerCase"])(n)==Dt||'iframe'==Object(d["toLowerCase"])(n)&&a)&&(e={type:'video'},r&&(e.src=r),a&&(i?e.provider=Mt:o?e.provider=Rt:s&&(e.provider=Lt))),e}}),It=J.extend({tagName:'div',events:{},initialize:function(t){f["default"].prototype.initialize.apply(this,arguments);var e=this.model,n=['loop','autoplay','controls','color','rel','modestbranding','poster'],r=n.map((function(t){return"change:".concat(t)})).join(' ');this.listenTo(e,'change:provider',this.updateProvider),this.listenTo(e,'change:src',this.updateSrc),this.listenTo(e,r,this.updateVideo)},updateProvider:function(){var t=this.model.get('provider');this.el.innerHTML='',this.el.appendChild(this.renderByProvider(t))},updateSrc:function(){var t=this.model,e=this.videoEl;if(e){var n=t.get('provider'),r=t.get('src');switch(n){case'yt':r=t.getYoutubeSrc();break;case'ytnc':r=t.getYoutubeNoCookieSrc();break;case'vi':r=t.getVimeoSrc()}e.src=r}},updateVideo:function(){var t=this.model.get('provider'),e=this.videoEl,n=this.model;switch(t){case'yt':case'ytnc':case'vi':this.model.trigger('change:videoId');break;default:e.loop=n.get('loop'),e.autoplay=n.get('autoplay'),e.controls=n.get('controls'),e.poster=n.get('poster')}},renderByProvider:function(t){var e;switch(t){case'yt':e=this.renderYoutube();break;case'ytnc':e=this.renderYoutubeNoCookie();break;case'vi':e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},renderSource:function(){var t=document.createElement('video');return t.src=this.model.get('src'),this.initVideoEl(t),t},renderYoutube:function(){var t=document.createElement('iframe');return t.src=this.model.getYoutubeSrc(),t.frameBorder=0,t.setAttribute('allowfullscreen',!0),this.initVideoEl(t),t},renderYoutubeNoCookie:function(){var t=document.createElement('iframe');return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder=0,t.setAttribute('allowfullscreen',!0),this.initVideoEl(t),t},renderVimeo:function(){var t=document.createElement('iframe');return t.src=this.model.getVimeoSrc(),t.frameBorder=0,t.setAttribute('allowfullscreen',!0),this.initVideoEl(t),t},initVideoEl:function(t){t.className=this.ppfx+'no-pointer',t.style.height='100%',t.style.width='100%'},render:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];J.prototype.render.apply(this,e),this.updateClasses();var r=this.model.get('provider');return this.el.appendChild(this.renderByProvider(r)),this.updateVideo(),this}});function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vt='script',Ut=l["a"].extend({defaults:Bt(Bt({},l["a"].prototype.defaults),{},{type:Vt,tagName:Vt,droppable:!1,draggable:!1,layerable:!1})},{isComponent:function(t){if(Object(d["toLowerCase"])(t.tagName)==Vt){var e={type:Vt};return t.src&&(e.src=t.src,e.onload=t.onload),e}}}),zt=J.extend({tagName:'script',events:{},render:function(){var t=this.model,e=this.em,n=t.get('src'),r=e&&e.get('scriptCount'),i=r||0,o='';if(n){var s=t.get('onload'),a="script".concat(i),c="script".concat(i+1),l="".concat(a,"Start"),u="".concat(c,"Start");o="\n        var ".concat(a," = document.createElement('script');\n        ").concat(a,".onload = function() {\n          ").concat(s?"".concat(s,"();\n"):'',"\n          typeof ").concat(u," == 'function' && ").concat(u,"();\n        };\n        ").concat(a,".src = '").concat(n,"';\n        function ").concat(l,"() { document.body.appendChild(").concat(a,"); };\n        ").concat(i?'':"".concat(l,"();"),"\n      "),e&&e.set('scriptCount',i+1)}else o=t.__innerHTML();return this.el.innerHTML=o,this.postRender(),this}});function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $t='svg',qt=l["a"].extend({defaults:Wt(Wt({},l["a"].prototype.defaults),{},{type:$t,tagName:$t,highlightable:0,resizable:{ratioDefault:1}}),getName:function(){var t=this.get('tagName'),e=this.get('custom-name');return t=t.charAt(0).toUpperCase()+t.slice(1),e||t}},{isComponent:function(t){return Object(d["toLowerCase"])(t.tagName)===$t}});function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Yt=qt.extend({defaults:Kt(Kt({},qt.prototype.defaults),{},{selectable:!1,hoverable:!1,layerable:!1})},{isComponent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!e.inSvg}}),Jt=f["default"].extend({_createElement:function(t){return document.createElementNS('http://www.w3.org/2000/svg',t)}});function Xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qt=l["a"].extend({defaults:Zt(Zt({},l["a"].prototype.defaults),{},{tagName:'',droppable:!1,layerable:!1,selectable:!1,editable:!0}),toHTML:function(){var t=this.parent(),e=this.get('content');return t&&t.is('script')?e:Object(d["escape"])(e)}},{isComponent:function(t){var e='';return 3===t.nodeType&&(e={type:'textnode',content:t.textContent}),e}});function te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var ee=Qt.extend({defaults:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?te(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Qt.prototype.defaults),toHTML:function(){return"\x3c!--".concat(this.get('content'),"--\x3e")}},{isComponent:function(t){if(8==t.nodeType)return{tagName:'NULL',type:'comment',content:t.textContent}}}),ne=f["default"].extend({initialize:function(){f["default"].prototype.initialize.apply(this,arguments)},_setAttributes:function(){},renderAttributes:function(){},updateStatus:function(){},updateClasses:function(){},setAttribute:function(){},updateAttributes:function(){},initClasses:function(){},initComponents:function(){},delegateEvents:function(){},_createElement:function(){return document.createTextNode('')},render:function(){var t=this.model,e=this.el;return t.opt.temporary||(e.textContent=t.get('content')),this}}),re=ne.extend({_createElement:function(){return document.createComment(this.model.get('content'))}});function ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var se=l["a"].extend({defaults:oe(oe({},l["a"].prototype.defaults),{},{__wrapper:1,removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:['background','background-color','background-image','background-repeat','background-attachment','background-position','background-size']}),__postAdd:function(){var t=this.em&&this.em.get('UndoManager');return t&&!this.__hasUm&&t.add(this),l["a"].prototype.__postAdd.call(this,arguments)},__postRemove:function(){var t=this.em&&this.em.get('UndoManager');return t&&t.remove(this),l["a"].prototype.__postRemove.call(this,arguments)}},{isComponent:function(){return!1}});function ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var le='iframe',ue=l["a"].extend({defaults:function(){return ce(ce({},l["a"].prototype.defaults),{},{type:le,tagName:le,droppable:!1,resizable:!0,traits:['id','title','src'],attributes:{frameborder:'0'}})}},{isComponent:function(t){return Object(d["toLowerCase"])(t.tagName)===le}}),fe=n(14),he=f["default"].extend({tagName:'div',initialize:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];f["default"].prototype.initialize.apply(this,e),this.listenTo(this.model,'change:attributes:src',this.updateSrc)},updateSrc:function(){var t=Object(fe["h"])(this.el,'iframe')[0];t&&Object(fe["d"])(t,{src:this.__getSrc()})},render:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];f["default"].prototype.render.apply(this,e);var r=Object(fe["f"])('iframe',{class:"".concat(this.ppfx,"no-pointer"),style:'width: 100%; height: 100%; border: none',src:this.__getSrc()});return this.el.appendChild(r),this},__getSrc:function(){return this.model.getAttributes().src||''}});function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["default"]=function(){var t,e,n,r={},i={},o=[{id:'cell',model:v,view:m},{id:'row',model:O,view:x},{id:'table',model:j,view:E},{id:'thead',model:R,view:N},{id:'tbody',model:A,view:I},{id:'tfoot',model:U,view:z},{id:'map',model:Y,view:X},{id:'link',model:pt,view:St},{id:'label',model:_t,view:Pt},{id:'video',model:Nt,view:It},{id:'image',model:q,view:J},{id:'script',model:Ut,view:zt},{id:'svg-in',model:Yt,view:Jt},{id:'svg',model:qt,view:Jt},{id:'iframe',model:ue,view:he},{id:'comment',model:ee,view:re},{id:'textnode',model:Qt,view:ne},{id:'text',model:ft,view:Ct},{id:'wrapper',model:se,view:f["default"]},{id:'default',model:l["a"],view:f["default"]}];return{Component:l["a"],Components:u["b"],ComponentsView:h["a"],componentTypes:o,componentsById:i,name:'DomComponents',getConfig:function(){return r},storageKey:function(){var t=[],e=r.stm&&r.stm.getConfig()||{};return e.storeHtml&&t.push('html'),e.storeComponents&&t.push('components'),t},init:function(e){var n=this;for(var i in t=(r=e||{}).em,this.em=t,t&&(r.components=t.config.components||r.components),c)i in r||(r[i]=c[i]);var s=r.pStylePrefix;if(s&&(r.stylePrefix=s+r.stylePrefix),t){r.modal=t.get('Modal')||'',r.am=t.get('AssetManager')||'',t.get('Parser').compTypes=o,t.on('change:componentHovered',this.componentHovered,this);var a=t.get('selected');t.listenTo(a,'add',(function(t,e,r){return n.selectAdd(a.getComponent(t),r)})),t.listenTo(a,'remove',(function(t,e,r){return n.selectRemove(a.getComponent(t),r)}))}return t.get('hasPages')&&(r.components=''),this},onLoad:function(){r.components&&this.setComponents(r.components,{silent:1})},load:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'',e=this.em,n='';!t&&r.stm&&(t=r.em.getCacheLoad());var i=t,o=i.components,s=i.html;if(o)if(Object(a["isObject"])(o)||Object(a["isArray"])(o))n=o;else try{n=JSON.parse(o)}catch(t){e&&e.logError(t)}else s&&(n=s);var c=n&&n.constructor===Object;return(n&&n.length||c)&&(this.clear(),c?this.getWrapper().set(n):this.getComponents().add(n)),n},store:function(t){if(!r.stm||this.em.get('hasPages'))return{};var e={},n=this.storageKey();if(n.indexOf('html')>=0&&(e.html=r.em.getHtml()),n.indexOf('components')>=0){var i=r.storeWrapper?this.getWrapper():this.getComponents();e.components=JSON.stringify(i)}return t||r.stm.store(e),e},getComponent:function(){var t=this.em.get('PageManager').getSelected(),e=t&&t.getMainFrame();return e&&e.getComponent()},getWrapper:function(){return this.getComponent()},getComponents:function(){var t=this.getWrapper();return t&&t.get('components')},addComponent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getComponents().add(t,e)},render:function(){return n.render().el},clear:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getComponents().map((function(t){return t})).forEach((function(e){return e.remove(t)})),this},setComponents:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.clear(e).addComponent(t,e)},addType:function(t,e){var n=this.em,r=e.model,i=void 0===r?{}:r,c=e.view,l=void 0===c?{}:c,u=e.isComponent,f=e.extend,h=e.extendView,d=e.extendFn,p=void 0===d?[]:d,g=e.extendFnView,v=void 0===g?[]:g,m=this.getType(t),y=this.getType(f),b=this.getType(h),w=y||(m||this.getType('default')),O=w.model,x=b?b.view:w.view,C=function(t,e,n){return t.reduce((function(t,r){var i=e[r],o=n.prototype[r];return i&&o&&(t[r]=function(){o.bind(this).apply(void 0,arguments),i.bind(this).apply(void 0,arguments)}),t}),{})};'object'===s()(i)&&(e.model=O.extend(pe(pe(pe({},i),C(p,i,O)),{},{defaults:pe(pe({},Object(a["result"])(O.prototype,'defaults')||{}),Object(a["result"])(i,'defaults')||{})}),{isComponent:!m||y||u?u||function(){return 0}:O.isComponent})),'object'===s()(l)&&(e.view=x.extend(pe(pe({},l),C(v,l,x)))),m?(m.model=e.model,m.view=e.view):(e.id=t,o.unshift(e));var S="component:type:".concat(m?'update':'add');return n&&n.trigger(S,m||e),this},getType:function(t){for(var e=o,n=0;n<e.length;n++){if(e[n].id==t)return e[n]}},removeType:function(t){var e=o,n=this.getType(t);if(n){var r=e.indexOf(n);return e.splice(r,1),n}},getTypes:function(){return o},selectAdd:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&(t.set({status:'selected'}),['component:selected','component:toggled'].forEach((function(r){return e.em.trigger(r,t,n)})))},selectRemove:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){this.em;t.set({status:'',state:''}),['component:deselected','component:toggled'].forEach((function(r){return e.em.trigger(r,t,n)}))}},componentHovered:function(){var t=r.em,e=t.get('componentHovered'),n=t.previous('componentHovered'),i='hovered';n&&n.get('status')==i&&n.set({status:'',state:''}),e&&Object(a["isEmpty"])(e.get('status'))&&e.set('status',i)},getShallowWrapper:function(){var t=this.shallow,e=this.em;if(!t&&e){var n=e.get('shallow');if(!n)return;var r=n.get('DomComponents');if(r.componentTypes=this.componentTypes,t=r.getWrapper()){var i=[l["c"],l["d"]].join(' ');t.on(i,Object(a["debounce"])((function(){return t.components('')}),100))}this.shallow=t}return t},canMove:function(t,e,n){var r=n||0===n?n:null,i={result:!1,reason:0,target:t,source:null};if(!e)return i;var o=null!=e&&e.toHTML?e:null;if(!o){var s=this.getShallowWrapper();o=null==s?void 0:s.append(e)[0]}if(i.source=o,!o)return i;var c=o.get('draggable');if(Object(a["isFunction"])(c))c=!!c(o,t,r);else{var l=t.getEl();c=Object(a["isArray"])(c)?c.join(','):c,c=Object(a["isString"])(c)?null==l?void 0:l.matches(c):c}if(!c)return pe(pe({},i),{},{reason:1});var u=t.get('droppable');if(Object(a["isFunction"])(u))u=!!u(o,t,r);else if(!1===u&&t.isInstanceOf('text')&&o.get('textable'))u=!0;else{var f=o.getEl();u=Object(a["isArray"])(u)?u.join(','):u,u=Object(a["isString"])(u)?null==f?void 0:f.matches(u):u}return pe(pe({},i),{},u?{result:!0}:{reason:2})},allById:function(){return i},getById:function(t){return i[t]||null},destroy:function(){var o=this.allById();Object.keys(o).forEach((function(t){return o[t]&&o[t].remove()})),n&&n.remove(),[r,t,i,e,n].forEach((function(t){return{}})),this.em={}}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"evAll",(function(){return Se})),n.d(e,"evPfx",(function(){return ke})),n.d(e,"evSector",(function(){return je})),n.d(e,"evSectorAdd",(function(){return Ee})),n.d(e,"evSectorRemove",(function(){return _e})),n.d(e,"evSectorUpdate",(function(){return Pe})),n.d(e,"evProp",(function(){return Te})),n.d(e,"evPropAdd",(function(){return Ae})),n.d(e,"evPropRemove",(function(){return De})),n.d(e,"evPropUp",(function(){return Me})),n.d(e,"evLayerSelect",(function(){return Le})),n.d(e,"evTarget",(function(){return Re})),n.d(e,"evCustom",(function(){return Ne}));var r=n(12),i=n.n(r),o=n(2),s=n.n(o),a=n(0),c=n(1),l=n(32),u=n(3),f=n.n(u),h={sectors:[{name:'General',open:!1,properties:['display','float','position','top','right','left','bottom']},{name:'Flex',open:!1,properties:['flex-direction','flex-wrap','justify-content','align-items','align-content','order','flex-basis','flex-grow','flex-shrink','align-self']},{name:'Dimension',open:!1,properties:['width','height','max-width','min-height','margin','padding']},{name:'Typography',open:!1,properties:['font-family','font-size','font-weight','letter-spacing','color','line-height','text-align','text-shadow']},{name:'Decorations',open:!1,properties:['background-color','border-radius','border','box-shadow','background']},{name:'Extra',open:!1,properties:['opacity','transition']}],appendTo:'',stylePrefix:'sm-',custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:['width','height']},d=n(23),p=n.n(d),g=n(5),v=n.n(g),m=n(6),y=n.n(m),b=n(7),w=n.n(b),O=n(8),x=n.n(O),C=n(4),S=n.n(C),k=n(56),j=["partial"];function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var T=function(t){w()(n,t);var e=P(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.em=e.em;var r=this.get('id')||'',i=this.get('name')||this.get('label')||'';!this.get('property')&&this.set('property',(i||r).replace(/ /g,'-'));var o=this.get('property');!this.get('id')&&this.set('id',o),!i&&this.set('name',Object(c["capitalize"])(o).replace(/-/g,' ')),this.on('change',this.__upTargets),n.callInit(this,t,e)}},{key:"__getParentProp",value:function(){var t,e;return null===(t=this.collection)||void 0===t||null===(e=t.opts)||void 0===e?void 0:e.parentProp}},{key:"__upTargets",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,o=r.get('StyleManager'),c=this.getName(),l=n.__clear,u=l?'':this.__getFullValue(n),f=this.__getParentProp(),h=this.changedAttributes(),d=Object(a["keys"])(h).reduce((function(t,n){return t[n]=e.previous(n),t}),{}),p=[].concat(i()(Object(a["keys"])(this.__getClearProps())),['__p']),g=Object(a["keys"])(h),v=!n.__up&&!f&&(l||p.some((function(t){return g.indexOf(t)>=0}))),m=this.get('onChange'),y={property:this,from:d,to:h,value:u,opts:n};o.__trgEv(o.events.propertyUpdate,y),m&&m(y),v&&this.__upTargetsStyle(s()({},c,u),n)}},{key:"__upTargetsStyle",value:function(t,e){var n,r=null===(n=this.em)||void 0===n?void 0:n.get('StyleManager');null==r||r.addStyleTargets(_(_({},t),{},{__p:!!e.avoidStore}),e)}},{key:"_up",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.noTarget&&(e.__up=!0);var n=e.partial,r=p()(e,j);return t.__p=!(!r.avoidStore&&!n),this.set(t,_(_({},r),{},{avoidStore:t.__p}))}},{key:"up",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.set(t,_(_({},e),{},{__up:!0}))}},{key:"init",value:function(){}},{key:"getId",value:function(){return this.get('id')}},{key:"getType",value:function(){return this.get('type')}},{key:"getName",value:function(){return this.get('property')}},{key:"getLabel",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.locale,r=void 0===n||n,i=this.getId(),o=this.get('name')||this.get('label');return r&&(null===(t=this.em)||void 0===t?void 0:t.t("styleManager.properties.".concat(i)))||o}},{key:"getValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.noDefault,n=this.get('value');return this.hasValue()||e?n:this.getDefaultValue()}},{key:"hasValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.noParent,n=e&&this.getParentTarget(),r=this.get('value');return!Object(a["isUndefined"])(r)&&''!==r&&!n}},{key:"hasValueParent",value:function(){return this.hasValue()&&!this.hasValue({noParent:!0})}},{key:"getStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getName(),n=t.camelCase?Object(c["camelCase"])(e):e;return s()({},n,this.__getFullValue(t))}},{key:"getDefaultValue",value:function(){var t=this.get('default');return"".concat(Object(a["isUndefined"])(t)?this.get('defaults'):t)}},{key:"upValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null===t||''===t?this.__getClearProps():this.__parseValue(t,e);return this._up(n,e)}},{key:"isVisible",value:function(){return!!this.get('visible')}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._up(this.__getClearProps(),_(_({},t),{},{__clear:!0}))}},{key:"canClear",value:function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})}},{key:"getParent",value:function(){return this.__getParentProp()||null}},{key:"isFull",value:function(){return!!this.get('full')}},{key:"__parseValue",value:function(t,e){return this.parseValue(t,e)}},{key:"__getClearProps",value:function(){return{value:''}}},{key:"setValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.parseValue(t),i=!e;!i&&this.set({value:void 0},{avoidStore:i,silent:!0}),this.set(r,_({avoidStore:i},n))}},{key:"setValueFromInput",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.setValue(t,e,_(_({},n),{},{fromInput:1}))}},{key:"parseValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={value:t},r='!important';if(Object(a["isString"])(t)&&-1!==t.indexOf(r)&&(n.value=t.replace(r,'').trim(),n.important=1),!this.get('functionName')&&!e.complete)return n;var i=[],o="".concat(n.value),s=o.indexOf('(')+1,c=o.lastIndexOf(')'),l=o.substring(0,s-1);if(l&&(n.functionName=l),i.push(s),c>=0&&i.push(c),n.value=String.prototype.substring.apply(o,i),e.numeric){var u=parseFloat(n.value);n.unit=n.value.replace(u,''),n.value=u}return n}},{key:"__getFullValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.withDefault;return!this.hasValue()&&e?this.getDefaultValue():this.getFullValue()}},{key:"getFullValue",value:function(t){var e=this.get('functionName'),n=this.getDefaultValue(),r=Object(a["isUndefined"])(t)?this.get('value'):t,i=!Object(a["isUndefined"])(r)&&''!==r;if(r&&n&&r===n)return n;if(e&&i){var o='url'===e?"'".concat(r.replace(/'/g,''),"'"):r;r="".concat(e,"(").concat(o,")")}return i&&this.get('important')&&(r="".concat(r," !important")),r||''}},{key:"__setParentTarget",value:function(t){this.__parentTarget=t}},{key:"getParentTarget",value:function(){return this.__parentTarget||null}},{key:"__parseFn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'',e=t.indexOf('(')+1,n=t.lastIndexOf(')');return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,n>=0?n:void 0]).trim()}}},{key:"__checkVisibility",value:function(t){var e=t.target,n=t.component,r=t.sectors,i=n||e;if(!i)return!1;var o=this.getId(),s=this.getName(),l=this.get('toRequire'),u=this.get('requires'),f=this.get('requiresParent'),h=i.get('unstylable'),d=i.get('stylable-require'),p=i.get('stylable');if(Object(a["isArray"])(p)&&(p=p.indexOf(s)>=0),Object(a["isArray"])(h)&&(p=h.indexOf(s)<0),l&&(p=!e||d&&(d.indexOf(o)>=0||d.indexOf(s)>=0)),r&&u){var g=Object(a["keys"])(u);r.forEach((function(t){t.getProperties().forEach((function(t){if(Object(a["includes"])(g,t.id)){var e=u[t.id];p=p&&Object(a["includes"])(e,t.get('value'))}}))}))}if(f){var v=n&&n.parent(),m=v&&v.getEl();if(m){var y=Object(c["hasWin"])()?window.getComputedStyle(m):{};Object(a["each"])(f,(function(t,e){p=p&&y[e]&&Object(a["includes"])(t,y[e])}))}else p=!1}return!!p}}]),n}(u["Model"]);function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}T.callParentInit=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.prototype.initialize.apply(e,[n,_(_({},r),{},{skipInit:1})])},T.callInit=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!n.skipInit&&t.init(e,n)},T.getDefaults=function(){return Object(a["result"])(this.prototype,'defaults')},T.prototype.defaults={name:'',property:'',type:'',defaults:'',info:'',value:'',icon:'',functionName:'',status:'',visible:!0,fixedValues:['initial','inherit'],onChange:null,full:0,important:0,toRequire:0,requires:null,requiresParent:null};var L=function(t){return'integer'===t||'number'===t},R=function(t){w()(n,t);var e=M(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"defaults",value:function(){return D(D({},T.getDefaults()),{},{detached:!1,properties:[],separator:' ',join:null,fromStyle:null,toStyle:null,full:!0})}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T.callParentInit(T,this,t,e);var n=this.em,r=new Jt(this.get('properties')||[],{em:n,parentProp:this});this.set('properties',r,{silent:1}),this.listenTo(r,'change',this.__upProperties),T.callInit(this,t,e)}},{key:"getProperties",value:function(){return i()(this.get('properties').models)}},{key:"getProperty",value:function(t){return this.get('properties').filter((function(e){return e.getId()===t||e.getName()===t}))[0]||null}},{key:"getPropertyAt",value:function(t){return this.get('properties').at(t)}},{key:"isDetached",value:function(){return!!this.get('detached')}},{key:"getValues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.byName;return this.getProperties().reduce((function(t,n){return t[e?n.getName():n.getId()]="".concat(n.__getFullValue()),t}),{})}},{key:"getSeparator",value:function(){return this.getSplitSeparator()}},{key:"getJoin",value:function(){return this.__getJoin()}},{key:"getStyleFromProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getName(),n=this.__getJoin(),r=this.get('toStyle'),i=this.getValues(),o={};if(r)o=r(i,{join:n,name:e,property:this});else if(i=this.getValues({byName:!0}),this.isDetached())o=i;else{var a=this.getProperties().map((function(t){return t.__getFullValue({withDefault:1})})).filter(Boolean).join(n);o=s()({},e,a)}return this.isDetached()?o[e]='':(o[e]=o[e]||'',o=D(D({},o),this.getProperties().reduce((function(t,e){return t[e.getName()]='',t}),{}))),t.camelCase?Object.keys(o).reduce((function(t,e){return t[camelCase(e)]=o[e],t}),{}):o}},{key:"getSplitSeparator",value:function(){return new RegExp("".concat(this.get('separator'),"(?![^\\(]*\\))"))}},{key:"__upProperties",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.__up&&!e.__clearIn){var n=this.__getParentProp();if(n)return n.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}}},{key:"__upTargetsStyleProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=this.getStyleFromProps();if(this.isDetached()&&e){var r=e.getName();n=s()({},r,n[r])}this.__upTargetsStyle(n,t)}},{key:"_up",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.__setProperties(this.__getSplitValue(t.value),e),T.prototype._up.call(this,t,e)}},{key:"getStyle",value:function(t){return this.getStyleFromProps(t)}},{key:"__getFullValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isDetached()||t.__clear?'':this.getStyleFromProps()[this.getName()]||''}},{key:"__getJoin",value:function(){var t=this.get('join');return Object(a["isString"])(t)?t:this.get('separator')}},{key:"__styleHasProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getName(),n=this.getProperties(),r=n.map((function(t){return t.getName()})),o=[e].concat(i()(r));return o.some((function(e){return!Object(a["isUndefined"])(t[e])&&''!==t[e]}))}},{key:"__splitValue",value:function(t,e){return t.split(e).map((function(t){return t.trim()})).filter(Boolean)}},{key:"__splitStyleName",value:function(t,e,n){return this.__splitValue(t[e]||'',n)}},{key:"__getSplitValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'',e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.byName,r=this.getProperties(),i=4===r.length&&r.every((function(t){return L(t.getType())})),o=this.__splitValue(t,this.getSplitSeparator()),s={};return r.forEach((function(t,e){var r=o[e],c=Object(a["isUndefined"])(r)?'':r;if(i){var l=o.length;c=o[e]||o[e%l+(1!=l&&l%2?1:0)]||c}var u=n?t.getName():t.getId();s[u]=c||''})),s}},{key:"__getPropsFromStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.__styleHasProps(t))return null;var n=e.byName,r=this.getName(),i=this.getProperties(),o=this.getSplitSeparator(),s=this.get('fromStyle'),c=s?s(t,{property:this,name:r,separator:o}):{};return s||(c=this.__getSplitValue(t[r]||'',{byName:n}),i.forEach((function(e){var r=t[e.getName()],i=n?e.getName():e.getId();Object(a["isUndefined"])(r)||''===r||(c[i]=r)}))),c}},{key:"__setProperties",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getProperties().forEach((function(n){var r=t[n.getId()];n.__getFullValue()!==r&&n.upValue(r,e)}));var n=Object(a["keys"])(t).map((function(e){return t[e]})).join(' ');this.set('value',n,{silent:!0})}},{key:"clear",value:function(){var t=this;return this.getProperties().map((function(e){return e.clear({__clearIn:!t.isDetached()})})),T.prototype.clear.call(this)}},{key:"hasValue",value:function(t){return this.getProperties().some((function(e){return e.hasValue(t)}))}},{key:"getFullValue",value:function(){return this.__getFullValue()}},{key:"__canClearProp",value:function(t){return this.isDetached()&&t.hasValue({noParent:!0})}}]),n}(T);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var B=function(t){w()(n,t);var e=F(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"defaults",value:function(){return{values:{}}}},{key:"initialize",value:function(){var t=this.collection;this.prop=null==t?void 0:t.prop}},{key:"getId",value:function(){return this.cid}},{key:"getIndex",value:function(){var t=this.collection;return t?t.indexOf(this):-1}},{key:"getValues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.get('values');return t.camelCase?Object.keys(e).reduce((function(t,n){return t[Object(c["camelCase"])(n)]=e[n],t}),{}):e}},{key:"getLabel",value:function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.getLayerLabel(this)}},{key:"isSelected",value:function(){var t;return(null===(t=this.prop)||void 0===t?void 0:t.getSelectedLayer())===this}},{key:"select",value:function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.selectLayer(this)}},{key:"remove",value:function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.removeLayer(this)}},{key:"move",value:function(t){var e;return null===(e=this.prop)||void 0===e?void 0:e.moveLayer(this,t)}},{key:"getStylePreview",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null===(t=this.prop)||void 0===t?void 0:t.getStylePreview(this,e)}},{key:"hasPreview",value:function(){var t;return!(null===(t=this.prop)||void 0===t||!t.get('preview'))}},{key:"upValues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.set('values',I(I({},this.getValues()),t))}}]),n}(u["Model"]);function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var U=function(t){w()(n,t);var e=V(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"initialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prop=e.prop}}]),n}(u["Collection"]);U.prototype.model=B;var z=["__layers"];function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var q=/,(?![^\(]*\))/,G=/\s(?![^(]*\))/,K=function(t){w()(n,t);var e=$(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"defaults",value:function(){return W(W({},R.getDefaults()),{},{layers:[],layerSeparator:', ',layerJoin:'',prepend:0,preview:!1,layerLabel:null,selectedLayer:null})}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R.callParentInit(R,this,t,e);var n=this.get('layers'),r=new U(n,{prop:this});r.property=this,r.properties=this.get('properties'),this.set('layers',r,{silent:!0}),this.on('change:selectedLayer',this.__upSelected),this.listenTo(r,'add remove',this.__upLayers),R.callInit(this,t,e)}},{key:"getLayers",value:function(){return this.__getLayers().models}},{key:"__getLayers",value:function(){return this.get('layers')}},{key:"getLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.__getLayers().at(t)||null}},{key:"getSelectedLayer",value:function(){var t=this.get('selectedLayer');return t&&t.getIndex()>=0?t:null}},{key:"selectLayer",value:function(t){return this.set('selectedLayer',t,{__select:!0})}},{key:"selectLayerAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getLayer(t);return e&&this.selectLayer(e)}},{key:"moveLayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t?t.getIndex():-1;n>=0&&Object(a["isNumber"])(e)&&e>=0&&e<this.getLayers().length&&n!==e&&(this.removeLayer(t),this.__getLayers().add(t,{at:e}))}},{key:"addLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};this.getProperties().forEach((function(e){var r=e.getId(),i=t[r];n[r]=Object(a["isUndefined"])(i)?e.getDefaultValue():i}));var r=this.get('layers').push({values:n},e);return r}},{key:"removeLayer",value:function(t){return this.get('layers').remove(t)}},{key:"removeLayerAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getLayer(t);return e?this.removeLayer(e):null}},{key:"getLayerLabel",value:function(t){var e='';if(t){var n=this.get('layerLabel'),r=t.getValues(),i=t.getIndex();if(n)e=n(t,{index:i,values:r,property:this});else{var o=[];this.getProperties().map((function(t){o.push(r[t.getId()])})),e=o.filter(Boolean).join(' ')}}return e}},{key:"getStyleFromLayer",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.__getJoin(),i=this.__getJoinLayers(),o=this.get('toStyle'),l=this.getName(),u=t.getValues();if(o)e=o(u,{join:r,joinLayers:i,name:l,layer:t,property:this});else{var f=this.getProperties().map((function(t){var e=t.getName(),r=u[t.getId()],i=Object(a["isUndefined"])(r)?t.getDefaultValue():r;if(n.number&&L(t.getType())){var o=t.parseValue(r,n.number);i="".concat(o.value).concat(o.unit)}return{name:e,value:i}}));e=this.isDetached()?f.reduce((function(t,e){return t[e.name]=e.value,t}),{}):s()({},this.getName(),f.map((function(t){return t.value})).join(r))}return n.camelCase?Object.keys(e).reduce((function(t,n){return t[Object(c["camelCase"])(n)]=e[n],t}),{}):e}},{key:"getStylePreview",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=this.get('preview');return r&&(n=this.getStyleFromLayer(t,e)),n}},{key:"getLayerSeparator",value:function(){var t=this.get('layerSeparator');return Object(a["isString"])(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t}},{key:"__upProperties",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getSelectedLayer();n&&(n.upValues(s()({},t.getId(),t.__getFullValue())),e.__up||this.__upTargetsStyleProps(e))}},{key:"__upLayers",value:function(t,e,n){this.__upTargetsStyleProps(n||e)}},{key:"__upTargets",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.__select)return T.prototype.__upTargets.call(this,t,e)}},{key:"__upTargetsStyleProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__upTargetsStyle(this.getStyleFromLayers(),t)}},{key:"__upTargetsStyle",value:function(t,e){return T.prototype.__upTargetsStyle.call(this,t,e)}},{key:"__upSelected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.noEvent,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em.get('StyleManager'),i=this.getSelectedLayer(),o=null==i?void 0:i.getValues();o&&this.getProperties().forEach((function(t){var e=o[t.getId()];t.__getFullValue()!==e&&t.upValue(e,W(W({},n),{},{__up:!0}))})),!e&&r.__trgEv(r.events.layerSelect,{property:this})}},{key:"_up",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.__layers,r=void 0===n?[]:n,i=p()(t,z);return!this.isDetached()&&this.__setLayers(r),this.__upSelected({noEvent:!0},e),T.prototype._up.call(this,i,e)}},{key:"__setLayers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.__getLayers(),n=t.map((function(t){return{values:t}}));e.length===n.length?n.map((function(t,n){var r;return null===(r=e.at(n))||void 0===r?void 0:r.upValues(t.values)})):this.__getLayers().reset(n),this.__upSelected({noEvent:!0})}},{key:"__parseValue",value:function(t){var e=this,n=this.parseValue(t);return n.__layers=t.split(q).map((function(t){return t.trim()})).map((function(t){return e.__parseLayer(t)})).filter(Boolean),n}},{key:"__parseLayer",value:function(t){var e=this.get('parseLayer'),n=t.split(G),r=this.getProperties();return e?e({value:t,values:n}):r.reduce((function(t,e,r){var i=n[r];return t[e.getId()]=Object(a["isUndefined"])(i)?e.getDefaultValue():i,t}),{})}},{key:"__getLayersFromStyle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.__styleHasProps(e))return null;var n=this.getName(),r=this.getProperties(),i=this.getLayerSeparator(),o=this.get('fromStyle'),c=o?o(e,{property:this,name:n,separatorLayers:i}):[];if(!o){var l=this.__splitStyleName(e,n,i).map((function(e){return e.split(t.getSplitSeparator())})).map((function(t){var e={};return r.forEach((function(n,r){var i=t[r];e[n.getId()]=Object(a["isUndefined"])(i)?n.getDefaultValue():i})),e}));r.forEach((function(n){var r=n.getId();t.__splitStyleName(e,n.getName(),i).map((function(t){return s()({},r,t||n.getDefaultValue())})).forEach((function(t,e){l[e]=l[e]?W(W({},l[e]),t):t}))})),c=l}return Object(a["isArray"])(c)?c:[c]}},{key:"getStyle",value:function(t){return this.getStyleFromLayers(t)}},{key:"getStyleFromLayers",value:function(t){var e=this,n={},r=this.getName(),i=this.getLayers(),o=this.getProperties();if(i.map((function(n){return e.getStyleFromLayer(n,t)})).forEach((function(t){Object(a["keys"])(t).map((function(e){n[e]||(n[e]=[]),n[e].push(t[e])}))})),Object(a["keys"])(n).map((function(t){n[t]=n[t].join(e.__getJoinLayers())})),this.isDetached())n[r]='',!i.length&&o.map((function(t){n[t.getName()]=''}));else{var s=o.reduce((function(t,e){return t[e.getName()]='',t}),{});n[r]=n[r]||'',n=W(W({},n),s)}return n}},{key:"__getJoinLayers",value:function(){var t=this.get('layerJoin'),e=this.get('layerSeparator');return t||(Object(a["isString"])(e)?e:t)}},{key:"__getFullValue",value:function(){return this.get('detached')?'':this.getStyleFromLayers()[this.getName()]}},{key:"hasValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.noParent,n=e&&this.getParentTarget();return this.getLayers().length>0&&!n}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.__getLayers().reset(),this.__upTargetsStyleProps(t),T.prototype.clear.call(this)}},{key:"__canClearProp",value:function(){return!1}}]),n}(R),Y=(n(35),["complete","partial"]);function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var Q='data-clear-style',tt=function(t){w()(n,t);var e=Z(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"template",value:function(){var t=this.pfx,e=this.ppfx;return"\n      <div class=\"".concat(t,"label\" data-sm-label></div>\n      <div class=\"").concat(e,"fields\" data-sm-fields></div>\n    ")}},{key:"templateLabel",value:function(t){var e=this.pfx,n=this.em,r=t.parent,i=t.attributes,o=i.icon,s=void 0===o?'':o,a=i.info,c=void 0===a?'':a,l=null==n?void 0:n.getConfig('icons'),u=(null==l?void 0:l.close)||'';return"\n      <span class=\"".concat(e,"icon ").concat(s,"\" title=\"").concat(c,"\">\n        ").concat(t.getLabel(),"\n      </span>\n      ").concat(r?'':"<div class=\"".concat(e,"clear\" style=\"display: none\" ").concat(Q,">").concat(u,"</div>"),"\n    ")}},{key:"templateInput",value:function(t){return"\n      <div class=\"".concat(this.ppfx,"field\">\n        <input placeholder=\"").concat(t.getDefaultValue(),"\"/>\n      </div>\n    ")}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a["bindAll"])(this,'__change','__updateStyle');var e=t.config||{},n=e.em;this.config=e,this.em=n,this.pfx=e.stylePrefix||'',this.ppfx=e.pStylePrefix||'',this.__destroyFn=this.destroy?this.destroy.bind(this):function(){};var r=this.model;r.view=this,this.onValueChange=Object(a["debounce"])(this.onValueChange.bind(this),10),this.updateStatus=Object(a["debounce"])(this.updateStatus.bind(this)),this.listenTo(r,'destroy remove',this.remove),this.listenTo(r,'change:visible',this.updateVisibility),this.listenTo(r,'change:name change:className change:full',this.render),this.listenTo(r,'change:value',this.onValueChange),this.listenTo(n,'change:device',this.onValueChange);var i=this.init&&this.init.bind(this);i&&i()}},{key:"remove",value:function(){var t=this;u["View"].prototype.remove.apply(this,arguments),['em','input','$input','view'].forEach((function(e){return t[e]=null})),this.__destroyFn(this._getClbOpts())}},{key:"updateStatus",value:function(){var t,e=this.model,n=this.pfx,r=this.ppfx,i=this.config,o="".concat(r,"four-color"),s="".concat(r,"color-warn"),a=this.$el.children(".".concat(n,"label")),c=this.getClearEl(),l=c?c.style:{};a.removeClass("".concat(o," ").concat(s)),l.display='none',e.hasValue({noParent:!0})&&i.highlightChanged?(a.addClass(o),i.clearProperties&&(l.display='')):e.hasValue()&&i.highlightComputed&&a.addClass(s),null===(t=this.parent)||void 0===t||t.updateStatus()}},{key:"clear",value:function(t){t&&t.stopPropagation(),this.model.clear()}},{key:"getClearEl",value:function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(Q,"]"))),this.clearEl}},{key:"inputValueChanged",value:function(t){t&&t.stopPropagation(),this.emit||this.model.upValue(t.target.value)}},{key:"onValueChange",value:function(t,e){this.setValue(this.model.getFullValue()),this.updateStatus()}},{key:"setValue",value:function(t){var e=this.model,n=Object(a["isUndefined"])(t)||''===t?e.getDefaultValue():t;if(this.update)return this.__update(n);this.__setValueInput(n)}},{key:"__setValueInput",value:function(t){var e=this.getInputEl();e&&(e.value=t)}},{key:"getInputEl",value:function(){return this.input||(this.input=this.el.querySelector('input')),this.input}},{key:"updateVisibility",value:function(){this.el.style.display=this.model.isVisible()?'':'none'}},{key:"clearCached",value:function(){this.clearEl=null,this.input=null,this.$input=null}},{key:"__unset",value:function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())}},{key:"__update",value:function(t){var e=this.update&&this.update.bind(this);e&&e(X(X({},this._getClbOpts()),{},{value:t}))}},{key:"__change",value:function(){for(var t=this.emit&&this.emit.bind(this),e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t&&t.apply(void 0,[this._getClbOpts()].concat(n))}},{key:"__updateStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.complete,r=e.partial,i=(p()(e,Y),this.model),o=!1!==n&&!0!==r;Object(c["isObject"])(t)?i.__upTargetsStyle(t,{avoidStore:!o}):i.upValue(t,{partial:!o})}},{key:"_getClbOpts",value:function(){var t=this.model;return{el:this.el,createdEl:this.createdEl,property:t,props:t.attributes,change:this.__change,updateStyle:this.__updateStyle}}},{key:"render",value:function(){this.clearCached();var t=this.pfx,e=this.model,n=this.el,r=this.$el,i=e.getName(),o=e.getType(),s=e.get('className')||'',a="".concat(t,"property"),c='number'===o?"".concat(t).concat(o," ").concat(t,"integer"):"".concat(t).concat(o);this.createdEl&&this.__destroyFn(this._getClbOpts()),r.empty().append(this.template(e)),r.find('[data-sm-label]').append(this.templateLabel(e));var l=this.create&&this.create.bind(this);this.createdEl=l&&l(this._getClbOpts()),r.find('[data-sm-fields]').append(this.createdEl||this.templateInput(e)),n.className="".concat(a," ").concat(c," ").concat(a,"__").concat(i," ").concat(s).trim(),n.className+=e.isFull()?" ".concat(a,"--full"):'';var u=this.onRender&&this.onRender.bind(this);u&&u(),this.setValue(e.getValue())}}]),n}(u["View"]);tt.prototype.events=s()({change:'inputValueChanged'},"click [".concat(Q,"]"),'clear');var et=n(14);function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var rt=function(t){w()(n,t);var e=nt(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"initialize",value:function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix||'',this.properties=[],this.parent=t.parent;var e=this.collection;this.listenTo(e,'add',this.addTo),this.listenTo(e,'reset',this.render)}},{key:"addTo",value:function(t,e,n){this.add(t,null,n)}},{key:"add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.parent,i=this.config,o=e||this.el,s=new t.typeView({model:t,config:i});r&&(s.parent=r),s.render();var a=s.el;this.properties.push(s),Object(et["b"])(o,a,n.at)}},{key:"remove",value:function(){u["View"].prototype.remove.apply(this,arguments),this.clearItems()}},{key:"clearItems",value:function(){this.properties.forEach((function(t){return t.remove()})),this.properties=[]}},{key:"render",value:function(){var t=this,e=this.$el,n=this.pfx;this.clearItems();var r=document.createDocumentFragment();return this.collection.forEach((function(e){return t.add(e,r)})),e.empty(),e.append(r),e.attr('class',"".concat(n,"properties")),this}}]),n}(u["View"]);function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var at=function(t){w()(n,t);var e=st(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"templateInput",value:function(){var t=this.pfx;return"\n      <div class=\"".concat(t,"field ").concat(t,"composite\">\n        <span id=\"").concat(t,"input-holder\"></span>\n      </div>\n    ")}},{key:"remove",value:function(){var t;null===(t=this.props)||void 0===t||t.remove(),tt.prototype.remove.apply(this,arguments)}},{key:"onValueChange",value:function(){}},{key:"onRender",value:function(){var t=this.model,e=this.pfx,n=t.get('properties');if(n.length&&!this.props){var r=t.isDetached(),i=new rt({config:ot(ot({},this.config),{},{highlightComputed:r,highlightChanged:r}),collection:n,parent:this});i.render(),this.$el.find("#".concat(e,"input-holder")).append(i.el),this.props=i}}},{key:"clearCached",value:function(){tt.prototype.clearCached.apply(this,arguments),this.props=null}}]),n}(tt);function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var lt=function(t){w()(n,t);var e=ct(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"events",value:function(){return{click:'select','click [data-close-layer]':'removeItem','mousedown [data-move-layer]':'initSorter','touchstart [data-move-layer]':'initSorter'}}},{key:"template",value:function(){var t=this.pfx,e=this.ppfx,n=this.em,r=null==n?void 0:n.getConfig('icons'),i=(null==r?void 0:r.close)||'',o=(null==r?void 0:r.move)||'';return"\n      <div class=\"".concat(t,"label-wrp\">\n        <div id=\"").concat(t,"move\" class=\"").concat(e,"no-touch-actions\" data-move-layer>\n          ").concat(o,"\n        </div>\n        <div id=\"").concat(t,"label\" data-label></div>\n        <div id=\"").concat(t,"preview-box\" class=\"").concat(t,"layer-preview\" style=\"display: none\" data-preview-box>\n          <div id=\"").concat(t,"preview\" class=\"").concat(t,"layer-preview-cnt\" data-preview></div>\n        </div>\n        <div id=\"").concat(t,"close-layer\" class=\"").concat(t,"btn-close\" data-close-layer>\n          ").concat(i,"\n        </div>\n      </div>\n      <div id=\"").concat(t,"inputs\" data-properties></div>\n    ")}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.model,n=t.config||{};this.em=n.em,this.config=n,this.sorter=t.sorter,this.pfx=n.stylePrefix||'',this.ppfx=n.pStylePrefix||'',this.propertyView=t.propertyView;var r=this.propertyView.model;this.listenTo(e,'destroy remove',this.remove),this.listenTo(e,'change:values',this.updateLabel),this.listenTo(r,'change:selectedLayer',this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data('model',e)}},{key:"initSorter",value:function(){var t;null===(t=this.sorter)||void 0===t||t.startSort(this.el)}},{key:"removeItem",value:function(t){t&&t.stopPropagation(),this.model.remove()}},{key:"select",value:function(){this.model.select()}},{key:"getPropertiesWrapper",value:function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector('[data-properties]')),this.propsWrapEl}},{key:"getPreviewEl",value:function(){return this.previewEl||(this.previewEl=this.el.querySelector('[data-preview]')),this.previewEl}},{key:"getLabelEl",value:function(){return this.labelEl||(this.labelEl=this.el.querySelector('[data-label]')),this.labelEl}},{key:"updateLabel",value:function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var n=this.getPreviewEl(),r=t.getStylePreview({number:{min:-3,max:3}}),i=Object(a["keys"])(r).map((function(t){return"".concat(t,":").concat(r[t])})).join(';');n.setAttribute('style',i)}}},{key:"updateVisibility",value:function(){var t=this.pfx,e=this.model,n=this.propertyView,r=this.getPropertiesWrapper(),i=e.isSelected();r.style.display=i?'':'none',this.$el[i?'addClass':'removeClass']("".concat(t,"active")),i&&r.appendChild(n.props.el)}},{key:"render",value:function(){var t=this.el,e=this.pfx,n=this.model;return t.innerHTML=this.template(),t.className="".concat(e,"layer"),n.hasPreview()&&(t.querySelector("[data-preview-box]").style.display=''),this.updateLabel(),this.updateVisibility(),this}}]),n}(u["View"]);function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var ft=function(t){w()(n,t);var e=ut(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"initialize",value:function(t){var e=this.collection,n=t.config||{},r=n.em,i=n.stylePrefix||'',o=n.pStylePrefix||'';this.config=n,this.pfx=i,this.ppfx=o,this.propertyView=t.propertyView,this.className="".concat(i,"layers ").concat(o,"field"),this.listenTo(e,'add',this.addTo),this.listenTo(e,'reset',this.reset),this.items=[];var s=r?r.get('Utils'):'';this.sorter=s?new s.Sorter({container:this.el,ignoreViewChildren:1,containerSel:".".concat(i,"layers"),itemSel:".".concat(i,"layer"),pfx:n.pStylePrefix}):'',e.view=this,this.$el.data('model',e),this.$el.data('collection',e)}},{key:"addTo",value:function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)}},{key:"addToCollection",value:function(t,e,n){var r=e||null,i=this.propertyView,o=this.config,s=this.sorter,a=this.$el,c=new lt({model:t,config:o,sorter:s,propertyView:i}),l=c.render().el;if(this.items.push(c),r)r.appendChild(l);else if(void 0!==n){var u='before';a.children().length===n&&(n--,u='after'),n<0?a.append(l):a.children().eq(n)[u](l)}else a.append(l);return l}},{key:"reset",value:function(t,e){this.clearItems(e),this.render()}},{key:"remove",value:function(){this.clearItems(),u["View"].prototype.remove.apply(this,arguments)}},{key:"clearItems",value:function(){this.items.forEach((function(t){return t.remove()})),this.items=[]}},{key:"render",value:function(){var t=this,e=this.$el,n=this.sorter,r=document.createDocumentFragment();return e.empty(),this.collection.forEach((function(e){return t.addToCollection(e,r)})),e.append(r),e.attr('class',this.className),n&&(n.plh=null),this}}]),n}(u["View"]);function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var gt=function(t){w()(n,t);var e=pt(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"events",value:function(){return dt(dt({},at.prototype.events),{},{'click [data-add-layer]':'addLayer',change:''})}},{key:"templateInput",value:function(){var t=this.pfx,e=this.em,n=null==e?void 0:e.getConfig('icons'),r=(null==n?void 0:n.plus)||'+';return"\n      <div class=\"".concat(t,"field ").concat(t,"stack\">\n        <button type=\"button\" id=\"").concat(t,"add\" data-add-layer>\n          ").concat(r,"\n        </button>\n        <div data-layers-wrapper></div>\n      </div>\n    ")}},{key:"init",value:function(){var t=this.model;this.listenTo(t.__getLayers(),'change reset',this.updateStatus)}},{key:"addLayer",value:function(){this.model.addLayer({},{at:0})}},{key:"setValue",value:function(){}},{key:"remove",value:function(){var t;null===(t=this.layersView)||void 0===t||t.remove(),at.prototype.remove.apply(this,arguments)}},{key:"clearCached",value:function(){at.prototype.clearCached.apply(this,arguments),this.layersView=null}},{key:"onRender",value:function(){var t=this.model,e=this.el,n=this.config,r=t.get('properties');if(r.length&&!this.props){var i=new rt({config:dt(dt({},n),{},{highlightComputed:!1,highlightChanged:!1}),collection:r,parent:this});i.render();var o=new ft({collection:t.__getLayers(),config:n,propertyView:this});o.render(),e.querySelector('[data-layers-wrapper]').appendChild(o.el),this.props=i,this.layersView=o}}}]),n}(at);function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var bt=function(t){w()(n,t);var e=yt(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"events",value:function(){return mt(mt({},tt.prototype.events),{},{'click [data-clear-asset]':'clear','click [data-open-assets]':'openAssetManager'})}},{key:"templateInput",value:function(){var t,e=this.pfx,n=this.em,r=null===(t=this.em)||void 0===t?void 0:t.getConfig('icons'),i=null==r?void 0:r.close;return"\n      <div class=\"".concat(e,"field ").concat(e,"file\">\n        <div id='").concat(e,"input-holder'>\n          <div class=\"").concat(e,"btn-c\">\n            <button class=\"").concat(e,"btn\" id=\"").concat(e,"images\" type=\"button\" data-open-assets>\n              ").concat(n.t('styleManager.fileButton'),"\n            </button>\n          </div>\n          <div style=\"clear:both;\"></div>\n        </div>\n        <div id=\"").concat(e,"preview-box\" class=\"").concat(e,"preview-file\" data-preview-box>\n          <div id=\"").concat(e,"preview-file\" class=\"").concat(e,"preview-file-cnt\" data-preview></div>\n          <div id=\"").concat(e,"close\" class=\"").concat(e,"preview-file-close\" data-clear-asset>").concat(i,"</div>\n        </div>\n      </div>\n    ")}},{key:"__setValueInput",value:function(t){var e=this.model,n=this.el,r=e.getDefaultValue(),i=n.querySelector('[data-preview-box]'),o=n.querySelector('[data-preview]');i.style.display=t&&t!==r?'':'none',o.style.backgroundImage=t||e.getDefaultValue()}},{key:"openAssetManager",value:function(){var t,e=this,n=null===(t=this.em)||void 0===t?void 0:t.get('AssetManager');null==n||n.open({select:function(t,r){var i=Object(a["isString"])(t)?t:t.get('src');e.model.upValue(i,{partial:!r}),r&&n.close()},types:['image'],accept:'image/*'})}}]),n}(tt);function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var Ot=function(t){w()(n,t);var e=wt(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"templateInput",value:function(){return''}},{key:"init",value:function(){var t=this.model;this.listenTo(t,'change:unit',this.onValueChange),this.listenTo(t,'change:units',this.render)}},{key:"setValue",value:function(){}},{key:"onRender",value:function(){var t=this.ppfx,e=this.model,n=this.el;if(!this.inputInst){var r=e.input;r.ppfx=t,r.render(),n.querySelector(".".concat(t,"fields")).appendChild(r.el),this.input=r.inputEl.get(0),this.inputInst=r}}},{key:"clearCached",value:function(){tt.prototype.clearCached.apply(this,arguments),this.inputInst=null}}]),n}(tt),xt=n(62);function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var St=function(t){w()(n,t);var e=Ct(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"setValue",value:function(t){var e;null===(e=this.inputInst)||void 0===e||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})}},{key:"remove",value:function(){var t=this;Ot.prototype.remove.apply(this,arguments);var e=this.inputInst;e&&e.remove&&e.remove(),['inputInst','$color'].forEach((function(e){return t[e]=null}))}},{key:"__handleChange",value:function(t,e){this.model.upValue(t,{partial:e})}},{key:"onRender",value:function(){if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var t=this.ppfx,e=this.model,n=this.em,r=this.el,i=new xt["a"]({target:n,model:e,ppfx:t,onChange:this.__handleChange}).render();r.querySelector(".".concat(t,"fields")).appendChild(i.el),this.input=i.inputEl.get(0),this.inputInst=i}}}]),n}(Ot);function kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var _t=function(t){w()(n,t);var e=Et(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"defaults",value:function(){return jt(jt({},T.getDefaults()),{},{options:[],full:0})}},{key:"getOptions",value:function(){var t=this.attributes,e=t.options,n=t.list;return(e&&e.length?e:n)||[]}},{key:"getOption",value:function(t){var e=this,n=t||this.getValue();return this.getOptions().filter((function(t){return e.getOptionId(t)===n}))[0]||null}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.set('options',t),this}},{key:"addOption",value:function(t){if(t){var e=this.getOptions();this.setOptions([].concat(i()(e),[t]))}return this}},{key:"getOptionId",value:function(t){return Object(c["isDef"])(t.id)?t.id:t.value}},{key:"getOptionLabel",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.locale,i=void 0===r||r,o=(Object(a["isString"])(t)?this.getOption(t):t)||{},s=this.getOptionId(o),c=o.label||o.name||s,l=this.getId();return i&&(null===(e=this.em)||void 0===e?void 0:e.t("styleManager.options.".concat(l,".").concat(s)))||c}},{key:"initialize",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];T.prototype.initialize.apply(this,e),this.listenTo(this,'change:options',this.__onOptionChange)}},{key:"__onOptionChange",value:function(){this.set('list',this.get('options'))}}]),n}(T);function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var Tt=function(t){w()(n,t);var e=Pt(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"templateInput",value:function(){var t=this.pfx,e=this.ppfx;return"\n      <div class=\"".concat(e,"field ").concat(e,"select\">\n        <span id=\"").concat(t,"input-holder\"></span>\n        <div class=\"").concat(e,"sel-arrow\">\n          <div class=\"").concat(e,"d-s-arrow\"></div>\n        </div>\n      </div>\n    ")}},{key:"initialize",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];tt.prototype.initialize.apply(this,e),this.listenTo(this.model,'change:options',this.updateOptions)}},{key:"updateOptions",value:function(){this.input=null,this.onRender()}},{key:"onRender",value:function(){var t=this.model,e=this.pfx,n=t.getOptions();if(!this.input){var r=[];n.forEach((function(e){var n=t.getOptionId(e),i=t.getOptionLabel(n),o=e.style?e.style.replace(/"/g,'&quot;'):'',s=o?"style=\"".concat(o,"\""):'',a=n.replace(/"/g,'&quot;');r.push("<option value=\"".concat(a,"\" ").concat(s,">").concat(i,"</option>"))}));var i=this.el.querySelector("#".concat(e,"input-holder"));i.innerHTML="<select>".concat(r.join(''),"</select>"),this.input=i.firstChild}}},{key:"__setValueInput",value:function(t){var e=this.model,n=this.getInputEl(),r=e.getOptions()[0],i=r?e.getOptionId(r):'';n&&(n.value=t||i)}}]),n}(tt);function At(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?At(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var Lt=function(t){w()(n,t);var e=Mt(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"defaults",value:function(){return Dt(Dt({},_t.getDefaults()),{},{full:1})}}]),n}(_t);function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var Nt=function(t){w()(n,t);var e=Rt(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"templateInput",value:function(){var t=this.ppfx;return"<div class=\"".concat(t,"field ").concat(t,"field-radio\"></div>")}},{key:"onRender",value:function(){var t=this.pfx,e=this.ppfx,n=this.model,r="".concat(e,"radio-item-label"),i=n.getName(),o=n.getOptions(),s="".concat(t,"radio ").concat(t,"radio-").concat(i),a=n.cid;if(!this.input){var c=[];o.forEach((function(o){var l=o.className?"".concat(o.className," ").concat(t,"icon ").concat(r):'',u=n.getOptionId(o),f="".concat(i,"-").concat(u,"-").concat(a),h=l?'':n.getOptionLabel(u),d=o.title?"title=\"".concat(o.title,"\""):'',p=n.getValue()===u?'checked':'';c.push("\n          <div class=\"".concat(e,"radio-item\">\n            <input type=\"radio\" class=\"").concat(s,"\" id=\"").concat(f,"\" name=\"").concat(i,"-").concat(a,"\" value=\"").concat(u,"\" ").concat(p,"/>\n            <label class=\"").concat(l||r,"\" ").concat(d," for=\"").concat(f,"\">").concat(h,"</label>\n          </div>\n        "))}));var l=this.el.querySelector(".".concat(e,"field"));l.innerHTML="<div class=\"".concat(e,"radio-items\">").concat(c.join(''),"</div>"),this.input=l.firstChild}}},{key:"__setValueInput",value:function(t){var e,n=this.model,r=t||n.getDefaultValue(),i=null===(e=this.getInputEl())||void 0===e?void 0:e.querySelector("[value=\"".concat(r,"\"]"));i&&(i.checked=!0)}}]),n}(Tt),It=n(57);function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var Ut=function(t){w()(n,t);var e=Vt(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"defaults",value:function(){return Bt(Bt({},T.getDefaults()),{},{units:[],unit:'',min:'',max:'',step:1})}},{key:"getUnits",value:function(){return this.get('units')||[]}},{key:"getUnit",value:function(){return this.get('unit')}},{key:"getMin",value:function(){return this.get('min')}},{key:"getMax",value:function(){return this.get('max')}},{key:"getStep",value:function(){return this.get('step')}},{key:"upUnit",value:function(t,e){return this._up({unit:t},e)}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T.callParentInit(T,this,t,e);var n=this.get('unit'),r=this.get('units');this.input=Object(c["hasWin"])()&&new It["a"]({model:this}),r.length&&!n&&this.set('unit',r[0],{silent:1}),T.callInit(this,t,e)}},{key:"__getClearProps",value:function(){return Bt(Bt({},T.prototype.__getClearProps()),{},{unit:''})}},{key:"parseValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=T.prototype.parseValue.apply(this,arguments),r=this.input.validateInputValue(n.value,Bt({deepCheck:1},e)),i=r.value,o=r.unit;return n.value=i,n.unit=o,n}},{key:"getFullValue",value:function(){var t=this.get('value'),e=this.get('unit');return t=Object(a["isUndefined"])(t)?'':t,e=!Object(a["isUndefined"])(e)&&t?e:'',t="".concat(t).concat(e),T.prototype.getFullValue.apply(this,[t])}}]),n}(T);function zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var $t=function(t){w()(n,t);var e=Wt(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"defaults",value:function(){return Ht(Ht({},Ut.getDefaults()),{},{showInput:1})}}]),n}(Ut);function qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var Yt=function(t){w()(n,t);var e=Kt(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"events",value:function(){return Gt(Gt({},Ot.prototype.events),{},{'change [type=range]':'inputValueChanged','input [type=range]':'inputValueChangedSoft',change:''})}},{key:"templateInput",value:function(t){var e=this.ppfx;return"\n      <div class=\"".concat(e,"field ").concat(e,"field-range\">\n        <input type=\"range\" min=\"").concat(t.get('min'),"\" max=\"").concat(t.get('max'),"\" step=\"").concat(t.get('step'),"\"/>\n      </div>\n    ")}},{key:"getSliderEl",value:function(){return this.slider||(this.slider=this.el.querySelector('input[type=range]')),this.slider}},{key:"inputValueChanged",value:function(){this.model.upValue(this.getSliderEl().value)}},{key:"inputValueChangedSoft",value:function(){this.model.upValue(this.getSliderEl().value,{partial:!0})}},{key:"setValue",value:function(t){var e=this.model,n=e.parseValue(t);this.getSliderEl().value=''===t?e.getDefaultValue():parseFloat(n.value),Ot.prototype.setValue.apply(this,arguments)}},{key:"onRender",value:function(){Ot.prototype.onRender.apply(this,arguments),this.model.get('showInput')||(this.inputInst.el.style.display='none')}},{key:"clearCached",value:function(){Ot.prototype.clearCached.apply(this,arguments),this.slider=null}}]),n}(Ot),Jt=f.a.Collection.extend(k["a"]).extend({extendViewApi:1,init:function(){var t=this.opts,e=this.em,n=t.module||(null==e?void 0:e.get('StyleManager'));n&&(n.__listenAdd(this,n.events.propertyAdd),n.__listenRemove(this,n.events.propertyRemove))},types:[{id:'stack',model:K,view:gt,isType:function(t){if(t&&'stack'==t.type)return t}},{id:'composite',model:R,view:at,isType:function(t){if(t&&'composite'==t.type)return t}},{id:'file',model:T,view:bt,isType:function(t){if(t&&'file'==t.type)return t}},{id:'color',model:T,view:St,isType:function(t){if(t&&'color'==t.type)return t}},{id:'select',model:_t,view:Tt,isType:function(t){if(t&&'select'==t.type)return t}},{id:'radio',model:Lt,view:Nt,isType:function(t){if(t&&'radio'==t.type)return t}},{id:'slider',model:$t,view:Yt,isType:function(t){if(t&&'slider'==t.type)return t}},{id:'integer',model:Ut,view:Ot,isType:function(t){if(t&&'integer'==t.type)return t}},{id:'number',model:Ut,view:Ot,isType:function(t){if(t&&'number'==t.type)return t}},{id:'base',model:T,view:tt,isType:function(t){return t.type='base',t}}]}),Xt=["extend"];function Zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function te(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var ee=function(t){w()(n,t);var e=te(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"defaults",value:function(){return{id:'',name:'',open:!0,visible:!0,buildProps:'',extendBuilded:1,properties:[]}}},{key:"initialize",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.em;this.em=r;var i=t||{},o=this.buildProperties(i.buildProps),s=this.get('name')||'',c=[];!this.get('id')&&this.set('id',s.replace(/ /g,'_').toLowerCase()),c=(c=o?this.extendProperties(o):this.get('properties').map((function(t){return Object(a["isString"])(t)?e.buildProperties(t)[0]:t})).filter(Boolean)).map((function(t){return e.checkExtend(t)}));var l=new Jt(c,{em:r});l.sector=this,this.set('properties',l)}},{key:"getId",value:function(){return this.get('id')}},{key:"getName",value:function(){var t,e=this.getId();return(null===(t=this.em)||void 0===t?void 0:t.t("styleManager.sectors.".concat(e)))||this.get('name')}},{key:"setName",value:function(t){return this.set('name',t)}},{key:"isOpen",value:function(){return!!this.get('open')}},{key:"setOpen",value:function(t){return this.set('open',t)}},{key:"isVisible",value:function(){return!!this.get('visible')}},{key:"getProperties",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.get('properties'),n=e.models?i()(e.models):e;return n.filter((function(e){var n=!0;(t.withValue&&(n=e.hasValue({noParent:!0})),t.withParentValue)&&(n=!e.hasValue({noParent:!0})&&e.hasValue());return n}))}},{key:"getProperty",value:function(t){return this.getProperties().filter((function(e){return e.get('id')===t}))[0]||null}},{key:"addProperty",value:function(t,e){return this.get('properties').add(this.checkExtend(t),e)}},{key:"extendProperties",value:function(t,e,n){for(var r=t.length,i=e||this.get('properties'),o=this.get('extendBuilded'),s=[],c=0,l=i.length;c<l;c++){for(var u=i[c],f=0,h=0;h<r;h++){var d=t[h];if(u.property!=d.property&&u.id!=d.property);else{var p=u.properties;p&&p.length&&(u.properties=this.extendProperties(d.properties||[],p,1)),t[h]=o?Object(a["extend"])(d,u):u,s[h]=t[h],f=1}}f||(t.push(u),s.push(u))}return n?s.filter((function(t){return t})):t}},{key:"checkExtend",value:function(t){var e=(Object(a["isString"])(t)?{extend:t}:t)||{},n=e.extend,r=p()(e,Xt);return n?Qt(Qt({},this.buildProperties([n])[0]||{}),r):t}},{key:"buildProperties",value:function(t){var e,n=t||[];if(!n.length)return[];var r=null===(e=this.em)||void 0===e?void 0:e.get('StyleManager').builtIn;return null==r?void 0:r.build(n)}}]),n}(u["Model"]);function ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var oe=function(t){w()(n,t);var e=ie(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"initialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.module,r=e.em;this.em=r,this.module=n,this.listenTo(this,'reset',this.onReset)}},{key:"model",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.collection.em;return new ee(t,re(re({},e),{},{em:n}))}},{key:"onReset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.previousModels||[];n.forEach((function(t){return t.get('properties').reset()}))}}]),n}(u["Collection"]),se=n(43),ae=n.n(se),ce=["extend"];function le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?le(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fe,he=function(t){return t.map((function(t){return{id:t}}))},de=function(){function t(){v()(this,t),this.typeNumber='number',this.typeColor='color',this.typeRadio='radio',this.typeSelect='select',this.typeFile='file',this.typeSlider='slider',this.typeComposite='composite',this.typeStack='stack',this.unitsSize=['px','%','em','rem','vh','vw'],this.unitsSizeNoPerc=['px','em','rem','vh','vw'],this.unitsTime=['s','ms'],this.unitsAngle=['deg','rad','grad'],this.fixedValues=['initial','inherit','auto'];var e=', sans-serif',n=['flex-start','flex-end','center'],r=[].concat(n,['baseline','stretch']);this.optsBgSize=he(['auto','cover','contain']),this.optsBgAttach=he(['scroll','fixed','local']),this.optsBgRepeat=he(['repeat','repeat-x','repeat-y','no-repeat']),this.optsWrap=he(['nowrap','wrap','wrap-reverse']),this.optsOverflow=he(['visible','hidden','scroll','auto']),this.optsDir=he(['row','row-reverse','column','column-reverse']),this.opstDisplay=he(['block','inline','inline-block','flex','none']),this.optsTransitFn=he(['linear','ease','ease-in','ease-out','ease-in-out']),this.optsCursor=he(['auto','pointer','copy','crosshair','grab','grabbing','help','move','text']),this.optsFloat=he(['none','left','right']),this.optsPos=he(['static','relative','absolute','fixed']),this.optsTextAlign=he(['left','center','right','justify']),this.optsFlexAlign=he(r),this.optsJustCont=he([].concat(n,['space-between','space-around','space-evenly'])),this.optsAlignCont=he([].concat(n,['space-between','space-around','stretch'])),this.optsAlignSelf=he(['auto'].concat(i()(r))),this.optsTransitProp=he(['all','width','height','background-color','transform','box-shadow','opacity']),this.optsBorderStyle=he(['none','solid','dotted','dashed','double','groove','ridge','inset','outset']),this.optsBgPos=he(['left top','left center','left bottom','right top','right center','right bottom','center top','center center','center bottom']),this.optsWeight=[{id:'100',label:'Thin'},{id:'200',label:'Extra-Light'},{id:'300',label:'Light'},{id:'400',label:'Normal'},{id:'500',label:'Medium'},{id:'600',label:'Semi-Bold'},{id:'700',label:'Bold'},{id:'800',label:'Extra-Bold'},{id:'900',label:'Ultra-Bold'}],this.optsShadowType=[{id:'',label:'Outside'},{id:'inset',label:'Inside'}],this.optsFonts=['Arial, Helvetica'+e,'Arial Black, Gadget'+e,'Brush Script MT'+e,'Comic Sans MS, cursive'+e,'Courier New, Courier, monospace','Georgia, serif','Helvetica'+e,'Impact, Charcoal'+e,'Lucida Sans Unicode, Lucida Grande'+e,'Tahoma, Geneva'+e,'Times New Roman, Times, serif','Trebuchet MS, Helvetica'+e,'Verdana, Geneva'+e].map((function(t){return{id:t,label:t.split(',')[0]}})),this.fixedFontSizes=['medium','xx-small','x-small','small','large','x-large','xx-large','smaller','larger','length','initial','inherit'],this.fixedLetSpace=['normal','initial','inherit'],this.requireFlex={display:['flex']},this.init()}return y()(t,[{key:"__sub",value:function(t){var e=this;return function(){return t.map((function(t){if(Object(a["isString"])(t))return e.get(t);var n=t.extend,r=p()(t,ce);return ue(ue({},e.get(n)),r)}))}}},{key:"init",value:function(){var t=this,e=this.fixedValues,n=this.requireFlex,r=this.typeNumber;return this.props={},[['text-shadow-h',{type:r,default:'0',units:this.unitsSizeNoPerc}],['top',{default:'auto',units:this.unitsSize,fixedValues:e},'text-shadow-h'],['right',{},'top'],['bottom',{},'top'],['left',{},'top'],['margin-top',{default:'0'},'top'],['margin-right',{},'margin-top'],['margin-bottom',{},'margin-top'],['margin-left',{},'margin-top'],['padding-top',{min:0},'margin-top'],['padding-right',{},'padding-top'],['padding-bottom',{},'padding-top'],['padding-left',{},'padding-top'],['width',{min:0},'top'],['min-width',{},'width'],['max-width',{},'width'],['height',{},'width'],['min-height',{},'width'],['max-height',{},'width'],['flex-basis',{requiresParent:n},'width'],['font-size',{default:'medium',fixedValues:this.fixedFontSizes},'width'],['letter-spacing',{default:'normal',fixedValues:this.fixedLetSpace},'top'],['line-height',{},'letter-spacing'],['text-shadow-v',{},'text-shadow-h'],['text-shadow-blur',{min:0},'text-shadow-h'],['border-radius-c',{property:'border-radius',fixedValues:void 0},'padding-top'],['border-top-left-radius',{},'border-radius-c'],['border-top-right-radius',{},'border-radius-c'],['border-bottom-left-radius',{},'border-radius-c'],['border-bottom-right-radius',{},'border-radius-c'],['border-width',{units:this.unitsSizeNoPerc},'border-radius-c'],['box-shadow-h',{},'text-shadow-h'],['box-shadow-v',{},'text-shadow-h'],['box-shadow-blur',{default:'5px'},'text-shadow-blur'],['box-shadow-spread',{},'text-shadow-h'],['transition-duration',{default:'2s',units:this.unitsTime},'border-radius-c'],['perspective',{},'border-radius-c'],['transform-rotate-x',{functionName:'rotateX',units:this.unitsAngle,default:'0',type:r}],['transform-rotate-y',{functionName:'rotateY'},'transform-rotate-x'],['transform-rotate-z',{functionName:'rotateZ'},'transform-rotate-x'],['transform-scale-x',{default:'1',functionName:'scaleX',units:void 0},'transform-rotate-x'],['transform-scale-y',{functionName:'scaleY'},'transform-scale-x'],['transform-scale-z',{functionName:'scaleZ'},'transform-scale-x'],['order',{type:r,default:'0',requiresParent:n}],['flex-grow',{},'order'],['flex-shrink',{default:'1'},'order'],['float',{type:this.typeRadio,default:'none',options:this.optsFloat}],['position',{default:'static',options:this.optsPos},'float'],['text-align',{default:'left',options:this.optsTextAlign},'float'],['color',{type:this.typeColor,default:'black'}],['text-shadow-color',{},'color'],['border-color',{},'color'],['box-shadow-color',{},'color'],['background-color',{default:'none'},'color'],['background-image',{type:this.typeFile,functionName:'url',default:'none',full:!0}],['opacity',{type:this.typeSlider,default:'1',min:0,max:1,step:.01}],['display',{type:this.typeSelect,default:'block',options:this.opstDisplay}],['flex-direction',{default:'row',options:this.optsDir,requires:n},'display'],['flex-wrap',{default:'nowrap',options:this.optsWrap},'flex-direction'],['justify-content',{default:'flex-start',options:this.optsJustCont},'flex-wrap'],['align-items',{default:'stretch',options:this.optsFlexAlign},'flex-wrap'],['align-content',{options:this.optsAlignCont},'align-items'],['align-self',{default:'auto',options:this.optsAlignSelf,requiresParent:n},'display'],['font-family',{default:'Arial, Helvetica, sans-serif',options:this.optsFonts},'display'],['font-weight',{default:'400',options:this.optsWeight},'display'],['border-style',{default:'solid',options:this.optsBorderStyle},'display'],['box-shadow-type',{default:'',options:this.optsShadowType},'display'],['background-repeat',{default:'repeat',options:this.optsBgRepeat},'display'],['background-position',{default:'left top',options:this.optsBgPos},'display'],['background-attachment',{default:'scroll',options:this.optsBgAttach},'display'],['background-size',{default:'auto',options:this.optsBgSize},'display'],['transition-property',{default:'width',options:this.optsTransitProp},'display'],['transition-timing-function',{default:'ease',options:this.optsTransitFn},'display'],['cursor',{default:'auto',options:this.optsCursor},'display'],['overflow',{default:'visible',options:this.optsOverflow},'display'],['overflow-x',{},'overflow'],['overflow-y',{},'overflow'],['margin',{type:this.typeComposite,properties:this.__sub([{extend:'margin-top',id:'margin-top-sub'},{extend:'margin-right',id:'margin-right-sub'},{extend:'margin-bottom',id:'margin-bottom-sub'},{extend:'margin-left',id:'margin-left-sub'}])}],['padding',{properties:this.__sub([{extend:'padding-top',id:'padding-top-sub'},{extend:'padding-right',id:'padding-right-sub'},{extend:'padding-bottom',id:'padding-bottom-sub'},{extend:'padding-left',id:'padding-left-sub'}])},'margin'],['border',{properties:this.__sub([{extend:'border-width',id:'border-width-sub'},{extend:'border-style',id:'border-style-sub'},{extend:'border-color',id:'border-color-sub'}])},'margin'],['border-radius',{properties:this.__sub([{extend:'border-top-left-radius',id:'border-top-left-radius-sub'},{extend:'border-top-right-radius',id:'border-top-right-radius-sub'},{extend:'border-bottom-right-radius',id:'border-bottom-right-radius-sub'},{extend:'border-bottom-left-radius',id:'border-bottom-left-radius-sub'}])},'margin'],['transform',{properties:this.__sub(['transform-rotate-x','transform-rotate-y','transform-rotate-z','transform-scale-x','transform-scale-y','transform-scale-z'])},'margin'],['transition',{type:this.typeStack,properties:this.__sub([{extend:'transition-property',id:'transition-property-sub'},{extend:'transition-duration',id:'transition-duration-sub'},{extend:'transition-timing-function',id:'transition-timing-function-sub'}])}],['box-shadow',{preview:!0,layerLabel:function(t,e){var n=e.values,r=n['box-shadow-h'],i=n['box-shadow-v'],o=n['box-shadow-blur'],s=n['box-shadow-spread'];return"".concat(r," ").concat(i," ").concat(o," ").concat(s)},properties:this.__sub(['box-shadow-h','box-shadow-v','box-shadow-blur','box-shadow-spread','box-shadow-color','box-shadow-type'])},'transition'],['text-shadow',{default:'none',layerLabel:function(t,e){var n=e.values,r=n['text-shadow-h'],i=n['text-shadow-v'],o=n['text-shadow-blur'];return"".concat(r," ").concat(i," ").concat(o)},properties:this.__sub(['text-shadow-h','text-shadow-v','text-shadow-blur','text-shadow-color'])},'box-shadow'],['background',{detached:!0,layerLabel:function(t,e){var n=e.values,r=n['background-repeat-sub'],i=n['background-position-sub'],o=n['background-attachment-sub'],s=n['background-size-sub'];return"".concat(r," ").concat(i," ").concat(o," ").concat(s)},properties:this.__sub([{extend:'background-image',id:'background-image-sub'},{extend:'background-repeat',id:'background-repeat-sub'},{extend:'background-position',id:'background-position-sub'},{extend:'background-attachment',id:'background-attachment-sub'},{extend:'background-size',id:'background-size-sub'}])},'box-shadow']].forEach((function(e){var n=ae()(e,3),r=n[0],i=n[1],o=n[2];t.add(r,i||{},{from:o})})),this}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.from||'',i=this.props[r||t]||{},o=ue(ue({},i),{},{property:t},e);return o.properties&&Object(a["isFunction"])(o.properties)&&(o.properties=o.properties()),this.props[t]=o,o}},{key:"get",value:function(t){return this.props[t]||null}},{key:"build",value:function(t){var e=this,n=[];return(Object(a["isString"])(t)?[t]:t).forEach((function(t){n.push(e.get(t)||{property:t})})),n}}]),t}(),pe=n(21),ge=n.n(pe),ve=n(20);function me(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var ye=function(t){w()(n,t);var e=me(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"template",value:function(t){var e,n=t.pfx,r=t.label,i=null===(e=this.em)||void 0===e?void 0:e.getConfig('icons'),o=(null==i?void 0:i.caret)||'',s="".concat(n,"sector-");return Object(ve["a"])(fe||(fe=ge()(["\n      <div class=\"","title\" data-sector-title>\n        <div class=\"","caret\">$","</div>\n        <div class=\"","label\">","</div>\n      </div>\n    "])),s,s,o,s,r)}},{key:"events",value:function(){return{'click [data-sector-title]':'toggle'}}},{key:"initialize",value:function(t){var e=t.config||{},n=this.model,r=e.em;this.config=e,this.em=r,this.pfx=e.stylePrefix||'',this.listenTo(n,'destroy remove',this.remove),this.listenTo(n,'change:open',this.updateOpen),this.listenTo(n,'change:visible',this.updateVisibility)}},{key:"updateOpen",value:function(){var t=this.$el,e=this.model,n=this.pfx,r=e.isOpen();t[r?'addClass':'removeClass']("".concat(n,"open")),this.getPropertiesEl().style.display=r?'':'none'}},{key:"updateVisibility",value:function(){this.el.style.display=this.model.isVisible()?'':'none'}},{key:"getPropertiesEl",value:function(){var t=this.$el,e=this.pfx;return t.find(".".concat(e,"properties")).get(0)}},{key:"toggle",value:function(){var t=this.model;t.setOpen(!t.get('open'))}},{key:"renderProperties",value:function(){var t=this.model,e=this.config,n=t.get('properties');if(n){var r=new rt({collection:n,config:e});this.$el.append(r.render().el)}}},{key:"render",value:function(){var t=this.pfx,e=this.model,n=this.$el,r=e.getId(),i=e.getName();return n.html(this.template({pfx:t,label:i})),this.renderProperties(),n.attr('class',"".concat(t,"sector ").concat(t,"sector__").concat(r," no-select")),this.updateOpen(),this}}]),n}(u["View"]);function be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var we=function(t){w()(n,t);var e=be(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.module,n=t.config,r=void 0===n?{}:n,i=this.collection;this.pfx=r.stylePrefix||'',this.ppfx=r.pStylePrefix||'',this.config=r,this.module=e,this.listenTo(i,'add',this.addTo),this.listenTo(i,'reset',this.render)}},{key:"remove",value:function(){var t=this;u["View"].prototype.remove.apply(this,arguments),['config','module','em'].forEach((function(e){return t[e]={}}))}},{key:"addTo",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.addToCollection(t,null,n)}},{key:"addToCollection",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.config,i=this.el,o=e||i,s=new ye({model:t,config:r}).render().el;return Object(et["b"])(o,s,n.at),s}},{key:"render",value:function(){var t=this,e=this.$el,n=this.pfx,r=this.ppfx;e.empty();var i=document.createDocumentFragment();return this.collection.each((function(e){return t.addToCollection(e,i)})),e.append(i),e.addClass("".concat(n,"sectors ").concat(r,"one-bg ").concat(r,"two-color")),this}}]),n}(u["View"]),Oe=n(9);function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Se='style',ke="".concat(Se,":"),je="".concat(ke,"sector"),Ee="".concat(je,":add"),_e="".concat(je,":remove"),Pe="".concat(je,":update"),Te="".concat(ke,"property"),Ae="".concat(Te,":add"),De="".concat(Te,":remove"),Me="".concat(Te,":update"),Le="".concat(ke,"layer:select"),Re="".concat(ke,"target"),Ne="".concat(ke,"custom"),Ie=function(t){return t||0===t};e["default"]=function(){var t,e,n;return Ce(Ce({},l["a"]),{},{Sector:ee,events:{all:Se,sectorAdd:Ee,sectorRemove:_e,sectorUpdate:Pe,propertyAdd:Ae,propertyRemove:De,propertyUpdate:Me,layerSelect:Le,target:Re,custom:Ne},name:'StyleManager',init:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__initConfig(h,r);var i=this.config,o=i.em,s=i.pStylePrefix;s&&(i.stylePrefix=s+i.stylePrefix),this.builtIn=new de,t=new Jt([],{em:o,module:this}),e=new oe([],Ce(Ce({},i),{},{module:this}));var c=new u["Model"]({targets:[]});this.model=c,this.__listenAdd(e,Ee),this.__listenRemove(e,_e),this.__listenUpdate(e,Pe);var l='component:toggled component:update:classes change:state change:device frame:resized selector:type',f=Object(a["debounce"])((function(){return n.__upSel()}));c.listenTo(o,l,f);var d=Object(a["debounce"])((function(){n.__upProps(),n.__trgCustom()}));c.listenTo(o,'styleable:change undo redo',d);var p=Object(a["debounce"])((function(){return n.__trgCustom()}));return c.listenTo(o,"".concat(Le," ").concat(Re),p),c.on('change:lastTarget',(function(){return o.trigger(Re,n.getSelected())})),this},__upSel:function(){this.select(this.em.getSelectedAll())},__trgCustom:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},__trgEv:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.em).trigger.apply(e,[t].concat(r))},onLoad:function(){e.add(this.config.sectors,{silent:!0})},postRender:function(){this.__appendTo()},addSector:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getSector(t);return i||(n.id=t,i=e.add(n,r)),i},getSector:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.where({id:t})[0];return!r&&n.warn&&this._logNoSector(t),r||null},getSectors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e&&e.models?t.array?i()(e.models):e:[];return t.visible?n.filter((function(t){return t.isVisible()})):n},removeSector:function(t){return this.getSectors().remove(this.getSector(t,{warn:1}))},addProperty:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getSector(t,{warn:1}),i=null;return r&&(i=r.addProperty(e,n)),i},getProperty:function(t,e){var n,r=this.getSector(t,{warn:1});return r&&(n=r.get('properties').filter((function(t){return t.get('property')===e||t.get('id')===e}))[0]),n||null},getProperties:function(t){var e=null,n=this.getSector(t,{warn:1});return n&&(e=n.get('properties')),e},removeProperty:function(t,e){var n=this.getProperties(t);return n?n.remove(this.getProperty(t,e)):null},select:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,i=Object(a["isArray"])(t)?t:[t],o=n.stylable,s=r.get('CssComposer'),l=[];i.filter(Boolean).forEach((function(t){var e=t;if(Object(a["isString"])(t)){var n=s.getRule(t)||s.setRule(t);!Object(a["isUndefined"])(o)&&n.set({stylable:o}),e=n}l.push(e)}));var u=n.component||l.filter((function(t){return Object(c["isComponent"])(t)})).reverse()[0];l=l.map((function(t){return e.getModelToStyle(t)}));var f=r.getState(),h=l.slice().reverse()[0],d=this.getParentRules(h,{state:f,component:u}),p=this.__getStateTarget();return r.skip((function(){var t;if(f&&null!=h&&null!==(t=h.getState)&&void 0!==t&&t.call(h)){var e=h.getStyle();p?p.setStyle(e):p=s.getAll().add({selectors:'gjs-selected',style:e,important:!0})}else p&&(s.remove(p),p=null)})),this.model.set({targets:l,lastTarget:h,lastTargetParents:d,stateTarget:p,component:u}),this.__upProps(n),l},getSelected:function(){return this.model.get('lastTarget')||null},getSelectedAll:function(){return this.model.get('targets')},getSelectedParents:function(){return this.model.get('lastTargetParents')||[]},__getStateTarget:function(){return this.model.get('stateTarget')||null},applyUpdateStyle:function(t){console.log('opts',t);var e=this.em.get('DomComponents').getById(t.id);console.log('target',e),e.addStyle(t.style,t.opts)},addStyleTargets:function(t,e){this.getSelectedAll().map((function(n){return n.addStyle(t,e)}));var n=this.em.getSelected(),r=n.getId();n.setStyle(n.getStyle(),e);var i={action:'update-style',opts:{id:r,style:t,opts:e}};Oe["c"]==Oe["d"].Synced?(Object(Oe["h"])(Oe["d"].ApplyingLocalOp),Object(Oe["b"])(i)):Oe["c"]!=Oe["d"].AwaitingACK&&Oe["c"]!=Oe["d"].AwaitingWithBuffer||(Object(Oe["h"])(Oe["d"].ApplyingBufferedLocalOp),Object(Oe["a"])(i))},getBuiltIn:function(t){return this.builtIn.get(t)},getBuiltInAll:function(){return this.builtIn.props},addBuiltIn:function(t,e){return this.builtIn.add(t,e)},getModelToStyle:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,i=n.skipAdd;if(r&&null!==(e=t)&&void 0!==e&&e.toHTML){var o,s=r.getConfig(),a=r.get('UndoManager'),c=r.get('CssComposer'),l=r.get('SelectorManager'),u=l?l.getConfig():{},f=s.devicePreviewMode?'':r.get('state'),h=t.get('classes'),d=h.getStyleable(),p=d.length,g=!u.componentFirst||n.useClasses,v={noCount:1},m={state:f,addOpts:v};if(a.stop(),p&&g){var y=r.getCurrentMedia();(o=c.get(d,f,y))||i||(o=c.add(d,f,y,{},v))}else if(s.avoidInlineStyle){var b=t.getId();!(o=c.getIdRule(b,m))&&!i&&(o=c.setIdRule(b,{},m)),t.is('wrapper')&&o.set('wrapper',1,v)}o&&(t=o),a.start()}return t},getParentRules:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.state,r=e.component,i=this.em,o=[];if(i&&t){var s=r,c=i.get('CssComposer'),l=i.get('CodeManager').getGenerator('css'),u=t.toHTML?t:t.getComponent(),f={combination:!0,array:!0},h=[],d=[],p=[];u?(h=c.getRules("#".concat(u.getId())),p=(d=s?c.getRules(s.getSelectors().getFullName(f)):[]).concat(h)):(h=s?c.getRules("#".concat(s.getId())):[],d=c.getRules(t.getSelectors().getFullName(f)),p=h.concat(d));var g=p.filter((function(t){return Object(a["isUndefined"])(n)?1:t.get('state')===n})).sort(l.sortRules).reverse();o=g.slice(g.indexOf(t)+1)}return o},addType:function(e,n){t.addType(e,n)},getType:function(e){return t.getType(e)},getTypes:function(){return t.getTypes()},createType:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.model,r=void 0===n?{}:n,i=e.view,o=void 0===i?{}:i,s=this.config,a=this.getType(t);if(a)return new a.view(Ce({model:new a.model(r),config:s},o))},render:function(){var t=this.config,r=this.em,i=n&&n.el;return(n=new we({el:i,em:r,config:t,collection:e,module:this})).render().el},_logNoSector:function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},__upProps:function(t){var n=this,r=this.getSelected();if(r){var i=this.model.get('component'),o=this.getSelectedParents(),s=r.getStyle(),a=o.map((function(t){return{target:t,style:t.getStyle()}}));e.map((function(e){e.getProperties().map((function(e){n.__upProp(e,s,a,t)}))})),e.forEach((function(t){var n=t.getProperties();n.forEach((function(t){var n=t.__checkVisibility({target:r,component:i,sectors:e});t.set('visible',n)}));var o=n.some((function(t){return t.isVisible()}));t.set('visible',o)}))}},__upProp:function(t,e,n,r){var i=this,o=t.getName(),s=e[o],a=Ie(s),c='stack'===t.getType(),l='composite'===t.getType(),u=Ce(Ce({},r),{},{__up:!0}),f=!l&&!c,h=c?t.__getLayersFromStyle(e):[],d=l?t.__getPropsFromStyle(e):{},p=a?s:null,g=null;if(c&&null===h||l&&null===d){var v=c?'__getLayersFromStyle':'__getPropsFromStyle',m=n.filter((function(e){return null!==t[v](e.style)}))[0];if(m){p=m.style[o],g=m.target;var y=t[v](m.style);c?h=y:d=y}}else if(!a){p=null;var b=n.filter((function(t){return Ie(t.style[o])}))[0];b&&(p=b.style[o],g=b.target)}if(t.__setParentTarget(g),f&&t.__getFullValue()!==p&&t.upValue(p,u),c&&t.__setLayers(h||[]),l){var w=t.getProperties();if(t.isDetached()){var O=t.__getPropsFromStyle(e,{byName:!0})||{},x=n.map((function(e){return Ce(Ce({},e),{},{style:t.__getPropsFromStyle(e.style,{byName:!0})||{}})}));w.map((function(t){return i.__upProp(t,O,x,r)}))}else t.__setProperties(d||{},u),t.getProperties().map((function(t){return t.__setParentTarget(g)}))}},destroy:function(){[t,e].forEach((function(t){t.reset(),t.stopListening()})),n&&n.remove(),[t,e,n].forEach((function(t){return{}})),this.em={},this.config={},this.builtIn={},this.model={}}})}},function(t,e,n){"use strict";n.r(e),n.d(e,"evAll",(function(){return K})),n.d(e,"evPfx",(function(){return Y})),n.d(e,"evSelect",(function(){return J})),n.d(e,"evUpdate",(function(){return X})),n.d(e,"evAdd",(function(){return Z})),n.d(e,"evRemove",(function(){return Q})),n.d(e,"evRemoveBefore",(function(){return tt})),n.d(e,"evCustom",(function(){return et})),n.d(e,"evOpen",(function(){return nt})),n.d(e,"evClose",(function(){return rt})),n.d(e,"evUpload",(function(){return it})),n.d(e,"evUploadStart",(function(){return ot})),n.d(e,"evUploadEnd",(function(){return st})),n.d(e,"evUploadError",(function(){return at})),n.d(e,"evUploadRes",(function(){return ct}));var r=n(2),i=n.n(r),o=n(0),s=n(32),a={assets:[],noAssets:'',stylePrefix:'am-',upload:0,uploadName:'files',headers:{},params:{},credentials:'include',multiUpload:!0,autoAdd:!0,customFetch:null,uploadFile:null,embedAsBase64:!0,handleAdd:null,beforeUpload:null,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:1,dropzoneContent:''},c=n(3),l=n.n(c),u=n(5),f=n.n(u),h=n(6),d=n.n(h),p=n(7),g=n.n(p),v=n(8),m=n.n(v),y=n(4),b=n.n(y);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}var O=function(t){g()(n,t);var e=w(n);function n(){return f()(this,n),e.apply(this,arguments)}return d()(n,[{key:"defaults",value:function(){return{type:'',src:''}}},{key:"getType",value:function(){return this.get('type')}},{key:"getSrc",value:function(){return this.get('src')}},{key:"getFilename",value:function(){return this.get('src').split('/').pop().split('?').shift()}},{key:"getExtension",value:function(){return this.getFilename().split('.').pop()}}]),n}(c["Model"]);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}O.prototype.idAttribute='src',O.getDefaults=function(){return Object(o["result"])(this.prototype,'defaults')};var k,j,E,_=function(t){g()(n,t);var e=S(n);function n(){return f()(this,n),e.apply(this,arguments)}return d()(n,[{key:"defaults",value:function(){return C(C({},O.getDefaults()),{},{type:'image',unitDim:'px',height:0,width:0})}}]),n}(O),P=n(21),T=n.n(P),A=l.a.View.extend({initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,this.collection=t.collection;var e=t.config||{};this.config=e,this.pfx=e.stylePrefix||'',this.ppfx=e.pStylePrefix||'',this.em=e.em,this.className=this.pfx+'asset',this.listenTo(this.model,'destroy remove',this.remove),this.model.view=this;var n=this.init&&this.init.bind(this);n&&n(t)},__getBhv:function(){var t=this.em,e=t&&t.get('AssetManager');return e&&e.__getBehaviour()||{}},template:function(){var t=this.pfx;return"\n      <div class=\"".concat(t,"preview-cont\">\n        ").concat(this.getPreview(),"\n      </div>\n      <div class=\"").concat(t,"meta\">\n        ").concat(this.getInfo(),"\n      </div>\n      <div class=\"").concat(t,"close\" data-toggle=\"asset-remove\">\n        &Cross;\n      </div>\n    ")},updateTarget:function(t){t&&t.set&&(t.set('attributes',Object(o["clone"])(t.get('attributes'))),t.set('src',this.model.get('src')))},getPreview:function(){return''},getInfo:function(){return''},render:function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this}}),D=n(20),M=A.extend({events:{'click [data-toggle=asset-remove]':'onRemove',click:'onClick',dblclick:'onDblClick'},getPreview:function(){var t=this.pfx,e=this.ppfx,n=this.model.get('src');return Object(D["a"])(k||(k=T()(["\n      <div class=\"","preview\" style=\"background-image: url('","');\"></div>\n      <div class=\"","preview-bg ","checker-bg\"></div>\n    "])),t,n,t,e)},getInfo:function(){var t=this.pfx,e=this.model,n=e.get('name'),r=e.get('width'),i=e.get('height'),o=e.get('unitDim'),s=r&&i?"".concat(r,"x").concat(i).concat(o):'';return n=n||e.getFilename(),Object(D["a"])(j||(j=T()(["\n      <div class=\"","name\">","</div>\n      <div class=\"","dimensions\">","</div>\n    "])),t,n,t,s)},init:function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},onClick:function(){var t=this.model,e=this.pfx,n=this.__getBhv().select,r=this.config.onClick,i=this.collection;i.trigger('deselectAll'),this.$el.addClass(e+'highlight'),Object(o["isFunction"])(n)?n(t,!1):Object(o["isFunction"])(r)?r(t):this.updateTarget(i.target)},onDblClick:function(){var t=this.em,e=this.model,n=this.__getBhv().select,r=this.config.onDblClick,i=this.collection,s=i.target,a=i.onSelect;Object(o["isFunction"])(n)?n(e,!0):Object(o["isFunction"])(r)?r(e):(this.updateTarget(s),t&&t.get('Modal').close()),Object(o["isFunction"])(a)&&a(e)},onRemove:function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)}}),L=n(56),R=l.a.Collection.extend(L["a"]).extend({types:[{id:'image',model:_,view:M,isType:function(t){return'string'==typeof t?{type:'image',src:t}:t}}]}),N=n(23),I=n.n(N),F=["pfx","ppfx","em"],B=l.a.View.extend({events:{submit:'handleSubmit'},template:function(t){var e=t.pfx,n=t.ppfx,r=t.em,i=(I()(t,F),'');return this.config.showUrlInput&&(i="\n          <form class=\"".concat(e,"add-asset\">\n            <div class=\"").concat(n,"field ").concat(e,"add-field\">\n              <input placeholder=\"").concat(r&&r.t('assetManager.inputPlh'),"\"/>\n            </div>\n            <button class=\"").concat(n,"btn-prim\">").concat(r&&r.t('assetManager.addButton'),"</button>\n            <div style=\"clear:both\"></div>\n          </form>\n      ")),"\n    <div class=\"".concat(e,"assets-cont\">\n      <div class=\"").concat(e,"assets-header\">\n        ").concat(i,"\n      </div>\n      <div class=\"").concat(e,"assets\" data-el=\"assets\"></div>\n      <div style=\"clear:both\"></div>\n    </div>\n    ")},initialize:function(t){this.options=t,this.config=t.config,this.pfx=this.config.stylePrefix||'',this.ppfx=this.config.pStylePrefix||'',this.em=this.config.em;var e=this.collection;this.listenTo(e,'reset',this.renderAssets),this.listenTo(e,'add',this.addToAsset),this.listenTo(e,'remove',this.removedAsset),this.listenTo(e,'deselectAll',this.deselectAll)},handleFileUpload:function(t){console.log('handleSubmit => url: ',t);var e=this.config.handleAdd;t&&(this.getAssetsEl().scrollTop=0,e?e.bind(this)(t):this.options.globalCollection.add(t,{at:0}))},handleSubmit:function(t){console.trace(),t.preventDefault();var e=this.getAddInput(),n=e&&e.value.trim();console.log('handleSubmit => url: ',n);var r=this.config.handleAdd;n&&(e.value='',this.getAssetsEl().scrollTop=0,r?r.bind(this)(n):this.options.globalCollection.add(n,{at:0}))},getAssetsEl:function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},getAddInput:function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},removedAsset:function(t){this.collection.length||this.toggleNoAssets()},addToAsset:function(t){1==this.collection.length&&this.toggleNoAssets(1),this.addAsset(t)},addAsset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log('addAsset => AssetsView.js'),console.trace(),console.log('model: ',t);var n=e,r=this.collection,i=this.config,o=new t.typeView({model:t,collection:r,config:i}).render().el;if(n)n.appendChild(o);else{var s=this.getAssetsEl();s&&s.insertBefore(o,s.firstChild)}return o},toggleNoAssets:function(t){var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var n=this.config.noAssets;n&&e.append(n)}},deselectAll:function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},renderAssets:function(){var t=this,e=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(this.collection.length),this.collection.each((function(n){return t.addAsset(n,e)})),n.append(e)},render:function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this}}),V=n(55),U=n(50),z=n.n(U);function H(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $=l.a.View.extend({template:function(t){var e=t.pfx,n=t.title,r=t.uploadId,i=t.disabled,o=t.multiUpload;return Object(D["a"])(E||(E=T()(["\n        <form>\n          <div id=\"","title\">","</div>\n          <input\n            type=\"file\"\n            id=\"","\"\n            name=\"file\"\n            accept=\"*/*\"\n            ","\n            ","\n          />\n          <div style=\"clear:both;\"></div>\n        </form>\n      "])),e,n,r,i?'disabled':'',o?'multiple':'')},events:{},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.trace(),this.options=t;var e=t.config||{};this.module=t.module,this.config=e,this.em=this.config.em,this.pfx=e.stylePrefix||'',this.ppfx=e.pStylePrefix||'',this.target=this.options.globalCollection||{},this.uploadId=this.pfx+'uploadFile',this.disabled=void 0!==e.disableUpload?e.disableUpload:!e.upload&&!e.embedAsBase64,this.multiUpload=void 0===e.multiUpload||e.multiUpload,this.events['change #'+this.uploadId]='uploadFile';var n=e.uploadFile;n?this.uploadFile=n.bind(this):!e.upload&&e.embedAsBase64&&(console.log('FileUploader.js'),this.uploadFile=this.constructor.embedAsBase64),this.delegateEvents()},onUploadStart:function(){console.log('FileUploader.js/onUploadStart');var t=this.module;t&&t.__propEv('asset:upload:start')},onUploadEnd:function(t){console.log('FileUploader.js/onUploadEnd');var e=this.$el,n=this.module;n&&n.__propEv('asset:upload:end',t);var r=e.find('input');r&&r.val('')},onUploadError:function(t){console.log('FileUploader.js/onUploadError');var e=this.module;console.error(t),this.onUploadEnd(t),e&&e.__propEv('asset:upload:error',t)},onUploadResponse:function(t,e){console.log('FileUploader.js/onUploadResponse');var n,r=this.module,i=this.config,o=this.target;console.log('onUploadResponse');try{n='string'==typeof t?JSON.parse(t):t}catch(e){n=t}r&&r.__propEv('asset:upload:response',n),i.autoAdd&&o&&o.add(n.data,{at:0}),this.onUploadEnd(t),e&&e(n)},uploadFile:function(t,e){var n=this;console.log('FileUploader.js/uploadFile--start');var r=t.dataTransfer?t.dataTransfer.files:t.target.files;console.log('FileUploader.js => uploadFile files:',r),console.trace();var i=this.config,o=i.beforeUpload;if(!1!==(o&&o(r))){var s=new FormData,a=i.params,c=i.customFetch;for(var l in a)s.append(l,a[l]);if(this.multiUpload)for(var u=0;u<r.length;u++)s.append("".concat(i.uploadName,"[]"),r[u]);else r.length&&s.append(i.uploadName,r[0]);this.target;var f=i.upload,h=i.headers,d='X-Requested-With';if(void 0===h[d]&&(h[d]='XMLHttpRequest'),f){this.onUploadStart();var p={method:'post',credentials:i.credentials||'include',headers:h,body:s},g=c?c(f,p):Object(V["a"])(f,p).then((function(t){return 1==(t.status/200|0)?t.text():t.text().then((function(t){return Promise.reject(t)}))}));return console.log('FileUploader.js/uploadFile--end'),g.then((function(t){return n.onUploadResponse(t,e)})).catch((function(t){return n.onUploadError(t)}))}}},initDrop:function(){console.log('FileUploader.js/initDrop--start');var t=this;if(!this.uploadForm&&(this.uploadForm=this.$el.find('form').get(0),'draggable'in this.uploadForm)){this.uploadFile;this.uploadForm.ondragover=function(){return this.className=t.pfx+'hover',!1},this.uploadForm.ondragleave=function(){return this.className='',!1},this.uploadForm.ondrop=function(e){this.className='',e.preventDefault(),t.uploadFile(e)}}},initDropzone:function(t){var e=this;console.log('FileUploader.js/initDropzone--start');var n=0,r=this.config,i=t.model,o=t.el,s=i.get('Editor'),a=(i.get('Config').el,i.get('Canvas').getBody()),c=this.ppfx,l="".concat(c,"dropzone-active"),u="".concat(c,"dropzone"),f=function(){o.className=o.className.replace(l,'').trim(),n=0},h=function(){return n||(o.className+=" ".concat(l),n=1),!1},d=function(){return f(),!1},p=function(t){if(f(),t.preventDefault(),t.stopPropagation(),e.uploadFile(t),r.openAssetsOnDrop&&s){var n=s.getSelected();s.runCommand('open-assets',{target:n,onSelect:function(){s.Modal.close(),s.AssetManager.setTarget(null)}})}return!1};t.$el.append("<div class=\"".concat(u,"\">").concat(r.dropzoneContent,"</div>")),f(),'draggable'in o&&[o,a].forEach((function(t){t.ondragover=h,t.ondragleave=d,t.ondrop=p}))},render:function(){console.log('FileUploader.js/render--start');var t=this.$el,e=this.pfx,n=this.em;return t.html(this.template({title:n&&n.t('assetManager.uploadTitle'),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:e})),this.initDrop(),t.attr('class',e+'file-uploader'),this}},{embedAsBase64:function(t,e){var n=this;console.log('FileUploader.js/ embedAsBase64--start');var r=t.dataTransfer?t.dataTransfer.files:t.target.files;if(console.log('embedAsBase64 => files: ',r),console.log('embedAsBase64'),console.trace(),FileReader){var i,o=/^(.+)\/(.+)$/,s=H(r);try{var a=function(){var t=i.value;console.log('embedAsBase64 => file: ',t);new Promise((function(e,r){var i=new FileReader;i.addEventListener('load',(function(e){t.name;var r=o.exec(t.type);r?r[1]:t.type,z.a.put('http://localhost:8080/picture/imgur',{base64:i.result.split(',')[1]}).then((function(t){var e=t.data.link;n.module.AssetsView().handleFileUpload(e)})).catch((function(t){console.log(t)}))}))}))};for(s.s();!(i=s.n()).done;)a()}catch(t){s.e(t)}finally{s.f()}}else this.onUploadError(new Error('Unsupported platform, FileReader is not defined'))}});function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K='asset',Y="".concat(K,":"),J="".concat(Y,"select"),X="".concat(Y,"update"),Z="".concat(Y,"add"),Q="".concat(Y,"remove"),tt="".concat(Q,":before"),et="".concat(Y,"custom"),nt="".concat(Y,"open"),rt="".concat(Y,"close"),it="".concat(Y,"upload"),ot="".concat(it,":start"),st="".concat(it,":end"),at="".concat(it,":error"),ct="".concat(it,":response");e["default"]=function(){var t,e,n,r,i={},c='open-assets';return G(G({},s["a"]),{},{name:'AssetManager',storageKey:'assets',Asset:R,Assets:R,am:n,events:{all:K,select:J,update:X,add:Z,remove:Q,removeBefore:tt,custom:et,open:nt,close:rt,uploadStart:ot,uploadEnd:st,uploadError:at,uploadResponse:ct},init:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(i=G(G({},a),r)).pStylePrefix,s=i,c=s.em;return this.config=i,this.em=c,o&&(i.stylePrefix=o+i.stylePrefix),t=new R([]),e=new R([]),this.all=t,this.__initListen(),t.on('add',(function(t){return n.getAllVisible().add(t)})),t.on('remove',(function(t){return n.getAllVisible().remove(t)})),this},__propEv:function(t){var e,n;console.log('__propEv',t),console.trace();for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];(e=this.em).trigger.apply(e,[t].concat(i)),(n=this.getAll()).trigger.apply(n,[t].concat(i))},__onAllEvent:Object(o["debounce"])((function(){this.__trgCustom()})),__trgCustom:function(){(this.__getBehaviour().container||this.getConfig('custom').open)&&this.em.trigger(this.events.custom,this.__customData())},__customData:function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(){return t.remove.apply(t,arguments)},select:function(n,r){var i=t.add(n);Object(o["isFunction"])(e.select)&&e.select(i,r)},options:e.options||{}}},open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.em.get('Commands');e.run(c,G({types:['image'],select:function(){}},t))},close:function(){this.em.get('Commands').stop(c)},isOpen:function(){var t=this.em.get('Commands');return!(!t||!t.isActive(c))},add:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.trace(),void 0===n.at&&(n.at=0),t.add(e,n)},get:function(e){return t.where({src:e})[0]||null},getAll:function(){return t},getAllVisible:function(){return e},remove:function(t,e){return this.__remove(t,e)},store:function(t){var e={},n=JSON.stringify(this.getAll().toJSON());return e[this.storageKey]=n,!t&&i.stm&&i.stm.store(e),e},load:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.storageKey,n=t[e]||[];if('string'==typeof n)try{n=JSON.parse(t[e])}catch(t){}return n&&n.length&&this.getAll().reset(n),n},getContainer:function(){return this.__getBehaviour().container||n&&n.el},getAssetsEl:function(){return n.el.querySelector('[data-el=assets]')},render:function(t){if(!this.getConfig('custom')){var r=t||this.getAll().models;if(!n){var i=this.__viewParams();i.fu=this.FileUploader();var o=n&&n.el;(n=new B(G({el:o},i))).render()}return e.reset(r),this.getContainer()}},__viewParams:function(){return{collection:e,globalCollection:t,config:i,module:this}},addType:function(t,e){this.getAll().addType(t,e)},getType:function(t){return this.getAll().getType(t)},getTypes:function(){return this.getAll().getTypes()},AssetsView:function(){return n},FileUploader:function(){return r||(r=new $(this.__viewParams())),r},onLoad:function(){var t=this;this.getAll().reset(i.assets);var e=this.em,n=this.events;e.on("run:".concat(c),(function(){return t.__propEv(n.open)})),e.on("stop:".concat(c),(function(){return t.__propEv(n.close)}))},postRender:function(t){i.dropzone&&r&&r.initDropzone(t)},setTarget:function(t){e.target=t},onSelect:function(t){e.onSelect=t},onClick:function(t){i.onClick=t},onDblClick:function(t){i.onDblClick=t},__behaviour:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._bhv=G(G({},this._bhv||{}),t)},__getBehaviour:function(){return this._bhv||{}},destroy:function(){t.stopListening(),e.stopListening(),t.reset(),e.reset(),r&&r.remove(),n&&n.remove(),[t,e,n,r].forEach((function(t){return null})),this._bhv={},this.all={},i={}}})}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),o=n(0),s={stylePrefix:'trt-',appendTo:'',optionsTarget:[{value:!1},{value:'_blank'}]},a=n(44),c=n(43),l=n.n(c),u=n(3),f=n.n(u),h=n(1),d=(n(35),n(27),n(9));function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v=f.a.$,m=f.a.View.extend({events:{},eventCapture:['change'],appendInput:1,attributes:function(){return this.model.get('attributes')},templateLabel:function(){var t=this.ppfx,e=this.getLabel();return"<div class=\"".concat(t,"label\" title=\"").concat(e,"\">").concat(e,"</div>")},templateInput:function(){var t=this.clsField;return"<div class=\"".concat(t,"\" data-input></div>")},initialize:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.config,r=void 0===n?{}:n,i=this.model,o=this.eventCapture,s=i.target,a=i.attributes.type;this.config=r,this.em=r.em,this.pfx=r.stylePrefix||'',this.ppfx=r.pStylePrefix||'',this.target=s;var c=this.ppfx;this.clsField="".concat(c,"field ").concat(c,"field-").concat(a),[['change:value',this.onValueChange],['remove',this.removeView]].forEach((function(e){var n=l()(e,2),r=n[0],o=n[1];i.off(r,o),t.listenTo(i,r,o)})),i.view=this,this.listenTo(i,'change:label',this.render),this.listenTo(i,'change:placeholder',this.rerender),this.events={},o.forEach((function(e){return t.events[e]='onChange'})),this.delegateEvents(),this.init()},getClbOpts:function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},removeView:function(){this.remove(),this.removed()},init:function(){},removed:function(){},onRender:function(){},onUpdate:function(){},onEvent:function(){},onChange:function(t){for(var e=this.getInputElem(),n=this.em.getSelected().getId(),r=this.em.get('DomComponents').getById(n).getTraits(),i=this.model.cid,s=0,a=0;a<r.length;a++)if(r[a].cid==i){s=a;break}e&&!Object(o["isUndefined"])(e.value)&&this.model.set('value',e.value),this.onEvent(g(g({},this.getClbOpts()),{},{event:t}));var c={action:'update-trait',opts:{id:n,traitIndex:s,value:e.value}};d["c"]==d["d"].Synced?(Object(d["h"])(d["d"].ApplyingLocalOp),Object(d["b"])(c)):d["c"]!=d["d"].AwaitingACK&&d["c"]!=d["d"].AwaitingWithBuffer||(Object(d["h"])(d["d"].ApplyingBufferedLocalOp),Object(d["a"])(c))},getValueForTarget:function(){return this.model.get('value')},setInputValue:function(t){var e=this.getInputElem();e&&(e.value=t)},onValueChange:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.fromTarget)this.setInputValue(t.get('value')),this.postUpdate();else{var r=this.getValueForTarget();t.setTargetValue(r,n)}},renderLabel:function(){var t=this.$el,e=this.target,n=this.getLabel(),r=this.templateLabel(e);this.createLabel&&(r=this.createLabel({label:n,component:e,trait:this})||''),t.find('[data-label]').append(r)},getLabel:function(){var t=this.em,e=this.model.attributes,n=e.label,r=e.name;return t.t("traitManager.traits.labels.".concat(r))||Object(h["capitalize"])(n||r).replace(/-/g,' ')},getComponent:function(){return this.target},getInputEl:function(){if(!this.$input){var t=this.em,e=this.model,n=e,r=e.attributes.name,i=n.get('placeholder')||n.get('default')||'',s=n.get('type')||'text',a=n.get('min'),c=n.get('max'),l=this.getModelValue(),u=v("<input type=\"".concat(s,"\" placeholder=\"").concat(i,"\">")),f=t.t("traitManager.traits.attributes.".concat(r))||{};u.attr(f),Object(o["isUndefined"])(l)||(n.set({value:l},{silent:!0}),u.prop('value',l)),a&&u.prop('min',a),c&&u.prop('max',c),this.$input=u}return this.$input.get(0)},getInputElem:function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},getModelValue:function(){var t,e=this.model,n=this.target,r=e.get('name');if(e.get('changeProp'))t=n.get(r);else{var i=n.get('attributes');t=e.get('value')||i[r]}return Object(o["isUndefined"])(t)?'':t},getElInput:function(){return this.elInput},renderField:function(){var t=this.$el,e=this.appendInput,n=this.model,r=t.find('[data-input]'),i=r[r.length-1],s=n.el;s||(s=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),Object(o["isString"])(s)?(i.innerHTML=s,this.elInput=i.firstChild):(e?i.appendChild(s):i.insertBefore(s,i.firstChild),this.elInput=s),n.el=this.elInput},hasLabel:function(){var t=this.model.attributes.label;return!this.noLabel&&!1!==t},rerender:function(){this.model.el=null,this.render()},postUpdate:function(){this.onUpdate(this.getClbOpts())},render:function(){var t=this.$el,e=this.pfx,n=this.ppfx,r=this.model.attributes,i=r.type,s=r.id,a=this.hasLabel&&this.hasLabel(),c="".concat(e,"trait");this.$input=null;var l="<div class=\"".concat(c," ").concat(c,"--").concat(i,"\">\n      ").concat(a?"<div class=\"".concat(n,"label-wrp\" data-label></div>"):'',"\n      <div class=\"").concat(n,"field-wrp ").concat(n,"field-wrp--").concat(i,"\" data-input>\n        ").concat(this.templateInput?Object(o["isFunction"])(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:'',"\n      </div>\n    </div>");return t.empty().append(l),a&&this.renderLabel(),this.renderField(),this.el.className="".concat(c,"__wrp ").concat(c,"__wrp-").concat(s),this.postUpdate(),this.onRender(this.getClbOpts()),this}}),y=a["a"].extend({ns:'Traits',itemView:m,reuseView:1,initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.config||{},n=e.stylePrefix||'',r=t.editor;this.config=e,this.em=r,this.pfx=n,this.ppfx=e.pStylePrefix||'',this.className="".concat(n,"traits"),this.listenTo(r,'component:toggled',this.updatedCollection)},updatedCollection:function(){var t=this.ppfx,e=this.className,n=this.em.getSelected();this.el.className="".concat(e," ").concat(t,"one-bg ").concat(t,"two-color"),this.collection=n?n.get('traits'):[],this.render()}}),b=f.a.$,w=m.extend({init:function(){this.listenTo(this.model,'change:options',this.rerender)},templateInput:function(){var t=this.ppfx,e=this.clsField;return"<div class=\"".concat(e,"\">\n      <div data-input></div>\n      <div class=\"").concat(t,"sel-arrow\">\n        <div class=\"").concat(t,"d-s-arrow\"></div>\n      </div>\n    </div>")},getInputEl:function(){if(!this.$input){var t=this.model,e=this.em,n=t.get('name'),r=t.get('options')||[],i=[],s='<select>';r.forEach((function(t){var r,a,c,l='';Object(o["isString"])(t)?(r=t,a=t):(r=t.name||t.label||t.value,a="".concat(Object(o["isUndefined"])(t.value)?t.id:t.value).replace(/"/g,'&quot;'),l+=(c=t.style?t.style.replace(/"/g,'&quot;'):'')?" style=\"".concat(c,"\""):'');var u=e.t("traitManager.traits.options.".concat(n,".").concat(a))||r;s+="<option value=\"".concat(a,"\"").concat(l,">").concat(u,"</option>"),i.push(a)})),s+='</select>',this.$input=b(s);var a=t.getTargetValue(),c=i.indexOf(a)>=0?a:t.get('default');!Object(o["isUndefined"])(c)&&this.$input.val(c)}return this.$input.get(0)}}),O=m.extend({appendInput:0,templateInput:function(){var t=this.ppfx,e=this.clsField;return"<label class=\"".concat(e,"\" data-input>\n    <i class=\"").concat(t,"chk-icon\"></i>\n  </label>")},onChange:function(){var t=this.getInputElem().checked;this.model.set('value',this.getCheckedValue(t))},getCheckedValue:function(t){var e=t,n=this.model.attributes,r=n.valueTrue,i=n.valueFalse;return e&&!Object(o["isUndefined"])(r)&&(e=r),e||Object(o["isUndefined"])(i)||(e=i),e},getInputEl:function(){for(var t=!this.$input,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=m.prototype.getInputEl.apply(this,n);if(t){var s,a,c=this.model,l=this.target,u=c.attributes,f=(u.valueTrue,u.valueFalse),h=c.get('name');c.get('changeProp')?a=s=l.get(h):s=!(!(a=l.get('attributes')[h])&&''!==a),Object(o["isUndefined"])(f)||a!==f||(s=!1),i.checked=s}return i}}),x=n(57),C=m.extend({getValueForTarget:function(){var t=this.model,e=t.attributes,n=e.value,r=e.unit;return Object(o["isUndefined"])(n)||''===n?t.get('default'):n+r},getInputEl:function(){if(!this.input){var t=this.ppfx,e=this.model,n=this.getModelValue(),r=new x["a"]({contClass:"".concat(t,"field-int"),type:'number',model:e,ppfx:t});this.input=r.render(),this.$input=this.input.inputEl,this.$unit=this.input.unitEl,e.set('value',n,{fromTarget:1}),this.$input.val(n),this.input=r.el}return this.input}}),S=n(62),k=m.extend({templateInput:'',getInputEl:function(){if(!this.input){var t=this.model,e=this.getModelValue(),n=new S["a"]({model:t,target:this.config.em,contClass:this.ppfx+'field-color',ppfx:this.ppfx}).render();n.setValue(e,{fromTarget:1}),this.input=n.el}return this.input}}),j=m.extend({eventCapture:['click button'],templateInput:'',onChange:function(){this.handleClick()},handleClick:function(){var t=this.model,e=this.em,n=t.get('command');n&&(Object(o["isString"])(n)?e.get('Commands').run(n):n(e.get('Editor'),t))},renderLabel:function(){this.model.get('label')&&m.prototype.renderLabel.apply(this,arguments)},getInputEl:function(){var t=this.model,e=this.ppfx,n=t.props(),r=n.labelButton,i=n.text,o=n.full,s=r||i,a="".concat(e,"btn");return"<button type=\"button\" class=\"".concat(a,"-prim").concat(o?" ".concat(a,"--full"):'',"\">").concat(s,"</button>")}});function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["default"]=function(){var t,e={},n={text:m,number:C,select:w,checkbox:O,color:k,button:j};return{TraitsView:y,name:'TraitManager',getConfig:function(){return e},init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=t,Object(o["defaults"])(e,s);var r=e.pStylePrefix;return this.types=_({},n),r&&(e.stylePrefix="".concat(r).concat(e.stylePrefix)),this},postRender:function(){var t=this.getConfig().appendTo;t&&(Object(o["isElement"])(t)?t:document.querySelector(t)).appendChild(this.render())},getTraitsViewer:function(){return t},addType:function(t,e){var n=this.getType('text');this.types[t]=n.extend(e)},getType:function(t){return this.getTypes()[t]},getTypes:function(){return this.types},render:function(){var n=t&&t.el;return(t=new y({el:n,collection:[],editor:e.em,config:e})).itemsView=this.getTypes(),t.updatedCollection(),t.el},destroy:function(){t&&t.remove(),[e,t].forEach((function(t){return{}}))}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"evAll",(function(){return U})),n.d(e,"evPfx",(function(){return z})),n.d(e,"evAdd",(function(){return H})),n.d(e,"evUpdate",(function(){return W})),n.d(e,"evRemove",(function(){return $})),n.d(e,"evRemoveBefore",(function(){return q})),n.d(e,"evDrag",(function(){return G})),n.d(e,"evDragStart",(function(){return K})),n.d(e,"evDragStop",(function(){return Y})),n.d(e,"evCustom",(function(){return J}));var r=n(2),i=n.n(r),o=n(0),s=n(32),a={appendTo:'',appendOnClick:!1,blocks:[],custom:!1},c=n(5),l=n.n(c),u=n(6),f=n.n(u),h=n(7),d=n.n(h),p=n(8),g=n.n(p),v=n(4),m=n.n(v),y=n(3),b=n.n(y);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var O=function(t){d()(n,t);var e=w(n);function n(){return l()(this,n),e.apply(this,arguments)}return f()(n,[{key:"defaults",value:function(){return{label:'',content:'',media:'',category:'',activate:!1,select:null,resetId:!1,disable:!1,onClick:null,attributes:{}}}},{key:"getId",value:function(){return this.id}},{key:"getLabel",value:function(){return this.get('label')}},{key:"getMedia",value:function(){return this.get('media')}},{key:"getContent",value:function(){return this.get('content')}},{key:"getCategoryLabel",value:function(){var t=this.get('category');return Object(o["isFunction"])(t.get)?t.get('label'):t.label?t.label:t}}]),n}(y["Model"]);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var C=function(t){d()(n,t);var e=x(n);function n(){return l()(this,n),e.apply(this,arguments)}return f()(n)}(y["Collection"]);function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}C.prototype.model=O;var k=function(t){d()(n,t);var e=S(n);function n(){return l()(this,n),e.apply(this,arguments)}return f()(n,[{key:"defaults",value:function(){return{id:'',label:'',open:!0,attributes:{}}}}]),n}(y["Model"]);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var E=function(t){d()(n,t);var e=j(n);function n(){return l()(this,n),e.apply(this,arguments)}return f()(n)}(y["Collection"]);E.prototype.model=k;var _,P=n(1),T=b.a.View.extend({events:{click:'handleClick',mousedown:'startDrag',dragstart:'handleDragStart',drag:'handleDrag',dragend:'handleDragEnd'},initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model;this.em=e.em,this.config=e,this.endDrag=this.endDrag.bind(this),this.ppfx=e.pStylePrefix||'',this.listenTo(n,'destroy remove',this.remove),this.listenTo(n,'change',this.render)},__getModule:function(){return this.em.get('BlockManager')},handleClick:function(t){var e=this.config,n=this.model,r=this.em,i=n.get('onClick')||e.appendOnClick;if(r.trigger('block:click',n,t),i){if(Object(o["isFunction"])(i))return i(n,r.getEditor(),{event:t});var s,a=e.getSorter(),c=n.get('content'),l=r.getSelected();if(a.setDropContent(c),l)if(a.validTarget(l.getEl(),c).valid)s=l;else{var u=l.parent();a.validTarget(u.getEl(),c).valid&&(s=u)}if(!s){var f=r.getWrapper();a.validTarget(f.getEl(),c).valid&&(s=f)}var h=s&&s.append(c)[0];h&&r.setSelected(h,{scroll:1})}},startDrag:function(t){var e=this.config,n=this.em,r=this.model.get('disable');if(0===t.button&&e.getSorter&&!this.el.draggable&&!r){n.refreshCanvas();var i=e.getSorter();i.setDragHelper(this.el,t),i.setDropContent(this.model.get('content')),i.startSort(this.el),Object(P["on"])(document,'mouseup',this.endDrag)}},handleDragStart:function(t){this.__getModule().__startDrag(this.model,t)},handleDrag:function(t){this.__getModule().__drag(t)},handleDragEnd:function(){this.__getModule().__endDrag()},endDrag:function(t){Object(P["off"])(document,'mouseup',this.endDrag);var e=this.config.getSorter();e.moved=0,e.endMove()},render:function(){var t=this.em,e=this.el,n=this.$el,r=this.ppfx,i=this.model,o=i.get('disable'),s=i.get('attributes')||{},a=s.class||'',c="".concat(r,"block"),l=t&&t.t("blockManager.labels.".concat(i.id))||i.get('label'),u=i.get('render'),f=i.get('media'),h=o?"".concat(c,"--disable"):"".concat(r,"four-color-h");n.attr(s),e.className="".concat(a," ").concat(c," ").concat(r,"one-bg ").concat(h).trim(),e.innerHTML="\n      ".concat(f?"<div class=\"".concat(c,"__media\">").concat(f,"</div>"):'',"\n      <div class=\"").concat(c,"-label\">").concat(l,"</div>\n    "),e.title=s.title||e.textContent.trim(),e.setAttribute('draggable',!(!Object(P["hasDnd"])(t)||o));var d=u&&u({el:e,model:i,className:c,prefix:r});return d&&(e.innerHTML=d),this}}),A=n(21),D=n.n(A),M=n(20);function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var R=function(t){d()(n,t);var e=L(n);function n(){return l()(this,n),e.apply(this,arguments)}return f()(n,[{key:"template",value:function(t){var e=t.pfx,n=t.label;return Object(M["a"])(_||(_=D()(["\n      <div class=\"","title\">\n        <i class=\"","caret-icon\"></i>\n        ","\n      </div>\n      <div class=\"","blocks-c\"></div>\n    "])),e,e,n,e)}},{key:"attributes",value:function(){return this.model.get('attributes')}},{key:"initialize",value:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.config=t;var e=t.pStylePrefix||'';this.em=t.em,this.pfx=e,this.caretR='fa fa-caret-right',this.caretD='fa fa-caret-down',this.iconClass="".concat(e,"caret-icon"),this.activeClass="".concat(e,"open"),this.className="".concat(e,"block-category"),this.events={},this.events["click .".concat(e,"title")]='toggle',this.listenTo(this.model,'change:open',this.updateVisibility),this.delegateEvents(),this.model.view=this}},{key:"updateVisibility",value:function(){this.model.get('open')?this.open():this.close()}},{key:"open",value:function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=''}},{key:"close",value:function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display='none'}},{key:"toggle",value:function(){var t=this.model;t.set('open',!t.get('open'))}},{key:"getIconEl",value:function(){return this.iconEl||(this.iconEl=this.el.querySelector('.'+this.iconClass)),this.iconEl}},{key:"getBlocksEl",value:function(){return this.blocksEl||(this.blocksEl=this.el.querySelector('.'+this.pfx+'blocks-c')),this.blocksEl}},{key:"append",value:function(t){this.getBlocksEl().appendChild(t)}},{key:"render",value:function(){var t=this.em,e=this.el,n=this.$el,r=this.model,i=this.pfx,o=t.t("blockManager.categories.".concat(r.id))||r.get('label');return e.innerHTML=this.template({pfx:i,label:o}),n.addClass(this.className),n.css({order:r.get('order')}),this.updateVisibility(),this}}]),n}(y["View"]);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F=b.a.View.extend({initialize:function(t,e){Object(o["bindAll"])(this,'getSorter','onDrag','onDrop','onMove'),this.config=e||{},this.categories=t.categories||'',this.renderedCategories=[];var n=this.config.pStylePrefix||'';this.ppfx=n,this.noCatClass="".concat(n,"blocks-no-cat"),this.blockContClass="".concat(n,"blocks-c"),this.catsClass="".concat(n,"block-categories");var r=this.collection;this.listenTo(r,'add',this.addTo),this.listenTo(r,'reset',this.render),this.em=this.config.em,this.tac='test-tac',this.grabbingCls=this.ppfx+'grabbing',this.em&&(this.config.getSorter=this.getSorter,this.canvas=this.em.get('Canvas'))},updateConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=I(I({},this.config),t)},getSorter:function(){if(this.em){if(!this.sorter){var t=this.em.get('Utils'),e=this.canvas;this.sorter=new t.Sorter({container:e.getBody(),placer:e.getPlacerEl(),containerSel:'*',itemSel:'*',pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:e.getFrameEl().contentDocument,direction:'a',wmargin:1,nested:1,em:this.em,canvasRelative:1})}return this.sorter}},onDrag:function(t){this.em.stopDefault(),this.em.trigger('block:drag:start',t)},onMove:function(t){this.em.trigger('block:drag:move',t)},onDrop:function(t){var e=this.em;if(e.runDefault(),t&&t.get){var n='activeOnRender';t.get(n)&&(t.trigger('active'),t.unset(n)),e.trigger('block:drag:stop',t)}},addTo:function(t){this.add(t)},add:function(t,e){var n=this.config,r=e||null,i=new T({model:t,attributes:t.get('attributes')},n).render().el,s=t.get('category');if(s&&this.categories&&!n.ignoreCategories){Object(o["isString"])(s)?s={id:s,label:s}:Object(o["isObject"])(s)&&!s.id&&(s.id=s.label);var a=this.categories.add(s),c=a.get('id'),l=this.renderedCategories[c],u=this.getCategoriesEl();return t.set('category',a,{silent:!0}),!l&&u&&(l=new R({model:a},this.config).render(),this.renderedCategories[c]=l,u.appendChild(l.el)),void(l&&l.append(i))}r?r.appendChild(i):this.append(i)},getCategoriesEl:function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},getBlocksEl:function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},append:function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},render:function(){var t=this,e=this.ppfx,n=document.createDocumentFragment();this.catsEl=null,this.blocksEl=null,this.renderedCategories=[],this.el.innerHTML="\n      <div class=\"".concat(this.catsClass,"\"></div>\n      <div class=\"").concat(this.noCatClass,"\">\n        <div class=\"").concat(this.blockContClass,"\"></div>\n      </div>\n    "),this.collection.each((function(e){return t.add(e,n)})),this.append(n);var r="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(r),this.rendered=!0,this}});function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U='block',z="".concat(U,":"),H="".concat(z,"add"),W="".concat(z,"update"),$="".concat(z,"remove"),q="".concat($,":before"),G="".concat(z,"drag"),K="".concat(G,":start"),Y="".concat(G,":stop"),J="".concat(z,"custom");e["default"]=function(){var t,e,n,r={},i=[];return V(V({},s["a"]),{},{name:'BlockManager',Block:O,Blocks:C,Category:k,Categories:E,events:{all:U,update:W,add:H,remove:$,removeBefore:q,drag:G,dragStart:K,dragEnd:Y,custom:J},init:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r=V(V({},a),n),s=o.em;return this.em=s,t=new C(r.blocks),e=new C(t.models),i=new E,this.all=t,this.__initListen(),t.on('add',(function(t){return e.add(t)})),t.on('remove',(function(t){return e.remove(t)})),t.on('reset',(function(t){return e.reset(t.models)})),this},__trgCustom:function(){this.em.trigger(this.events.custom,this.__customData())},__customData:function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(e,n){return t.startDrag(e,n)},drag:function(e){return t.__drag(e)},dragStop:function(e){return t.endDrag(e)}}},__startDrag:function(e,n){var r=this.em,i=this.events,o=e.getContent?e.getContent():e;this._dragBlock=e,r.set({dragResult:null,dragContent:o}),[r,t].map((function(t){return t.trigger(i.dragStart,e,n)}))},__drag:function(e){var n=this.em,r=this.events,i=this._dragBlock;[n,t].map((function(t){return t.trigger(r.drag,i,e)}))},__endDrag:function(){var e=this.em,n=this.events,r=this._dragBlock,i=e.get('dragResult');if(this._dragBlock=null,i){var s='activeOnRender',a=i.get&&i.get(s),c=r.get('activate')||a,l=r.get('select'),u=Object(o["isArray"])(i)?i[0]:i;(l||c&&!1!==l)&&e.setSelected(u),c&&(u.trigger('active'),a&&u.unset(s)),r.get('resetId')&&u.onAll((function(t){return t.resetId()}))}e.set({dragResult:null,dragContent:null}),[e,t].map((function(t){return t.trigger(n.dragEnd,i,r)}))},__getFrameViews:function(){return this.em.get('Canvas').getFrames().map((function(t){return t.view}))},__behaviour:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._bhv=V(V({},this._bhv||{}),t)},__getBehaviour:function(){return this._bhv||{}},startDrag:function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach((function(t){return t.droppable.startCustom()}))},endDrag:function(t){this.__getFrameViews().forEach((function(e){return e.droppable.endCustom(t)})),this.__endDrag()},getConfig:function(){return r},postRender:function(){n=new F({collection:e,categories:i},r);var t=this.getConfig().appendTo;if(t){var s=Object(o["isElement"])(t)?t:document.querySelector(t);if(!s)return this.__logWarn('"appendTo" element not found');s.appendChild(this.render(e.models))}this.__trgCustom()},add:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n||{};return i.id=e,t.add(i,r)},get:function(e){return t.get(e)},getAll:function(){return t},getAllVisible:function(){return e},remove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.__remove(t,e)},getCategories:function(){return i},getContainer:function(){return n.el},render:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t||this.getAll().models;if(e.external){var s=new C(o);return new F({collection:s,categories:i},V(V({},r),e)).render().el}return n&&(n.updateConfig(e),n.collection.reset(o),n.rendered||(n.render(),n.rendered=1)),this.getContainer()},destroy:function(){var o=[t,e,i];o.map((function(t){return t.stopListening()})),o.map((function(t){return t.reset()})),n&&n.remove(),r={},t={},e={},n={},i=[],this.all={}}})}},function(t,e,n){"use strict";n.r(e);var r='sw-visibility',i='export-template',o='open-sm',s='open-tm',a='open-layers',c='open-blocks',l='fullscreen',u='preview',f={stylePrefix:'pn-',defaults:[{id:'commands',buttons:[{}]},{id:'options',buttons:[{active:!0,id:r,className:'fa fa-square-o',command:r,context:r,attributes:{title:'View components'}},{id:u,className:'fa fa-eye',command:u,context:u,attributes:{title:'Preview'}},{id:l,className:'fa fa-arrows-alt',command:l,context:l,attributes:{title:'Fullscreen'}},{id:i,className:'fa fa-code',command:i,attributes:{title:'View code'}}]},{id:'views',buttons:[{id:o,className:'fa fa-paint-brush',command:o,active:!0,togglable:0,attributes:{title:'Open Style Manager'}},{id:s,className:'fa fa-cog',command:s,togglable:0,attributes:{title:'Settings'}},{id:a,className:'fa fa-bars',command:a,togglable:0,attributes:{title:'Open Layer Manager'}},{id:c,className:'fa fa-th-large',command:c,togglable:0,attributes:{title:'Open Blocks'}}]}],em:null,delayBtnsShow:300},h=n(3),d=n.n(h),p=n(71),g=d.a.Model.extend({defaults:{id:'',content:'',visible:!0,buttons:[],attributes:{}},initialize:function(t){this.btn=this.get('buttons')||[],this.buttons=new p["default"](this.btn),this.set('buttons',this.buttons)}}),v=d.a.Collection.extend({model:g}),m=n(2),y=n.n(m),b=n(0);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){y()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}d.a.$;var x=d.a.View.extend({tagName:function(){return this.model.get('tagName')},events:{click:'clicked'},initialize:function(t){var e=this.model,n=e.get('className'),r=e.attributes,i=r.command,o=r.listen,s=t.config||{},a=s.em;this.config=s,this.em=a;var c=this.config.stylePrefix||'',l=this.config.pStylePrefix||'';if(this.pfx=c,this.ppfx=this.config.pStylePrefix||'',this.id=c+e.get('id'),this.activeCls="".concat(c,"active ").concat(l,"four-color"),this.disableCls="".concat(l,"disabled"),this.btnsVisCls="".concat(c,"visible"),this.className=c+'btn'+(n?' '+n:''),this.listenTo(e,'change',this.render),this.listenTo(e,'change:active updateActive',this.updateActive),this.listenTo(e,'checkActive',this.checkActive),this.listenTo(e,'change:bntsVis',this.updateBtnsVis),this.listenTo(e,'change:attributes',this.updateAttributes),this.listenTo(e,'change:className',this.updateClassName),this.listenTo(e,'change:disable',this.updateDisable),a&&Object(b["isString"])(i)&&o){var u={fromListen:1};this.listenTo(a,"run:".concat(i),(function(){return e.set('active',!0,u)})),this.listenTo(a,"stop:".concat(i),(function(){return e.set('active',!1,u)}))}a&&a.get&&(this.commands=a.get('Commands'))},updateClassName:function(){var t=this.model,e=this.pfx,n=t.get('className'),r=t.get('attributes').class,i="".concat(r||''," ").concat(e,"btn ").concat(n||'');this.$el.attr('class',i.trim())},updateAttributes:function(){var t=this.em,e=this.model,n=this.$el,r=e.get('attributes')||{},i=t&&t.t&&t.t("panels.buttons.titles.".concat(e.id));n.attr(r),i&&n.attr({title:i}),this.updateClassName()},updateBtnsVis:function(){this.$buttons&&(this.model.get('bntsVis')?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},updateActive:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.model,i=this.commands,o=this.$el,s=this.activeCls,a=n.fromCollection,c=n.fromListen,l=r.get('context'),u=r.get('options'),f=r.get('command'),h={};f&&(i&&Object(b["isString"])(f)?h=i.get(f)||{}:Object(b["isFunction"])(f)?h=i.create({run:f}):null!==f&&Object(b["isObject"])(f)&&(h=i.create(f)),r.get('active')?(!a&&r.collection.deactivateAll(l,r),r.set('active',!0,{silent:!0}).trigger('checkActive'),!c&&i.runCommand(h,O(O({},u),{},{sender:r})),h.noStop&&r.set('active',!1)):(o.removeClass(s),!c&&i.stopCommand(h,O(O({},u),{},{sender:r,force:1}))))},updateDisable:function(){var t=this.disableCls,e=this.model.get('disable');this.$el[e?'addClass':'removeClass'](t)},checkActive:function(){var t=this.model,e=this.$el,n=this.activeCls;t.get('active')?e.addClass(n):e.removeClass(n)},clicked:function(t){var e=this.model;e.get('bntsVis')||e.get('disable')||!e.get('command')||this.toggleActive()},toggleActive:function(){var t=this.model,e=this.em,n=t.attributes,r=n.active,i=n.togglable;r&&!i||(t.set('active',!r),r?t.get('runDefaultCommand')&&e.runDefault():t.get('stopDefaultCommand')&&e.stopDefault())},render:function(){var t=this.model,e=t.get('label'),n=this.$el;return!t.get('el')&&n.empty(),this.updateAttributes(),e&&n.append(e),this.checkActive(),this.updateDisable(),this}}),C=d.a.View.extend({initialize:function(t){this.opt=t||{},this.config=this.opt.config||{},this.pfx=this.config.stylePrefix||'',this.parentM=this.opt.parentM||null,this.listenTo(this.collection,'add',this.addTo),this.listenTo(this.collection,'reset remove',this.render),this.className=this.pfx+'buttons'},addTo:function(t){this.addToCollection(t)},addToCollection:function(t,e){var n=e||null,r=new x({el:t.get('el'),model:t,config:this.config,parentM:this.parentM}).render().el;return n?n.appendChild(r):this.$el.append(r),r},render:function(){var t=document.createDocumentFragment();return this.$el.empty(),this.collection.each((function(e){this.addToCollection(e,t)}),this),this.$el.append(t),this.$el.attr('class',Object(b["result"])(this,'className')),this}});function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var k=d.a.View.extend({initialize:function(t){var e=t.config||{},n=this.model;this.config=e,this.pfx=e.stylePrefix||'',this.ppfx=e.pStylePrefix||'',this.buttons=n.get('buttons'),this.className=this.pfx+'panel',this.id=this.pfx+n.get('id'),this.listenTo(n,'change:appendContent',this.appendContent),this.listenTo(n,'change:content',this.updateContent),this.listenTo(n,'change:visible',this.toggleVisible),n.view=this},appendContent:function(){this.$el.append(this.model.get('appendContent'))},updateContent:function(){this.$el.html(this.model.get('content'))},toggleVisible:function(){this.model.get('visible')?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},attributes:function(){return this.model.get('attributes')},initResize:function(){var t=this.config.em,e=t?t.get('Editor'):'',n=this.model.get('resizable');if(e&&n){var r,i,o,s=!0===n?[1,1,1,1]:n,a=s.length,c=0;2==a?(r=s[0],o=s[0],i=s[1],c=s[1]):4==a&&(r=s[0],i=s[1],o=s[2],c=s[3]);var l=e.Utils.Resizer.init(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){y()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({tc:r,cr:i,bc:o,cl:c,tl:0,tr:0,bl:0,br:0,appendTo:this.el,silentFrames:1,avoidContainerUpdate:1,prefix:e.getConfig().stylePrefix,onEnd:function(){t&&t.trigger('change:canvasOffset')},posFetcher:function(t,e){var n=e.target,r=t.style,i=l.getConfig(),o=i.keyWidth,s=i.keyHeight,a=t.getBoundingClientRect(),c='container'==n,u=r[o],f=r[s];return{left:0,top:0,width:u&&!c?parseFloat(u):a.width,height:f&&!c?parseFloat(f):a.height}}},n));l.blur=function(){},l.focus(this.el)}},render:function(){var t=this.$el,e=this.ppfx,n="".concat(this.className," ").concat(this.id," ").concat(e,"one-bg ").concat(e,"two-color");if(t.addClass(n),this.toggleVisible(),this.buttons.length){var r=new C({collection:this.buttons,config:this.config});t.append(r.render().el)}return t.append(this.model.get('content')),this}}),j=d.a.View.extend({initialize:function(t){this.opt=t||{},this.config=this.opt.config||{},this.pfx=this.config.stylePrefix||'';var e=this.collection;this.listenTo(e,'add',this.addTo),this.listenTo(e,'reset',this.render),this.listenTo(e,'remove',this.onRemove),this.className=this.pfx+'panels'},onRemove:function(t){var e=t.view;e&&e.remove()},addTo:function(t){this.addToCollection(t)},addToCollection:function(t,e){var n=e||null,r=this.config,i=t.get('el'),o=new k({el:i,model:t,config:r}),s=o.render().el,a=t.get('appendTo');if(i);else if(a){document.querySelector(a).appendChild(s)}else n?n.appendChild(s):this.$el.append(s);return o.initResize(),s},render:function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.each((function(e){return t.addToCollection(e,n)})),e.append(n),e.attr('class',this.className),this}});e["default"]=function(){var t,e,n={};return{name:'Panels',init:function(e){for(var r in n=e||{},f)r in n||(n[r]=f[r]);var i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),t=new v(n.defaults),this},getPanels:function(){return t},getPanelsEl:function(){return e&&e.el},addPanel:function(e){return t.add(e)},removePanel:function(e){return t.remove(e)},getPanel:function(e){var n=t.where({id:e});return n.length?n[0]:null},addButton:function(t,e){var n=this.getPanel(t);return n?n.get('buttons').add(e):null},removeButton:function(t,e){var n=this.getPanel(t);return n&&n.get('buttons').remove(e)},getButton:function(t,e){var n=this.getPanel(t);if(n){var r=n.get('buttons').where({id:e});return r.length?r[0]:null}return null},render:function(){return e&&e.remove(),(e=new j({collection:t,config:n})).render().el},active:function(){this.getPanels().each((function(t){t.get('buttons').each((function(t){t.get('active')&&t.trigger('updateActive')}))}))},disableButtons:function(){this.getPanels().each((function(t){t.get('buttons').each((function(t){t.get('disable')&&t.trigger('change:disable')}))}))},destroy:function(){t.reset(),t.stopListening(),e&&e.remove(),[n,t,e].forEach((function(t){return{}}))},Panel:g}}},function(t,e,n){"use strict";n.r(e),n.d(e,"myCanvas",(function(){return H}));var r=n(12),i=n.n(r),o=n(2),s=n.n(o),a=n(0),c=n(1),l={stylePrefix:'cv-',scripts:[],styles:[],customBadgeLabel:'',autoscrollLimit:50,extHl:0,notTextable:['button','a','input[type=checkbox]','input[type=radio]']},u=n(5),f=n.n(u),h=n(6),d=n.n(h),p=n(7),g=n.n(p),v=n(8),m=n.n(v),y=n(4),b=n.n(y),w=n(3),O=n.n(w),x=n(70),C=n(63);function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}var k=function(t){g()(n,t);var e=S(n);function n(){return f()(this,n),e.apply(this,arguments)}return d()(n,[{key:"defaults",value:function(){return{frame:'',frames:'',rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[]}}},{key:"initialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.em;this.config=e,this.em=n,this.set('frames',new C["a"]),this.listenTo(this,'change:zoom',this.onZoomChange),this.listenTo(n,'change:device',this.updateDevice),this.listenTo(n,x["evPageSelect"],this._pageUpdated)}},{key:"init",value:function(){var t=this.em.get('PageManager').getMain(),e=t.getMainFrame();this.set('frames',t.getFrames()),this.updateDevice({frame:e})}},{key:"_pageUpdated",value:function(t,e){var n=this.em;n.setSelected(),n.get('readyCanvas')&&n.stopDefault(),e&&e.getFrames().map((function(t){return t.disable()})),this.set('frames',t.getFrames())}},{key:"updateDevice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.em,n=e.getDeviceModel(),r=t.frame||e.getCurrentFrameModel();if(r&&n){var i=n.attributes,o=i.width,s=i.height;r.set({width:o,height:s},{noUndo:1})}}},{key:"onZoomChange",value:function(){this.get('zoom')<1&&this.set('zoom',1)}}]),n}(w["Model"]),j=n(44),E=n(60);n(35);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T=function(){function t(e,n){var r=this;f()(this,t),this.em=e;var i=n||e.get('Canvas').getFrames().map((function(t){return t.getComponent().getEl()})),o=Array.isArray(i)?i:[i];return this.el=i,this.counter=0,Object(a["bindAll"])(this,'handleDragEnter','handleDragOver','handleDrop','handleDragLeave'),o.forEach((function(t){return r.toggleEffects(t,1)})),this}return d()(t,[{key:"toggleEffects",value:function(t,e){var n={on:c["on"],off:c["off"]},r=e?'on':'off';n[r](t,'dragenter',this.handleDragEnter),n[r](t,'dragover',this.handleDragOver),n[r](t,'drop',this.handleDrop),n[r](t,'dragleave',this.handleDragLeave)}},{key:"__customTglEff",value:function(t){var e=t?c["on"]:c["off"],n=this.el.ownerDocument,r=n.defaultView.frameElement;this.sortOpts=t?{onStart:function(t){var e=t.sorter;Object(c["on"])(r,'pointermove',e.onMove)},onEnd:function(t){var e=t.sorter;Object(c["off"])(r,'pointermove',e.onMove)},customTarget:function(t){var e=t.event;return n.elementFromPoint(e.clientX,e.clientY)}}:null,e(r,'pointerenter',this.handleDragEnter),e(r,'pointermove',this.handleDragOver),e(document,'pointerup',this.handleDrop),e(r,'pointerout',this.handleDragLeave)}},{key:"startCustom",value:function(){this.__customTglEff(!0)}},{key:"endCustom",value:function(t){this.over?this.endDrop(t):this.__customTglEff(!1)}},{key:"endDrop",value:function(t,e){var n=this.em,r=this.dragStop;this.counter=0,r&&r(t),this.__customTglEff(!1),n.trigger('canvas:dragend',e)}},{key:"handleDragLeave",value:function(t){this.updateCounter(-1,t)}},{key:"updateCounter",value:function(t,e){this.counter+=t,0===this.counter&&this.endDrop(1,e)}},{key:"handleDragEnter",value:function(t){var e=this,n=this.em,r=t.dataTransfer;if(this.updateCounter(1,t),!this.over){this.over=1;var i,o,s=n.get('Utils'),a=n.get('Canvas'),c=n.get('dragContent')||'<br>';if(n.stopDefault(),n.inAbsoluteMode()){var l=n.get('DomComponents').getWrapper(),u=l.append({})[0],f=n.get('Commands').run('core:component-drag',{event:t,guidesInfo:1,center:1,target:u,onEnd:function(t,n,i){var o;if(!i.cancelled){o=l.append(c)[0];var s=u.getStyle(),a=s.left,f=s.top,h=s.position;o.addStyle({left:a,top:f,position:h})}e.handleDragEnd(o,r),u.remove()}});i=function(e){return f.stop(t,{cancel:e})},o=function(t){return c=t}}else{var h=new s.Sorter(P({em:n,wmargin:1,nested:1,canvasRelative:1,direction:'a',container:this.el,placer:a.getPlacerEl(),containerSel:'*',itemSel:'*',pfx:'gjs-',onEndMove:function(t){return e.handleDragEnd(t,r)},document:this.el.ownerDocument},this.sortOpts||{}));h.setDropContent(c),h.startSort(),this.sorter=h,i=function(t){t&&(h.moved=0),h.endMove()},o=function(t){return h.setDropContent(t)}}this.dragStop=i,this.dragContent=o,n.trigger('canvas:dragenter',r,c)}}},{key:"handleDragEnd",value:function(t,e){var n=this.em;this.over=0,t&&(n.set('dragResult',t),n.trigger('canvas:drop',e,t)),n.runDefault({preserveSelected:1})}},{key:"handleDragOver",value:function(t){t.preventDefault(),this.em.trigger('canvas:dragover',t)}},{key:"handleDrop",value:function(t){t.preventDefault();var e=this.dragContent,n=t.dataTransfer,r=this.getContentByData(n).content;t.target.style.border='',r&&e&&e(r),this.endDrop(!r,t)}},{key:"getContentByData",value:function(t){var e=this.em,n=t&&t.types,r=t&&t.files||[],i=e.get('dragContent'),o=t&&t.getData('text');if(r.length){o=[];for(var s=0;s<r.length;s++){var c=r[s],l=c.type.split('/')[0];'image'==l&&o.push({type:l,file:c,attributes:{alt:c.name}})}}else if(i)o=i;else if(Object(a["indexOf"])(n,'text/html')>=0)o=t&&t.getData('text/html').replace(/<\/?meta[^>]*>/g,'');else if(Object(a["indexOf"])(n,'text/uri-list')>=0)o={type:'link',attributes:{href:o},content:o};else if(Object(a["indexOf"])(n,'text/json')>=0){var u=t&&t.getData('text/json');u&&(o=JSON.parse(u))}else 1===n.length&&'text/plain'===n[0]&&(o="<div>".concat(o,"</div>"));var f={content:o};return e.trigger('canvas:dragdata',t,f),f}},{key:"applyAppendOrMoveComponent",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=this.em,i=r.get('Utils'),o=r.get('Canvas'),s=new i.Sorter(P({em:r,wmargin:1,nested:1,canvasRelative:1,direction:'a',container:this.el,placer:o.getPlacerEl(),containerSel:'*',itemSel:'*',pfx:'gjs-',onEndMove:function(e){return t.handleDragEnd(e,null)},document:this.el.ownerDocument},this.sortOpts||{}));s.setDropContent(e.dropContent),s.startSort(),this.sorter=s;var a=new DOMParser,c=a.parseFromString(e.dst,'text/html');e.dst=c.body.firstChild,s.myMove(e,n)}}]),t}(),A=n(14);function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L=O.a.View.extend({tagName:'iframe',attributes:{allowfullscreen:'allowfullscreen','data-frame-el':!0},initialize:function(t){Object(a["bindAll"])(this,'updateClientY','stopAutoscroll','autoscroll','_emitUpdate');var e=this.model,n=this.el;this.tools={},this.config=M(M({},t.config||{}),{},{frameView:this}),this.ppfx=this.config.pStylePrefix||'',this.em=this.config.em;var r=this.getCanvasModel();this.listenTo(e,'change:head',this.updateHead),this.listenTo(r,'change:styles',this.renderStyles),e.view=this,Object(c["setViewEl"])(n,this)},updateHead:function(){var t=this.model,e=this.getHead(),n=[],r=[],i=t.get('head'),o=t.previous('head'),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).sort().map((function(e){return"[".concat(e,"=\"").concat(t[e],"\"]")})).join('')},a=function(t,e,n){t.forEach((function(t){var r=t.tag,i=t.attributes;!e.some((function(t){return t.tag===r&&s(t.attributes)===s(i)}))&&n.push(t)}))};a(i,o,r),a(o,i,n),n.forEach((function(t){var n=e.querySelector("".concat(t.tag).concat(s(t.attributes)));n&&n.parentNode.removeChild(n)})),Object(A["c"])(e,r)},getEl:function(){return this.el},getCanvasModel:function(){return this.em.get('Canvas').getModel()},getWindow:function(){return this.getEl().contentWindow},getDoc:function(){return this.getEl().contentDocument},getHead:function(){return this.getDoc().querySelector('head')},getBody:function(){return this.getDoc().querySelector('body')},getWrapper:function(){return this.getBody().querySelector('[data-gjs-type=wrapper]')},getJsContainer:function(){return this.jsContainer||(this.jsContainer=Object(A["f"])('div',{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},getToolsEl:function(){var t=this.config.frameWrapView;return t&&t.elTools},getGlobalToolsEl:function(){return this.em.get('Canvas').getGlobalToolsEl()},getHighlighter:function(){return this._getTool('[data-hl]')},getBadgeEl:function(){return this._getTool('[data-badge]')},getOffsetViewerEl:function(){return this._getTool('[data-offset]')},getRect:function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},getOffsetRect:function(){var t=this.el,e=this.getBody(),n=e.scrollTop,r=e.scrollLeft,i=t.offsetHeight,o=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:i,width:o,scrollTop:n,scrollLeft:r,scrollBottom:n+i,scrollRight:r+o}},_getTool:function(t){var e=this.tools,n=this.getToolsEl();return e[t]||(e[t]=n.querySelector(t)),e[t]},remove:function(){var t=this.wrapper;this._toggleEffects(),this.tools={},t&&t.remove(),O.a.View.prototype.remove.apply(this,arguments)},startAutoscroll:function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout((function(){t._toggleAutoscrollFx(1),requestAnimationFrame(t.autoscroll)}),0)},autoscroll:function(){if(this.dragging){var t=this.lastClientY,e=this.em.get('Canvas'),n=this.getWindow(),r=this.getBody().scrollTop,i=t||0,o=e.getConfig().autoscrollLimit,s=this.getRect().height-o,c=r;if(i<o&&(c-=o-i),i>s&&(c+=i-s),!Object(a["isUndefined"])(t)&&c!==r&&c>0&&c<this.lastMaxHeight)this.getGlobalToolsEl().style.opacity=0,this.showGlobalTools(),n.scrollTo(0,c);requestAnimationFrame(this.autoscroll)}},updateClientY:function(t){t.preventDefault(),this.lastClientY=Object(c["getPointerEvent"])(t).clientY*this.em.getZoomDecimal()},showGlobalTools:Object(a["debounce"])((function(){this.getGlobalToolsEl().style.opacity=''}),50),stopAutoscroll:function(){this.dragging&&this._toggleAutoscrollFx()},_toggleAutoscrollFx:function(t){this.dragging=t;var e=this.getWindow(),n=t?'on':'off',r={on:c["on"],off:c["off"]};r[n](e,'mousemove dragover',this.updateClientY),r[n](e,'mouseup',this.stopAutoscroll)},render:function(){var t=this.$el,e=this.ppfx;return t.attr({class:"".concat(e,"frame")}),this.renderScripts(),this},renderScripts:function(){var t=this,e=this.el,n=this.model,r=this.em,o='frame:load',s={el:e,model:n,view:this},c=this.getCanvasModel();e.onload=function(){r&&r.trigger("".concat(o,":before"),s),function n(i){if(i.length>0){var c=i.shift(),l=Object(A["f"])('script',M({type:'text/javascript'},Object(a["isString"])(c)?{src:c}:c));l.onerror=l.onload=n.bind(null,i),e.contentDocument.head.appendChild(l)}else t.renderBody(),r&&r.trigger(o,s)}(i()(c.get('scripts')))}},renderStyles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getHead(),n=this.getCanvasModel(),r=function(t){return t.map((function(t){return{tag:'link',attributes:M({rel:'stylesheet'},Object(a["isString"])(t)?{href:t}:t)}}))},i=r(t.prev||n.previous('styles')),o=r(n.get('styles')),s=[],c=[],l=function(t,e,n){t.forEach((function(t){var r=t.attributes.href;!e.some((function(t){return t.attributes.href===r}))&&n.push(t)}))};l(o,i,c),l(i,o,s),s.forEach((function(t){var n=e.querySelector("link[href=\"".concat(t.attributes.href,"\"]"));n&&n.parentNode.removeChild(n)})),Object(A["c"])(e,c)},renderBody:function(){var t=this,e=this.config,n=this.model,r=this.ppfx,i=e.em,o=this.getDoc(),s=this.getBody(),a=this.getWindow(),l=i.get('Config');a._isEditor=!0,this.renderStyles({prev:[]});Object(A["a"])(s,"<style>\n      ".concat(l.baseCss||'',"\n\n      .").concat(r,"dashed *[data-gjs-highlightable] {\n        outline: 1px dashed rgba(170,170,170,0.7);\n        outline-offset: -2px;\n      }\n\n      .").concat(r,"selected {\n        outline: 2px solid #3b97e3 !important;\n        outline-offset: -2px;\n      }\n\n      .").concat(r,"selected-parent {\n        outline: 2px solid ").concat('#ffca6f'," !important\n      }\n\n      .").concat(r,"no-select {\n        user-select: none;\n        -webkit-user-select:none;\n        -moz-user-select: none;\n      }\n\n      .").concat(r,"freezed {\n        opacity: 0.5;\n      }\n\n      .").concat(r,"no-pointer {\n        pointer-events: none;\n      }\n\n      .").concat(r,"plh-image {\n        background: #f5f5f5;\n        border: none;\n        height: 100px;\n        width: 100px;\n        display: block;\n        outline: 3px solid #ffca6f;\n        cursor: pointer;\n        outline-offset: -2px\n      }\n\n      .").concat(r,"grabbing {\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n      }\n\n      .").concat(r,"is__grabbing {\n        overflow-x: hidden;\n      }\n\n      .").concat(r,"is__grabbing,\n      .").concat(r,"is__grabbing * {\n        cursor: grabbing !important;\n      }\n\n      ").concat(l.canvasCss||'',"\n      ").concat(l.protectedCss||'',"\n    </style>"));var u=n.getComponent(),f=i.get('DomComponents').getType('wrapper').view;this.wrapper=new f({model:u,config:M(M({},u.config),{},{frameView:this})}).render(),Object(A["a"])(s,this.wrapper.el),Object(A["a"])(s,new E["a"]({collection:n.getStyles(),config:M(M({},i.get('CssComposer').getConfig()),{},{frameView:this})}).render().el),Object(A["a"])(s,this.getJsContainer()),Object(c["on"])(s,'click',(function(t){return t&&'A'==t.target.tagName&&t.preventDefault()})),Object(c["on"])(s,'submit',(function(t){return t&&t.preventDefault()})),[{event:'keydown keyup keypress',class:'KeyboardEvent'},{event:'mousedown mousemove mouseup',class:'MouseEvent'},{event:'pointerdown pointermove pointerup',class:'PointerEvent'},{event:'wheel',class:'WheelEvent'}].forEach((function(e){return e.event.split(' ').forEach((function(n){o.addEventListener(n,(function(n){return t.el.dispatchEvent(Object(A["e"])(n,e.class))}))}))})),this._toggleEffects(1),this.droppable=Object(c["hasDnd"])(i)&&new T(i,this.wrapper.el),n.trigger('loaded')},_toggleEffects:function(t){var e=t?c["on"]:c["off"],n=this.getWindow();n&&e(n,"".concat(A["k"]," resize"),this._emitUpdate)},_emitUpdate:function(){this.model._emitUpdated()}}),R=n(36);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F=O.a.View.extend({events:{'click [data-action-remove]':'remove','mousedown [data-action-move]':'startDrag'},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(a["bindAll"])(this,'onScroll','frameLoaded','updateOffset','remove','startDrag');var n=this.model,r=I(I({},t.config||e),{},{frameWrapView:this}),i=r.canvasView,o=r.em;this.cv=i,this.config=r,this.em=o,this.canvas=o&&o.get('Canvas'),this.ppfx=r.pStylePrefix||'',this.frame=new L({model:n,config:r}),this.classAnim="".concat(this.ppfx,"frame-wrapper--anim"),this.updateOffset=Object(a["debounce"])(this.updateOffset.bind(this)),this.updateSize=Object(a["debounce"])(this.updateSize.bind(this)),this.listenTo(n,'loaded',this.frameLoaded),this.listenTo(n,'change:x change:y',this.updatePos),this.listenTo(n,'change:width change:height',this.updateSize),this.listenTo(n,'destroy remove',this.remove),this.updatePos(),this.setupDragger()},setupDragger:function(){var t,e,n,r=this,i=this.canvas,o=this.model,s=function(t){i.toggleFramesEvents(t)};this.dragger=new R["a"]({onStart:function(){var i=o.attributes,a=i.x,c=i.y;n=r.em.getZoomMultiplier(),t=a,e=c,s()},onEnd:function(){return s(1)},setPosition:function(r){o.set({x:t+r.x*n,y:e+r.y*n})}})},startDrag:function(t){t&&this.dragger.start(t)},__clear:function(t){var e=this.frame;e&&e.remove(t),Object(A["l"])(this.elTools)},remove:function(t){var e=this;return this.__clear(t),O.a.View.prototype.remove.apply(this,arguments),['frame','dragger','cv','em','canvas','elTools'].forEach((function(t){return e[t]=0})),this},updateOffset:function(){var t=this.em,e=this.$el,n=this.frame;t&&(t.runDefault({preserveSelected:1}),e.removeClass(this.classAnim),n.model._emitUpdated())},updatePos:function(t){var e=this.model,n=this.el,r=e.attributes,i=r.x,o=r.y,s=n.style;this.frame.rect=0,s.left=isNaN(i)?i:"".concat(i,"px"),s.top=isNaN(o)?o:"".concat(o,"px"),t&&this.updateOffset()},updateSize:function(){this.updateDim()},updateDim:function(){var t=this.em,e=this.el,n=this.$el,r=this.model,i=this.classAnim,o=this.frame;if(o){o.rect=0,n.addClass(i);var s=this.__handleSize(),c=s.noChanges,l=s.width,u=s.height;(Object(a["isNull"])(l)||Object(a["isNull"])(u))&&r.set(I(I({},l?{}:{width:e.offsetWidth}),u?{}:{height:e.offsetHeight}),{silent:1}),t.stopDefault({preserveSelected:1}),c?this.updateOffset():setTimeout(this.updateOffset,350)}},onScroll:function(){var t=this.frame;this.em.trigger('frame:scroll',{frame:t,body:t.getBody(),target:t.getWindow()})},frameLoaded:function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},__handleSize:function(){var t='px',e=this.model,n=this.el.style,r=e.attributes,i=r.width,o=r.height,s=n.width||'',c=n.height||'',l=i||'',u=o||'',f=s==l&&c==u;return n.width=Object(a["isNumber"])(l)?"".concat(l).concat(t):l,n.height=Object(a["isNumber"])(u)?"".concat(u).concat(t):u,{noChanges:f,width:i,height:o,newW:l,newH:u}},render:function(){var t=this.frame,e=this.$el,n=this.ppfx,r=this.cv,i=this.model,o=this.el,s=i.attributes.onRender;this.__clear(),this.__handleSize(),t.render(),e.empty().attr({class:"".concat(n,"frame-wrapper")}).append("\n      <div class=\"".concat(n,"frame-wrapper__top gjs-two-color\" data-frame-top>\n        <div class=\"").concat(n,"frame-wrapper__name\" data-action-move>\n          ").concat(i.get('name')||'',"\n        </div>\n        <div class=\"").concat(n,"frame-wrapper__top-r\">\n          <div class=\"").concat(n,"frame-wrapper__icon\" data-action-remove style=\"display: none\">\n            <svg viewBox=\"0 0 24 24\"><path d=\"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z\"></path></svg>\n          </div>\n        </div>\n      </div>\n      <div class=\"").concat(n,"frame-wrapper__right\" data-frame-right></div>\n      <div class=\"").concat(n,"frame-wrapper__left\" data-frame-left></div>\n      <div class=\"").concat(n,"frame-wrapper__bottom\" data-frame-bottom></div>\n      ")).append(t.el);var a=Object(A["f"])('div',{class:"".concat(n,"tools"),style:'pointer-events:none; display: none'},"\n      <div class=\"".concat(n,"highlighter\" data-hl></div>\n      <div class=\"").concat(n,"badge\" data-badge></div>\n      <div class=\"").concat(n,"placeholder\">\n        <div class=\"").concat(n,"placeholder-int\"></div>\n      </div>\n      <div class=\"").concat(n,"ghost\"></div>\n      <div class=\"").concat(n,"toolbar\" style=\"pointer-events:all\"></div>\n      <div class=\"").concat(n,"resizer\"></div>\n      <div class=\"").concat(n,"offset-v\" data-offset>\n        <div class=\"gjs-marginName\" data-offset-m>\n          <div class=\"gjs-margin-v-el gjs-margin-v-top\" data-offset-m-t></div>\n          <div class=\"gjs-margin-v-el gjs-margin-v-bottom\" data-offset-m-b></div>\n          <div class=\"gjs-margin-v-el gjs-margin-v-left\" data-offset-m-l></div>\n          <div class=\"gjs-margin-v-el gjs-margin-v-right\" data-offset-m-r></div>\n        </div>\n        <div class=\"gjs-paddingName\" data-offset-m>\n          <div class=\"gjs-padding-v-el gjs-padding-v-top\" data-offset-p-t></div>\n          <div class=\"gjs-padding-v-el gjs-padding-v-bottom\" data-offset-p-b></div>\n          <div class=\"gjs-padding-v-el gjs-padding-v-left\" data-offset-p-l></div>\n          <div class=\"gjs-padding-v-el gjs-padding-v-right\" data-offset-p-r></div>\n        </div>\n      </div>\n      <div class=\"").concat(n,"offset-fixed-v\"></div>\n    "));this.elTools=a;var c=r.toolsWrapper;return c&&c.appendChild(a),s&&s({el:o,elTop:o.querySelector('[data-frame-top]'),elRight:o.querySelector('[data-frame-right]'),elBottom:o.querySelector('[data-frame-bottom]'),elLeft:o.querySelector('[data-frame-left]'),frame:i,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this}}),B=j["a"].extend({itemView:F,autoAdd:1,init:function(){this.listenTo(this.collection,'reset',this.render)},onRemoveBefore:function(t,e){t.forEach((function(t){return t.remove(e)}))},onRender:function(){var t=this.config,e=this.$el,n=t.em;n&&e.attr({class:"".concat(n.getConfig('stylePrefix'),"frames")})}});n(27);function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var z,H,W=O.a.$,$=O.a.View.extend({events:{wheel:'onWheel'},template:function(){var t=this.pfx;return"\n      <div class=\"".concat(t,"canvas__frames\" data-frames></div>\n      <div id=\"").concat(t,"tools\" class=\"").concat(t,"canvas__tools\" data-tools></div>\n    ")},initialize:function(t){Object(a["bindAll"])(this,'clearOff','onKeyPress','onCanvasMove');var e=this.model;this.config=t.config||{},this.em=this.config.em||{},this.pfx=this.config.stylePrefix||'',this.ppfx=this.config.pStylePrefix||'',this.className=this.config.stylePrefix+'canvas';var n=this.em;this._initFrames(),this.listenTo(n,'change:canvasOffset',this.clearOff),this.listenTo(n,'component:selected',this.checkSelected),this.listenTo(e,'change:zoom change:x change:y',this.updateFrames),this.listenTo(e,'change:frames',this._onFramesUpdate),this.toggleListeners(1)},_onFramesUpdate:function(){this._initFrames(),this._renderFrames()},_initFrames:function(){var t=this.frames,e=this.model,n=this.config,r=this.em,i=e.get('frames');r.set('readyCanvas',0),i.once('loaded:all',(function(){return r.set('readyCanvas',1)})),t&&t.remove(),this.frames=new B({collection:i,config:U(U({},n),{},{canvasView:this})})},checkSelected:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.scroll,r=this.em.get('currentFrame');n&&t.views.forEach((function(t){t._getFrame()===r&&t.scrollIntoView(n)}))},remove:function(){this.frames.remove(),this.frames={},O.a.View.prototype.remove.apply(this,arguments),this.toggleListeners()},preventDefault:function(t){t&&(t.preventDefault(),t._parentEvent&&t._parentEvent.preventDefault())},onCanvasMove:function(t){},toggleListeners:function(t){this.el;var e=t?c["on"]:c["off"];e(document,'keypress',this.onKeyPress),e(window,'scroll resize',this.clearOff)},onKeyPress:function(t){var e=this.em;' '!==Object(c["getKeyChar"])(t)||1===e.getZoomDecimal()||e.get('Canvas').isInputFocused()||(this.preventDefault(t),e.get('Editor').runCommand('core:canvas-move'))},onWheel:function(t){if((t.ctrlKey||t.metaKey)&&this.em.getConfig('multiFrames')){this.preventDefault(t);var e=this.model,n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),r=e.get('zoom');e.set('zoom',r+2*n)}},updateFrames:function(t){var e=this.em,n=this.model.attributes,r=n.x,i=n.y,o=this.getZoom(),s={preserveSelected:1},a=o?1/o:1;this.framesArea.style.transform="scale(".concat(o,") translate(").concat(r*a,"px, ").concat(i*a,"px)"),this.clearOff(),e.stopDefault(s),e.trigger('canvas:update',t),z&&clearTimeout(z),z=setTimeout((function(){return e.runDefault(s)}),300)},getZoom:function(){return this.em.getZoomDecimal()},isElInViewport:function(t){var e=Object(c["getElement"])(t),n=Object(c["getElRect"])(e),r=this.getFrameOffset(e),i=n.top,o=n.left;return i>=0&&o>=0&&i<=r.height&&o<=r.width},offset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(c["getElRect"])(t),r=t.ownerDocument.body,i=e.noScroll;return{top:n.top+(i?0:r.scrollTop),left:n.left+(i?0:r.scrollLeft),width:n.width,height:n.height}},clearOff:function(){this.frmOff=null,this.cvsOff=null},getFrameOffset:function(t){if(!this.frmOff||t){var e=this.frame.el,n=t&&t.ownerDocument.defaultView,r=n?n.frameElement:e;this.frmOff=this.offset(r||e)}return this.frmOff},getCanvasOffset:function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},getElementPos:function(t,e){var n=this.getZoom(),r=e||{},i=this.getFrameOffset(t),o=this.getCanvasOffset(),s=this.offset(t,e),a=r.avoidFrameOffset?0:i.top,c=r.avoidFrameOffset?0:i.left;return{top:s.top*n+a-o.top,left:s.left*n+c-o.left,height:s.height*n,width:s.width*n,zoom:n,rect:s}},getElementOffsets:function(t){var e=this;if(!t||Object(c["isTextNode"])(t))return{};var n={},r=window.getComputedStyle(t);return['marginTop','marginRight','marginBottom','marginLeft','paddingTop','paddingRight','paddingBottom','paddingLeft'].forEach((function(t){n[t]=parseFloat(r[t])*e.getZoom()})),n},getPosition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.frame.el.contentDocument;if(e){var n=e.body,r=this.getZoom(),i=this.getFrameOffset(),o=this.getCanvasOffset(),s=t.noScroll;return{top:i.top+(s?0:n.scrollTop)*r-o.top,left:i.left+(s?0:n.scrollLeft)*r-o.left,width:o.width,height:o.height}}},updateScript:function(t){var e=t.model,n=e.getId();t.scriptContainer||(t.scriptContainer=W("<div data-id=\"".concat(n,"\">")),this.getJsContainer().appendChild(t.scriptContainer.get(0))),t.el.id=n,t.scriptContainer.html('');var r=document.createElement('script'),i=e.getScriptString(),o=e.get('script-props')?i:"function(){\n".concat(i,"\n;}"),s=JSON.stringify(e.__getScriptProps());r.innerHTML="\n      setTimeout(function() {\n        var item = document.getElementById('".concat(n,"');\n        if (!item) return;\n        (").concat(o,".bind(item))(").concat(s,")\n      }, 1);"),setTimeout((function(){var e=t.scriptContainer;e&&e.get(0).appendChild(r)}),0)},getJsContainer:function(t){var e=this.getFrameView(t);return e&&e.getJsContainer()},getFrameView:function(t){return t&&t._getFrame()||this.em.get('currentFrame')},_renderFrames:function(){if(this.ready){var t=this.model,e=this.frames,n=this.em,r=this.framesArea,i=t.get('frames');i.listenToLoad(),e.render();var o=i.at(0),s=o&&o.view;n.setCurrentFrame(s),r&&r.appendChild(e.el),this.frame=s}},render:function(){var t=this.el,e=this.$el,n=this.ppfx,r=this.config,i=this.em;e.html(this.template());var o=e.find('[data-frames]');this.framesArea=o.get(0);var s=e.find('[data-tools]');this.toolsWrapper=s.get(0),s.append("\n      <div class=\"".concat(n,"tools ").concat(n,"tools-gl\" style=\"pointer-events:none\">\n        <div class=\"").concat(n,"placeholder\">\n          <div class=\"").concat(n,"placeholder-int\"></div>\n        </div>\n      </div>\n      <div id=\"").concat(n,"tools\" style=\"pointer-events:none\">\n        ").concat(r.extHl?"<div class=\"".concat(n,"highlighter-sel\"></div>"):'',"\n        <div class=\"").concat(n,"badge\"></div>\n        <div class=\"").concat(n,"ghost\"></div>\n        <div class=\"").concat(n,"toolbar\" style=\"pointer-events:all\"></div>\n        <div class=\"").concat(n,"resizer\"></div>\n        <div class=\"").concat(n,"offset-v\"></div>\n        <div class=\"").concat(n,"offset-fixed-v\"></div>\n      </div>\n    "));var a=t.querySelector("#".concat(n,"tools"));return this.hlEl=t.querySelector(".".concat(n,"highlighter")),this.badgeEl=t.querySelector(".".concat(n,"badge")),this.placerEl=t.querySelector(".".concat(n,"placeholder")),this.ghostEl=t.querySelector(".".concat(n,"ghost")),this.toolbarEl=t.querySelector(".".concat(n,"toolbar")),this.resizerEl=t.querySelector(".".concat(n,"resizer")),this.offsetEl=t.querySelector(".".concat(n,"offset-v")),this.fixedOffsetEl=t.querySelector(".".concat(n,"offset-fixed-v")),this.toolsGlobEl=t.querySelector(".".concat(n,"tools-gl")),this.toolsEl=a,this.el.className=Object(c["getUiClass"])(i,this.className),this.ready=1,this._renderFrames(),this}});function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["default"]=function(){var t,e,n={};return{getCanvasView:function(){return e},name:'Canvas',init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=G(G(G({},l),e),{},{module:this}),this.em=n.em;var r=n,i=r.scripts,o=r.styles,s=n.pStylePrefix;return s&&(n.stylePrefix=s+n.stylePrefix),t=new k({scripts:i,styles:o},e),this.model=t,this.startAutoscroll=this.startAutoscroll.bind(this),this.stopAutoscroll=this.stopAutoscroll.bind(this),H=t,this},onLoad:function(){this.model.init()},getModel:function(){return t},getConfig:function(){return n},getElement:function(){return e.el},getFrame:function(t){return this.getFrames()[t||0]},getFrameEl:function(){var t=(e||{}).frame;return t&&t.el},getFramesEl:function(){return e.framesArea},getWindow:function(){return this.getFrameEl().contentWindow},getDocument:function(){var t=this.getFrameEl();return t&&t.contentDocument},getBody:function(){var t=this.getDocument();return t&&t.body},_getCompFrame:function(t){return t&&t._getFrame()},_getLocalEl:function(t,e,n){var r=t,i=this._getCompFrame(e);return r=i?i[n]():r},getGlobalToolsEl:function(){return e.toolsGlobEl},getToolsEl:function(t){return this._getLocalEl(e.toolsEl,t,'getToolsEl')},getHighlighter:function(t){return this._getLocalEl(e.hlEl,t,'getHighlighter')},getBadgeEl:function(t){return this._getLocalEl(e.badgeEl,t,'getBadgeEl')},getPlacerEl:function(){return e.placerEl},getGhostEl:function(){return e.ghostEl},getToolbarEl:function(){return e.toolbarEl},getResizerEl:function(){return e.resizerEl},getOffsetViewerEl:function(t){return this._getLocalEl(e.offsetEl,t,'getOffsetViewerEl')},getFixedOffsetViewerEl:function(){return e.fixedOffsetEl},render:function(){return e&&e.remove(),(e=new $({model:t,config:n})).render().el},getOffset:function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},offset:function(t){return e.offset(t)},setCustomBadgeLabel:function(t){n.customBadgeLabel=t},getElementPos:function(t,n){return e.getElementPos(t,n)},getElementOffsets:function(t){return e.getElementOffsets(t)},getRect:function(){var t=e.getPosition(),n=t.top,r=t.left;return G(G({},e.getCanvasOffset()),{},{topScroll:n,leftScroll:r})},getTargetToElementDim:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i||{},s=e.getPosition();if(s){var a=o.elPos||e.getElementPos(r),c=i.toRight||0,l=o.targetHeight||t.offsetHeight,u=o.targetWidth||t.offsetWidth,f=o.event||null,h=a.top-l,d=a.left;d+=c?a.width:0;var p=(d=c?d-u:d)<s.left?s.left:d,g=h<s.top?s.top:h,v={top:g=g>a.top+a.height?a.top+a.height:g,left:p,elementTop:a.top,elementLeft:a.left,elementWidth:a.width,elementHeight:a.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:s.top,canvasLeft:s.left,canvasWidth:s.width,canvasHeight:s.height};return f&&n.em&&n.em.trigger(f,v),v}},canvasRectOffset:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(t){var e=t.defaultView;return e&&e.frameElement},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,s=n.em.getZoomDecimal(),a=e?'top':'left',c=t.ownerDocument,l=r.offset?i(c):{},u=l.offsetTop,f=void 0===u?0:u,h=l.offsetLeft,d=void 0===h?0:h,p=c.body||{},g=p.scrollTop,v=void 0===g?0:g,m=p.scrollLeft,y=void 0===m?0:m,b=e?v:y,w=e?f:d;return o[a]-(b-w)*s};return{top:o(t,1,e),left:o(t,0,e)}},getTargetToElementFixed:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.pos||this.getElementPos(t),i=n.canvasOff||this.canvasRectOffset(t,r),o=e.offsetHeight||0,s=e.offsetWidth||0,c=r.left+r.width,l=this.getCanvasView(),u=l.getPosition(),f=l.getFrameOffset(t),h=n.event,d=-o,p=Object(a["isUndefined"])(n.left)?r.width-s:n.left;p=r.left<-p?-r.left:p,p=c>u.width?p-(c-u.width):p;var g=r.height+o,v=g<f.height;i.top<o&&(v?d+=g:d=-i.top<r.height?-i.top:r.height);var m={top:d,left:p,canvasOffsetTop:i.top,canvasOffsetLeft:i.left};return h&&this.em.trigger(h,m),m},getMouseRelativePos:function(t,e){var n=0,r=0,i=(e||{}).subWinOffset,o=t.target.ownerDocument,s=o.defaultView||o.parentWindow,a=s.frameElement,c=i?s.pageYOffset:0,l=i?s.pageXOffset:0;if(a){var u=a.getBoundingClientRect();n=u.top||0,r=u.left||0}return{y:t.clientY+n-c,x:t.clientX+r-l}},getMouseRelativeCanvas:function(t,n){var r=this.getZoomDecimal(),i=e.getPosition(n),o=i.top,s=i.left;return{y:t.clientY*r+o,x:t.clientX*r+s}},hasFocus:function(){return this.getDocument().hasFocus()},isInputFocused:function(){var t=this.getDocument(),e=this.getFrameEl(),n=['body'].concat(i()(this.getConfig().notTextable)),r=e&&document.activeElement===e?t&&t.activeElement:document.activeElement;return r&&!n.some((function(t){return r.matches(t)}))},scrollTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(c["getElement"])(t),r=n&&Object(c["getViewEl"])(n);r&&r.scrollIntoView(e)},startAutoscroll:function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},stopAutoscroll:function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},setZoom:function(e){return t.set('zoom',parseFloat(e)),this},getZoom:function(){return parseFloat(t.get('zoom'))},setCoords:function(e,n){return t.set({x:parseFloat(e),y:parseFloat(n)}),this},getCoords:function(){var e=t.attributes;return{x:e.x,y:e.y}},getZoomDecimal:function(){return this.getZoom()/100},getZoomMultiplier:function(){var t=this.getZoomDecimal();return t?1/t:1},toggleFramesEvents:function(t){this.getFramesEl().style.pointerEvents=t?'':'none'},getFrames:function(){return t.get('frames').map((function(t){return t}))},addFrame:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.get('frames').add(G({},e),G(G({},n),{},{em:this.em}))},destroy:function(){var r=this;t.stopListening(),e&&e.remove(),[n,t,e].forEach((function(t){return{}})),['em','model','droppable'].forEach((function(t){return r[t]={}}))}}}},function(t,e,n){"use strict";n.r(e);var r=n(0),i={stylePrefix:'cm-',inlineCss:!1},o=n(2),s=n.n(o),a=n(5),c=n.n(a),l=n(6),u=n.n(l),f=n(7),h=n.n(f),d=n(8),p=n.n(d),g=n(4),v=n.n(g),m=n(3),y=n.n(m);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var x=function(t){h()(n,t);var e=O(n);function n(){return c()(this,n),e.apply(this,arguments)}return u()(n,[{key:"build",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.components(),r={},i=e.em;if(e.cleanId&&i){var o=i.get('CssComposer').getAll(),s=o.toJSON().map((function(t){var e=t.selectors,n=e&&1===e.length&&e.models[0];return n&&n.isId()&&n.get('name')})).filter((function(t){return t}));r.attributes=function(t,e){var n=e.id;return n&&'i'===n[0]&&!t.get('script')&&!t.get('attributes').id&&s.indexOf(n)<0&&delete e.id,e}}return e.exportWrapper?t.toHTML(w(w({},r),e.wrapperIsBody&&t.is('wrapper')&&{tag:'body'})):this.buildModels(n,r)}},{key:"buildModels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n='';return t.forEach((function(t){return n+=t.toHTML(e)})),n}}]),n}(m["Model"]),C=n(58),S=y.a.Model.extend({build:function(t){var e=t.toJSON();return this.beforeEach(e),Object(r["each"])(e,(function(t,n){var r=e[n];if(r instanceof y.a.Model)e[n]=this.build(r);else if(r instanceof y.a.Collection){var i=r;e[n]=[],i.length&&i.each((function(t,r){e[n][r]=this.build(t)}),this)}}),this),e},beforeEach:function(t){delete t.status}});var k,j=y.a.Model.extend({mapModel:function(t){var e='',n=t.get('script-export')||t.get('script'),i=t.get('type'),o=t.get('components'),a=t.getId();if(n){var c=t.get('attributes');c=Object(r["extend"])({},c,{id:a}),t.set('attributes',c,{silent:1});var l=t.getScriptString(n),u=t.get('script-props');if(t.get('scriptUpdated')&&!u)this.mapJs[i+'-'+a]={ids:[a],code:l};else{var f,h=this.mapJs[i];if(u&&(f=t.__getScriptProps()),h)h.ids.push(a),f&&(h.props[a]=f);else{var d={ids:[a],code:l};f&&(d.props=s()({},a,f)),this.mapJs[i]=d}}}return o.each((function(t){e+=this.mapModel(t)}),this),e},build:function(t){this.mapJs={},this.mapModel(t);var e='';for(var n in this.mapJs){var r=this.mapJs[n];if(r.code)if(r.props){if(0===r.code.toString().match(/\{([\s\S]*)\}/m)[1].replace(/^\s*\/\/.*$/gm,'').trim().length)continue;e+="\n          var props = ".concat(JSON.stringify(r.props),";\n          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');\n          var els = document.querySelectorAll(ids);\n          for (var i = 0, len = els.length; i < len; i++) {\n            var el = els[i];\n            (").concat(r.code,".bind(el))(props[el.id]);\n          }")}else{var i='#'+r.ids.join(', #');e+="\n          var items = document.querySelectorAll('".concat(i,"');\n          for (var i = 0, len = items.length; i < len; i++) {\n            (function(){\n").concat(r.code,"\n}.bind(items[i]))();\n          }")}}return e}}),E=n(1);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}Object(E["hasWin"])()&&(k=n(42),n(197),n(100),n(200));var P,T=y.a.Model.extend({CodeMirror:k,defaults:{input:'',label:'',codeName:'',theme:'hopscotch',readOnly:!0,lineNumbers:!0},init:function(t){return Object(r["bindAll"])(this,'onChange'),this.editor=k.fromTextArea(t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({dragDrop:!1,lineWrapping:!0,mode:this.get('codeName')},this.attributes)),this.element=t,this.editor.on('change',this.onChange),this},onChange:function(){this.trigger('update',this)},getEditor:function(){return this.editor},getElement:function(){return this.element},setElement:function(t){return this.element=t,this},refresh:function(){return this.getEditor().refresh(),this},focus:function(){return this.getEditor().focus(),this},getContent:function(){var t=this.getEditor();return t&&t.getValue()},setContent:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.editor;r&&(r.setValue(t),r.autoFormatRange&&(k.commands.selectAll(r),r.autoFormatRange(r.getCursor(!0),r.getCursor(!1)),k.commands.goDocStart(r)),!n.noRefresh&&setTimeout((function(){return e.refresh()})))}}),A=n(21),D=n.n(A),M=n(20);function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var R=function(t){h()(n,t);var e=L(n);function n(){return c()(this,n),e.apply(this,arguments)}return u()(n,[{key:"template",value:function(t){var e=t.pfx,n=t.codeName,r=t.label;return Object(M["a"])(P||(P=D()(["\n      <div class=\"","editor\" id=\"","","\">\n        <div id=\"","title\">","</div>\n        <div id=\"","code\"></div>\n      </div>\n    "])),e,e,n,e,r,e)}},{key:"initialize",value:function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix}},{key:"render",value:function(){var t=this.model,e=this.pfx,n=this.$el,r=t.toJSON();return r.pfx=e,n.html(this.template(r)),n.attr('class',"".concat(e,"editor-c")),n.find("#".concat(e,"code")).append(t.get('input')),this}}]),n}(m["View"]);e["default"]=function(){var t={},e={},n={},o={},s={},a='CodeMirror';return{getConfig:function(){return t},config:t,EditorView:R,name:'CodeManager',init:function(e){for(var r in t=e||{},i)r in t||(t[r]=i[r]);var o=t.pStylePrefix;return o&&(t.stylePrefix=o+t.stylePrefix),n.html=new x,n.css=new C["a"],n.json=new S,n.js=new j,s.CodeMirror=new T,this.loadDefaultGenerators().loadDefaultViewers(),this},addGenerator:function(t,n){return e[t]=n,this},getGenerator:function(t){return e[t]||null},getGenerators:function(){return e},addViewer:function(t,e){return o[t]=e,this},getViewer:function(t){return o[t]||null},getViewers:function(){return o},createViewer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(r["isUndefined"])(t.type)?a:t.type,n=this.getViewer(e)&&this.getViewer(e).clone(),i=document.createElement('div'),o=document.createElement('textarea');return i.appendChild(o),n.set(t),n.init(o),n.setElement(i),n},updateViewer:function(t,e){t.setContent(e)},getCode:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.em=t.em;var i=this.getGenerator(n);return i?i.build(e,r):''},loadDefaultGenerators:function(){for(var t in n)this.addGenerator(t,n[t]);return this},loadDefaultViewers:function(){for(var t in s)this.addViewer(t,s[t]);return this},destroy:function(){[t,e,n,o,s].forEach((function(t){return{}}))}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"evAll",(function(){return A})),n.d(e,"evPfx",(function(){return D})),n.d(e,"evSelect",(function(){return M})),n.d(e,"evSelectBefore",(function(){return L})),n.d(e,"evUpdate",(function(){return R})),n.d(e,"evAdd",(function(){return N})),n.d(e,"evAddBefore",(function(){return I})),n.d(e,"evRemove",(function(){return F})),n.d(e,"evRemoveBefore",(function(){return B}));var r=n(2),i=n.n(r),o=n(0),s=n(32),a={default:null,devices:[{id:'desktop',name:'Desktop',width:''},{id:'tablet',name:'Tablet',width:'770px',widthMedia:'992px'},{id:'mobileLandscape',name:'Mobile landscape',width:'568px',widthMedia:'768px'},{id:'mobilePortrait',name:'Mobile portrait',width:'320px',widthMedia:'480px'}]},c=n(5),l=n.n(c),u=n(6),f=n.n(u),h=n(7),d=n.n(h),p=n(8),g=n.n(p),v=n(4),m=n.n(v),y=n(3);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var w=function(t){d()(n,t);var e=b(n);function n(){return l()(this,n),e.apply(this,arguments)}return f()(n,[{key:"defaults",value:function(){return{name:'',width:null,height:'',widthMedia:null,priority:null}}},{key:"initialize",value:function(){var t=this;null===this.get('widthMedia')&&this.set('widthMedia',this.get('width')),null===this.get('width')&&this.set('width',this.get('widthMedia')),!this.get('priority')&&this.set('priority',parseFloat(this.get('widthMedia'))||0);['width','height','widthMedia'].forEach((function(e){return t.checkUnit(e)}))}},{key:"checkUnit",value:function(t){var e=this.get(t)||'';(parseFloat(e)||0).toString()===e.toString()&&this.set(t,"".concat(e,"px"))}},{key:"getName",value:function(){return this.get('name')||this.get('id')}},{key:"getWidthMedia",value:function(){return this.get('widthMedia')||''}}]),n}(y["Model"]);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var x=function(t){d()(n,t);var e=O(n);function n(){return l()(this,n),e.apply(this,arguments)}return f()(n,[{key:"comparator",value:function(t,e){var n=Number.MAX_VALUE;return(e.get('priority')||n)-(t.get('priority')||n)}},{key:"getSorted",value:function(){return this.sort()}}]),n}(y["Collection"]);x.prototype.model=w;var C,S=n(21),k=n.n(S),j=n(20);function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var _=function(t){d()(n,t);var e=E(n);function n(){return l()(this,n),e.apply(this,arguments)}return f()(n,[{key:"template",value:function(t){var e=t.ppfx,n=t.label;return Object(j["a"])(C||(C=k()(["\n      <div class=\"","device-label\">","</div>\n      <div class=\"","field ","select\">\n        <span id=\"","input-holder\">\n          <select class=\"","devices\"></select>\n        </span>\n        <div class=\"","sel-arrow\">\n          <div class=\"","d-s-arrow\"></div>\n        </div>\n      </div>\n      <button style=\"display:none\" class=\"","add-trasp\">+</button>\n    "])),e,n,e,e,e,e,e,e,e)}},{key:"events",value:function(){return{change:'updateDevice'}}},{key:"initialize",value:function(t){this.config=t.config||{},this.em=this.config.em,this.ppfx=this.config.pStylePrefix||'',this.events['click .'+this.ppfx+'add-trasp']=this.startAdd,this.listenTo(this.em,'change:device',this.updateSelect),this.delegateEvents()}},{key:"startAdd",value:function(){}},{key:"updateDevice",value:function(){var t=this.em;if(t){var e=this.devicesEl,n=e?e.val():'';t.set('device',n)}}},{key:"updateSelect",value:function(){var t=this.em,e=this.devicesEl;if(t&&t.getDeviceModel&&e){var n=t.getDeviceModel(),r=n?n.get('id'):'';e.val(r)}}},{key:"getOptions",value:function(){var t=this.collection,e=this.em,n='';return t.each((function(t){var r=t.attributes,i=r.name,o=r.id,s=e&&e.t&&e.t("deviceManager.devices.".concat(o))||i;n+="<option value=\"".concat(o||i,"\">").concat(s,"</option>")})),n}},{key:"render",value:function(){var t=this.em,e=this.ppfx,n=this.$el,r=this.el,i=t&&t.t&&t.t('deviceManager.device');return n.html(this.template({ppfx:e,label:i})),this.devicesEl=n.find(".".concat(e,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(t.get('device')),r.className="".concat(e,"devices-c"),this}}]),n}(y["View"]);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var A='device',D="".concat(A,":"),M="".concat(D,"select"),L="".concat(M,":before"),R="".concat(D,"update"),N="".concat(D,"add"),I="".concat(N,":before"),F="".concat(D,"remove"),B="".concat(F,":before"),V='change:device';e["default"]=function(){var t,e,n={};return T(T({},s["a"]),{},{name:'DeviceManager',Device:w,Devices:x,events:{all:A,select:M,update:R,add:N,remove:F,removeBefore:B},init:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n=T(T({},a),r),o=i.em;return t=new x,n.devices.forEach((function(t){return e.add(t)})),this.em=o,this.all=t,this.select(n.default||t.at(0)),this.__initListen(),o.on(V,this._onSelect,this),this},_onSelect:function(t,e,n){var r=this.em,i=this.events,o=t.previous('device'),s=this.get(e),a=i.select;r.trigger(a,s,this.get(o)),this.__catchAllEvent(a,s,n)},add:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r;if(Object(o["isString"])(e)){var s=r;n=T(T({},i=arguments[2]||{}),{},{id:e,name:i.name||e,width:s})}else n=e;return n.id||(n.id=n.name||this._createId()),t.add(n,i)},get:function(e){return this.getAll().filter((function(t){return t.get('name')===e}))[0]||t.get(e)||null},remove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.__remove(t,e)},getDevices:function(){return t.models},select:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(o["isString"])(t)?this.get(t):t;return n&&this.em.set('device',n.get('id'),e),this},getSelected:function(){return this.get(this.em.get('device'))},getAll:function(){return t},render:function(){return e&&e.remove(),(e=new _({collection:t,config:n})).render().el},destroy:function(){t.stopListening(),t.reset(),e&&e.remove(),[t,e].forEach((function(t){return null})),n={}}})}},function(t,e,n){"use strict";n.r(e),n.d(e,"evAll",(function(){return U})),n.d(e,"evPfx",(function(){return z})),n.d(e,"evAdd",(function(){return H})),n.d(e,"evUpdate",(function(){return W})),n.d(e,"evRemove",(function(){return $})),n.d(e,"evRemoveBefore",(function(){return q})),n.d(e,"evCustom",(function(){return G})),n.d(e,"evState",(function(){return K}));var r=n(12),i=n.n(r),o=n(2),s=n.n(o),a=n(0),c=n(1),l=n(3),u=n.n(l),f=n(32),h={stylePrefix:'clm-',appendTo:'',selectors:[],states:[{name:'hover'},{name:'active'},{name:'nth-of-type(2n)'}],escapeName:0,selectedName:0,iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',render:0,componentFirst:0,custom:!1},d=n(25),p=n(29),g=n(5),v=n.n(g),m=n(6),y=n.n(m),b=n(7),w=n.n(b),O=n(8),x=n.n(O),C=n(4),S=n.n(C);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}var j=function(t){w()(n,t);var e=k(n);function n(){return v()(this,n),e.apply(this,arguments)}return y()(n,[{key:"defaults",value:function(){return{name:'',label:''}}},{key:"getName",value:function(){return this.get('name')}},{key:"getLabel",value:function(){return this.get('label')||this.getName()}}]),n}(l["Model"]);j.prototype.idAttribute='name';var E,_,P,T,A=n(21),D=n.n(A),M='contentEditable',L=u.a.View.extend({template:function(){var t=this.pfx,e=this.model,n=this.config,r=e.get('label')||'';return"\n      <span id=\"".concat(t,"checkbox\" class=\"").concat(t,"tag-status\" data-tag-status></span>\n      <span id=\"").concat(t,"tag-label\" data-tag-name>").concat(r,"</span>\n      <span id=\"").concat(t,"close\" class=\"").concat(t,"tag-close\" data-tag-remove>\n        ").concat(n.iconTagRemove,"\n      </span>\n    ")},events:{'click [data-tag-remove]':'removeTag','click [data-tag-status]':'changeStatus','dblclick [data-tag-name]':'startEditTag','focusout [data-tag-name]':'endEditTag'},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.config||{};this.config=e,this.module=t.module,this.coll=t.coll||null,this.pfx=e.stylePrefix||'',this.ppfx=e.pStylePrefix||'',this.em=e.em,this.listenTo(this.model,'change:active',this.updateStatus)},getInputEl:function(){return this.inputEl||(this.inputEl=this.el.querySelector('[data-tag-name]')),this.inputEl},startEditTag:function(){var t=this.em,e=this.getInputEl();e[M]=!0,e.focus(),t&&t.setEditing(1)},endEditTag:function(){var t=this.model,e=this.getInputEl(),n=e.textContent,r=this.em,i=r&&r.get('SelectorManager');if(e[M]=!1,r&&r.setEditing(0),i){var o=i.escapeName(n);i.get(o)?e.innerText=t.get('label'):t.set({name:o,label:n})}},changeStatus:function(){var t=this.model;t.set('active',!t.get('active'))},removeTag:function(){this.module.removeSelected(this.model)},updateStatus:function(){var t=this.model,e=this.$el,n=this.config,r=n.iconTagOn,i=n.iconTagOff,o=e.find('[data-tag-status]');t.get('active')?(o.html(r),e.removeClass('opac50')):(o.html(i),e.addClass('opac50'))},render:function(){var t=this.pfx,e=this.ppfx;return this.$el.html(this.template()),this.$el.attr('class',"".concat(t,"tag ").concat(e,"three-bg")),this.updateStatus(),this}}),R=n(20),N=u.a.View.extend({template:function(t){var e=t.labelInfo,n=t.labelHead,r=t.iconSync,i=t.iconAdd,o=t.pfx,s=t.ppfx;return"\n    <div id=\"".concat(o,"up\" class=\"").concat(o,"header\">\n      <div id=\"").concat(o,"label\" class=\"").concat(o,"header-label\">").concat(n,"</div>\n      <div id=\"").concat(o,"status-c\" class=\"").concat(o,"header-status\">\n        <span id=\"").concat(o,"input-c\" data-states-c>\n          <div class=\"").concat(s,"field ").concat(s,"select\">\n            <span id=\"").concat(s,"input-holder\">\n              <select id=\"").concat(o,"states\" data-states></select>\n            </span>\n            <div class=\"").concat(s,"sel-arrow\">\n              <div class=\"").concat(s,"d-s-arrow\"></div>\n            </div>\n          </div>\n        </span>\n      </div>\n    </div>\n    <div id=\"").concat(o,"tags-field\" class=\"").concat(s,"field\">\n      <div id=\"").concat(o,"tags-c\" data-selectors></div>\n      <input id=\"").concat(o,"new\" data-input/>\n      <span id=\"").concat(o,"add-tag\" class=\"").concat(o,"tags-btn ").concat(o,"tags-btn__add\" data-add>\n        ").concat(i,"\n      </span>\n      <span class=\"").concat(o,"tags-btn ").concat(o,"tags-btn__sync\" style=\"display: none\" data-sync-style>\n        ").concat(r,"\n      </span>\n    </div>\n    <div class=\"").concat(o,"sels-info\">\n      <div class=\"").concat(o,"label-sel\">").concat(e,":</div>\n      <div class=\"").concat(o,"sels\" data-selected></div>\n    </div>")},events:{'change [data-states]':'stateChanged','click [data-add]':'startNewTag','focusout [data-input]':'endNewTag','keyup [data-input]':'onInputKeyUp','click [data-sync-style]':'syncStyle'},initialize:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=e.config||{},this.pfx=this.config.stylePrefix||'',this.ppfx=this.config.pStylePrefix||'',this.className=this.pfx+'tags',this.stateInputId=this.pfx+'states',this.stateInputC=this.pfx+'input-c',this.states=this.config.states||[];var n=this.config.em,r=this.collection;this.target=this.config.em;var i=e.module;this.module=i,this.em=n;var o='component:toggled component:update:classes',s='component:update:classes change:state';this.listenTo(n,o,this.componentChanged),this.listenTo(n,'styleManager:update',this.componentChanged),this.listenTo(n,s,this.__handleStateChange),this.listenTo(n,'styleable:change change:device',this.checkSync),this.listenTo(r,'add',this.addNew),this.listenTo(r,'reset',this.renderClasses),this.listenTo(r,'remove',this.tagRemoved),this.listenTo(i.getAll(),i.events.state,Object(a["debounce"])((function(){return t.renderStates()}))),this.delegateEvents()},syncStyle:function(){var t,e=this.em,n=this.getTarget(),r=e.get('CssComposer'),i=this.getCommonSelectors({opts:{noDisabled:1}}),o=e.get('state'),s=e.getCurrentMedia(),a=[],c=r.get(i,o,s)||r.add(i,o,s);this.getTargets().forEach((function(e){var n=r.getIdRule(e.getId(),{state:o,mediaText:s});t=n.getStyle(),n.setStyle({}),a.push(n)})),t&&c.addStyle(t),e.trigger('component:toggled'),e.trigger('component:sync-style',{component:n,selectors:i,mediaText:s,rule:c,ruleComponents:a,state:o})},tagRemoved:function(t){this.updateStateVis()},addNew:function(t){this.addToClasses(t)},startNewTag:function(){this.$addBtn.css({display:'none'}),this.$input.show().focus()},endNewTag:function(){this.$addBtn.css({display:''}),this.$input.hide().val('')},onInputKeyUp:function(t){13===t.keyCode?this.addNewTag(this.$input.val()):27===t.keyCode&&this.endNewTag()},checkStates:function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},componentChanged:Object(a["debounce"])((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.targets;this.updateSelection(e)})),updateSelection:function(t){var e=t||this.getTargets(),n=[];return(e=Object(a["isArray"])(e)?e:[e])&&e.length&&(n=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:n})),this.collection.reset(n),this.updateStateVis(e),this.module.__trgCustom(),n},getCommonSelectors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.targets,n=t.opts,r=void 0===n?{}:n,i=e||this.getTargets();return this.module.__getCommonSelectors(i,r)},_commonSelectors:function(){var t;return(t=this.module).__common.apply(t,arguments)},checkSync:Object(a["debounce"])((function(){var t,e=this.$btnSyncEl,n=this.config,r=this.collection,i=this.getTarget();if(i&&n.componentFirst&&r.length){var o=i.getStyle();t=!Object(a["isEmpty"])(o)}e&&e[t?'show':'hide']()})),getTarget:function(){return this.target.getSelected()},getTargets:function(){return this.target.getSelectedAll()},updateStateVis:function(t){var e=this.em,n=e&&e.getConfig('avoidInlineStyle'),r=this.collection.length||n?'':'none';this.getStatesC().css('display',r),this.updateSelector(t)},__handleStateChange:function(){this.updateSelector(this.getTargets())},updateSelector:function(t){var e=this,n=this.el.querySelector('[data-selected]'),r=[],i=t||this.getTargets();(i=Object(a["isArray"])(i)?i:[i]).forEach((function(t){return r.push(e.__getName(t))})),n&&(n.innerHTML=r.join(', ')),this.checkStates()},__getName:function(t){var e,n=this.pfx,r=this.config,i=this.em,o=r.selectedName,s=r.componentFirst;if(Object(a["isString"])(t))e=Object(R["a"])(E||(E=D()(["<span class=\"","sel-gen\">","</span>"])),n,t);else{var c=t&&t.get&&t.getSelectors();if(!c)return;var l=c.getStyleable(),u=i.get('state'),f=t.getId?Object(R["a"])(_||(_=D()(["<span class=\"","sel-cmp\">","</span>\n            <span class=\"","sel-id\">#","</span>"])),n,t.getName(),n,t.getId()):'';e=(e=this.collection.getFullString(l))?Object(R["a"])(P||(P=D()(["<span class=\"","sel-rule\">","</span>"])),n,e):t.get('selectorsAdd')||f,e=s&&f?f:e,e+=u?Object(R["a"])(T||(T=D()(["<span class=\"","sel-state\">:","</span>"])),n,u):'',e=o?o({result:e,state:u,target:t}):e}return e&&"<span class=\"".concat(n,"sel\">").concat(e,"</span>")},stateChanged:function(t){var e=this.em,n=t.target.value;e.set('state',n)},addNewTag:function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},addToClasses:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e,r=this.getClasses(),i=new L({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return n?n.appendChild(i):r.append(i),i},renderClasses:function(){var t=this,e=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each((function(n){return t.addToClasses(n,e)})),n.append(e)},getClasses:function(){return this.$el.find('[data-selectors]')},getStates:function(){if(!this.$states){var t=this.$el.find('[data-states]');this.$states=t[0]&&t}return this.$states},getStatesC:function(){return this.$statesC||(this.$statesC=this.$el.find('#'+this.stateInputC)),this.$statesC},renderStates:function(){var t=this.module,e=this.em,n=e.t('selectorManager.emptyState'),r=t.getStates().map((function(t){var n=e.t("selectorManager.states.".concat(t.id))||t.getLabel()||t.id;return"<option value=\"".concat(t.id,"\">").concat(n,"</option>")})).join(''),i=this.getStates();i&&i.html("<option value=\"\">".concat(n,"</option>").concat(r)),this.checkStates()},render:function(){var t=this.em,e=this.pfx,n=this.ppfx,r=this.config,i=this.$el,o=this.el,s=r.render,a={iconSync:r.iconSync,iconAdd:r.iconAdd,labelHead:t.t('selectorManager.label'),labelInfo:t.t('selectorManager.selected'),ppfx:n,pfx:e,el:o};i.html(this.template(a));var c=s&&s(a);return c&&c!==o&&i.empty().append(c),this.$input=i.find('[data-input]'),this.$addBtn=i.find('[data-add]'),this.$classes=i.find('#'+e+'tags-c'),this.$btnSyncEl=i.find('[data-sync-style]'),this.$input.hide(),this.renderStates(),this.renderClasses(),i.attr('class',"".concat(this.className," ").concat(n,"one-bg ").concat(n,"two-color")),this}});function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var B=function(t){return Object(a["isString"])(t)&&'#'==t[0]},V=function(t){return Object(a["isString"])(t)&&'.'==t[0]},U='selector',z="".concat(U,":"),H="".concat(z,"add"),W="".concat(z,"update"),$="".concat(z,"remove"),q="".concat($,":before"),G="".concat(z,"custom"),K="".concat(z,"state");e["default"]=function(){return F(F({},f["a"]),{},{name:'SelectorManager',Selector:d["a"],Selectors:p["a"],events:{all:U,update:W,add:H,remove:$,removeBefore:q,state:K,custom:G},init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__initConfig(h,e);var n=this.getConfig(),r=n.em,i=n.pStylePrefix;i&&(n.stylePrefix=i+n.stylePrefix),this.all=new p["a"](n.selectors),this.selected=new p["a"]([],{em:r,config:n}),this.states=new l["Collection"](n.states,{model:j}),this.model=new l["Model"]({cFirst:n.componentFirst,_undo:!0}),this.__initListen({collections:[this.states,this.selected],propagate:[{entity:this.states,event:this.events.state}]}),r.on('change:state',(function(t,e){return r.trigger(K,e)})),this.model.on('change:cFirst',(function(t,e){return r.trigger('selector:type',e)}));var o='component:toggled component:update:classes change:device styleManager:update selector:state selector:type';return this.model.listenTo(r,o,(function(){return t.__update()})),this},__update:Object(a["debounce"])((function(){this.__trgCustom()})),__trgCustom:function(t){this.em.trigger(this.events.custom,this.__customData(t))},__customData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.container;return{states:this.getStates(),selected:this.getSelected(),container:e}},postRender:function(){this.__appendTo(),this.__trgCustom()},select:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(t)?t:[t],r=this.em.get('StyleManager').select(n,e),i=this.selectorTags,o=r.filter((function(t){return t})).map((function(t){return Object(c["isComponent"])(t)||Object(c["isRule"])(t)&&!t.get('selectorsAdd')?t:t.getSelectorsString()}));return i&&i.componentChanged({targets:o}),this},addSelector:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=F({},e);Object(a["isObject"])(t)?r=t:r.name=t,B(r.name)?(r.name=r.name.substr(1),r.type=d["a"].TYPE_ID):V(r.name)&&(r.name=r.name.substr(1)),r.label&&!r.name&&(r.name=this.escapeName(r.label));var i=r.name,o=this.getConfig(),s=this.getAll(),c=i?this.get(i,r.type):s.where(r)[0];return c||s.add(r,F(F({},n),{},{config:o}))},getSelector:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d["a"].TYPE_CLASS;return B(t)?(t=t.substr(1),e=d["a"].TYPE_ID):V(t)&&(t=t.substr(1)),this.getAll().where({name:t,type:e})[0]},add:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(a["isString"])(t)?{}:n;return Object(a["isArray"])(t)?t.map((function(t){return e.addSelector(t,n,r)})):this.addSelector(t,n,r)},addClass:function(t){var e=this,n=[];return Object(a["isString"])(t)&&(t=t.trim().split(' ')),t.forEach((function(t){return n.push(e.addSelector(t))})),n},get:function(t,e){var n=this;if(Object(a["isArray"])(t)){var r=[];return t.map((function(t){return n.getSelector(t)})).filter((function(t){return t})).forEach((function(t){return r.indexOf(t)<0&&r.push(t)})),r}return this.getSelector(t,e)||null},remove:function(t,e){return this.__remove(t,e)},setState:function(t){return this.em.setState(t),this},getState:function(){return this.em.getState()},getStates:function(){return i()(this.states.models)},setStates:function(t,e){return this.states.reset(t,e)},getSelected:function(){return this.__getCommon()},addSelected:function(t){var e=this.add(t);this.em.getSelectedAll().forEach((function(t){t.getSelectors().add(e)}))},removeSelected:function(t){this.em.getSelectedAll().forEach((function(e){!t.get('protected')&&e&&e.getSelectors().remove(t)}))},getSelectedTargets:function(){return this.em.get('StyleManager').getSelectedAll()},setComponentFirst:function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},getComponentFirst:function(){return this.getConfig().componentFirst},escapeName:function(t){var e=this.getConfig().escapeName;return e?e(t):d["a"].escapeName(t)},render:function(t){this.em;var e=this.selectorTags,n=this.getConfig(),r=e&&e.el;return this.selected.reset(t),this.selectorTags=new N({el:r,collection:this.selected,module:this,config:n}),this.selectorTags.render().el},destroy:function(){var t=this.selectorTags;this.model.stopListening(),this.__destroy(),t&&t.remove(),this.selectorTags={}},__getCommon:function(){return this.__getCommonSelectors(this.em.getSelectedAll())},__getCommonSelectors:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.map((function(t){return t.getSelectors&&t.getSelectors().getValid(e)})).filter(Boolean);return this.__common.apply(this,i()(n))},__common:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.length?1===n.length?n[0]:2===n.length?n[0].filter((function(t){return n[1].indexOf(t)>=0})):n.slice(1).reduce((function(e,n){return t.__common(e,n)}),n[0]):[]}})}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),o={id:'gjs-',autosave:1,autoload:1,type:'local',stepsBeforeSave:1,storeComponents:1,storeStyles:1,storeHtml:1,storeCss:1,checkLocal:1,params:{},headers:{},urlStore:'',urlLoad:'',beforeSend:function(t,e){},onComplete:function(t,e){},contentTypeJson:!0,credentials:'include',fetchOptions:''},s=n(3),a=n.n(s),c=n(1),l=s["Model"].extend({defaults:{checkLocal:!0},store:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(this.hasLocal())for(var n in t)localStorage.setItem(n,t[n]);e&&e()},load:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n={};if(this.hasLocal())for(var r=0,i=t.length;r<i;r++){var o=localStorage.getItem(t[r]);o&&(n[t[r]]=o)}return e&&e(n),n},remove:function(t){if(this.hasLocal())for(var e=0,n=t.length;e<n;e++)localStorage.removeItem(t[e])},hasLocal:function(){var t=Object(c["hasWin"])();return!!(!this.get('checkLocal')||t&&localStorage)||(t&&console.warn("Your browser doesn't support localStorage"),!1)}}),u=n(55),f=(n(0),n(50)),h=n.n(f),d=a.a.Model.extend({fetch:u["a"],defaults:{urlStore:'',urlLoad:'',params:{},beforeSend:function(){},onComplete:function(){},contentTypeJson:!1,credentials:'include',fetchOptions:''},onStart:function(){this.get('em');var t=this.get('beforeSend');t&&t()},onError:function(t,e){if(e)e(t);else{var n=this.get('em');console.error(t),n&&n.trigger('storage:error',t)}},onResponse:function(t,e){var n=this.get('em'),r=this.get('onComplete'),i=this.get('contentTypeJson')&&(t&&'string'==typeof t)?JSON.parse(t):t;r&&r(i),e&&e(i),n&&n.trigger('storage:response',i)},store:function(t,e,n){var r={};for(var i in t)r[i]=t[i];this.request(this.get('urlStore'),{body:r},e,n)},storeVersion:function(t,e,n,r){var i={};for(var o in t)i[o]=t[o];this.request(this.get('urlStore'),{body:i,version:e},n,r)},load:function(t,e,n){this.request(this.get('urlLoad'),{method:'get'},e,n)},request:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=n.body||{},o=n.method||'put',s=n.version?n.version.toString():'0';this.onStart(),'get'==o?this.fetch(t,{method:o}).then((function(t){return 1==(t.status/200|0)?t.text():t.text().then((function(t){return Promise.reject(t)}))})).then((function(t){var n=JSON.parse(t).res.content[0],i=JSON.stringify(n);e.onResponse(i,r)})).catch((function(t){console.log('error!!!!',t)})):'put'==o&&h.a.get(t+"/".concat(s)).then((function(e){var n=e.data.res;n.content=[i],h.a.put(t+"/".concat(s),n).then((function(t){console.log(t)})).catch((function(t){console.log('error!!!!',t)}))})).catch((function(t){console.log('error!!!!',t)}))}});function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v='storage:start',m='storage:after',y='storage:end',b='storage:error';e["default"]=function(){var t,e={},n={},r={};return{name:'StorageManager',init:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=g(g({},o),n),t=e.em,e._disable&&(e.type=0),r.remote=new d(e),r.local=new l(e),e.currentStorage=e.type,this.loadDefaultProviders().setCurrent(e.type),this},getConfig:function(){return e},isAutosave:function(){return!!e.autosave},setAutosave:function(t){return e.autosave=!!t,this},getStepsBeforeSave:function(){return e.stepsBeforeSave},setStepsBeforeSave:function(t){return e.stepsBeforeSave=t,this},add:function(t,e){return n[t]=e,this},get:function(t){return n[t]||null},getStorages:function(){return n},getCurrent:function(){return e.currentStorage},setCurrent:function(t){return e.currentStorage=t,this},store:function(t,n){var r=this,i=this.get(this.getCurrent()),o={};for(var s in this.onStart('store',t),t)o[e.id+s]=t[s];return i?i.store(o,(function(t){r.onAfter('store',t),n&&n(t),r.onEnd('store',t)}),(function(t){r.onError('store',t)})):null},storeVersion:function(t,n,r){var i=this,o=this.get(this.getCurrent()),s={};for(var a in this.onStart('store',t),t)s[e.id+a]=t[a];return o?o.storeVersion(s,n,(function(t){i.onAfter('store',t),r&&r(t),i.onEnd('store',t)}),(function(t){i.onError('store',t)})):null},load:function(t,n){var r=this,i=this.get(this.getCurrent()),o=[],s={};'string'==typeof t&&(t=[t]),this.onStart('load',t);for(var a=0,c=t.length;a<c;a++)o.push(e.id+t[a]);i?i.load(o,(function(t){s=r.__clearKeys(t),r.onAfter('load',s),n&&n(s),r.onEnd('load',s)}),(function(t){n&&n(s),r.onError('load',t)})):n&&n(s)},__clearKeys:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r=new RegExp('^'+e.id);for(var i in t){var o=i.replace(r,'');n[o]=t[i]}return n},loadDefaultProviders:function(){for(var t in r)this.add(t,r[t]);return this},getCurrentStorage:function(){return this.get(this.getCurrent())},onStart:function(e,n){t&&(t.trigger(v),e&&t.trigger("".concat(v,":").concat(e),n))},onAfter:function(e,n){t&&(t.trigger(m),e&&t.trigger("".concat(m,":").concat(e),n))},onEnd:function(e,n){t&&(t.trigger(y),e&&t.trigger("".concat(y,":").concat(e),n))},onError:function(e,n){t&&(t.trigger(b,n),e&&t.trigger("".concat(b,":").concat(e),n),this.onEnd(e,n))},canAutoload:function(){return this.getCurrentStorage()&&this.getConfig().autoload},destroy:function(){[e,t,n,r].forEach((function(t){return{}}))}}}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),o={textTags:['br','b','i','u','a','ul','ol'],parserCss:null,parserHtml:null,optionsHtml:{htmlType:null,allowScripts:!1,allowUnsafeAttr:!1}},s=n(0),a={4:'media',5:'font-face',6:'page',7:'keyframes',11:'counter-style',12:'supports',13:'document',14:'font-feature-values',15:'viewport'},c=Object(s["keys"])(a),l=['5','6','11','15'],u=['font-face','page','counter-style','viewport'],f=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'',e=[],n=[],r=t.split(','),i=0,o=r.length;i<o;i++){var s=r[i].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(s)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(s)){var a=s.split('.').filter(Boolean);n.push(a)}else e.push(s)}return{result:n,add:e}},h=function(t){for(var e=t.style,n={},r=0,i=e.length;r<i;r++){var o=e[r],s=e.getPropertyValue(o),a=e.getPropertyPriority(o);n[o]="".concat(s).concat(a?" !".concat(a):'')}return n},d=function(t){return(t.conditionText||t.media&&t.media.mediaText||t.name||t.selectorText||'').trim()},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={},i=t.length,o=t[i-1],s=o?o.split(/:(.+)/):[],a=s[1],c=n.atRule,l=n.selectorsAdd,f=n.mediaText,h=u.indexOf(c)>=0;return h&&(r.singleAtRule=1),c&&(r.atRuleType=c),l&&(r.selectorsAdd=l),f&&(r.mediaText=f),a&&(t[i-1]=s[0],r.state=a,s.splice(s.length-1,1)),r.selectors=t,r.style=e,r},g=function(t){var e=document.createElement('style');e.innerHTML=t,document.head.appendChild(e);var n=e.sheet;return document.head.removeChild(e),function t(e){for(var n=[],r=e.cssRules||[],i=0,o=r.length;i<o;i++){var s=r[i],u=s.type.toString(),g=0,v='',m='',y=s.selectorText||s.keyText,b=l.indexOf(u)>=0;if(b)g=1,v=a[u],m=d(s);else if(c.indexOf(u)>=0){var w=t(s);m=d(s);for(var O=0,x=w.length;O<x;O++){var C=w[O];m&&(C.mediaText=m),C.atRuleType=a[u]}n=n.concat(w)}if(y||b){for(var S=h(s),k=f(y),j=k.add,E=void 0,_=0,P=(y=k.result).length;_<P;_++){var T=p(y[_],S,{atRule:a[u]});n.push(T),E=T}if(j.length){var A=j.join(', ');if(E)E.selectorsAdd=A;else{var D={selectors:[],selectorsAdd:A,style:S};g&&(D.singleAtRule=g),v&&(D.atRuleType=v),m&&(D.mediaText=m),n.push(D)}}}}return n}(n)},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{parse:function(e){var n=this,r=[],i=t.parserCss,o=t.em,s=o&&o.get&&o.get('Editor');return(i?i(e,s):g(e)).forEach((function(t){return r=r.concat(n.checkNode(t))})),o&&o.trigger('parse:css',{input:e,output:r}),r},checkNode:function(t){var e=t,n=e.selectors,r=e.style;if(Object(s["isString"])(n)){var i=[],o=f(n),a=o.result,c=o.add.join(', '),l={atRule:t.atRule,mediaText:t.params};if(a.length?a.forEach((function(t){i.push(p(t,r,l))})):i.push(p([],r,l)),c)i[i.length-1].selectorsAdd=c;t=i}return t}}},m=n(61);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["default"]=function(){var t,e,n={};return{compTypes:'',parserCss:null,parserHtml:null,name:'Parser',init:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(n=b(b({},o),r)).Parser=this,t=new m["a"](n),e=new v(n),this.em=n.em,this.parserCss=e,this.parserHtml=t,this},getConfig:function(){return n},parseHtml:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.em,o=this.compTypes;return t.compTypes=i?i.get('DomComponents').getTypes():o,t.parse(n,e,r)},parseCss:function(t){return e.parse(t)},destroy:function(){var r=this;[n,t,e].forEach((function(t){return{}})),['em','parserCss','parserHtml'].forEach((function(t){return r[t]={}}))}}}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),o=n(0),s=n(14),a={stylePrefix:'mdl-',title:'',content:'',backdrop:!0,custom:!1,extend:{}},c=n(5),l=n.n(c),u=n(6),f=n.n(u),h=n(7),d=n.n(h),p=n(8),g=n.n(p),v=n(4),m=n.n(v),y=n(3);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var w=function(t){d()(n,t);var e=b(n);function n(){return l()(this,n),e.apply(this,arguments)}return f()(n,[{key:"defaults",value:function(){return{title:'',content:'',attributes:{},open:!1}}},{key:"open",value:function(){this.set('open',!0)}},{key:"close",value:function(){this.set('open',!1)}}]),n}(y["Model"]);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var S=function(t){d()(n,t);var e=C(n);function n(){return l()(this,n),e.apply(this,arguments)}return f()(n,[{key:"template",value:function(t){var e=t.pfx,n=t.ppfx,r=t.content,i=t.title;return"<div class=\"".concat(e,"dialog ").concat(n,"one-bg ").concat(n,"two-color\">\n      <div class=\"").concat(e,"header\">\n        <div class=\"").concat(e,"title\">").concat(i,"</div>\n        <div class=\"").concat(e,"btn-close\" data-close-modal>&Cross;</div>\n      </div>\n      <div class=\"").concat(e,"content\">\n        <div id=\"").concat(e,"c\">").concat(r,"</div>\n        <div style=\"clear:both\"></div>\n      </div>\n    </div>\n    <div class=\"").concat(e,"collector\" style=\"display: none\"></div>")}},{key:"events",value:function(){return{click:'onClick','click [data-close-modal]':'hide'}}},{key:"initialize",value:function(t){var e=this.model,n=t.config||{},r=n.stylePrefix||'';this.config=n,this.pfx=r,this.ppfx=n.pStylePrefix||'',this.listenTo(e,'change:open',this.updateOpen),this.listenTo(e,'change:title',this.updateTitle),this.listenTo(e,'change:content',this.updateContent)}},{key:"onClick",value:function(t){this.config.backdrop&&t.target===this.el&&this.hide()}},{key:"getCollector",value:function(){return this.$collector||(this.$collector=this.$el.find('.'+this.pfx+'collector')),this.$collector}},{key:"getContent",value:function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content}},{key:"getTitle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.$title||(this.$title=this.$el.find('.'+this.pfx+'title')),t.$?this.$title:this.$title.get(0)}},{key:"updateContent",value:function(){var t=this.getContent(),e=t.children(),n=this.getCollector(),r=this.model.get('content');e.length&&n.append(e),t.empty().append(r)}},{key:"updateTitle",value:function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get('title'))}},{key:"updateOpen",value:function(){this.el.style.display=this.model.get('open')?'':'none'}},{key:"hide",value:function(){this.model.close()}},{key:"show",value:function(){this.model.open()}},{key:"updateAttr",value:function(t){var e=this.pfx,n=this.$el,r=this.el,i=[].slice.call(r.attributes).map((function(t){return t.name}));n.removeAttr(i.join(' ')),n.attr(x(x({},t||{}),{},{class:"".concat(e,"container ").concat(t&&t.class||'').trim()}))}},{key:"render",value:function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this}}]),n}(y["View"]);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["default"]=function(){var t,e,n={},r=function(t,e){e&&e.trigger("modal:".concat(t?'open':'close'))};return{name:'Modal',getConfig:function(){return n},init:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(n=j(j({},a),i)).em;this.em=s;var c=n.pStylePrefix;return c&&(n.stylePrefix=c+n.stylePrefix),(t=new w(n)).on('change:open',(function(t,e){return r(e,s)})),t.on('change',Object(o["debounce"])((function(){var t=e._evData(),n=e.getConfig().custom;Object(o["isFunction"])(n)&&n(t),s.trigger('modal',t)}))),this},_evData:function(){var e=this,n=this.getTitle(),r=this.getContent(),i=t.attributes;return{open:i.open,attributes:i.attributes,title:Object(o["isString"])(n)?Object(s["g"])(n):n,content:Object(o["isString"])(r)?Object(s["g"])(r):r.get?r.get(0):r,close:function(){return e.close()}}},postRender:function(t){var e=t.model.getConfig().el||t.el,n=this.render();n&&n.appendTo(e)},open:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.attributes||{};return n.title&&this.setTitle(n.title),n.content&&this.setContent(n.content),t.set('attributes',r),t.open(),e&&e.updateAttr(r),this},close:function(){return t.close(),this},onceClose:function(t){return this.em.once('modal:close',t),this},onceOpen:function(t){return this.em.once('modal:open',t),this},isOpen:function(){return!!t.get('open')},setTitle:function(e){return t.set('title',e),this},getTitle:function(){return t.get('title')},setContent:function(e){return t.set('content',' '),t.set('content',e),this},getContent:function(){return t.get('content')},getContentEl:function(){return e.getContent().get(0)},getModel:function(){return t},render:function(){if(!this.getConfig().custom){var r=S.extend(n.extend),i=e&&e.el;return(e=new r({el:i,model:t,config:n})).render().$el}},destroy:function(){e&&e.remove(),[n,t,e].forEach((function(t){return{}})),this.em={}}}}},function(t,e,n){"use strict";n.r(e);var r=n(12),i=n.n(r),o=n(2),s=n.n(o),a=n(0),c=n(1),l={stylePrefix:'css-',rules:[],onBeforeStyle:null},u=n(5),f=n.n(u),h=n(6),d=n.n(h),p=n(7),g=n.n(p),v=n(8),m=n.n(v),y=n(4),b=n.n(y),w=n(3),O=n.n(w),x=n(46),C=n(29),S=n(58);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}var _=(Object(c["hasWin"])()?window:{}).CSS,P=function(t){g()(n,t);var e=E(n);function n(){return f()(this,n),e.apply(this,arguments)}return d()(n,[{key:"defaults",value:function(){return{selectors:[],selectorsAdd:'',style:{},mediaText:'',state:'',stylable:!0,atRuleType:'',singleAtRule:!1,important:!1,group:'',_undo:!0}}},{key:"initialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.config=t||{},this.opt=e,this.em=e.em,this.ensureSelectors(),this.on('change',this.__onChange)}},{key:"__onChange",value:function(t,e){var n=this.em,r=this.changedAttributes();!Object(c["isEmptyObj"])(r)&&n&&n.changesUp(e)}},{key:"clone",value:function(){var t=j({},this.opt),e=j({},this.attributes);return e.selectors=this.get('selectors').map((function(t){return t.clone()})),new this.constructor(e,t)}},{key:"ensureSelectors",value:function(t,e,n){var r=this.em,o=r&&r.get('SelectorManager'),s=[this,'change:selectors',this.ensureSelectors],c=this.getSelectors();if(this.stopListening.apply(this,s),c.models&&(c=i()(c.models)),c=Object(a["isString"])(c)?[c]:c,Array.isArray(c)){var l=c.filter((function(t){return t})).map((function(t){return o?o.add(t):t}));c=new C["a"](l)}this.set('selectors',c,n),this.listenTo.apply(this,s)}},{key:"getAtRule",value:function(){var t=this.get('atRuleType'),e=this.get('mediaText'),n=t?"@".concat(t):e?'@media':'';return n+(e&&n?" ".concat(e):'')}},{key:"selectorsToString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],n=this.get('state'),r=this.get('wrapper'),i=this.get('selectorsAdd'),o=r&&t.body,s={escape:function(t){return _&&_.escape?_.escape(t):t}},a=o?'body':this.get('selectors').getFullString(0,s),c=n&&!t.skipState?":".concat(n):'';return a&&e.push("".concat(a).concat(c)),i&&!t.skipAdd&&e.push(i),e.join(', ')}},{key:"getDeclaration",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e='',n=this.selectorsToString(t),r=this.styleToString(t),i=this.get('singleAtRule');return(n||i)&&(r||t.allowEmpty)&&(e=i?r:"".concat(n,"{").concat(r,"}")),e}},{key:"getDevice",value:function(){var t=this.em,e=this.attributes,n=e.atRuleType,r=e.mediaText,i=(null==t?void 0:t.get('DeviceManager').getDevices())||[],o=i.filter((function(t){return''===t.getWidthMedia()}))[0];return'media'===n&&r?i.filter((function(t){return t.getWidthMedia()===Object(S["b"])(r)}))[0]||null:o||null}},{key:"getState",value:function(){var t=this.em,e=this.get('state');return(t.get('SelectorManager').getStates()||[]).filter((function(t){return t.getName()===e}))[0]||null}},{key:"getComponent",value:function(){var t,e=this.getSelectors(),n=1==e.length&&e.at(0),r=n&&n.isId()&&n.get('name');return r&&(null===(t=this.em)||void 0===t?void 0:t.get('DomComponents').getById(r))||null}},{key:"toCSS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e='',n=this.getAtRule(),r=this.getDeclaration(t);return(r||t.allowEmpty)&&(e=r),n&&e&&(e="".concat(n,"{").concat(e,"}")),e}},{key:"toJSON",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=w["Model"].prototype.toJSON.apply(this,e);if(this.em.getConfig('avoidDefaults')){var i=this.defaults();Object(a["forEach"])(i,(function(t,e){r[e]===t&&delete r[e]})),Object(a["isEmpty"])(r.selectors)&&delete r.selectors,Object(a["isEmpty"])(r.style)&&delete r.style}return r}},{key:"compare",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e||'',o=n||'',s=r.selectorsAdd||'',c=r.atRuleType||'',l=Object(a["isArray"])(t)||t.models?t.models||t:[t];o&&!c&&(c='media');var u=l.map((function(t){return t.getFullName()})),f=this.get('selectors').map((function(t){return t.getFullName()})),h=u.slice().sort(),d=f.slice().sort();return!(u.length!==f.length||!h.every((function(t,e){return t===d[e]})))&&(this.get('state')===i&&this.get('mediaText')===o&&this.get('selectorsAdd')===s&&this.get('atRuleType')===c)}}]),n}(w["Model"].extend(x["a"])),T=O.a.Collection,A=T.extend({model:P,initialize:function(t,e){var n=this;e&&e.em&&(this.editor=e.em),setTimeout((function(){n.on('remove',n.onRemove),n.on('add',n.onAdd)}))},toJSON:function(t){return T.prototype.toJSON.call(this,t).filter((function(t){return t.style}))},onAdd:function(t,e,n){t.ensureSelectors(t,e,n)},onRemove:function(t){var e=this.editor;e.stopListening(t),e.get('UndoManager').remove(t)},add:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return'string'==typeof t&&(t=this.editor.get('Parser').parseCss(t)),e.em=this.editor,T.prototype.add.apply(this,[t,e])}}),D=n(60),M=n(25);function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["default"]=function(){var t,e,n,r={};return{Selectors:C["a"],name:'CssComposer',getConfig:function(){return r},storageKey:function(){var t=[],e=r.stm&&r.stm.getConfig()||{};return e.storeCss&&t.push('css'),e.storeStyles&&t.push('styles'),t},init:function(n){for(var i in r=n||{},l)i in r||(r[i]=l[i]);var o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix);var s=r.em&&r.em.config.style||'';return r.rules=s||r.rules,t=r.em,e=new A([],r),this},onLoad:function(){e.add(r.rules,{silent:1})},postLoad:function(){var e=t&&t.get('UndoManager');e&&e.add(this.getAll())},load:function(t){var n=t||'';!n&&r.stm&&(n=r.em.getCacheLoad());var i=n.styles||'';if(n.styles)try{i=JSON.parse(n.styles)}catch(t){}else n.css&&(i=r.em.get('Parser').parseCss(n.css));return Object(a["isArray"])(i)?i.length&&e.reset(i):i&&e.reset(i),i},store:function(n){if(r.stm){var i={},o=this.storageKey(),s=t&&t.get('hasPages');return o.indexOf('css')>=0&&!s&&(i.css=r.em.getCss()),o.indexOf('styles')>=0&&(i.styles=JSON.stringify(e)),n||r.stm.store(i),i}},add:function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=n||'',c=i||'',l=R({},o),u=this.get(t,a,c,l);return u&&u.config&&!u.config.singleAtRule||(l.state=a,l.mediaText=c,l.selectors=[],c&&(l.atRuleType='media'),(u=new P(l,r)).get('selectors').add(t,s),e.add(u,s)),u},get:function(n,r,i,o){var s=n;if(Object(a["isString"])(n)){var c=t.get('SelectorManager'),l=n.split(',')[0].trim(),u=t.get('Parser').parserCss.checkNode({selectors:l})[0];s=c.get(u.selectors)}return e.find((function(t){return t.compare(s,r,i,o)}))||null},getAll:function(){return e},addCollection:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[];Object(a["isString"])(e)&&(e=t.get('Parser').parseCss(e));for(var s=e instanceof Array?e:[e],l=0,u=s.length;l<u;l++){var f=s[l]||{};if(f.selectors){var h=r.em&&r.em.get('SelectorManager');h||console.warn('Selector Manager not found');for(var d=f.selectors,p=d instanceof Array?d:[d],g=[],v=0,m=p.length;v<m;v++){var y=h.add(p[v]);g.push(y)}var b=this.get(g,f.state,f.mediaText,f),w=this.add(g,f.state,f.mediaText,f,n),O=!b||!n.avoidUpdateStyle,x=f.style||{};if(Object(c["isObject"])(i)&&w.set(i,n),O){var C=n.extend?R(R({},w.get('style')),x):x;w.set('style',C,n)}o.push(w)}}return o},addRules:function(t){return this.addCollection(t)},setRule:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.atRuleType,o=r.atRuleParams,s=t.get('Parser').parserCss.checkNode({selectors:e,style:n})[0],a=s.state,c=s.selectorsAdd,l=t.get('SelectorManager'),u=l.add(s.selectors),f=this.add(u,a,o,{selectorsAdd:c,atRule:i});return f.setStyle(n,r),f},getRule:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.get('SelectorManager'),i=t.get('Parser').parserCss.checkNode({selectors:e})[0],o=r.get(i.selectors),s=i.state,a=i.selectorsAdd,c=n.atRuleType,l=n.atRuleParams;return o&&this.get(o,s,l,{selectorsAdd:a,atRule:c})},getRules:function(t){var e=this.getAll();if(!t)return i()(e.models);var n=Object(a["isString"])(t)?t.split(',').map((function(t){return t.trim()})):t;return e.filter((function(t){return n.indexOf(t.getSelectors().getFullString())>=0}))},setIdRule:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.addOpts,o=void 0===i?{}:i,s=r.mediaText,c=r.state||'',l=Object(a["isUndefined"])(s)?t.getCurrentMedia():s,u=t.get('SelectorManager'),f=u.add({name:e,type:M["a"].TYPE_ID},o),h=this.add(f,c,l,{},o);return h.setStyle(n,R(R({},r),o)),h},getIdRule:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.mediaText,i=n.state||'',o=Object(a["isUndefined"])(r)?t.getCurrentMedia():r,s=t.get('SelectorManager').get(e,M["a"].TYPE_ID);return s&&this.get(s,i,o)},setClassRule:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.state||'',o=r.mediaText||t.getCurrentMedia(),s=t.get('SelectorManager'),a=s.add({name:e,type:M["a"].TYPE_CLASS}),c=this.add(a,i,o);return c.setStyle(n,r),c},getClassRule:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.state||'',i=n.mediaText||t.getCurrentMedia(),o=t.get('SelectorManager').get(e,M["a"].TYPE_CLASS);return o&&this.get(o,r,i)},remove:function(t,e){var n=Object(a["isString"])(t)?this.getRules(t):t,r=this.getAll().remove(n,e);return Object(a["isArray"])(r)?r:[r]},clear:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getAll().reset(null,t),this},getComponentRules:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.state,i=n.mediaText,o=n.current;o&&(r=t.get('state')||'',i=t.getCurrentMedia());var s=e.getId(),c=this.getAll().filter((function(t){if((Object(a["isUndefined"])(r)||t.get('state')===r)&&(Object(a["isUndefined"])(i)||t.get('mediaText')===i))return t.getSelectorsString()==="#".concat(s)}));return c},render:function(){return n&&n.remove(),(n=new D["a"]({collection:e,config:r})).render().el},destroy:function(){e.reset(),e.stopListening(),n&&n.remove(),[t,e,n].forEach((function(t){return null})),r={}}}}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),o=n(36),s=n(3),a=n.n(s),c=n(0),l=n(1),u=n(24),f=n(35),h=n(9);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=a.a.$,v=function(){},m=a.a.View.extend({initialize:function(t){this.opt=t||{},Object(c["bindAll"])(this,'startSort','onMove','endMove','rollback','updateOffset','moveDragHelper');var e=t||{};this.elT=0,this.elL=0,this.borderOffset=e.borderOffset||10;var n=e.container;this.el='string'==typeof n?document.querySelector(n):n,this.$el=g(this.el),this.containerSel=e.containerSel||'div',this.itemSel=e.itemSel||'div',this.draggable=e.draggable||!0,this.nested=e.nested||0,this.pfx=e.pfx||'',this.ppfx=e.ppfx||'',this.freezeClass=e.freezeClass||this.pfx+'freezed',this.onStart=e.onStart||v,this.onEndMove=e.onEndMove||'',this.customTarget=e.customTarget,this.onEnd=e.onEnd,this.direction=e.direction||'v',this.onMoveClb=e.onMove||'',this.relative=e.relative||0,this.ignoreViewChildren=e.ignoreViewChildren||0,this.ignoreModels=e.ignoreModels||0,this.plh=e.placer||'',this.wmargin=e.wmargin||0,this.offTop=e.offsetTop||0,this.offLeft=e.offsetLeft||0,this.document=e.document||document,this.$document=g(this.document),this.dropContent=null,this.em=e.em||null,this.dragHelper=null,this.canvasRelative=e.canvasRelative||0,this.selectOnEnd=!e.avoidSelectOnEnd,this.scale=e.scale,this.activeTextModel=null,this.em&&this.em.on&&(this.em.on('change:canvasOffset',this.updateOffset),this.updateOffset())},getScale:function(){return Object(c["result"])(this,scale)||1},getContainerEl:function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el='string'==typeof e?document.querySelector(e):e,this.$el=g(this.el)}return this.el},getDocuments:function(t){var e=this.em,n=t?t.ownerDocument:e&&e.get('Canvas').getBody().ownerDocument,r=[document];return n&&r.push(n),r},updateOffset:function(){var t,e=(null===(t=this.em)||void 0===t?void 0:t.get('canvasOffset'))||{};this.offTop=e.top,this.offLeft=e.left},setDropContent:function(t){this.dropModel=null,this.dropContent=t},updateTextViewCursorPosition:function(t){var e=this.em;if(e){var n=e.get('Canvas'),r=n.getDocument(),i=null;if(r.caretRangeFromPoint){var o=Object(l["getPointerEvent"])(t);i=r.caretRangeFromPoint(o.clientX,o.clientY)}else t.rangeParent&&(i=r.createRange()).setStart(t.rangeParent,t.rangeOffset);var s=n.getWindow().getSelection();n.getFrameEl().focus(),s.removeAllRanges(),i&&s.addRange(i),this.setContentEditable(this.activeTextModel,!0)}},setContentEditable:function(t,e){if(t){var n=t.getEl();n.contentEditable!=e&&(n.contentEditable=e)}},toggleSortCursor:function(t){var e=this.em,n=e&&e.get('Canvas');n&&(t?n.startAutoscroll():n.stopAutoscroll())},setDragHelper:function(t,e){for(var n=e||'',r=t.cloneNode(1),i=t.getBoundingClientRect(),o=getComputedStyle(t),s='',a=0;a<o.length;a++){var c=o[a];s+="".concat(c,":").concat(o.getPropertyValue(c),";")}document.body.appendChild(r),r.className+=" ".concat(this.pfx,"bdrag"),r.setAttribute('style',s),this.dragHelper=r,r.style.width="".concat(i.width,"px"),r.style.height="".concat(i.height,"px"),n&&this.moveDragHelper(n),this.em&&g(this.em.get('Canvas').getBody().ownerDocument).off('mousemove',this.moveDragHelper).on('mousemove',this.moveDragHelper),g(document).off('mousemove',this.moveDragHelper).on('mousemove',this.moveDragHelper)},moveDragHelper:function(t){var e=t.target.ownerDocument;if(this.dragHelper&&e){var n=t.pageY,r=t.pageX,i=0,o=0,s=(e.defaultView||e.parentWindow).frameElement,a=this.dragHelper.style;if(s){var c=s.getBoundingClientRect();i=c.top+document.documentElement.scrollTop,o=c.left+document.documentElement.scrollLeft,n=t.clientY,r=t.clientX}a.top=n+i+'px',a.left=r+o+'px'}},matches:function(t,e,n){return l["matches"].call(t,e)},closest:function(t,e){if(t){for(var n=t.parentNode;n&&1===n.nodeType;){if(this.matches(n,e))return n;n=n.parentNode}return null}},offset:function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},createPlaceholder:function(){var t=this.pfx,e=document.createElement('div'),n=document.createElement('div');return e.className=t+'placeholder',e.style.display='none',e.style['pointer-events']='none',n.className=t+'placeholder-int',e.appendChild(n),e},startSort:function(t){var e,n,r,i,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.em,c=this.itemSel,u=this.containerSel,f=this.plh,h=this.getContainerEl(s.container),d=this.getDocuments(t);this.dropModel=null,this.target=null,this.prevTarget=null,this.moved=0,t&&!this.matches(t,"".concat(c,", ").concat(u))&&(t=this.closest(t,c)),this.sourceEl=t,f||(this.plh=this.createPlaceholder(),h.appendChild(this.plh)),t&&((o=this.getSourceModel(t))&&o.set&&o.set('status','freezed'),this.srcModel=o),Object(l["on"])(h,'mousemove dragover',this.onMove),Object(l["on"])(d,'mouseup dragend touchend',this.endMove),Object(l["on"])(d,'keydown',this.rollback),this.onStart({sorter:this,target:o,parent:o&&(null===(e=(n=o).parent)||void 0===e?void 0:e.call(n)),index:o&&(null===(r=(i=o).index)||void 0===r?void 0:r.call(i))}),null==a||a.clearSelection(),this.toggleSortCursor(1),null==a||a.trigger('sorter:drag:start',t,o)},getTargetModel:function(t){var e=t||this.target;return g(e).data('model')},getSourceModel:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.target,i=n.avoidChildren,o=void 0===i?1:i,s=this.em,a=this.sourceEl,c=t||a,l=this.dropModel,u=this.dropContent,f=function(t){return t&&r&&t.opt&&t.opt.avoidChildren&&e.isTextableActive(t,r)};if(u&&s){if(f(l)&&(l=null),!l){var h=s.get('DomComponents').getComponents(),d={avoidChildren:o,avoidStore:1,avoidUpdateStyle:1},v=h.add(u,p(p({},d),{},{temporary:1}));if(l=(l=h.remove(v,d))instanceof Array?l[0]:l,this.dropModel=l,f(l))return this.getSourceModel(c,{target:r,avoidChildren:0})}return l}return c&&g(c).data('model')},selectTargetModel:function(t,e){if(!(t instanceof a.a.Collection||e&&e===t)){var n=this.targetModel;n&&n!==this.srcModel&&n.set('status',''),t&&t.set&&(t.set('status','selected-parent'),this.targetModel=t)}},onMove:function(t){var e=t,n=this.em,r=this.onMoveClb,i=this.plh,o=this.customTarget;this.moved=1;var s=i.style.display;s&&'none'!==s||(i.style.display='block');var a=this.offset(this.el);this.elT=this.wmargin?Math.abs(a.top):a.top,this.elL=this.wmargin?Math.abs(a.left):a.left;var l=t.pageY-this.elT+this.el.scrollTop,u=t.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&n){var f=n.get('Canvas').getMouseRelativeCanvas(t,{noScroll:1});u=f.x,l=f.y}this.rX=u,this.rY=l,this.eventMove=t;var h=this.getSourceModel(),d=o?o({sorter:this,event:t}):t.target,p=this.dimsFromTarget(d,u,l),v=this.target,m=v&&this.getTargetModel(v);if(this.selectTargetModel(m,h),m||(i.style.display='none'),v){this.lastDims=p;var y=this.findPosition(p,u,l);this.isTextableActive(h,m)?(this.activeTextModel=m,i.style.display='none',this.lastPos=y,this.updateTextViewCursorPosition(e)):(this.disableTextable(),this.activeTextModel=null,this.lastPos&&this.lastPos.index==y.index&&this.lastPos.method==y.method||(this.movePlaceholder(this.plh,p,y,this.prevTargetDim),this.$plh||(this.$plh=g(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css('top','+='+this.offTop+'px'),this.offLeft&&this.$plh.css('left','+='+this.offLeft+'px')),this.lastPos=y)),Object(c["isFunction"])(r)&&r({event:t,target:h,parent:m,index:y.index+('after'==y.method?1:0)}),n&&n.trigger('sorter:drag',{target:v,targetModel:m,sourceModel:h,dims:p,pos:y,x:u,y:l})}},isTextableActive:function(t,e){return t&&t.get&&t.get('textable')&&e&&e.is('text')},disableTextable:function(){var t=this.activeTextModel;t&&t.getView().disableEditing(),this.setContentEditable(t,!1)},isInFlow:function(t,e){if(!t)return!1;e=e||document.body;var n=t;return n.offsetHeight,!!this.styleInFlow(n,e)},styleInFlow:function(t,e){if(!Object(l["isTextNode"])(t)){var n=t.style||{},r=g(t),i=e&&g(e);if(!n.overflow||'visible'===n.overflow){var o=r.css('float');if(!(o&&'none'!==o||i&&'flex'==i.css('display')&&'column'!==i.css('flex-direction'))){switch(n.position){case'static':case'relative':case'':break;default:return}switch(t.tagName){case'TR':case'TBODY':case'THEAD':case'TFOOT':return!0}switch(r.css('display')){case'block':case'list-item':case'table':case'flex':return!0}}}}},validTarget:function(t,e){var n=this.getTargetModel(t),r=this.getSourceModel(e,{target:n}),i={valid:!0,src:e=r&&r.view&&r.view.el,srcModel:r,trg:t=n&&n.view&&n.view.el,trgModel:n};if(!e||!t)return i.valid=!1,i;var o=r.get('draggable');if(Object(c["isFunction"])(o)){var s=o(r,n);i.dragInfo=s,i.draggable=s,o=s}else o=o instanceof Array?o.join(', '):o,i.dragInfo=o,o=Object(c["isString"])(o)?this.matches(t,o):o,i.draggable=o;var l=n.get('droppable');if(Object(c["isFunction"])(l)){var u=l(r,n);i.droppable=u,i.dropInfo=u,l=u}else l=(l=l instanceof a.a.Collection?1:l)instanceof Array?l.join(', '):l,i.dropInfo=l,l=Object(c["isString"])(l)?this.matches(e,l):l,l=o&&this.isTextableActive(r,n)?1:l,i.droppable=l;return l&&o||(i.valid=!1),i},dimsFromTarget:function(t,e,n){var r=this.em,i=[];if(!t)return i;if(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(','))),!t)return i;if(this.prevTarget&&this.prevTarget!=t&&(this.prevTarget=null),!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var o=this.validTarget(t);if(r&&r.trigger('sorter:drag:validation',o),!o.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,n);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(i=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,n)||!this.nested&&!this.cacheDims.length){var s=this.targetP;s&&this.validTarget(s).valid&&(i=this.cacheDimsP,this.target=s)}return this.lastPos=null,i},getTargetFromEl:function(t){var e,n=t,r=this.targetPrev,i=this.em,o=this.containerSel,s=this.itemSel;if(this.matches(n,"".concat(s,", ").concat(o))||(n=this.closest(n,s)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(','))),r&&r!=n&&(this.targetPrev=''),!this.targetPrev){e=this.closest(n,o);var a=this.validTarget(n);if(i&&i.trigger('sorter:drag:validation',a),!a.valid&&e)return this.getTargetFromEl(e);this.targetPrev=n}return this.nearElBorders(n)&&(e=this.closest(n,o))&&this.validTarget(e).valid&&(n=e),n},nearElBorders:function(t){var e=10,n=t.getBoundingClientRect(),r=t.ownerDocument.body,i=this.getCurrentPos(),o=i.x,s=i.y,a=n.top+r.scrollTop,c=n.left+r.scrollLeft,l=n.width,u=n.height;if(s<a+e||s>a+u-e||o<c+e||o>c+l-e)return 1},getCurrentPos:function(){var t=this.eventMove;return{x:t.pageX||0,y:t.pageY||0}},getDim:function(t){var e,n,r,i,o=this.em,s=this.canvasRelative,a=o&&o.get('Canvas'),c=a?a.getElementOffsets(t):{};if(s&&o){var l=a.getElementPos(t,{noScroll:1});e=l.top,n=l.left,r=l.height,i=l.width}else{var u=this.offset(t);e=this.relative?t.offsetTop:u.top-(this.wmargin?-1:1)*this.elT,n=this.relative?t.offsetLeft:u.left-(this.wmargin?-1:1)*this.elL,r=t.offsetHeight,i=t.offsetWidth}return{top:e,left:n,height:r,width:i,offsets:c}},getChildrenDim:function(t){var e=this,n=[];if(!t)return n;var r=this.getTargetModel(t);if(r&&r.view&&!this.ignoreViewChildren){var i=r.getCurrentView?r.getCurrentView():r.view;t=i.getChildrenContainer()}return Object(c["each"])(t.children,(function(r,i){var o=Object(l["getModel"])(r,g),s=o&&o.index?o.index():i;if(Object(l["isTextNode"])(r)||e.matches(r,e.itemSel)){var a=e.getDim(r),c=e.direction;c='v'==c||'h'!=c&&e.isInFlow(r,t),a.dir=c,a.el=r,a.indexEl=s,n.push(a)}})),n},nearBorders:function(t,e,n){var r=0,i=this.borderOffset,o=e||0,s=n||0,a=t.top,c=t.left,l=t.height,u=t.width;return(a+i>s||s>a+l-i||c+i>o||o>c+u-i)&&(r=1),!!r},findPosition:function(t,e,n){for(var r={index:0,indexEl:0,method:'before'},i=0,o=0,s=0,a=0,c=0,l=0,u=0,f=0,h=t.length;f<h;f++){var d=u=t[f],p=d.top,g=d.left,v=d.height,m=d.width;if(l=p+v,a=g+m/2,c=p+v/2,!(o&&g>o||s&&c>=s||i&&g+m<i))if(r.index=f,r.indexEl=u.indexEl,u.dir){if(n<c){r.method='before';break}r.method='after'}else n<l&&(s=l),e<a?(o=a,r.method='before'):(i=a,r.method='after')}return r},movePlaceholder:function(t,e,n,r){var i=0,o=0,s=0,a=0,c=0,l='px',u=5,f=n.method,h=e[n.index];if(t.classList.remove('vertical'),t.classList.add('horizontal'),h){var d=h.top,p=h.left,g=h.height,v=h.width;h.dir?(a=v+l,c='auto',o='before'==f?d-i:d+g-i,s=p):(a='auto',c=g-2*i+l,o=d+i,s='before'==f?p-i:p+v-i,t.classList.remove('horizontal'),t.classList.add('vertical'))}else{if(!this.nested)return void(t.style.display='none');if(r){var m=r.offsets||{},y=m.paddingTop||u,b=m.paddingLeft||u;o=r.top+y,s=r.left+b,a=parseInt(r.width)-2*b+l,c='auto'}}t.style.top=o+l,t.style.left=s+l,a&&(t.style.width=a),c&&(t.style.height=c)},endMove:function(t){var e,n=this,r=this.sourceEl,i=[],o=this.getDocuments(),s=this.getContainerEl(),a=this.onEndMove,u=this.onEnd,f=this.target,h=this.lastPos;if(Object(l["off"])(s,'mousemove dragover',this.onMove),Object(l["off"])(o,'mouseup dragend touchend',this.endMove),Object(l["off"])(o,'keydown',this.rollback),this.plh.style.display='none',r&&(e=this.getSourceModel(),this.selectOnEnd&&e&&e.set&&(e.set('status',''),e.set('status','selected'))),this.moved&&f){var d=this.toMove;(Object(c["isArray"])(d)?d:d?[d]:[r]).forEach((function(t){i.push(n.move(f,t,h))}))}this.plh&&(this.plh.style.display='none');var g=this.dragHelper;if(g&&(g.parentNode.removeChild(g),this.dragHelper=null),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),this.toMove=null,this.eventMove=0,this.dropModel=null,Object(c["isFunction"])(a)){var v={target:e,parent:e&&e.parent(),index:e&&e.index()};i.length?i.forEach((function(t){return a(t,n,v)})):a(null,this,p(p({},v),{},{cancelled:1}))}Object(c["isFunction"])(u)&&u({sorter:this})},myMove:function(t,e){var n,r,i,o=this.em.get('DomComponents'),s=this.em,a=this.dropContent,f=t.dst,h=t.src,d=t.pos,p=this.getTargetModel(f),v=h?o.getById(t.srcId):null,m=t.draggable,y=t.droppable,b=Object(l["getElement"])(h),w=[],O='after'===d.method?d.indexEl+1:d.indexEl;if(v&&(v.set('status',''),v.set('status','selected')),v||'move-component'!==e){var x=g(this.document.getElementById(t.dstId)).data('collection');if(x&&y&&m){var C={at:O,action:'move-component'},S=this.isTextableActive(v,p);if(a)r=Object(c["isFunction"])(a)?a():a,C.avoidUpdateStyle=!0,C.action='add-component';else{var k=v.collection.indexOf(v),j=x===v.collection;(!j||!(k===O||k===O-1)||S)&&(r=v.collection.remove(v,{temporary:!0}),j&&O>k&&(C.at=O-1))}r&&(S?(delete C.at,i=p.getView().insertComponent(r,C)):i=x.add(r,C)),i&&t.idArray&&Object(u["e"])(i,t.idArray),this.dropContent=null,this.prevTarget=null}else if(s){var E=t.dropInfo||(null==p?void 0:p.get('droppable')),_=t.dragInfo||(null==v?void 0:v.get('draggable'));!x&&w.push('Target collection not found'),!y&&E&&w.push("Target is not droppable, accepts [".concat(E,"]")),!m&&_&&w.push("Component not draggable, acceptable by [".concat(_,"]")),s.logWarning('Invalid target position',{errors:w,model:v,context:'sorter',target:p})}return null==s||s.trigger('sorter:drag:end',{targetCollection:x,modelToDrop:r,warns:w,validResult:n,dst:f,srcEl:b}),i}},move:function(t,e,n){var r,i,o=this.em,s=this.dropContent,d=Object(l["getElement"])(e),p=[],v='after'===n.method?n.indexEl+1:n.indexEl,m=this.validTarget(t,d),y=m.trgModel,b=m.srcModel,w=m.draggable,O=g(t).data('collection'),x=y instanceof a.a.Collection?1:m.droppable,C=document.createElement('div');C.appendChild(t.cloneNode());var S,k={},j={dst:C.innerHTML,dstId:t.id,src:e,srcId:e?e.getId():null,srcParentId:e?e.parent().getId():null,srcIndex:e?e.collection.indexOf(e):null,pos:n,dropContent:Object(f["a"])(Object(f["b"])(s)),draggable:w,droppable:x,dragInfo:m.dragInfo,dropInfo:m.dropInfo};if(O&&x&&w){var E={at:v,action:'move-component'},_=this.isTextableActive(b,y);if(s)r=Object(c["isFunction"])(s)?s():s,E.avoidUpdateStyle=!0,E.action='add-component';else{var P=b.collection.indexOf(b),T=O===b.collection;(!T||!(P===v||P===v-1)||_)&&(r=b.collection.remove(b,{temporary:!0}),T&&v>P&&(E.at=v-1))}if(r&&(_?(delete E.at,i=y.getView().insertComponent(r,E)):i=O.add(r,E)),i&&(Object(u["d"])(i),S=Object(u["c"])(i)),this.dropContent=null,this.prevTarget=null,j.idArray=S,k.opts=j,k.action=e?'move-component':'add-component','add-component'==k.action&&!j.dropContent)return null;h["c"]==h["d"].Synced?(Object(h["h"])(h["d"].ApplyingLocalOp),Object(h["b"])(k)):h["c"]!=h["d"].AwaitingACK&&h["c"]!=h["d"].AwaitingWithBuffer||(Object(h["h"])(h["d"].ApplyingBufferedLocalOp),Object(h["a"])(k))}else if(o){var A=m.dropInfo||(null==y?void 0:y.get('droppable')),D=m.dragInfo||(null==b?void 0:b.get('draggable'));!O&&p.push('Target collection not found'),!x&&A&&p.push("Target is not droppable, accepts [".concat(A,"]")),!w&&D&&p.push("Component not draggable, acceptable by [".concat(D,"]")),o.logWarning('Invalid target position',{errors:p,model:b,context:'sorter',target:y})}return null==o||o.trigger('sorter:drag:end',{targetCollection:O,modelToDrop:r,warns:p,validResult:m,dst:t,srcEl:d}),i},rollback:function(t){Object(l["off"])(this.getDocuments(),'keydown',this.rollback),27==(t.which||t.keyCode)&&(this.moved=0,this.endMove())}}),y=n(5),b=n.n(y),w=n(6),O=n.n(w);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S={mousePosFetcher:null,updateTarget:null,ratioDefault:0,posFetcher:null,onStart:null,onMove:null,onEnd:null,onUpdateContainer:function(){},step:1,minDim:10,maxDim:'',unitHeight:'px',unitWidth:'px',keyHeight:'height',keyWidth:'width',currentUnit:1,silentFrames:0,avoidContainerUpdate:0,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:1,tc:1,tr:1,cl:1,cr:1,bl:1,bc:1,br:1},k=function(t,e){var n=e||window,r=t.getBoundingClientRect();return{left:r.left+n.pageXOffset,top:r.top+n.pageYOffset,width:r.width,height:r.height}},j=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b()(this,t),this.setOptions(e),Object(c["bindAll"])(this,'handleKeyDown','handleMouseDown','move','stop'),this}return O()(t,[{key:"getConfig",value:function(){return this.opts}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object(c["defaults"])(t,S),this.setup()}},{key:"setup",value:function(){var t=this.opts,e=t.prefix||'',n=t.appendTo||document.body,r=this.container;for(r||((r=document.createElement('div')).className="".concat(e,"resizer-c"),n.appendChild(r),this.container=r);r.firstChild;)r.removeChild(r.firstChild);var i={};for(var o in['tl','tc','tr','cl','cr','bl','bc','br'].forEach((function(e){return i[e]=t[e]?function(t,e){var n=e.prefix||'',r=document.createElement('i');return r.className=n+'resizer-h '+n+'resizer-h-'+t,r.setAttribute('data-'+n+'handler',t),r}(e,t):''})),i){var s=i[o];s&&r.appendChild(s)}this.handlers=i,this.mousePosFetcher=t.mousePosFetcher,this.updateTarget=t.updateTarget,this.posFetcher=t.posFetcher,this.onStart=t.onStart,this.onMove=t.onMove,this.onEnd=t.onEnd,this.onUpdateContainer=t.onUpdateContainer}},{key:"toggleFrames",value:function(t){if(this.opts.silentFrames){var e=document.querySelectorAll('iframe');Object(c["each"])(e,(function(e){return e.style.pointerEvents=t?'none':''}))}}},{key:"isHandler",value:function(t){var e=this.handlers;for(var n in e)if(e[n]===t)return!0;return!1}},{key:"getFocusedEl",value:function(){return this.el}},{key:"getParentEl",value:function(){return this.el.parentElement}},{key:"getDocumentEl",value:function(){return[this.el.ownerDocument,document]}},{key:"getElementPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.posFetcher||'';return n?n(t,e):k(t)}},{key:"focus",value:function(t){t&&t===this.el||(this.el=t,this.updateContainer({forceShow:1}),Object(l["on"])(this.getDocumentEl(),'mousedown',this.handleMouseDown))}},{key:"blur",value:function(){this.container.style.display='none',this.el&&(Object(l["off"])(this.getDocumentEl(),'mousedown',this.handleMouseDown),this.el=null)}},{key:"start",value:function(t){if(0===t.button){t.preventDefault(),t.stopPropagation();var e=this.el,n=this.getParentEl(),r=this.opts||{},i='data-'+r.prefix+'handler',o=this.getElementPos(e,{target:'el'}),s=this.getElementPos(n);this.handlerAttr=t.target.getAttribute(i),this.clickedHandler=t.target,this.startDim={t:o.top,l:o.left,w:o.width,h:o.height},this.rectDim={t:o.top,l:o.left,w:o.width,h:o.height},this.startPos={x:t.clientX,y:t.clientY},this.parentDim={t:s.top,l:s.left,w:s.width,h:s.height};var a=this.getDocumentEl();Object(l["on"])(a,'mousemove',this.move),Object(l["on"])(a,'keydown',this.handleKeyDown),Object(l["on"])(a,'mouseup',this.stop),Object(c["isFunction"])(this.onStart)&&this.onStart(t,{docs:a,config:r,el:e,resizer:this}),this.toggleFrames(1),this.move(t)}}},{key:"move",value:function(t){var e=this.onMove,n=this.mousePosFetcher,r=n?n(t):{x:t.clientX,y:t.clientY};this.currentPos=r,this.delta={x:r.x-this.startPos.x,y:r.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(0),e&&e(t),0===t.which&&this.stop(t)}},{key:"stop",value:function(t){var e=this.opts,n=this.getDocumentEl();Object(l["off"])(n,'mousemove',this.move),Object(l["off"])(n,'keydown',this.handleKeyDown),Object(l["off"])(n,'mouseup',this.stop),this.updateRect(1),this.toggleFrames(),Object(c["isFunction"])(this.onEnd)&&this.onEnd(t,{docs:n,config:e})}},{key:"updateRect",value:function(t){var e=this.el,n=this.opts,r=this.rectDim,i=this.updateTarget,o=this.getSelectedHandler(),s=n.unitHeight,a=n.unitWidth,l=n.keyWidth,u=n.keyHeight;if(Object(c["isFunction"])(i))i(e,r,{store:t,selectedHandler:o,resizer:this,config:n});else{var f=e.style;f[l]=r.w+a,f[u]=r.h+s}this.updateContainer()}},{key:"updateContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.opts,n=this.container,r=this.el,i=n.style;!e.avoidContainerUpdate&&r&&t.forceShow&&(i.display='block'),this.onUpdateContainer({el:n,resizer:this,opts:C(C({},e),t)})}},{key:"getSelectedHandler",value:function(){var t=this.handlers;if(this.selectedHandler)for(var e in t)if(t[e]===this.selectedHandler)return e}},{key:"handleKeyDown",value:function(t){27===t.keyCode&&(this.rectDim=this.startDim,this.stop(t))}},{key:"handleMouseDown",value:function(t){var e=t.target;this.isHandler(e)?(this.selectedHandler=e,this.start(t)):e!==this.el&&(this.selectedHandler='',this.blur())}},{key:"calc",value:function(t){var e,n=this.opts||{},r=n.step,i=this.startDim,o=n.minDim,s=n.maxDim,a=t.delta.x,c=t.delta.y,u=this.parentDim.w,f=this.parentDim.h,h=this.opts.unitWidth,d=this.opts.unitHeight,p='%'===h?i.w/100*u:i.w,g='%'===d?i.h/100*f:i.h,v={t:0,l:0,w:p,h:g};if(t){var m=t.handlerAttr;~m.indexOf('r')&&(e='%'===h?Object(l["normalizeFloat"])((p+a*r)/u*100,.01):Object(l["normalizeFloat"])(p+a*r,r),e=Math.max(o,e),s&&(e=Math.min(s,e)),v.w=e),~m.indexOf('b')&&(e='%'===d?Object(l["normalizeFloat"])((g+c*r)/f*100,.01):Object(l["normalizeFloat"])(g+c*r,r),e=Math.max(o,e),s&&(e=Math.min(s,e)),v.h=e),~m.indexOf('l')&&(e='%'===h?Object(l["normalizeFloat"])((p-a*r)/u*100,.01):Object(l["normalizeFloat"])(p-a*r,r),e=Math.max(o,e),s&&(e=Math.min(s,e)),v.w=e),~m.indexOf('t')&&(e='%'===d?Object(l["normalizeFloat"])((g-c*r)/f*100,.01):Object(l["normalizeFloat"])(g-c*r,r),e=Math.max(o,e),s&&(e=Math.min(s,e)),v.h=e);var y=n.ratioDefault?!t.keys.shift:t.keys.shift;if(m.indexOf('c')<0&&y){var b=i.w/i.h;v.w/v.h>b?v.h=Math.round(v.w/b):v.w=Math.round(v.h*b)}return~m.indexOf('l')&&(v.l=i.w-v.w),~m.indexOf('t')&&(v.t=i.h-v.h),v}}}]),t}(),E={init:function(t){return new j(t)}};function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["default"]=function(){return{name:'Utils',init:function(){return this},destroy:function(){},Sorter:m,Resizer:E,Dragger:o["a"],helpers:P({},l)}}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),o=n(16),s=n.n(o),a=n(0),c=n(1),l={placeholder:'eg. Text here'},u={locale:'en',localeFallback:'en',detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:'Add image',inputPlh:'http://path/to/the/image.jpg',modalTitle:'Select Image',uploadTitle:'Drop files here or click to upload'},blockManager:{labels:{},categories:{}},domComponents:{names:{'':'Box',wrapper:'Body',text:'Text',comment:'Comment',image:'Image',video:'Video',label:'Label',link:'Link',map:'Map',tfoot:'Table foot',tbody:'Table body',thead:'Table head',table:'Table',row:'Table row',cell:'Table cell'}},deviceManager:{device:'Device',devices:{desktop:'Desktop',tablet:'Tablet',mobileLandscape:'Mobile Landscape',mobilePortrait:'Mobile Portrait'}},panels:{buttons:{titles:{preview:'Preview',fullscreen:'Fullscreen','sw-visibility':'View components','export-template':'View code','open-sm':'Open Style Manager','open-tm':'Settings','open-layers':'Open Layer Manager','open-blocks':'Open Blocks'}}},selectorManager:{label:'Classes',selected:'Selected',emptyState:'- State -',states:{hover:'Hover',active:'Click','nth-of-type(2n)':'Even/Odd'}},styleManager:{empty:'Select an element before using Style Manager',layer:'Layer',fileButton:'Images',sectors:{general:'General',layout:'Layout',typography:'Typography',decorations:'Decorations',extra:'Extra',flex:'Flex',dimension:'Dimension'},properties:{'text-shadow-h':'X','text-shadow-v':'Y','text-shadow-blur':'Blur','text-shadow-color':'Color','box-shadow-h':'X','box-shadow-v':'Y','box-shadow-blur':'Blur','box-shadow-spread':'Spread','box-shadow-color':'Color','box-shadow-type':'Type','margin-top-sub':'Top','margin-right-sub':'Right','margin-bottom-sub':'Bottom','margin-left-sub':'Left','padding-top-sub':'Top','padding-right-sub':'Right','padding-bottom-sub':'Bottom','padding-left-sub':'Left','border-width-sub':'Width','border-style-sub':'Style','border-color-sub':'Color','border-top-left-radius-sub':'Top Left','border-top-right-radius-sub':'Top Right','border-bottom-right-radius-sub':'Bottom Right','border-bottom-left-radius-sub':'Bottom Left','transform-rotate-x':'Rotate X','transform-rotate-y':'Rotate Y','transform-rotate-z':'Rotate Z','transform-scale-x':'Scale X','transform-scale-y':'Scale Y','transform-scale-z':'Scale Z','transition-property-sub':'Property','transition-duration-sub':'Duration','transition-timing-function-sub':'Timing','background-image-sub':'Image','background-repeat-sub':'Repeat','background-position-sub':'Position','background-attachment-sub':'Attachment','background-size-sub':'Size'}},traitManager:{empty:'Select an element before using Trait Manager',label:'Component settings',traits:{labels:{},attributes:{id:l,alt:l,title:l,href:{placeholder:'eg. https://google.com'}},options:{target:{false:'This window',_blank:'New window'}}}}}},messagesAdd:null};function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=function(t){return!Array.isArray(t)&&null!==t&&'object'===s()(t)};e["default"]=function(){return{name:'I18n',config:u,init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=h(h(h({},u),t),{},{messages:h(h({},u.messages),t.messages||{})});var e=this.config.messagesAdd;return e&&this.addMessages(e),this.config.detectLocale&&(this.config.locale=this._localLang()),this.em=t.em,this},getConfig:function(){return this.config},setLocale:function(t){var e=this.em,n=this.config,r={value:t,valuePrev:n.locale};return e&&e.trigger('i18n:locale',r),n.locale=t,this},getLocale:function(){return this.config.locale},getMessages:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.config.messages;return t&&!n[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?n[t]:n},setMessages:function(t){var e=this.em;return this.config.messages=t,e&&e.trigger('i18n:update',t),this},addMessages:function(t){var e=this.em,n=this.config.messages;return e&&e.trigger('i18n:add',t),this.setMessages(function t(){for(var e=h({},arguments.length<=0?void 0:arguments[0]),n=1;n<arguments.length;n++){var r=h({},n<0||arguments.length<=n?void 0:arguments[n]);for(var i in r){var o=e[i],s=r[i];d(o)&&d(s)?e[i]=t(o,s):e[i]=s}}return e}(n,t)),this},t:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.config,r=e.params||{},i=e.l||this.getLocale(),o=e.lFlb||n.localeFallback,s=this._getMsg(t,i,e);return s||(s=this._getMsg(t,o,e)),!s&&this._debug("'".concat(t,"' i18n key not found in '").concat(i,"' lang"),e),s=s&&Object(a["isString"])(s)?this._addParams(s,r):s},_localLang:function(){var t=Object(c["hasWin"])()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split('-')[0]:'en'},_addParams:function(t,e){var n=new RegExp("{([\\w\\d-]*)}",'g');return t.replace(n,(function(t,n){return e[n]||''})).trim()},_getMsg:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getMessages(e,n);if(r){var i=r[t];return!i&&t.indexOf('.')>0&&(i=t.split('.').reduce((function(t,e){if(!Object(a["isUndefined"])(t))return t[e]}),r)),i}},_debug:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.em,r=this.config;(e.debug||r.debug)&&n&&n.logWarning(t)},destroy:function(){this.config=u,this.em={}}}}},function(t,e,n){"use strict";n.r(e);var r=n(38),i=n.n(r),o=n(12),s=n.n(o),a=n(2),c=n.n(a),l=n(31),u=n.n(l),f=n(5),h=n.n(f),d=n(6),p=n.n(d),g=n(0),v=n(1);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b='_rte',w=1,O=0,x=-1,C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'A',n=t.selection(),r=n.anchorNode,i=n.focusNode,o=null==r?void 0:r.parentNode,s=null==i?void 0:i.parentNode;return(null==o?void 0:o.nodeName)==e||(null==s?void 0:s.nodeName)==e},S='data-selectme',k={bold:{name:'bold',icon:'<b>B</b>',attributes:{title:'Bold'},result:function(t){return t.exec('bold')}},italic:{name:'italic',icon:'<i>I</i>',attributes:{title:'Italic'},result:function(t){return t.exec('italic')}},underline:{name:'underline',icon:'<u>U</u>',attributes:{title:'Underline'},result:function(t){return t.exec('underline')}},strikethrough:{name:'strikethrough',icon:'<s>S</s>',attributes:{title:'Strike-through'},result:function(t){return t.exec('strikeThrough')}},link:{icon:"<svg viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z\" />\n        </svg>",name:'link',attributes:{style:'font-size:1.4rem;padding:0 4px 2px;',title:'Link'},state:function(t){return t&&t.selection()&&C(t)?w:O},result:function(t){C(t)?t.exec('unlink'):t.insertHTML("<a href=\"\" ".concat(S,">").concat(t.selection(),"</a>"),{select:!0})}},wrap:{icon:"<svg viewBox=\"0 0 24 24\">\n            <path fill=\"currentColor\" d=\"M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z\" />\n        </svg>",attributes:{title:'Wrap for style'},state:function(t){return null!=t&&t.selection()&&C(t,'SPAN')?x:O},result:function(t){!C(t,'SPAN')&&t.insertHTML("<span ".concat(S,">").concat(t.selection(),"</span>"),{select:!0})}}},j=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,t);var r=n.el,i=n.em;if(this.em=i,r[b])return r[b];r[b]=this,this.setEl(r),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this);var o=(n.actions||[]).map((function(t){var e=t;return'string'==typeof t?e=y({},k[t]):k[t.name]&&(e=y(y({},k[t.name]),t)),e})),s=o.length?o:Object.keys(k).map((function(t){return k[t]}));n.classes=y(y({},{actionbar:'actionbar',button:'action',active:'active',disabled:'disabled',inactive:'inactive'}),n.classes);var a=n.classes,c=n.actionbar;if(this.actionbar=c,this.settings=n,this.classes=a,this.actions=s,!c){var l=n.actionbarContainer;(c=document.createElement('div')).className=a.actionbar,l.appendChild(c),this.actionbar=c,s.forEach((function(t){return e.addAction(t)}))}return n.styleWithCSS&&this.exec('styleWithCSS'),this}return p()(t,[{key:"destroy",value:function(){this.el=0,this.doc=0,this.actionbar=0,this.settings={},this.classes={},this.actions=[]}},{key:"setEl",value:function(t){this.el=t,this.doc=t.ownerDocument}},{key:"updateActiveActions",value:function(){var t=this;this.getActions().forEach((function(e){var n=e.btn,r=e.update,i=y({},t.classes),o=i.active,s=i.inactive,a=i.disabled,c=e.state,l=e.name,u=t.doc;if(n.className=n.className.replace(o,'').trim(),n.className=n.className.replace(s,'').trim(),n.className=n.className.replace(a,'').trim(),c)switch(c(t,u)){case w:n.className+=" ".concat(o);break;case O:n.className+=" ".concat(s);break;case x:n.className+=" ".concat(a)}else u.queryCommandSupported(l)&&u.queryCommandState(l)&&(n.className+=" ".concat(o));r&&r(t,e)}))}},{key:"enable",value:function(t){return this.enabled?this:this.__toggleEffects(!0,t)}},{key:"disable",value:function(){return this.__toggleEffects(!1)}},{key:"__toggleEffects",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t?v["on"]:v["off"],r=this.el,i=this.doc;if(this.actionbarEl().style.display=t?'':'none',r.contentEditable=!!t,n(r,'mouseup keyup',this.updateActiveActions),n(i,'keydown',this.__onKeydown),this.enabled=t,t){var o=e.event;if(this.syncActions(),this.updateActiveActions(),o){var s=null;if(i.caretRangeFromPoint){var a=Object(v["getPointerEvent"])(o);s=i.caretRangeFromPoint(a.clientX,a.clientY)}else o.rangeParent&&(s=i.createRange()).setStart(o.rangeParent,o.rangeOffset);var c=i.getSelection();c.removeAllRanges(),s&&c.addRange(s)}r.focus()}return this}},{key:"__onKeydown",value:function(t){'Enter'===t.key&&(this.doc.execCommand('insertLineBreak'),t.preventDefault())}},{key:"syncActions",value:function(){var t=this;this.getActions().forEach((function(e){if(t.actionbar&&(!e.state||e.state&&e.state(t,t.doc)>=0)){var n=e.event||'click';e.btn["on".concat(n)]=function(n){e.result(t,e),t.updateActiveActions()}}}))}},{key:"addAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sync,r=document.createElement('span'),i=t.icon,o=t.attributes||{};for(var s in r.className=this.classes.button,t.btn=r,o)r.setAttribute(s,o[s]);'string'==typeof i?r.innerHTML=i:r.appendChild(i),this.actionbarEl().appendChild(r),n&&(this.actions.push(t),this.syncActions())}},{key:"getActions",value:function(){return this.actions}},{key:"selection",value:function(){return this.doc.getSelection()}},{key:"exec",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.doc.execCommand(t,!1,e)}},{key:"actionbarEl",value:function(){return this.actionbar}},{key:"insertHTML",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.select,r=this.em,i=this.doc,o=this.el,s=i.getSelection();if(s&&s.rangeCount){var a=Object(v["getModel"])(o),c=i.createElement('div'),l=s.getRangeAt(0);l.deleteContents(),Object(g["isString"])(t)?c.innerHTML=t:t&&c.appendChild(t),Array.prototype.slice.call(c.childNodes).forEach((function(t){l.insertNode(t)})),s.removeAllRanges(),s.addRange(l),o.focus(),n&&a&&(a.once('rte:disable',(function(){var t=a.find("[".concat(S,"]"))[0];t&&(r.setSelected(t),t.removeAttributes(S))})),a.trigger('disable'))}}}]),t}(),E={stylePrefix:'rte-',adjustToolbar:1,actions:['bold','italic','underline','strikethrough','link','wrap']};function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T='change:canvasOffset frame:scroll component:update';e["default"]=function(){var t,e=function(){var e=t.style,n='-1000px';e.top=n,e.left=n,e.display='none'};return{customRte:null,name:'RichTextEditor',getConfig:function(){return this.config},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=P(P({},E),e),r=n.pStylePrefix;return r&&(n.stylePrefix=r+n.stylePrefix),this.config=n,this.pfx=n.stylePrefix,this.em=n.em,this.actions=n.actions||[],Object(v["hasWin"])()?((t=document.createElement('div')).className="".concat(r,"rte-toolbar ").concat(r,"one-bg"),this.initRte(document.createElement('div')),Object(v["on"])(t,'mousedown',(function(t){return t.stopPropagation()})),this):this},destroy:function(){var e,n,r,i=this;null===(e=this.globalRte)||void 0===e||e.destroy(),null===(n=this.customRte)||void 0===n||null===(r=n.destroy)||void 0===r||r.call(n),t=0,['actionbar','actions','em','config','globalRte','lastEl'].map((function(t){delete i[t]}))},postRender:function(n){var r=n.model.get('Canvas');t.style.pointerEvents='all',e(),r.getToolsEl().appendChild(t)},initRte:function(e){var n=this.globalRte,r=this.em,i=this.pfx,o=this.actionbar,a=this.config,c=t,l=this.actions||s()(a.actions),u={actionbar:"".concat(i,"actionbar"),button:"".concat(i,"action"),active:"".concat(i,"active"),inactive:"".concat(i,"inactive"),disabled:"".concat(i,"disabled")};return n?(n.em=r,n.setEl(e)):(n=new j({em:r,el:e,classes:u,actions:l,actionbar:o,actionbarContainer:c}),this.globalRte=n),n.actionbar&&(this.actionbar=n.actionbar),n.actions&&(this.actions=n.actions),n},add:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.name=t,null===(e=this.globalRte)||void 0===e||e.addAction(n,{sync:1})},get:function(t){var e,n;return null===(e=this.globalRte)||void 0===e||e.getActions().forEach((function(e){e.name==t&&(n=e)})),n},getAll:function(){var t;return null===(t=this.globalRte)||void 0===t?void 0:t.getActions()},remove:function(t){var e=this.getAll(),n=this.get(t);if(n){var r=n.btn,i=e.indexOf(n);r.parentNode.removeChild(r),e.splice(i,1)}return n},getToolbarEl:function(){return t},updatePosition:function(){var e='px',n=this.em.get('Canvas'),r=t.style,i=n.getTargetToElementFixed(this.lastEl,t,{event:'rteToolbarPosUpdate',left:0});r.top=(i.top||0)+e,r.left=(i.left||0)+e},enable:function(e,n,r){var o=this;return i()(u.a.mark((function i(){var s,a,c,l;return u.a.wrap((function(i){for(;1;)switch(i.prev=i.next){case 0:return o.lastEl=e.el,s=o.customRte,a=o.em,c=e.getChildrenContainer(),t.style.display='',i.next=6,s?s.enable(c,n):o.initRte(c).enable(r);case 6:return l=i.sent,a&&(setTimeout(o.updatePosition.bind(o),0),a.off(T,o.updatePosition,o),a.on(T,o.updatePosition,o),a.trigger('rte:enable',e,l)),i.abrupt("return",l);case 9:case"end":return i.stop()}}),i)})))()},disable:function(t,n){var r=this.em,i=this.customRte,o=t.getChildrenContainer();i?i.disable(o,n):n&&n.disable(),e(),r&&(r.off(T,this.updatePosition,this),r.trigger('rte:disable',t,n))}}}},function(t,e,n){"use strict";n.r(e);var r,i=n(2),o=n.n(i),s={stylePrefix:'',appendTo:'',sortable:1,hidable:1,hideTextnode:1,root:'',showWrapper:1,showHover:1,scrollCanvas:{behavior:'smooth',block:'nearest'},scrollLayers:{behavior:'auto',block:'nearest'},highlightHover:1,onInit:function(){},onRender:function(){},extend:{}},a=n(0),c=n(1),l=n(3),u=n.n(l),f=n(13),h=n(11),d='contentEditable',p={mediaText:''},g=u.a.$,v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===(t.display||'').trim().indexOf('none')},m=u.a.View.extend({events:{'mousedown [data-toggle-move]':'startSort','touchstart [data-toggle-move]':'startSort','click [data-toggle-visible]':'toggleVisibility','click [data-toggle-open]':'toggleOpening','click [data-toggle-select]':'handleSelect','mouseover [data-toggle-select]':'handleHover','mouseout [data-toggle-select]':'handleHoverOut','dblclick [data-name]':'handleEdit','keydown [data-name]':'handleEditKey','focusout [data-name]':'handleEditEnd'},template:function(t){var e=this.pfx,n=this.ppfx,r=this.config,i=this.clsNoEdit,o=r.hidable,s=this.countChildren(t),a=s?'':this.clsNoChild,c="".concat(this.clsTitle," ").concat(a),l="".concat(this.clsTitleC," ").concat(n,"one-bg"),u="".concat(this.clsCaret," fa fa-chevron-right"),f="".concat(this.inputNameCls," ").concat(i," ").concat(n,"no-app"),h=this.level+1,d="".concat(30+10*h,"px"),p=t.getName(),g=t.getIcon(),v="".concat(e,"layer");return"\n      ".concat(o?"<i class=\"".concat(e,"layer-vis fa fa-eye ").concat(this.isVisible()?'':'fa-eye-slash',"\" data-toggle-visible></i>"):'',"\n      <div class=\"").concat(l,"\">\n        <div class=\"").concat(c,"\" style=\"padding-left: ").concat(d,"\" data-toggle-select>\n          <div class=\"").concat(e,"layer-title-inn\" title=\"").concat(p,"\">\n            <i class=\"").concat(u,"\" data-toggle-open></i>\n            ").concat(g?"<span class=\"".concat(v,"__icon\">").concat(g,"</span>"):'',"\n            <span class=\"").concat(f,"\" data-name>").concat(p,"</span>\n          </div>\n        </div>\n      </div>\n      <div class=\"").concat(this.clsCount,"\" data-count>").concat(s||'',"</div>\n      <div class=\"").concat(this.clsMove,"\" data-toggle-move>\n        <i class=\"fa fa-arrows\"></i>\n      </div>\n      <div class=\"").concat(this.clsChildren,"\"></div>")},initialize:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a["bindAll"])(this,'__render'),this.opt=e,this.level=e.level;var n=e.config||{},r=n.onInit;this.config=n,this.em=e.config.em,this.ppfx=this.em.get('Config').stylePrefix,this.sorter=e.sorter||'',this.pfx=this.config.stylePrefix,this.parentView=e.parentView;var i=this.pfx,o=this.ppfx,s=this.model,c=s.get('components'),l=s.get('type')||'default';s.set('open',!1),this.listenTo(c,'remove add reset',this.checkChildren),[['change:status',this.updateStatus],['change:open',this.updateOpening],['change:layerable',this.updateLayerable],['change:style:display',this.updateVisibility],['rerender:layer',this.render],['change:name change:custom-name',this.updateName]].forEach((function(e){return t.listenTo(s,e[0],e[1])})),this.className="".concat(i,"layer ").concat(i,"layer__t-").concat(l," no-select ").concat(o,"two-color"),this.inputNameCls="".concat(o,"layer-name"),this.clsTitleC="".concat(i,"layer-title-c"),this.clsTitle="".concat(i,"layer-title"),this.clsCaret="".concat(i,"layer-caret"),this.clsCount="".concat(i,"layer-count"),this.clsMove="".concat(i,"layer-move"),this.clsChildren="".concat(i,"layer-children"),this.clsNoChild="".concat(i,"layer-no-chld"),this.clsEdit="".concat(this.inputNameCls,"--edit"),this.clsNoEdit="".concat(this.inputNameCls,"--no-edit"),this.$el.data('model',s),this.$el.data('collection',c),s.viewLayer=this,r.bind(this)({component:s,render:this.__render,listenTo:this.listenTo})},updateName:function(){this.getInputName().innerText=this.model.getName()},getVisibilityEl:function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},updateVisibility:function(){var t=this.pfx,e=this.model,n="".concat(t,"layer-hidden"),r=v(e.getStyle(p))?'addClass':'removeClass';this.$el[r](n),this.getVisibilityEl()[r]('fa-eye-slash')},toggleVisibility:function(t){t&&t.stopPropagation();var e=this.model,n=this.em,r='__prev-display',i=e.get(r),o=e.getStyle(p),s=o.display;v(o)?(delete o.display,i&&(o.display=i,e.unset(r))):(s&&e.set(r,s),o.display='none'),e.setStyle(o,p),n&&n.trigger('component:toggled')},handleEdit:function(t){t&&t.stopPropagation();var e=this.em,n=this.$el,r=this.clsNoEdit,i=this.clsEdit,o=this.getInputName();o[d]=!0,o.focus(),document.execCommand('selectAll',!1,null),e&&e.setEditing(1),n.find(".".concat(this.inputNameCls)).removeClass(r).addClass(i)},handleEditKey:function(t){t.stopPropagation(),(Object(c["isEscKey"])(t)||Object(c["isEnterKey"])(t))&&this.handleEditEnd(t)},handleEditEnd:function(t){t&&t.stopPropagation();var e=this.em,n=this.$el,r=this.clsNoEdit,i=this.clsEdit,o=this.getInputName(),s=o.textContent;o.scrollLeft=0,o[d]=!1,this.setName(s,{component:this.model,propName:'custom-name'}),e&&e.setEditing(0),n.find(".".concat(this.inputNameCls)).addClass(r).removeClass(i)},setName:function(t,e){var n=e.propName;this.model.set(n,t)},getInputName:function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},updateOpening:function(){var t=this.opt.opened||{},e=this.model,n='fa-chevron-down';e.get('open')?(this.$el.addClass('open'),this.getCaret().addClass(n),t[e.cid]=e):(this.$el.removeClass('open'),this.getCaret().removeClass(n),delete t[e.cid])},toggleOpening:function(t){var e=this.model;t.stopImmediatePropagation(),e.get('components').length&&e.set('open',!e.get('open'))},handleSelect:function(t){t.stopPropagation();var e=this.em,n=this.config,r=this.model;if(e){e.setSelected(r,{fromLayers:1,event:t});var i=n.scrollCanvas;i&&r.views.forEach((function(t){return t.scrollIntoView(i)}))}},handleHover:function(t){t.stopPropagation();var e=this.em,n=this.config,r=this.model;e&&n.showHover&&e.setHovered(r,{fromLayers:1})},handleHoverOut:function(t){t.stopPropagation();var e=this.em,n=this.config;e&&n.showHover&&e.setHovered(0,{fromLayers:1})},startSort:function(t){t.stopPropagation();var e=this.em,n=this.sorter;t.button&&0!==t.button||n&&(n.onStart=function(t){return e.trigger("".concat(h["b"],":start"),t)},n.onMoveClb=function(t){return e.trigger(h["b"],t)},n.startSort(t.target))},freeze:function(){this.$el.addClass(this.pfx+'opac50'),this.model.set('open',0)},unfreeze:function(){this.$el.removeClass(this.pfx+'opac50')},updateStatus:function(t){f["default"].prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:1}])},isVisible:function(){return!v(this.model.getStyle())},checkChildren:function(){var t=this.model,e=this.clsNoChild,n=this.countChildren(t),r=this.$el.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),i=this.cnt;i||(i=this.$el.children('[data-count]').get(0),this.cnt=i),r[n?'removeClass':'addClass'](e),i&&(i.innerHTML=n||''),!n&&t.set('open',0)},countChildren:function(t){var e=0;return t.get('components').each((function(t){var n=this.opt.isCountable,r=this.config.hideTextnode;n&&!n(t,r)||e++}),this),e},getCaret:function(){if(!this.caret||!this.caret.length){this.pfx;this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))}return this.caret},setRoot:function(t){t=Object(a["isString"])(t)?this.em.getWrapper().find(t)[0]:t;var e=Object(c["getModel"])(t,g);e&&(this.stopListening(),this.model=e,this.initialize(this.opt),this._rendered&&this.render())},updateLayerable:function(){(this.parentView||this).render()},__clearItems:function(){var t=this.items;t&&t.remove()},remove:function(){u.a.View.prototype.remove.apply(this,arguments),this.__clearItems()},render:function(){var t=this.model,e=this.config,i=this.pfx,o=this.ppfx,s=this.opt;this.__clearItems();var c=s.isCountable,l=c&&!c(t,e.hideTextnode),u=this.isVisible(),f=this.$el.empty(),h=this.level+1;this.inputName=0,Object(a["isUndefined"])(r)&&(r=n(201).default),this.items=new r({ItemView:s.ItemView,collection:t.get('components'),config:this.config,sorter:this.sorter,opened:this.opt.opened,parentView:this,parent:t,level:h});var d=this.items.render().$el;return this.config.showWrapper||1!==h?(f.html(this.template(t)),f.find(".".concat(this.clsChildren)).append(d)):f.append(d),t.get('draggable')&&this.config.sortable||f.children(".".concat(this.clsMove)).remove(),!u&&(this.className+=" ".concat(i,"hide")),l&&(this.className+=" ".concat(o,"hidden")),f.attr('class',this.className),this.updateOpening(),this.updateStatus(),this.updateVisibility(),this.__render(),this._rendered=1,this},__render:function(){var t=this.model,e=this.config,n={component:t,el:this.el};e.onRender.bind(this)(n),this.em.trigger('layer:render',n)}});function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["default"]=function(){var t,e,n={};return{name:'LayerManager',init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(n=b(b({},s),e)).stylePrefix=e.pStylePrefix,t=n.em,this},getConfig:function(){return n},onLoad:function(){t&&t.on('component:selected',this.componentChanged),this.componentChanged()},postRender:function(){var t=n.appendTo,e=n.root;(e&&this.setRoot(e),t)&&(Object(a["isElement"])(t)?t:document.querySelector(t)).appendChild(this.render())},setRoot:function(t){return e&&e.setRoot(t),this},getRoot:function(){return e&&e.model},getAll:function(){return e},componentChanged:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r.fromLayers){var i=t.get('opened'),o=t.getSelected(),s=n.scrollLayers,a=o&&o.collection?o.collection.parent:null;for(var c in i)i[c].set('open',0);for(;a;)a.set('open',1),i[a.cid]=a,a=a.collection?a.collection.parent:null;if(o&&s){var l=o.viewLayer&&o.viewLayer.el;l&&l.scrollIntoView(s)}}},render:function(){var r=m.extend(n.extend);return e&&e.remove(),(e=new r({ItemView:r,level:0,config:n,opened:n.opened||{},model:t.get('DomComponents').getWrapper()})).render().el},destroy:function(){e&&e.remove(),[t,e,n].forEach((function(t){return{}}))}}}},function(t,e,n){"use strict";n.r(e);var r,i=n(16),o=n.n(i),s=n(2),a=n.n(s),c=n(0),l=n(1),u={},f={16:!1,18:!1,17:!1,91:!1},h='all',d={'⇧':16,shift:16,'⌥':18,alt:18,option:18,'⌃':17,ctrl:17,control:17,'⌘':91,command:91},p={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,',':188,'.':190,'/':191,'`':192,'-':189,'=':187,';':186,"'":222,'[':219,']':221,'\\':220},g=function(t){return p[t]||t.toUpperCase().charCodeAt(0)},v=[];for(r=1;r<20;r++)p['f'+r]=111+r;function m(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function y(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var b={16:'shiftKey',18:'altKey',17:'ctrlKey',91:'metaKey'};function w(t){var e,n,i,o,s,a;if(e=t.keyCode,-1==m(v,e)&&v.push(e),93!=e&&224!=e||(e=91),e in f)for(i in f[e]=!0,d)d[i]==e&&(C[i]=!0);else if(function(t){for(r in f)f[r]=t[b[r]]}(t),C.filter.call(this,t)&&e in u)for(a=S(),o=0;o<u[e].length;o++)if((n=u[e][o]).scope==a||'all'==n.scope){for(i in s=n.mods.length>0,f)(!f[i]&&m(n.mods,+i)>-1||f[i]&&-1==m(n.mods,+i))&&(s=!1);(0!=n.mods.length||f[16]||f[18]||f[17]||f[91])&&!s||!1===n.method(t,n)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function O(t){var e,n=t.keyCode,r=m(v,n);if(r>=0&&v.splice(r,1),93!=n&&224!=n||(n=91),n in f)for(e in f[n]=!1,d)d[e]==n&&(C[e]=!1)}function x(){for(r in f)f[r]=!1;for(r in d)C[r]=!1}function C(t,e,n){var r,i;r=k(t),void 0===n&&(n=e,e='all');for(var o=0;o<r.length;o++)i=[],(t=r[o].split('+')).length>1&&(i=j(t),t=[t[t.length-1]]),t=t[0],(t=g(t))in u||(u[t]=[]),u[t].push({shortcut:r[o],scope:e,method:n,key:r[o],mods:i})}for(r in d)C[r]=!1;function S(){return h||'all'}function k(t){var e;return''==(e=(t=t.replace(/\s/g,'')).split(','))[e.length-1]&&(e[e.length-2]+=','),e}function j(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=d[e[n]];return e}function E(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent('on'+e,(function(){n(window.event)}))}C.setScope=function(t){h=t||'all'},C.getScope=S,C.deleteScope=function(t){var e,n,r;for(e in u)for(n=u[e],r=0;r<n.length;)n[r].scope===t?n.splice(r,1):r++},C.filter=function(t){var e=(t.target||t.srcElement).tagName;return!('INPUT'==e||'SELECT'==e||'TEXTAREA'==e)},C.isPressed=function(t){return'string'==typeof t&&(t=g(t)),-1!=m(v,t)},C.getPressedKeyCodes=function(){return v.slice(0)},C.unbind=function(t,e){var n,r,i,o,s,a=[];for(n=k(t),o=0;o<n.length;o++){if((r=n[o].split('+')).length>1&&(a=j(r)),t=r[r.length-1],t=g(t),void 0===e&&(e=S()),!u[t])return;for(i=0;i<u[t].length;i++)(s=u[t][i]).scope===e&&y(s.mods,a)&&(u[t][i]={})}},C.handlers=u,C.init=function(t){E(t.document,'keydown',(function(t){w(t)})),E(t.document,'keyup',O),E(t,'focus',x)};var _=C;function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Object(l["hasWin"])()&&_.init(window);e["default"]=function(){var t={defaults:{'core:undo':{keys:'⌘+z, ctrl+z',handler:'core:undo'},'core:redo':{keys:'⌘+shift+z, ctrl+shift+z',handler:'core:redo'},'core:copy':{keys:'⌘+c, ctrl+c',handler:'core:copy'},'core:paste':{keys:'⌘+v, ctrl+v',handler:'core:paste'},'core:component-next':{keys:'s',handler:'core:component-next'},'core:component-prev':{keys:'w',handler:'core:component-prev'},'core:component-enter':{keys:'d',handler:'core:component-enter'},'core:component-exit':{keys:'a',handler:'core:component-exit'},'core:component-delete':{keys:'backspace, delete',handler:'core:component-delete',opts:{prevent:1}}}};return{keymaster:_,name:'Keymaps',getConfig:function(){return this.config},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.config=T(T({},t),e),this.em=this.config.em,this.keymaps={},this},onLoad:function(){var t=this.config.defaults;for(var e in t){var n=t[e];this.add(e,n.keys,n.handler,n.opts||{})}},add:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.em,s=i.get('Commands'),a=i.getEditor(),l=i.get('Canvas'),u={id:t,keys:e,handler:n},f=this.keymaps[t];return f&&this.remove(t),this.keymaps[t]=u,_(e,(function(e,u){var f={event:e,h:u};if(n=Object(c["isString"])(n)?s.get(n):n,!i.isEditing()&&!a.Canvas.isInputFocused()||r.force){r.prevent&&l.getCanvasView().preventDefault(e),'object'==o()(n)?s.runCommand(n,f):n(a,0,f);var h=[t,u.shortcut,e];i.trigger.apply(i,['keymap:emit'].concat(h)),i.trigger.apply(i,["keymap:emit:".concat(t)].concat(h))}})),i.trigger('keymap:add',u),u},get:function(t){return this.keymaps[t]},getAll:function(){return this.keymaps},remove:function(t){var e=this.em,n=this.get(t);if(n)return delete this.keymaps[t],n.keys.split(', ').forEach((function(t){return _.unbind(t.trim())})),e&&e.trigger('keymap:remove',n),n},removeAll:function(){var t=this;return Object.keys(this.keymaps).forEach((function(e){return t.remove(e)})),_.handlers={},this},destroy:function(){this.removeAll(),this.keymaps={},this.em={}}}}},function(t,e,n){"use strict";n.r(e);var r=n(12),i=n.n(r),o=n(2),s=n.n(o),a=n(0),c=n(45),l={stylePrefix:'com-',defaults:[],strict:1},u=n(11);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=[['preview','Preview','preview'],['resize','Resize','resize'],['fullscreen','Fullscreen','fullscreen'],['copy','CopyComponent'],['paste','PasteComponent'],['canvas-move','CanvasMove'],['canvas-clear','CanvasClear'],['open-code','ExportTemplate','export-template'],['open-layers','OpenLayers','open-layers'],['open-styles','OpenStyleManager','open-sm'],['open-traits','OpenTraitManager','open-tm'],['open-blocks','OpenBlocks','open-blocks'],['open-assets','OpenAssets','open-assets'],['component-select','SelectComponent','select-comp'],['component-outline','SwitchVisibility','sw-visibility'],['component-offset','ShowOffset','show-offset'],['component-move','MoveComponent','move-comp'],['component-next','ComponentNext'],['component-prev','ComponentPrev'],['component-enter','ComponentEnter'],['component-exit','ComponentExit','select-parent'],['component-delete','ComponentDelete'],['component-style-clear','ComponentStyleClear'],['component-drag','ComponentDrag']];e["default"]=function(){var t,e={},r={},o={},s={};return{CommandAbstract:c["default"],name:'Commands',init:function(){var r=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=h(h({},l),s),t=e.em;var c=e.pStylePrefix;return c&&(e.stylePrefix=c+e.stylePrefix),Object.keys(e.defaults).forEach((function(t){var n=e.defaults[t];n.id&&r.add(n.id,n)})),o['tlb-delete']={run:function(t){return t.runCommand('core:component-delete')}},o['tlb-clone']={run:function(t){t.runCommand('core:copy'),t.runCommand('core:paste',{action:'clone-component'})}},o['tlb-move']={run:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.getModel(),o=n&&n.event,s=n.target,c=s||t.getSelected(),l=s?[s]:i()(t.getSelectedAll()),f=o&&'dragstart'==o.type,h={preserveSelected:1},d=['absolute','translate'];if(!c||!c.get('draggable'))return r.logWarning('The element is not draggable');var p=c.get('dmode')||r.get('dmode'),g=function(){return r.stopDefault(h)},v=Object(a["includes"])(d,p);l.forEach((function(t){return t.trigger('disable')})),f?setTimeout(g,0):g();var m=function(t){r.trigger("".concat(u["b"],":start"),t)},y=function(t){r.trigger(u["b"],t)},b=function(e,n,i){l.forEach((function(t){return t.set('status','selected')})),t.select(l),c.emitUpdate(),r.trigger("".concat(u["b"],":end"),i),setTimeout((function(){return r.runDefault(h)})),(v||i.cancelled)&&r.set('_cmpDrag',1)};if(v)t.runCommand('core:component-drag',{guidesInfo:1,mode:p,target:c,onStart:m,onDrag:y,onEnd:b,event:o});else{f&&o.dataTransfer.setDragImage(c.view.el,0,0);var w=t.Commands.get('move-comp');w.onStart=m,w.onDrag=y,w.onEndMoveFromModel=b,w.initSorterFromModels(l)}l.forEach((function(t){return t.set('status','freezed-selected')}))}},o['core:undo']=function(t){return t.UndoManager.undo()},o['core:redo']=function(t){return t.UndoManager.redo()},d.forEach((function(e){var r=e[2],i=n(202)("./".concat(e[1])).default,s="core:".concat(e[0]);o[s]=i,r&&(o[r]=i,['run','stop'].forEach((function(e){t.on("".concat(e,":").concat(r),(function(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=t).trigger.apply(n,["".concat(e,":").concat(s)].concat(i))}))})))})),e.em&&(e.model=e.em.get('Canvas')),this.loadDefaultCommands(),this},add:function(t,e){return Object(a["isFunction"])(e)&&(e={run:e}),e.stop||(e.noStop=1),delete e.initialize,e.id=t,r[t]=c["default"].extend(e),this},get:function(n){var i=r[n];return Object(a["isFunction"])(i)?(i=new i(e),r[n]=i):i||t.logWarning("'".concat(n,"' command not found")),i},extend:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get(t);if(n){var r=h(h({},n.constructor.prototype),e);this.add(t,r);var i=d.filter((function(e){return"core:".concat(e[0])===t&&e[2]}))[0];i&&this.add(i[2],r)}return this},has:function(t){return!!r[t]},getAll:function(){return r},run:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.runCommand(this.get(t),e)},stop:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.stopCommand(this.get(t),e)},isActive:function(t){return this.getActive().hasOwnProperty(t)},getActive:function(){return s},loadDefaultCommands:function(){for(var t in o)this.add(t,o[t]);return this},runCommand:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.run){var o=n.id,a=t.get('Editor');this.isActive(o)&&!i.force&&e.strict||(r=a&&n.callRun(a,i),o&&n.stop&&!n.noStop&&!i.abort&&(s[o]=r))}return r},stopCommand:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.run){var o=n.id,a=t.get('Editor');(this.isActive(o)||i.force||!e.strict)&&(o&&delete s[o],r=n.callStop(a,i))}return r},create:function(t){return t.stop||(t.noStop=1),new(c["default"].extend(t))(e)},destroy:function(){[t,e,r,o,s].forEach((function(t){return{}}))}}}}])["default"]}));
//# sourceMappingURL=grapes.min.js.map